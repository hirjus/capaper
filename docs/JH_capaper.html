<!DOCTYPE html>
<html lang="fi" xml:lang="fi">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä" />
<meta property="og:type" content="book" />


<meta property="og:description" content="Tutkielma korrespondenssianalyysistä graafisena data-analyysin menetelmänä." />
<meta name="github-repo" content="hirjus/capaper" />

<meta name="author" content="Jussi Hirvonen" />



<meta name="description" content="Tutkielma korrespondenssianalyysistä graafisena data-analyysin menetelmänä.">

<title>Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/navigation-1.1/codefolding.js"></script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="#alkutoimia">Alkutoimia</a></li>
<li class="has-sub"><a href="#johdanto"><span class="toc-section-number">1</span> Johdanto</a><ul>
<li><a href="#tutkielman-tavoite"><span class="toc-section-number">1.1</span> Tutkielman tavoite)</a></li>
<li class="has-sub"><a href="#tärkeimmät-lähteet-ja-ohjelmistot"><span class="toc-section-number">1.2</span> Tärkeimmät lähteet ja ohjelmistot</a><ul>
<li><a href="#lähteet"><span class="toc-section-number">1.2.1</span> Lähteet</a></li>
<li><a href="#käytetyt-ohjelmistot"><span class="toc-section-number">1.2.2</span> Käytetyt ohjelmistot</a></li>
</ul></li>
<li><a href="#korrespondenssianalyysin-historiaa"><span class="toc-section-number">1.3</span> Korrespondenssianalyysin historiaa</a></li>
</ul></li>
<li class="has-sub"><a href="#data"><span class="toc-section-number">2</span> Data</a><ul>
<li class="has-sub"><a href="#datan-luku-ja-perusmuokkaukset"><span class="toc-section-number">2.1</span> Datan luku ja perusmuokkaukset</a><ul>
<li><a href="#maat-ja-muuttujat"><span class="toc-section-number">2.1.1</span> Maat ja muuttujat</a></li>
</ul></li>
<li><a href="#aineiston-kuvailu-tietosisältö"><span class="toc-section-number">2.2</span> Aineiston kuvailu (tietosisältö)</a></li>
<li><a href="#aineiston-rajaaminen-maat-ja-muuttujat"><span class="toc-section-number">2.3</span> Aineiston rajaaminen maat ja muuttujat</a></li>
</ul></li>
<li class="has-sub"><a href="#yksinkertainen-korrespondenssianalyysi"><span class="toc-section-number">3</span> Yksinkertainen korrespondenssianalyysi</a><ul>
<li><a href="#äiti-töissä--kärsiikö-lapsi"><span class="toc-section-number">3.1</span> Äiti töissä -kärsiikö lapsi?</a></li>
<li><a href="#kahden-muuttujan-frekvenssitaulukon-analyysi"><span class="toc-section-number">3.2</span> Kahden muuttujan frekvenssitaulukon analyysi</a></li>
<li><a href="#ca---esimerkki"><span class="toc-section-number">3.3</span> CA - esimerkki</a></li>
<li class="has-sub"><a href="#korrespondenssianalyysin-peruskäsitteet"><span class="toc-section-number">3.4</span> Korrespondenssianalyysin peruskäsitteet</a><ul>
<li><a href="#asymmetrinen-kartta-ja-ideaalipisteet"><span class="toc-section-number">3.4.1</span> Asymmetrinen kartta ja ideaalipisteet</a></li>
</ul></li>
<li><a href="#kontribuutiot-kartalla"><span class="toc-section-number">3.5</span> Kontribuutiot kartalla</a></li>
<li><a href="#massat"><span class="toc-section-number">3.6</span> Massat</a></li>
</ul></li>
<li class="has-sub"><a href="#yksinkertaisen-korrespondenssianalyysin-laajennuksia-1---täydentävät-pisteet"><span class="toc-section-number">4</span> Yksinkertaisen korrespondenssianalyysin laajennuksia 1 - täydentävät pisteet</a><ul>
<li><a href="#täydentävät-pisteet-supplementary-points"><span class="toc-section-number">4.1</span> Täydentävät pisteet (supplementary points)</a></li>
<li class="has-sub"><a href="#saksan-ja-belgian-alueet"><span class="toc-section-number">4.2</span> Saksan ja Belgian alueet</a><ul>
<li><a href="#symmetrinen-kartta"><span class="toc-section-number">4.2.1</span> Symmetrinen kartta</a></li>
</ul></li>
<li><a href="#can-numeeriset-tulokset"><span class="toc-section-number">4.3</span> CA:n numeeriset tulokset</a></li>
<li><a href="#esimerkki-3d--kartasta---saksan-ja-belgian-dimensiot"><span class="toc-section-number">4.4</span> Esimerkki 3d- kartasta - Saksan ja Belgian dimensiot</a></li>
</ul></li>
<li class="has-sub"><a href="#yksinkertaisen-korrespondenssianalyysin-laajennuksia-2---yhteisvaikutusmuuttujat"><span class="toc-section-number">5</span> Yksinkertaisen korrespondenssianalyysin laajennuksia 2 - yhteisvaikutusmuuttujat</a><ul>
<li class="has-sub"><a href="#ikä-ja-sukupuoli"><span class="toc-section-number">5.1</span> Ikä ja sukupuoli</a><ul>
<li><a href="#ikä-ja-sukupuoli-1"><span class="toc-section-number">5.1.1</span> Ikä ja sukupuoli</a></li>
</ul></li>
<li><a href="#ikä-sukupuoli-ja-maa"><span class="toc-section-number">5.2</span> Ikä, sukupuoli ja maa</a></li>
</ul></li>
<li><a href="#yksinkertaisen-korrespondenssianalyysin-laajennuksia-3---osajoukon-ca"><span class="toc-section-number">6</span> Yksinkertaisen korrespondenssianalyysin laajennuksia 3 - osajoukon CA</a></li>
<li class="has-sub"><a href="#monimuuttuja-korrespondenssianalyysi-mca-ja-yhdistetyt-taulukot"><span class="toc-section-number">7</span> Monimuuttuja-korrespondenssianalyysi (MCA) ja yhdistetyt taulukot</a><ul>
<li><a href="#pinotut-ja-yhdistetyt-taulukot-stacked-and-concatenated-tables"><span class="toc-section-number">7.1</span> Pinotut ja yhdistetyt taulukot (stacked and concatenated tables)</a></li>
<li><a href="#mca---monimuuttujakorrespondenssianalyysi"><span class="toc-section-number">7.2</span> MCA - monimuuttujakorrespondenssianalyysi</a></li>
</ul></li>
<li class="has-sub"><a href="#liitteet">Liitteet</a><ul>
<li><a href="#korrespondenssianalyysin-teoriaa"><span class="toc-section-number">7.3</span> Korrespondenssianalyysin teoriaa</a></li>
<li><a href="#suomenkielinen-lomake-esimerkki"><span class="toc-section-number">7.4</span> Suomenkielinen lomake (esimerkki)</a></li>
<li><a href="#r---koodi"><span class="toc-section-number">7.5</span> R - koodi</a></li>
<li><a href="#tekninen-ympäristö-ja-bookdown-paketti"><span class="toc-section-number">7.6</span> Tekninen ympäristö ja Bookdown-paketti</a></li>
</ul></li>
<li><a href="#lähteet-1">Lähteet</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="header">
<h1 class="title">Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä</h1>
<h4 class="author"><em>Jussi Hirvonen</em></h4>
<h4 class="date"><em>Versio 0.3, tulostettu 2020-10-25</em></h4>
</div>
<div id="alkutoimia" class="section level1 unnumbered">
<h1>Alkutoimia</h1>
<p>Ladataan r-paketit, ei tulosteta dokumenttiin. Pelkkä YAML- ‘front matter’,
lisäkonfiguroinnit tiedostoissa _bookdown.yml ja _output.yml.</p>
<p>Dokumettiin kuuluvat Rmd-tiedostot luetellaan eksplisiittisesti
_bookdown.yml-tiedostossa.</p>
<p>RefWorksistä eksportattu bib-tiedosto kannattaa avata ensin (Atomilla),
ja korjailla skandit jos niissä on vikaa.</p>
<p>Koodi näkyy Galkun tulosteessa (<a href="https://hirjus.github.io/Galku" class="uri">https://hirjus.github.io/Galku</a>), jossa on myös
pitkiä listauksia muunnosten tarkistuksista ja kuvia eri versioina.</p>
<p>Koodi kopiodaan Galkusta, kommentoidaan pois tarkistuksia ja muita välitulostuksia.
Koodin ydinasiat koitetaan pitää samana kuin Galkussa, isommat muuutoksen ensin siellä
ja sitten tähän projektiin.</p>
<p><strong>PDF-tulostus oikuttelee Saksan ja Belgian aluejako-datan tai profiilitaulukon
luonnissa - toistaiseksi vain html-tuloste (24.10.2020)</strong></p>
<p>Raportti yhtenä html-tiedostona (<a href="https://hirjus.github.io/capaper/JH_capaper.html" class="uri">https://hirjus.github.io/capaper/JH_capaper.html</a>).</p>
<p>**</p>
<p>Gitbook-tulosteessa ei saa koodia “piilotettua”, asetus “code_folding: hide” vaatii teeman (theme). _output.yml - tiedostoon lisätty html_book - formaatti, siinä voi tarvittaessa käyttää piilotusta.</p>
<p>Versiointi: 0.0n aloittelua, 0.n jäsentely koko paperille, 1.n.n valmiimpaa tekstiä.</p>

</div>
<div id="johdanto" class="section level1">
<h1><span class="header-section-number">Luku 1</span> Johdanto</h1>
<p><strong>edit</strong> Kirjoitetaan disposition pohjalta, keräillään kaikki yleiset
ca-luonnehdinnat yhteen paikkaan eli johdantoon.</p>
<p><strong>Mahdollisia lisäyksiä</strong></p>
<ol style="list-style-type: decimal">
<li><p>Tavoitteet, sisältö, rajaukset (jota voi myöhemmin täydentää)</p></li>
<li><p>Muutamat puutteet/rajaukset, onko kerrottava tässä?</p></li>
</ol>
<ul>
<li><p>data: ei huomioida sitä, että otoskoot vaihtelevat aika paljon eli
“maapainot” eri suuruisia</p></li>
<li><p>ei huomioida muitakaan otantaan liittyviä asioita (tämä ainakin
mainittava data-osuudessa)</p></li>
<li><p>kuvaileva menetelmä, mutta mikä on tutkimusongelma? Sellainen pitäisi olla.</p></li>
</ul>
<p>**zxy* Mitä on korrespondenssianalyysi? Muutamalla kappaleella. Yksi kappale
historiasta.</p>
<div id="tutkielman-tavoite" class="section level2">
<h2><span class="header-section-number">1.1</span> Tutkielman tavoite)</h2>
<p><strong>k</strong> Tässä kerrotaan, miksi tämä työ on kirjoitettu. Esitellään menetelmä
käyttämällä oikeaa dataa. Täsmällisempi esitys sirotellaan esimerkkiaineiston
analyysin tulosten esittelyn lomaan. Pitäisikö tässä tuoda esille ns. “ranskalaisen
koulukunnan” matemaattisen perusteiden korostus, ja data-analyysin filosofia?
Ehkä ei, koska sen pohdinta ei ole pääasia. Se tietysti mainitaan, ja asiaa pohditaan.</p>
<p><strong>ks</strong> Esitellään korrespondenssianalyysin käsitteet ja graafisen analyysin
periaatteet.</p>
<p><strong>zxy</strong> -mitä ca on?
- dimensioiden vähentäminen ja visualisointi
- mihin dataan se soveltuu
- määrittele graafinen, deskriptiivinen, eksploratiivinen data-analyysi
- yksinkertainen ca, useamman muuttujan ca</p>
<p><strong>ks</strong> Tämän voi tehdä yksinkertaisen korrespondenssianalyysin avulla. Yksinkertainen
kahden luokittelumuuttujan korrespondenssianalyysi antaa graafisen analyysin
“…perussäännöt tulkinnalle. Kaikki muut korrespondenssianalyysin muodot ovat
saman algoritmin soveltamista toisen tyyppiisiin datamatriiseihin, ja tulkintaa
sovelletaan vastaavasti (with the consequent adaptation of the interpretation)”
<span class="citation">(Greenacre ja Hastie <a href="#ref-RefWorks:doc:5a857a44e4b0ed2d44664d84" role="doc-biblioref">1987</a> , s. 437)</span> .</p>
<p><strong>zxy</strong> Miksi eksporatiivinen (määrittele!) ja deskriptiivinen (määrittele!)
menetelmä on esitettävä “in vivo”, toiminnassa? Oppikirjoissa (viitteitä)
erityisesti MG on havainnolistanut CA:n matemaattista ja geometristä taustaa
synteettisillä aineistoilla. Turha kopioida tähän. Menetelmän ydin on
yksinkertaisen graafisen esityksen – kartan – avulla tulkita monimutkaisen
empiirisen aineiston muuttujien riippuvuuksia. Yhteyksiä ei tiivistetä
todennäköisyyspäättelyn kriteereillä tilastolliseen malliin, vaan deskripriivisen
analyysin hengessä esitellään koko aineisto. Mallin sijaan vähennetään ulottuvuuksia,
ja siinä menetetään informaatiota. Tavoitteena on säilyttää yleensä kaksiulotteisessa
kuvassa mahdollisimman suuri osa alkuperäisen datan vaihtelusta. Eksploratiivinen
data-analyysi on vuoropuhelua aineiston kanssa. Analyysiä tarkennetaan, rajataan
ja muokataan, kun aineisto paljastaa jotain kiinnostavaa tai yllättävää. Tästä
saa jonkinlaisen aasinsillan matriisiyhtälöiden puolustukseksi.
Saksan ja Belgian datan jakaminen on hyvä esimerkki, on “osattava tarttua”
menetelmän tulosmatriiseihin.</p>
<p><strong>k</strong> esitystavan perustelu</p>
<ul>
<li>kenelle kirjoitettu? Menetelmästä kiinnostuneelle tilastotieteen ja data-analyysin
perusteet tuntevalle. R-ohjelmisto ei ole rajoitus, SPSS ja SAS sopivat
(SPSS - MG:llä kriittinen huomio “loose ends - paperissa” tai CAip-teorialiitteessä).</li>
</ul>
</div>
<div id="tärkeimmät-lähteet-ja-ohjelmistot" class="section level2">
<h2><span class="header-section-number">1.2</span> Tärkeimmät lähteet ja ohjelmistot</h2>
<p><strong>zxy</strong> Tarvitaanko tämä, perustelu? Muutamat lähteet aivan keskeisiä, ja MG:n
kurssi pitää mainita.</p>
<div id="lähteet" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Lähteet</h3>
<p>Michael Greenacre luennoi lyhyen kurssin korrespondenssianalyysistä Helsingin
yliopistossa keväällä 2017<span class="citation">(M. Greenacre <a href="#ref-RefWorks:doc:5b6ef091e4b0984fd9b8c0ca" role="doc-biblioref">2017</a>)</span>. Luennot ja
laskuharjoitukset perehdyttivät minut ensimmäistä kertaa tähän menetelmään, ja
kurssin materiaaleihin olen usein palannut. Niihin voi tutustua
[Moodle-palvelussa] (<a href="https://moodle.helsinki.fi" class="uri">https://moodle.helsinki.fi</a>) (käyttäjätunnus vaaditaan).
Greenacren kärsivällisesti kirjoitetut perusoppikirjat ovat tehneet menetelmää
laajasti tunnetuksi englantia lukeville.</p>
<p>Ranskalaisen lähestymistan perusoppikirja<span class="citation">(Roux ja Rouanet <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d75" role="doc-biblioref">2004</a>)</span> (GDA-kirja?)
esittelee menetelmän matemaattiset perusteet.
Lyhyt historiallinen katsaus ja menetelmä soveltamisen perusajatusten esittely
valaisevat ranskaa taitamattomalle data-analyysin koulukunnan ideoita.
Kirjoittajat esittelevät perusteellisesti joitain empiirisiä tutkimuksia, ja
lyhyt mutta naseva matriisilaskennan kritiikki on hyvä panna merkille.</p>
<p>Korrespondenssianalyysi tuli osaksi suomalaista Survo-ohjelmistoa jo vuonna (<strong>????</strong>),
ja menetelmää on esitelty ainakin kahdessa oppikirjassa<span class="citation">(Mustonen <a href="#ref-RefWorks:doc:5a857a44e4b0ed2d44664d95" role="doc-biblioref">1995</a>)</span>
ja <span class="citation">(Vehkalahti <a href="#ref-RefWorks:doc:5a857a44e4b0ed2d44664da4" role="doc-biblioref">2008</a>)</span>.</p>
</div>
<div id="käytetyt-ohjelmistot" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Käytetyt ohjelmistot</h3>
<p><strong>edit</strong> Hyvin lyhyesti, lause tai pari. On oma liite tekneisestä ympäristöstä.</p>
<p><strong>zxy</strong> R, ca-paketti. löytyy myös muita paketteja.
Rmarkdown<span class="citation">(Yihui Xie <a href="#ref-RefWorks:doc:5b6b346fe4b0c619b11b8a3e" role="doc-biblioref">2018</a>)</span>, ja
bookdown (<span class="citation">(Xie <a href="#ref-RefWorks:doc:5b6b36dde4b09b7ec442bf8b" role="doc-biblioref">2016</a>)</span> ja toinen viite <span class="citation">(Xie <a href="#ref-R-bookdown" role="doc-biblioref">2020</a>)</span>).
Mikäs tuo jälkimmäinen on? PDF-lähdeluettelossa ei ole url-osoitteita.</p>
<p><strong>k</strong> Helposti toistettavan tutkimukset periaatteet</p>
<ol style="list-style-type: decimal">
<li>Datastan perusmuunnokset ja muuttujatyypit tehdään kun data luetaan
R-ohjelmistoon.</li>
<li>Koodi selkeää ja dokumentoitua. Tärkeä lähde <span class="citation">(McNamara ja Horton <a href="#ref-RefWorks:doc:5c3759c2e4b0085b307c82b5" role="doc-biblioref">2018</a>)</span></li>
<li>R, LaTeX, pandoc - versiot dokumentoidaan</li>
</ol>
<p>Tarkemmin liittessä.</p>
</div>
</div>
<div id="korrespondenssianalyysin-historiaa" class="section level2">
<h2><span class="header-section-number">1.3</span> Korrespondenssianalyysin historiaa</h2>
<p><strong>k1</strong> Tiivis esitys lähteineen. Historian voi aloittaa jo pari vuosikymmentä
vallineesta tilanteesta. CA on yksi deskriptiivinen (ei-tn-teoriaan perustuvaa
päättelyä) menetelmä muiden joukossa, eristyneisyys murtui hitaasti 80-luvun aikana.</p>
<p><strong>k2</strong> Historialla on vain historiallista merkitystä. Kiinnostava juttu, mutta
aika laaja ja lavea.</p>
<p><strong>k3</strong> Peruskäsitys monessa lähteessä (vihreä kirja, GDA-kirja jne.): synty ja
kukoistus Ranskassa, loistava eristys (splendid isolation), pikku hiljaa hyväksyntä.</p>
<p>Syiksi esitetään kaksoismuuria: abstrakti matemaattinen (“bourbakilainen”) perusta
ja esitystapa ja kieli.</p>
<p><strong>k4</strong> Mitä historiasta on hyvä tietää.
1. Matemaattinen perusta on “tosi”, mutta onko menetelmän soveltaminen riippuvainen
siitä? Ei ole ollut.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Ristiriita data-analyyttisen/kuvailevan jne. lähestymistavan ja tilastollisen
mallintamisen välillä - on läsnä edelleen mutta turha korostaa. Myös tilastollisen
mallintamisen ja päättelyn sisällä on kiistoja, erilaisia näkemysiä ja kuiluja.</p></li>
<li><p>“Esoteerinen tieteenfilosofia”? Kiinnostava aihe, ehkä. Murgtag-sitaatti.</p></li>
</ol>

</div>
</div>
<div id="data" class="section level1">
<h1><span class="header-section-number">Luku 2</span> Data</h1>
<p><strong>edit</strong> Teksti vielä vanhoja muistiinpanoja.</p>
<div id="datan-luku-ja-perusmuokkaukset" class="section level2">
<h2><span class="header-section-number">2.1</span> Datan luku ja perusmuokkaukset</h2>
<div id="maat-ja-muuttujat" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Maat ja muuttujat</h3>
<p><strong>maat luettu, sitten muuttujat</strong></p>
<p>Substanssimuuttujat (9). Jos sukupuoli tai ikä puuttuu, havainto jätetään pois
(32969-32823 = 146), maa-muuttujassa ei puuttuvia tietoja ole. Lisäksi kuusi
taustamuuttujaa ( “SEX”,“AGE”,“DEGREE”, “MAINSTAT”, “TOPBOT”, “HHCHILDR”,
“MARITAL”, “URBRURAL”).</p>
<p><strong>Perusmuunnokset - viisi koodilohkoa</strong></p>
<p>Vaihe 1</p>
<p>Vaihe 2
Vaihe 2.1</p>
<p>Vaihe 2.2</p>
<p>Vaihe 2.3</p>
<p>Vaihe 2.4</p>
<p>Muunnosten testaus, varmistetaan että muuttujat ovat sitä mitä halutaan.</p>
<p><strong>zxy</strong> Voisi miettiä paremman otsikon. Galku-paperin alusta on lisäilty
viitteitä Refworksiin, mutta hieman hanklaa. www.gesis.org - sivusto on aika
sekava. Virallinen (heidän määrittelemä) sitaatti löytyy, ja linkkejä. Tässä
voisi ehkä käyttää alaviitettä, jossa tarjoaisi linkit? Tai ihan oma lyhyt kappale?
Alla virallinen viite, ja tässä kaksi muuta ([RefWorks:doc:5b6c7f6ce4b0e4e15164ab1a]
ja [RefWorks:doc:5b6c7debe4b0e4e15164ab00]). Löytyy myös
seurantaraportti([RefWorks:doc:5b155e0ce4b044dfd738458f]).
<strong>viitteet pois- ehkä tekstiin linkkeinä?</strong></p>
<p><strong>k</strong> ISSP (International social survey) on tehnyt laajoja kansainvälisiä kyselytutkimuksia eri teemoista. Yksi teemoista on perhe ja muuttuvat (sosiaalisesti määräytyvät) sukupuoliroolit <span class="citation">((2016) <a href="#ref-RefWorks:doc:5b6c7b0de4b0fd36f5bb4c2a" role="doc-biblioref">2016</a>)</span>.</p>
<p><strong>zxy</strong> Miksi data on kiinnostava sisällöllisesti? Viite Kantola (HS). Lisäksi laadukas, usealta vuodelta, tarkasti dokumentoitu.</p>
<p><strong>ks</strong></p>
<p><strong>zxy</strong> Miksi data sovelutuu korrespondenssianalyysin esittelyyn? Iso ja monimutkainen (kansainvälinen, datan laaut? kts. Blasius-viite alempana), sisällölliset muuttuja nominaaliasteikolla (kysymyspatterit, Likert), laadukas hyvin dokumentoitu aineisto.</p>
<p><strong>zxy</strong> Onko itse asia kiinnostava? (Kantolan kolumni, HS).</p>
<p><strong>ks</strong> Kokoava kappale, ja sen perään tarkentavat</p>
<p><strong>ks1</strong></p>
<p><strong>ks2</strong></p>
<p><strong>ks-n</strong></p>
<p><strong>zxy</strong> Aineiston ongelmat ja puutteet (tavanomaisten surveyaineistojen ongelmien
lisäksi, erityisesti vastauskadon). Kato erikseen, oikeastaan hyvä juttu koska
CA soveltuu sen analyysiin.</p>
<p><strong>zxy</strong> Aineisto kuvattava <strong>sisällön</strong> (mitä asiaa, ilmiötä, tällä datalla
halutaan valaista), <strong>para- ja metadatan</strong> näkökulmasta (tai ainakin kerrottava
mitä on saatavilla). Kolmanneksi aineiston “tilastotieteellinen olemus”:
otanta-asetelmat, kansalliset versioinnit, harmonisoinnit (esim. puoluekenttä
vertailukelpoiseksi).</p>
<ol style="list-style-type: decimal">
<li><p>Kysymyksissä maakohtaisia eroja. Osa perusteltuja, on haluttu tarkentaa tai
muuten hifistellä. Osa kummallisa, erityisesti neutraalin vaihtoehdon puuttuminen
(Espanja). Nämä maat jätetään pois.</p></li>
<li><p>Datassa painot “maatasolle”, otanta sun muu kuvattu tarkasti dokumentaatiossa.
Jos tutkimusongelma on maiden erojen analyysi, mitään vertailupainoja ei ole
käytössä. Otoskoko on paino. MG oikaisee ja ja oikaisee myös sukupuolien osuudet.</p></li>
</ol>
</div>
</div>
<div id="aineiston-kuvailu-tietosisältö" class="section level2">
<h2><span class="header-section-number">2.2</span> Aineiston kuvailu (tietosisältö)</h2>
<p><strong>ks</strong> “Perhe, työ ja sukupuoliroolit” tutkimuksen teemat, tarkoitus. <strong>Paras</strong>
lähde Yhteiskuntatieteellisen tietoarkiston palvelu
(<a href="https://services.fsd.uta.fi/catalogue/FSD2820?tab=summary&amp;study_language=fi" class="uri">https://services.fsd.uta.fi/catalogue/FSD2820?tab=summary&amp;study_language=fi</a>).</p>
</div>
<div id="aineiston-rajaaminen-maat-ja-muuttujat" class="section level2">
<h2><span class="header-section-number">2.3</span> Aineiston rajaaminen maat ja muuttujat</h2>
<p><strong>k</strong> maat, samankaltaisia, data saatavilla kiinnostavista muuttujista</p>
<p><strong>k</strong> muuttujat. Laajasti käyetty, valittu sopiva kysymyspatteri asenteista naisten
työssäkäyntiin ja joitain taustamuuttujia. Korrespondenssianalyysi on hyvä menetelmä
aineiston analyysiin: monimutkainen ja laaaja, paljon luokitteluasteikon muuttujia,
“akvaariositaatti” tähän.</p>
<p><strong>kysymykset</strong></p>
<p><strong>k</strong> Taulukon <a href="#tab:vartable1">2.1</a> kysymysten lyhyet versiot ovat datassa mukana.
Sarakkeessa “muuttuja” on alkuperäisen aineiston muuttujanimi,
kysymyksen tunnus on valittuun dataan luotu muuttujanimi. Auttaa vertailemaan tätä
tutkielmaa moniin ISSP-datalla tehtyihin analyyseihin.</p>
<table>
<caption><span id="tab:vartable1">Taulukko 2.1: </span>ISSP2012:Työelämä ja perhearvot - kysymykset</caption>
<colgroup>
<col width="9%" />
<col width="90%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">muuttuja</th>
<th align="left">kysymyksen tunnus, lyhennetty kysymys</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">V5</td>
<td align="left">Q1a Working mother can have warm relation with child</td>
</tr>
<tr class="even">
<td align="left">V6</td>
<td align="left">Q1b Pre-school child suffers through working mother</td>
</tr>
<tr class="odd">
<td align="left">V7</td>
<td align="left">Q1c Family life suffers through working mother</td>
</tr>
<tr class="even">
<td align="left">V8</td>
<td align="left">Q1d Women’s preference: home and children</td>
</tr>
<tr class="odd">
<td align="left">V9</td>
<td align="left">Q1e Being housewife is satisfying</td>
</tr>
<tr class="even">
<td align="left">V10</td>
<td align="left">Q2a Both should contribute to household income</td>
</tr>
<tr class="odd">
<td align="left">V11</td>
<td align="left">Q2b Men’s job is earn money, women’s job household</td>
</tr>
<tr class="even">
<td align="left">V12</td>
<td align="left">Q3a Should women work: Child under school age</td>
</tr>
<tr class="odd">
<td align="left">V13</td>
<td align="left">Q3b Should women work: Youngest kid at school</td>
</tr>
<tr class="even">
<td align="left">SEX</td>
<td align="left">Respondents age</td>
</tr>
<tr class="odd">
<td align="left">AGE</td>
<td align="left">Respondents gender</td>
</tr>
<tr class="even">
<td align="left">DEGREE</td>
<td align="left">Highest completed degree of education: Categories for international comparison</td>
</tr>
<tr class="odd">
<td align="left">MAINSTAT</td>
<td align="left">Main status: work, unemployed, in education…</td>
</tr>
<tr class="even">
<td align="left">TOPBOT</td>
<td align="left">Top-Bottom self-placement (10 pt scale)</td>
</tr>
<tr class="odd">
<td align="left">HHCHILDR</td>
<td align="left">How many children in household: children between [school age] and 17 years of age</td>
</tr>
<tr class="even">
<td align="left">MARITAL</td>
<td align="left">Legal partnership status: married, civil partership…</td>
</tr>
<tr class="odd">
<td align="left">URBRURAL</td>
<td align="left">Place of living: urban - rural</td>
</tr>
</tbody>
</table>
<p><strong>k</strong> Kyselylomakkeilla kysymykset olivat hieman pidempiä, kuvassa <a href="#fig:suom-kys">2.1</a> osa suomenkielistä lomaketta.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/substvar_fi_Q1Q2.png&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:suom-kys"></span>
<img src="img/substvar_fi_Q1Q2.png" alt="Suomenkielinen lomake" width="50%" />
<p class="caption">
Kuva 2.1: Suomenkielinen lomake
</p>
</div>
<p><strong>taustamuuttujat</strong></p>
<p><strong>k</strong> maa, sukupuoli, haastateltavan ikä, koulutustaso, “virallinen” juridinen
parisuhdestatus, pääasiallinen toimi (töissä, eläkkeellä jne), lasten lukumäärä
perheessä ja asuinpaikka (maaseutu,suurkaupunki jne.), oma arvio sosiaalisesta
asemasta (1-10). Kysymyksiä, tiedot tosin kerätty eri tavoin eri maissa.</p>
<p>Vastaajan ikä</p>
<p><strong>K</strong> Aineistossa mukana puuttuvat vastaukset, puuttuvia ei ole kolmessa muuttujassa
(maa, ikä ja sukupuoli). Muutamilla havainnoilla puuttui tieto iästä tai sukupuolesta,
ja ne rajattiin pois.</p>
<p>Kuvataan tarkemmin, kun käytetään luvussa 7.</p>
<p><strong>Miten aineistoa on käytetty?</strong>.</p>
<p><strong>Korrespondenssianalyysin esimerkkiaineistona</strong></p>
<p>Michael Greenacre on käyttänyt aineistoa eri vuosilta luentomateriaaleissa (Helsinki 2017 MCA, viite Moodleen?) ja kahdessa oppikirjassa (<span class="citation">(Greenacre <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d7c" role="doc-biblioref">2010</a>)</span>, <span class="citation">(M. J. Greenacre <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d78" role="doc-biblioref">2017</a>)</span>).ISSP - aineisto vuodelta 1989 on käytetty myös neljän “singuaariarvohajoitelmaan perustuvan menetelmän” vertailuun<span class="citation">(Greenacre <a href="#ref-RefWorks:doc:5b6f159ce4b0bc0f31734b76" role="doc-biblioref">2003</a>)</span>.</p>
<p>“We consider the joint analysis of two matched matrices which have common
rows and columns, for example multivariate data observed at two time points or split
according to a dichotomous variable. Methods of interest include principal components
analysis for interval-scaled data, correspondence analysis for frequency data, log-ratio
analysis of compositional data and linear biplots in general, all of which depend on the
singular value decomposition. A simple result in matrix algebra shows that by setting up
two matched matrices in a particular block format, matrix sum and difference components
can be analysed using a single application of the singular value decomposition algorithm.
The methodology is applied to data from the International Social Survey Program
comparing male and female attitudes on working wives across eight countries. The resulting
biplots optimally display the overall cross-cultural differences as well as the male–female
differences. The case of more than two matched matrices is also discussed.”</p>
<p>Blasius ja Thiessen (<span class="citation">(Blasius ja Thiessen <a href="#ref-RefWorks:doc:5b15542ee4b0e2616bc42dca" role="doc-biblioref">2006</a>)</span>) arvioivat aineiston laatua ja ja maiden vertailtavuutta vuoden 1994 aineistolla.</p>
<p>“This paper provides empirically-based criteria for selecting Items and countries to develop measures of an underlying construct of interest that are comparable in cross-national research. Using data from the 1994 International Social Survey Program and applying multiple correspondence analysis to a set of common items in each of the 24 participating countries, we show that both the quality of the data, as well as its underlying structure - and therefore meaning - vary considerably between countries. The approach we use for screening countries and items is especially useful in situations where the psychometric properties of the items have not been well established in previous research.”</p>
<p><strong>tärkeä rajaus</strong> Substanssitutkimusta ei tässä käsitellä.</p>
<p>“ISSP - saitilla” löytyy bibliografia, ja hakupalveluillakin voi haravoida.
<strong>zxy</strong> www.gesis.org - sivustolta löytyy myös <a href="https://search.gesis.org/research_data/ZA5900">julkaisuluettelo</a>, voiko linkin laittaa alaviitteeksi tai suoraan leipätekstiin?</p>
<p>Sukupuoliroolien (gender roles) ja niihin liittyvien asenteiden vertailevaa kansainvälistä (cross-cultural) tutkimusta on tehty paljon. Tutkimusongelman sisällöllisten ja teoreettisen kysymysten nykytilaa kuvaa Walterin<span class="citation">(Walter <a href="#ref-RefWorks:doc:5bd08fb6e4b05c5447c9a9f9" role="doc-biblioref">2018</a>)</span> tuore artikkeli. Omnibus surveys ?</p>

</div>
</div>
<div id="yksinkertainen-korrespondenssianalyysi" class="section level1">
<h1><span class="header-section-number">Luku 3</span> Yksinkertainen korrespondenssianalyysi</h1>
<p><strong>k1</strong> Yksi kysymys, kuusi maata, peruskäsitteet</p>
<p><strong>k2</strong> Luvun tärkeimmät asiat; mitä on luvassa?</p>
<div id="äiti-töissä--kärsiikö-lapsi" class="section level2">
<h2><span class="header-section-number">3.1</span> Äiti töissä -kärsiikö lapsi?</h2>
<p><strong>k1</strong>“Alle kouluikäinen lapsi todennäköisesti kärsii, jos hänen äitinsä käy työssä”.
Lyhennän muotoon äiti töissä. ISSP-tutkimuksissa kaksi kysymystä, joissa sana “äiti”,
MG havainnut ne poikkeaviksi (<strong>#V ?</strong>).</p>
<p><strong>zxy</strong> Edellisessä luvussa on esitelyt aineisto, ja kerrottu rajaukset.</p>
<p>Tarkistetaan uudet muuttujat (koodilohkon tulostus pois tarvittaessa).</p>
</div>
<div id="kahden-muuttujan-frekvenssitaulukon-analyysi" class="section level2">
<h2><span class="header-section-number">3.2</span> Kahden muuttujan frekvenssitaulukon analyysi</h2>
<p><strong>k</strong> Kolme taulukkoa: frekvenssitaulukko, riviprosentit ja sarakeprosentit</p>
<table>
<caption><span id="tab:simpeCA-frekTa1">Taulukko 3.1: </span>Kysymyksen Q1b vastaukset maittain</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">S</th>
<th align="left">s</th>
<th align="left">?</th>
<th align="left">e</th>
<th align="left">E</th>
<th align="left">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">BE</td>
<td align="left">191</td>
<td align="left">451</td>
<td align="left">438</td>
<td align="left">552</td>
<td align="left">381</td>
<td align="left">2013</td>
</tr>
<tr class="even">
<td align="left">BG</td>
<td align="left">118</td>
<td align="left">395</td>
<td align="left">205</td>
<td align="left">190</td>
<td align="left">13</td>
<td align="left">921</td>
</tr>
<tr class="odd">
<td align="left">DE</td>
<td align="left">165</td>
<td align="left">375</td>
<td align="left">198</td>
<td align="left">538</td>
<td align="left">438</td>
<td align="left">1714</td>
</tr>
<tr class="even">
<td align="left">DK</td>
<td align="left">70</td>
<td align="left">238</td>
<td align="left">152</td>
<td align="left">232</td>
<td align="left">696</td>
<td align="left">1388</td>
</tr>
<tr class="odd">
<td align="left">FI</td>
<td align="left">47</td>
<td align="left">188</td>
<td align="left">149</td>
<td align="left">423</td>
<td align="left">303</td>
<td align="left">1110</td>
</tr>
<tr class="even">
<td align="left">HU</td>
<td align="left">219</td>
<td align="left">288</td>
<td align="left">225</td>
<td align="left">190</td>
<td align="left">75</td>
<td align="left">997</td>
</tr>
<tr class="odd">
<td align="left">Total</td>
<td align="left">810</td>
<td align="left">1935</td>
<td align="left">1367</td>
<td align="left">2125</td>
<td align="left">1906</td>
<td align="left">8143</td>
</tr>
</tbody>
</table>
<table>
<caption><span id="tab:simpeCA-rprosTa1">Taulukko 3.2: </span>Kysymyksen Q1b vastaukset, riviprosentit</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">S</th>
<th align="left">s</th>
<th align="left">?</th>
<th align="left">e</th>
<th align="left">E</th>
<th align="left">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">BE</td>
<td align="left">9.49</td>
<td align="left">22.40</td>
<td align="left">21.76</td>
<td align="left">27.42</td>
<td align="left">18.93</td>
<td align="left">100.00</td>
</tr>
<tr class="even">
<td align="left">BG</td>
<td align="left">12.81</td>
<td align="left">42.89</td>
<td align="left">22.26</td>
<td align="left">20.63</td>
<td align="left">1.41</td>
<td align="left">100.00</td>
</tr>
<tr class="odd">
<td align="left">DE</td>
<td align="left">9.63</td>
<td align="left">21.88</td>
<td align="left">11.55</td>
<td align="left">31.39</td>
<td align="left">25.55</td>
<td align="left">100.00</td>
</tr>
<tr class="even">
<td align="left">DK</td>
<td align="left">5.04</td>
<td align="left">17.15</td>
<td align="left">10.95</td>
<td align="left">16.71</td>
<td align="left">50.14</td>
<td align="left">100.00</td>
</tr>
<tr class="odd">
<td align="left">FI</td>
<td align="left">4.23</td>
<td align="left">16.94</td>
<td align="left">13.42</td>
<td align="left">38.11</td>
<td align="left">27.30</td>
<td align="left">100.00</td>
</tr>
<tr class="even">
<td align="left">HU</td>
<td align="left">21.97</td>
<td align="left">28.89</td>
<td align="left">22.57</td>
<td align="left">19.06</td>
<td align="left">7.52</td>
<td align="left">100.00</td>
</tr>
<tr class="odd">
<td align="left">All</td>
<td align="left">9.95</td>
<td align="left">23.76</td>
<td align="left">16.79</td>
<td align="left">26.10</td>
<td align="left">23.41</td>
<td align="left">100.00</td>
</tr>
</tbody>
</table>
<table>
<caption><span id="tab:simpeCA-cprosTa1">Taulukko 3.3: </span>Kysymyksen Q1b vastaukset, sarakeprosentit</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">S</th>
<th align="left">s</th>
<th align="left">?</th>
<th align="left">e</th>
<th align="left">E</th>
<th align="left">All</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">BE</td>
<td align="left">23.58</td>
<td align="left">23.31</td>
<td align="left">32.04</td>
<td align="left">25.98</td>
<td align="left">19.99</td>
<td align="left">24.72</td>
</tr>
<tr class="even">
<td align="left">BG</td>
<td align="left">14.57</td>
<td align="left">20.41</td>
<td align="left">15.00</td>
<td align="left">8.94</td>
<td align="left">0.68</td>
<td align="left">11.31</td>
</tr>
<tr class="odd">
<td align="left">DE</td>
<td align="left">20.37</td>
<td align="left">19.38</td>
<td align="left">14.48</td>
<td align="left">25.32</td>
<td align="left">22.98</td>
<td align="left">21.05</td>
</tr>
<tr class="even">
<td align="left">DK</td>
<td align="left">8.64</td>
<td align="left">12.30</td>
<td align="left">11.12</td>
<td align="left">10.92</td>
<td align="left">36.52</td>
<td align="left">17.05</td>
</tr>
<tr class="odd">
<td align="left">FI</td>
<td align="left">5.80</td>
<td align="left">9.72</td>
<td align="left">10.90</td>
<td align="left">19.91</td>
<td align="left">15.90</td>
<td align="left">13.63</td>
</tr>
<tr class="even">
<td align="left">HU</td>
<td align="left">27.04</td>
<td align="left">14.88</td>
<td align="left">16.46</td>
<td align="left">8.94</td>
<td align="left">3.93</td>
<td align="left">12.24</td>
</tr>
<tr class="odd">
<td align="left">Total</td>
<td align="left">100.00</td>
<td align="left">100.00</td>
<td align="left">100.00</td>
<td align="left">100.00</td>
<td align="left">100.00</td>
<td align="left">100.00</td>
</tr>
</tbody>
</table>
<p><strong>k</strong> <strong>Taulkoista</strong></p>
<p>Ensimmäinen taulukko on data, lukumäärädataa. Toinen ja kolmas kaksi näkökulmaa
samaan taulukkoon. Sarakkeilla ja riveillä on erilainen rooli, tässä riviprosentit
ovat luonteva tapa verrata “riippuvaa muuttujaa”, eri maita.</p>
<p><strong>k</strong> Rivit on saatu alkuperäisestä aineistosta osajoukkojen summina. MG:n
terminologialla “samples”.</p>
<p><strong>Kuvat</strong></p>
<div class="figure"><span id="fig:g1-2kuva1"></span>
<img src="JH_capaper_files/figure-html/g1-2kuva1-1.png" alt="Q1b:Sarakeprofiilit ja keskiarvoprofiili" width="672" />
<p class="caption">
Kuva 3.1: Q1b:Sarakeprofiilit ja keskiarvoprofiili
</p>
</div>
<div class="figure"><span id="fig:g1-2kuva2"></span>
<img src="JH_capaper_files/figure-html/g1-2kuva2-1.png" alt="Q1b: riviprofiilit ja keskiarvorivi" width="672" />
<p class="caption">
Kuva 3.2: Q1b: riviprofiilit ja keskiarvorivi
</p>
</div>
</div>
<div id="ca---esimerkki" class="section level2">
<h2><span class="header-section-number">3.3</span> CA - esimerkki</h2>
<div class="figure" style="text-align: center"><span id="fig:simpleCA1map1"></span>
<img src="JH_capaper_files/figure-html/simpleCA1map1-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="90%" />
<p class="caption">
Kuva 3.3: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
<p><strong>edit1</strong> jatkossa plot - main on kuvan tyyppi (symmetrinen, kontribuutio jne),
koodilohkon fig.cap “ylimmän tason” otsikko.</p>
<p><strong>edit2</strong> Akseleiden tekstit (Dimensio 1….jne) asetettu käsin, ikävä kyllä myös
selitetyn inertian osuus. Ainakin tästä ensimmäisestä kuvasta ne kannattaa jättää
pois, spoileri!</p>
<p><strong>edit3</strong> par(cex = 1) ennen plot-komenota muuttaa valitettavasti “kaiken” kokoa.
Antaa olla, kun on graafista data-analyysiä. Selkeys tärkeämpää kuin ulkoasu.</p>
<p><strong>k</strong> Kartan tulkinta</p>
<p><strong>k</strong> Prosentit - kuinka paljon kokonaisinertiasta saadaan kuvattua (“selitettyä”).</p>
<p><strong>k</strong> Dimenisoiden tulkinta sarakepisteiden avulla: mitä on oikealla ja vasemmalla?
Kaukana on kaukana, mutta lähellä voi olla täydessä sarake- tai riviavaruudessa
kaukana. Siksi tulkinta kontrastien avulla - mikä piste on suhteellisesti kauimpana?</p>
<p><strong>k</strong> Rivipisteiden tulkinta kartalla - järjestys vasemmalta oikealle ja alhaalta
ylös. Pisteiden etäisyydet toisistaan.</p>
<p><strong>k</strong> Origo on aineiston keskipiste, “riippumattomuushypoteesi” (kts. teorialiite).</p>
<p><strong>k</strong> Sarakepisteiden erot ja rivipisteiden erot ovat suhteellisia, approksimoivat
khii2-etäisyyksiä.</p>
<p><strong>k</strong> Rivi- ja sarakepisteiden etäisyyksillä ei suoraan mitään tulkintaa!</p>
<p><strong>k</strong> Lista: mitä muuta, johon palataan seuraavassa luvussa?</p>
<ul>
<li>kuinka hyvin pisteet on esitetty tasossa?</li>
<li>esim. x-akseli kuvaa (“nappaa”) 76% kokonaisinertiasta. Pisteiden
inertiakontribuutiot</li>
</ul>
</div>
<div id="korrespondenssianalyysin-peruskäsitteet" class="section level2">
<h2><span class="header-section-number">3.4</span> Korrespondenssianalyysin peruskäsitteet</h2>
<p><strong>ks</strong> Mitä käsitteitä tässä esitellään? Viittaukset teorialiitteeseen, ja
tulkinnan hankaluudet (MG “loose ends” - paperi) käsitellään siellä.</p>
<p><strong>edit</strong> Sulava kuvaus tulkinnasta, painotus kuvien tulkinnassa. CA:n numeeriset
tulokset vasta seuraavassa luvussa. Tässä “mitä kuvasta näkee”, ei muuta (paitsi
varoitukset - mitä ei näe). Idea koko ajan taulukon sarakkeiden ja riveien yhteyksien
visualisointi.</p>
<p><strong>edit</strong> Tärkeää selkeä kuvaus pääkoordinaattien ja standardikoordinaattien
suhteesta. Tarkemmin teorialiitteessä, tässä heuristisesti jotta kuvia osaa tulkita.</p>
<div id="asymmetrinen-kartta-ja-ideaalipisteet" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Asymmetrinen kartta ja ideaalipisteet</h3>
<div class="figure" style="text-align: center"><span id="fig:G1-3asymm2"></span>
<img src="JH_capaper_files/figure-html/G1-3asymm2-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="90%" />
<p class="caption">
Kuva 3.4: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
<p><strong>Barysentrinen periaate</strong></p>
<strong>edit</strong> kuva ei ehkä tarpeen? Tehdään vähän pienempi (out.width = 70%, muuten 90%).
<div class="figure" style="text-align: center"><span id="fig:G1-3asymm3"></span>
<img src="JH_capaper_files/figure-html/G1-3asymm3-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="70%" />
<p class="caption">
Kuva 3.5: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
<p><strong>edit</strong> Perustelu kuvalle: barysentrinen periaate on kuvien tulkinnassa ydinasioita.</p>
<p><strong>Akseleiden tulkinta</strong> tai tulkinnan varmistaminen akseli kerrallaan. Ortogonaaliset
projektion piirretty käsin, havainnollistetaan periaatetta.</p>
<p><img src="img/simpleCAasymmTulk2.png" width="90%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="kontribuutiot-kartalla" class="section level2">
<h2><span class="header-section-number">3.5</span> Kontribuutiot kartalla</h2>
<p>Kaksi kuvaa, joissa pisteiden massat on kuvattu pisteiden koolla (ei juuri eroa
huomaa) ja rivi- ja sarekepisteiden kontribuutiot värisävyllä. Mitä tummempi sitä
suurempi kontribuutio. Absoluuttiset ja suhteelliset kontribuutiot.</p>
<p><strong>edit</strong> Pitäisikö kuvissa olla aina toinen absolute, toinen relative? Selvitetään
teorialiittessä?</p>
<p>Toinen kuva riittää, tässä esitellään kartta jossa on eniten informaatiota.</p>
<p><strong>Absoluuttiset kontribuutiot</strong> Oletuspistekoko ok, mutta html- ja pdf-tulostus
on erilainen!</p>
<div class="figure" style="text-align: center"><span id="fig:G1-3asymmContrib1"></span>
<img src="JH_capaper_files/figure-html/G1-3asymmContrib1-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="90%" />
<p class="caption">
Kuva 3.6: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
<p><strong>Suhteelliset kontribuutiot</strong> Oletuspistekoko ok.</p>
<div class="figure" style="text-align: center"><span id="fig:G1-3asymmContrib2"></span>
<img src="JH_capaper_files/figure-html/G1-3asymmContrib2-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="90%" />
<p class="caption">
Kuva 3.7: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
</div>
<div id="massat" class="section level2">
<h2><span class="header-section-number">3.6</span> Massat</h2>
<p><strong>edit3</strong> Onko vakioitujen massojen kartta liian aikaisin? Tämä ei ole pääasia, vaan selvennys.
Miksi tässä? Perusteltava, miksi en vakioi massoja maille, sukupuolille jne. (a)
perusteltua kun tarkempi tutkimusongelma, esim. erottelut maiden ja sukupuolten
välillä. Varianssianalyysin tapaan varianssin hajoittaminen ryhmisen sisäiseen ja
ryhmien väliseen. Kts. teorialiitteestä esim. ABBA. (b) CA “perusmuodossa”, massa
on yksi kolmesta tärkeimmästä käsitteestä. (c) on aika työlästä!</p>
<p><strong>edit4</strong> Galkussa verrattu molempien painotusten khii2-etäisyyksiä, jos tarpeen
niin teoria-liitteeseen.</p>
<div class="figure" style="text-align: center"><span id="fig:simpleCA3map1"></span>
<img src="JH_capaper_files/figure-html/simpleCA3map1-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="90%" />
<p class="caption">
Kuva 3.8: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
<p>Ei kovin isoja eroja, tässä datassa.</p>

</div>
</div>
<div id="yksinkertaisen-korrespondenssianalyysin-laajennuksia-1---täydentävät-pisteet" class="section level1">
<h1><span class="header-section-number">Luku 4</span> Yksinkertaisen korrespondenssianalyysin laajennuksia 1 - täydentävät pisteet</h1>
<p><strong>edit</strong> Edellisssä luvussa selitetty barysentrinen keskiarvopiste;
teorialiitteessä hieman laveammin.</p>
<p><strong>edit</strong> CA:n joustava käyttö vaatii matriisioperaatioita, ja muuta datan rakenteen
muokkausta (rivien lisääminen input-dataan jne.).</p>
<div id="täydentävät-pisteet-supplementary-points" class="section level2">
<h2><span class="header-section-number">4.1</span> Täydentävät pisteet (supplementary points)</h2>
<p>Tekstistä oma dokkari, eri käyttötapaukset lyhyesti. Edellisen luvun asymmetrisen
kartan avulla perustellaan, miten pisteitä voidaaan lisätä.</p>
</div>
<div id="saksan-ja-belgian-alueet" class="section level2">
<h2><span class="header-section-number">4.2</span> Saksan ja Belgian alueet</h2>
<p><strong>Data ja taulukko aluejaosta</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">/</th>
<th align="right">S</th>
<th align="right">s</th>
<th align="right">?</th>
<th align="right">e</th>
<th align="right">E</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">BE</td>
<td align="right">191</td>
<td align="right">451</td>
<td align="right">438</td>
<td align="right">552</td>
<td align="right">381</td>
</tr>
<tr class="even">
<td align="left">BG</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">DE</td>
<td align="right">165</td>
<td align="right">375</td>
<td align="right">198</td>
<td align="right">538</td>
<td align="right">438</td>
</tr>
<tr class="even">
<td align="left">DK</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">FI</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">HU</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Taulukko, Saksan ja Belgian alueet ja maaprofiilit.</p>
<p><strong>edit</strong> Riviprofiilitaulukko, kuvataan alueiden eroja. CA-analyysi kuitenkin koko
aineiston frekfvenssitaululla, jossa rivien massat eivät ole samat.</p>
<div id="symmetrinen-kartta" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Symmetrinen kartta</h3>
<div class="figure" style="text-align: center"><span id="fig:suppointCA2map1"></span>
<img src="JH_capaper_files/figure-html/suppointCA2map1-1.png" alt="Q1b: Saksan ja  Belgian aluejako " width="90%" />
<p class="caption">
Kuva 4.1: Q1b: Saksan ja Belgian aluejako
</p>
</div>
<p><strong>k</strong> Maaåpisteet alueiden barysentrinen keskiarvo. Tulkinta.</p>
<div class="figure" style="text-align: center"><span id="fig:suppointCA2map2"></span>
<img src="JH_capaper_files/figure-html/suppointCA2map2-1.png" alt="Q1b: Saksan ja  Belgian aluejako " width="90%" />
<p class="caption">
Kuva 4.2: Q1b: Saksan ja Belgian aluejako
</p>
</div>
<p><strong>k</strong> Kontribuutiokartta, kontribuutio värisävyinä ja massat pisteiden kokona.
Yleiskuvaan riittävä, ei kovin selkeä yksityiskohdissa. Motivaatio seuraavalle
jaksolle.Skaalataan asymmetrisen kuvan sarakevektoreita (jotka standardikoordinaateissa)
hieman lähemmäs origoa.</p>
<p><strong>k</strong> Kaukana on kaukana, mutta lähellä voi olla myös kaukana.</p>
</div>
</div>
<div id="can-numeeriset-tulokset" class="section level2">
<h2><span class="header-section-number">4.3</span> CA:n numeeriset tulokset</h2>
<p><strong>edit</strong> Teorialiitteessä selitetään tarkemmin numeeristen tulosten tausta, tässä
apuneuvo (a) kuvan tulkinnan varmistamiseen ja (b) approksimaation laadun
tarkistamiseen.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>suppointCA2</span></code></pre></div>
<pre><code>## 
##  Principal inertias (eigenvalues):
##            1        2        3        4       
## Value      0.154101 0.032489 0.014294 0.008944
## Percentage 73.44%   15.48%   6.81%    4.26%   
## 
## 
##  Rows:
##                bF        bW       bB       BG        dW        dE        DK
## Mass     0.124279  0.060174 0.062753 0.113103  0.143313  0.067174  0.170453
## ChiDist  0.341469  0.096258 0.239034 0.630991  0.219094  0.505720  0.634063
## Inertia  0.014491  0.000558 0.003586 0.045032  0.006879  0.017180  0.068528
## Dim. 1   0.400065 -0.090631 0.216912 1.502458  0.254323 -1.262007 -1.506022
## Dim. 2  -1.254042  0.267998 0.789358 0.236498 -0.451124 -0.226595  1.121468
##                FI       HU    BE (*)    DE (*)
## Mass     0.136313 0.122436        NA        NA
## ChiDist  0.347733 0.550404  0.157974  0.175013
## Inertia  0.016483 0.037091        NA        NA
## Dim. 1  -0.525222 1.215462  0.234127 -0.229593
## Dim. 2  -1.500986 1.280342 -0.364834 -0.379468
## 
## 
##  Columns:
##                S        s         ?         e         E
## Mass    0.099472 0.237627  0.167874  0.260960  0.234066
## ChiDist 0.592824 0.354761  0.332288  0.280549  0.672594
## Inertia 0.034959 0.029907  0.018536  0.020540  0.105887
## Dim. 1  1.073310 0.787257  0.649789 -0.029859 -1.688108
## Dim. 2  1.835133 0.290929 -0.119934 -1.451548  0.629110</code></pre>
<p><strong>k</strong> Lyhyt selostus - nämä aika selkeitä</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">summary</span>(suppointCA2)</span></code></pre></div>
<pre><code>## 
## Principal inertias (eigenvalues):
## 
##  dim    value      %   cum%   scree plot               
##  1      0.154101  73.4  73.4  ******************       
##  2      0.032489  15.5  88.9  ****                     
##  3      0.014294   6.8  95.7  **                       
##  4      0.008944   4.3 100.0  *                        
##         -------- -----                                 
##  Total: 0.209828 100.0                                 
## 
## 
## Rows:
##       name   mass  qlt  inr    k=1 cor  ctr    k=2 cor  ctr  
## 1  |    bF |  124  650   69 |  157 212   20 | -226 438  195 |
## 2  |    bW |   60  388    3 |  -36 137    0 |   48 252    4 |
## 3  |    bB |   63  481   17 |   85 127    3 |  142 354   39 |
## 4  |    BG |  113  878  215 |  590 874  255 |   43   5    6 |
## 5  |    dW |  143  345   33 |  100 208    9 |  -81 138   29 |
## 6  |    dE |   67  966   82 | -495 960  107 |  -41   7    3 |
## 7  |    DK |  170  971  327 | -591 869  387 |  202 102  214 |
## 8  |    FI |  136  957   79 | -206 352   38 | -271 605  307 |
## 9  |    HU |  122  927  177 |  477 751  181 |  231 176  201 |
## 10 | (*)BE | &lt;NA&gt;  512 &lt;NA&gt; |   92 338 &lt;NA&gt; |  -66 173 &lt;NA&gt; |
## 11 | (*)DE | &lt;NA&gt;  418 &lt;NA&gt; |  -90 265 &lt;NA&gt; |  -68 153 &lt;NA&gt; |
## 
## Columns:
##     name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1 |    S |   99  816  167 |  421 505 115 |  331 311 335 |
## 2 |    s |  238  781  143 |  309 759 147 |   52  22  20 |
## 3 |      |  168  594   88 |  255 589  71 |  -22   4   2 |
## 4 |    e |  261  871   98 |  -12   2   0 | -262 870 550 |
## 5 |    E |  234  999  505 | -663 971 667 |  113  28  93 |</code></pre>
<p><strong>k</strong> Tulosteen käsitteiden esittely - tavoite kuvan laadun varmistus, akselien
tulkinnan tarkistus. Tarkemmin teorialiitteessä. Tästä pitäisi nähdä, miksi seuraavat
kartat ovat sellaisia kuin ovat.</p>
</div>
<div id="esimerkki-3d--kartasta---saksan-ja-belgian-dimensiot" class="section level2">
<h2><span class="header-section-number">4.4</span> Esimerkki 3d- kartasta - Saksan ja Belgian dimensiot</h2>
<p><strong>k</strong> Ei kovin hyviä kuvia, mutta periaate on tärkeä. Kartta on approksimaatio,
pitää päättää milloin se on tarpeeksi hyvä. Tai mille pisteille hyvä, mille huonompi.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>suppointCA3 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maa3 <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1.dat, <span class="dt">nd =</span> <span class="dv">3</span>)</span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co"># summary(suppointCA3)</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co"># Error in rsc %*% diag(sv) : non-conformable arguments</span></span></code></pre></div>
<strong>Kolme karttaa</strong>
<div class="figure" style="text-align: center"><span id="fig:suppointCA3map1"></span>
<img src="JH_capaper_files/figure-html/suppointCA3map1-1.png" alt="Q1b: Saksan ja  Belgian aluejako " width="90%" />
<p class="caption">
Kuva 4.3: Q1b: Saksan ja Belgian aluejako
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:suppointCA3map2"></span>
<img src="JH_capaper_files/figure-html/suppointCA3map2-1.png" alt="Q1b: Saksan ja  Belgian aluejako " width="90%" />
<p class="caption">
Kuva 4.4: Q1b: Saksan ja Belgian aluejako
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:suppointCA3map3"></span>
<img src="JH_capaper_files/figure-html/suppointCA3map3-1.png" alt="Q1b: Saksan ja  Belgian aluejako " width="90%" />
<p class="caption">
Kuva 4.5: Q1b: Saksan ja Belgian aluejako
</p>
</div>
<p><strong>k</strong> Tulkinta.</p>
<p><strong>k</strong> kokeilu 3d-grafiikalla - toinen riittää</p>
<p><img src="img/3dSymMap_1.PNG" width="398" /><img src="img/3dSymMap_2.PNG" width="445" /></p>

</div>
</div>
<div id="yksinkertaisen-korrespondenssianalyysin-laajennuksia-2---yhteisvaikutusmuuttujat" class="section level1">
<h1><span class="header-section-number">Luku 5</span> Yksinkertaisen korrespondenssianalyysin laajennuksia 2 - yhteisvaikutusmuuttujat</h1>
<p><strong>edit</strong> Yksinkertaisin tapa ottaa muita muuttujia mukaan analyysiin.</p>
<p><strong>k</strong> Kaksi yhteisvaikutusmuuttujaan (MG “interactive coding”), sukupuoli ja
ikäluokka/kohortti ja tämän muuttujan yhdistäminen maa-muuttujaan.</p>
<p><strong>k</strong> Poikkileikkausaineistossa vastaajaan ikä kuvaa sekä ikää että mitä erilaisimipia
sukupolvivaikutuksia. Ei voi oikein erottaa toisistaan. Vastaajat ovat elämänsä eri
vaiheissa kohdanneet lukuisia rajuja muutoksia toisen maailmansodan jälkeen. Nähtiin
jo edellisessä jaksossa!</p>
<p>Poikkileikkausaineistossa vastaajan ikä kertoo ikäluokan (kohortin), vastaajat ovat
kokeen esim. kaksi mullistusten vuotta elämänsä eri vaiheissa. Kaksin nuorinta ikäluokka
on ollut 1990 alle 14-vuotiaita ja vanhin ikäluokka yli 44-vuotiaita. Finannsikriisin
vuonna 2008 toiseksi nuorin ikäluokka on ollut 22-31 vuotiaita, ja kaksi vanhinta
yli 51-vuotiaita.</p>
<div id="ikä-ja-sukupuoli" class="section level2">
<h2><span class="header-section-number">5.1</span> Ikä ja sukupuoli</h2>
<p><strong>edit</strong> Lyhyesti tämä, aineisto aggregoitu ikä- ja sukupuoliryhmiin.
<strong>edit</strong> Voi myös lisätä täydentävinä pisteinä “peruskarttaan”, ei tehdä.</p>
<p>Ikäluokat ovat (1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 tai vanhempi).
Vuorovaikutusmuuttuja ga koodataan f1,…, f6 ja m1,…,m6. Muuttujien nimet
kannattaa pitää mahdollisimman lyhyinä.</p>
<p>Ikäjäkauma painottuu kaikissa maissa jonkinverran vanhempiin ikäluokkiin.
Nuorempien ikäluokkien osuus on (alle 26-vuotiaat ja alle 26-35 - vuotiaat)
varsinkin Bulgariassa (BG) ja Unkarissa (HU) pieni.</p>
<div id="ikä-ja-sukupuoli-1" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Ikä ja sukupuoli</h3>
<p><strong>k</strong> Ikä- ja sukupuoliryhmät yli kaikkien maiden; profiilit keskiarvoja. Ei kovin
pätevää analyysiä, yleiskuva muuttujasta.</p>
<div class="figure" style="text-align: center"><span id="fig:gaCA1map"></span>
<img src="JH_capaper_files/figure-html/gaCA1map-1.png" alt="Q1b: ikäluokka ja sukupuoli" width="90%" />
<p class="caption">
Kuva 5.1: Q1b: ikäluokka ja sukupuoli
</p>
</div>
<pre><code>## 
## Principal inertias (eigenvalues):
## 
##  dim    value      %   cum%   scree plot               
##  1      0.037448  87.0  87.0  **********************   
##  2      0.003977   9.2  96.2  **                       
##  3      0.001041   2.4  98.6  *                        
##  4      0.000590   1.4 100.0                           
##         -------- -----                                 
##  Total: 0.043055 100.0                                 
## 
## 
## Rows:
##      name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1  |   f1 |   60  990   36 | -125 614  25 |  -98 376 145 |
## 2  |   f2 |   83  997  163 | -289 983 185 |   35  14  25 |
## 3  |   f3 |   91  984   47 | -146 958  52 |   24  26  13 |
## 4  |   f4 |  101 1000   97 | -186 836  93 |   82 164 172 |
## 5  |   f5 |   98  879    4 |  -35 658   3 |   20 221  10 |
## 6  |   f6 |  100  951  176 |  256 866 175 |   80  85 162 |
## 7  |   m1 |   57  659   32 |   42  72   3 | -120 587 205 |
## 8  |   m2 |   66  977   57 | -187 946  62 |  -34  30  19 |
## 9  |   m3 |   78  457    5 |  -31 318   2 |  -20 139   8 |
## 10 |   m4 |   89  674   14 |   58 482   8 |  -37 192  30 |
## 11 |   m5 |   89  988   90 |  189 818  85 |  -86 170 166 |
## 12 |   m6 |   89  978  277 |  360 963 307 |   45  15  45 |
## 
## Columns:
##     name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1 |    S |   99  915  128 |  196 695 102 |  110 220 304 |
## 2 |    s |  238  969  304 |  230 961 336 |   21   8  27 |
## 3 |      |  168  777   46 |   62 330  17 |  -73 447 223 |
## 4 |    e |  261  897   58 |  -68 473  32 |  -64 424 268 |
## 5 |    E |  234  997  464 | -286 962 513 |   55  35 177 |</code></pre>
<p><strong>k</strong> Kommentteja Galkusta:
Aika yksiuloitteinen (87 prosenttia ensimmäisellä dimensiolla!). Data on
“as it is”, ei ole vakioitu ga-luokkien kokoja (massat max(f4 101), min (m1 57)).</p>
<p>Miten pitäisi tulkita “oikealle kaatunut U - muoto” miehillä ja naisilla?
Järjestys ei toimi, S s-sarakkeen vasemmalla puolella. Miehet konservatiivisempia,
mutta maltillisempia? Nuorin ikäluokka on poikkeava. Epävarmoja tai maltillisesti
e, sitten loikka vasemmalle ja sieltä konservatiiviseen suuntaa oikealle. Naisilla
poikkeama f3 - f4. VAnhimmat ikäluokat tiukemmin konservatiivisa (f6, m6). Jos
vertaa sukupuolten eroja samassa ikäluokassa, on aika samanlainen (miehet
konservatiivisia, naiset liberaaleja). Naisista vain vanhin ikäluokka oikealla,
miehistä nuorin ja kolme vanhinta.</p>
<p>Tulkinnassa muistettava, että ikäluokat yli maiden. Voi verrata sekä
edellisiin maa-vertailuihin että maan, ikäluokan ja sukupuolen yhteisvaikutusmuuttujan
tuloksiin. MG tutkailee eri kysymyksellä tätä samaa asiaa, ja havaitsee että
(a) maiden erot suuria ja sukupuolten pieniä (b) naiset liberaalimpia kuin miehet.
** Viite?**</p>
<p>Numeeriset tulokset: nuorimpien miesten (qlt 659) ja erityisesti
keski-ikäisten miestén m3 (qlt 457) pisteet huonosti esitetty kartalla. Tulkitaan
myös cor ja ctr, riveille ja sarakkeille.</p>
</div>
</div>
<div id="ikä-sukupuoli-ja-maa" class="section level2">
<h2><span class="header-section-number">5.2</span> Ikä, sukupuoli ja maa</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1b.dat,</span>
<span id="cb8-2"><a href="#cb8-2"></a>                             <span class="dt">maaga =</span> <span class="kw">paste</span>(maa, ga, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co"># tarkistus, muunnos ok</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co"># ISSP2012esim1b.dat %&gt;% tableX(maa, maaga)</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co"># head(ISSP2012esim2.dat)</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co"># str(ISSP2012esim2.dat)</span></span></code></pre></div>
<p><strong>edit</strong> Yksi vaikeaselkoinen kartta täynnä pisteitä, tihrustellaan.</p>
<div class="figure" style="text-align: center"><span id="fig:maagaCA1map1"></span>
<img src="JH_capaper_files/figure-html/maagaCA1map1-1.png" alt="Q1b: ikäluokka ja sukupuoli maittain" width="90%" />
<p class="caption">
Kuva 5.2: Q1b: ikäluokka ja sukupuoli maittain
</p>
</div>
<p><strong>edit</strong> Stabiilius - teorialiitteessä laajemmin mutta tässä lyhyt vilkaisu.
Taulukko alkaa harveta, jo edellä kerrottiin että aineisto painottuu kaikissa maissa
vanhempiin ikäluokkiin.</p>
<p><strong>yksinkertainen tarkistus</strong> Löytyykö riviproviileja joilla pieni massa ja suuri
kontribuutio? Ei löydy, mutta jo kuvan tukkoisuus vaatii luokkien yhdistelyä.
Aika työlästä!</p>

</div>
</div>
<div id="yksinkertaisen-korrespondenssianalyysin-laajennuksia-3---osajoukon-ca" class="section level1">
<h1><span class="header-section-number">Luku 6</span> Yksinkertaisen korrespondenssianalyysin laajennuksia 3 - osajoukon CA</h1>
<p><strong>xyz</strong> Yksinkertainen korrespondenssianalyysi on menetelmän tulkinnan perusta.
laajentaa monipuolisempiin tutkimusasetelmiin. Varsinainen useamman muuttujan
korrespondenssianalyysi / monimuuttuja-CA (MCA - multiple correspondence analysis)
esitellään seuraavassa luvussa.</p>

</div>
<div id="monimuuttuja-korrespondenssianalyysi-mca-ja-yhdistetyt-taulukot" class="section level1">
<h1><span class="header-section-number">Luku 7</span> Monimuuttuja-korrespondenssianalyysi (MCA) ja yhdistetyt taulukot</h1>
<p><strong>edit</strong> Kaksi tutkimusasetelmaa: kahden muuttujajoukon väliset yhteydet ja
muuttujajoukon sisäiset yhteydet.</p>
<p><strong>edit</strong> Matemaattisesti kaikki muuttuu paljon mutkikkaammaksi, ja yksinkertaisen
perustapauksen selkeät tulkinnat eivät toimi. Tärkeä asia: CA:n skaalausominaisuudet ja
visuaalinen tulkinta pätevät edelleen.</p>
<p><strong>edit</strong> Teorialiitteessä tästä enemmän, ranskalaiset edelleen eri mieltä.</p>
<p><strong>edit</strong> CA on hajonnan (intertian) dekomponoinnin menetelmä.</p>
<div id="pinotut-ja-yhdistetyt-taulukot-stacked-and-concatenated-tables" class="section level2">
<h2><span class="header-section-number">7.1</span> Pinotut ja yhdistetyt taulukot (stacked and concatenated tables)</h2>
<p>Hyvin yksinkertainen esimerkki.</p>
<p><strong>edit</strong> Mutta tässä esimerkkiaineisto, jossa ei puuttuvia tietoja. Ne olisivatkin
aika pulmallisia, varianssin dekomponointi vaatii samat reunajakaumat.</p>
</div>
<div id="mca---monimuuttujakorrespondenssianalyysi" class="section level2">
<h2><span class="header-section-number">7.2</span> MCA - monimuuttujakorrespondenssianalyysi</h2>
<p><strong>k</strong> Terminologiasta: monta muuttujaa on jo ollut käytössä. MCA on monimuuttujamenetelmä
samassa mielessä kuin faktorianalyysi. Analysoidaan usean statukseltaan samanlaisen
muuttujan välisiä suhteita, ja myös niiden yhteyksiä tutkimusongelman kannalta
“eksogeenisiin” taustamuuttujiin tai “selittäjiin”. Surveytutkimuksen kyselylomakkeen
kysymyspatterit luotaavat tietoa joistain taustalla olevista asenteista.</p>
<p><strong>edit</strong> yksi kappale, jossa tutkimusasetelmaa verrataan tilastollisten mallien
asetelmaan? Jako “selittäjiin” ja selitettävään, moniyhtälömallit?
Faktorianalyysi tässä selkein vertailukohde</p>
<p><strong>k</strong> Data</p>
<p><strong>k</strong> Puuttuvat havainnot</p>

</div>
</div>
<div id="liitteet" class="section level1 unnumbered">
<h1>Liitteet</h1>
<div id="korrespondenssianalyysin-teoriaa" class="section level2">
<h2><span class="header-section-number">7.3</span> Korrespondenssianalyysin teoriaa</h2>
</div>
<div id="suomenkielinen-lomake-esimerkki" class="section level2">
<h2><span class="header-section-number">7.4</span> Suomenkielinen lomake (esimerkki)</h2>
<p>Tämä kuva on myös tekstissä, kätevä tapa esittää siististi kysymysten pitkät
versiot.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/substvar_fi_Q1Q2.png&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:L1suomlom1"></span>
<img src="img/substvar_fi_Q1Q2.png" alt="Esimerkki suomenkielisestä lomakkeesta" width="60%" />
<p class="caption">
Kuva 7.1: Esimerkki suomenkielisestä lomakkeesta
</p>
</div>
</div>
<div id="r---koodi" class="section level2">
<h2><span class="header-section-number">7.5</span> R - koodi</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># 18.10.2020</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="kw">library</span>(rgl)</span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="kw">library</span>(ca)</span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="kw">library</span>(haven)</span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="kw">library</span>(knitr)</span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="kw">library</span>(rmarkdown)</span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="kw">library</span>(furniture)</span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="kw">library</span>(scales) <span class="co"># G_1_2 - kuva</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="kw">library</span>(reshape2)  <span class="co"># G_1_2 - kuva</span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="kw">library</span>(printr) <span class="co">#19.5.18 taulukoiden ja matriisien tulostukseen</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="kw">library</span>(bookdown)</span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="kw">library</span>(tinytex)</span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="kw">library</span>(assertthat)</span>
<span id="cb10-18"><a href="#cb10-18"></a></span>
<span id="cb10-19"><a href="#cb10-19"></a></span>
<span id="cb10-20"><a href="#cb10-20"></a><span class="co"># automatically create a bib database for R packages</span></span>
<span id="cb10-21"><a href="#cb10-21"></a>knitr<span class="op">::</span><span class="kw">write_bib</span>(<span class="kw">c</span>(</span>
<span id="cb10-22"><a href="#cb10-22"></a>  <span class="kw">.packages</span>(), <span class="st">&#39;bookdown&#39;</span>, <span class="st">&#39;knitr&#39;</span>, <span class="st">&#39;rmarkdown&#39;</span></span>
<span id="cb10-23"><a href="#cb10-23"></a>), <span class="st">&#39;packages.bib&#39;</span>)</span>
<span id="cb10-24"><a href="#cb10-24"></a></span>
<span id="cb10-25"><a href="#cb10-25"></a><span class="co"># include FALSE: ei koodia eikä tulostusta dokumenttiin - poistettava turhia</span></span>
<span id="cb10-26"><a href="#cb10-26"></a><span class="co"># välitulostuksia (18.10.2020)</span></span>
<span id="cb10-27"><a href="#cb10-27"></a><span class="co"># Aineiston rajaamisen kolme vaihetta (10.2018)</span></span>
<span id="cb10-28"><a href="#cb10-28"></a><span class="co"># </span></span>
<span id="cb10-29"><a href="#cb10-29"></a><span class="co"># TIEDOSTOJEN NIMEÄMINEN</span></span>
<span id="cb10-30"><a href="#cb10-30"></a><span class="co">#</span></span>
<span id="cb10-31"><a href="#cb10-31"></a><span class="co"># R-datatiedostot .data - tarkenteella ovat osajoukkoja koko ISSP-datasta ISSP2012.data</span></span>
<span id="cb10-32"><a href="#cb10-32"></a><span class="co"># R-datatiedostot .dat - tarkenteella: mukana alkuperäisten muuttujien muunnoksia </span></span>
<span id="cb10-33"><a href="#cb10-33"></a><span class="co"># (yleensä as_factor), alkuperäisissä muuttujissa mukana SPSS-tiedoston metadata.</span></span>
<span id="cb10-34"><a href="#cb10-34"></a><span class="co">#</span></span>
<span id="cb10-35"><a href="#cb10-35"></a><span class="co"># Luokittelumuuttujan tyyppi on datan lukemisen jälkeen yleensä merkkijono (char) </span></span>
<span id="cb10-36"><a href="#cb10-36"></a><span class="co"># ja haven_labelled. </span></span>
<span id="cb10-37"><a href="#cb10-37"></a><span class="co">#</span></span>
<span id="cb10-38"><a href="#cb10-38"></a><span class="co"># Muutetaan R-datassa ordinaali- tai  nominaaliasteikon muuttujat haven-paketin </span></span>
<span id="cb10-39"><a href="#cb10-39"></a><span class="co"># as_factor - funktiolla faktoreiksi. R:n faktorityypin muuttujille voidaan tarvittaessa </span></span>
<span id="cb10-40"><a href="#cb10-40"></a><span class="co"># määritellä järjestys, toistaiseksi niin ei tehdä (25.9.2018). </span></span>
<span id="cb10-41"><a href="#cb10-41"></a><span class="co">#</span></span>
<span id="cb10-42"><a href="#cb10-42"></a><span class="co"># Muunnetun muuttujan rinnalla säilytetään SPSS-tiedostosta luettu muuttja, metatiedot säilyvät </span></span>
<span id="cb10-43"><a href="#cb10-43"></a><span class="co"># alkuperäisessä.</span></span>
<span id="cb10-44"><a href="#cb10-44"></a><span class="co">#       </span></span>
<span id="cb10-45"><a href="#cb10-45"></a><span class="co"># R-datatiedostot joiden nimen loppuosa on muotoa *esim1.dat: käytetään analyyseissä</span></span>
<span id="cb10-46"><a href="#cb10-46"></a><span class="co">#</span></span>
<span id="cb10-47"><a href="#cb10-47"></a><span class="co"># 1. VALITAAN MAAT (25) -&gt; ISSP2012jh1a.data. Muuttujat koodilohkossa datasel_vars1</span></span>
<span id="cb10-48"><a href="#cb10-48"></a><span class="co">#</span></span>
<span id="cb10-49"><a href="#cb10-49"></a><span class="co"># kolme maa-muuttujaa datassa. V3 erottelee joidenkin maiden alueita, V4 on koko </span></span>
<span id="cb10-50"><a href="#cb10-50"></a><span class="co"># maan koodi ja C_ALPHAN on maan kaksimerkkinen tunnus.</span></span>
<span id="cb10-51"><a href="#cb10-51"></a><span class="co">#</span></span>
<span id="cb10-52"><a href="#cb10-52"></a><span class="co"># V3 - Country/ Sample ISO 3166 Code (see V4 for codes for whole nation states)</span></span>
<span id="cb10-53"><a href="#cb10-53"></a><span class="co"># V3 erot valituissa maissa</span></span>
<span id="cb10-54"><a href="#cb10-54"></a><span class="co"># 5601 BE-FLA-Belgium/ Flanders</span></span>
<span id="cb10-55"><a href="#cb10-55"></a><span class="co"># 5602 BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb10-56"><a href="#cb10-56"></a><span class="co"># 5603 BE-BRU-Belgium/ Brussels</span></span>
<span id="cb10-57"><a href="#cb10-57"></a><span class="co"># 27601 DE-W-Germany-West</span></span>
<span id="cb10-58"><a href="#cb10-58"></a><span class="co"># 27602 DE-E-Germany-East</span></span>
<span id="cb10-59"><a href="#cb10-59"></a><span class="co"># 62001 PT-Portugal 2012: first fieldwork round (main sample)</span></span>
<span id="cb10-60"><a href="#cb10-60"></a><span class="co"># 62002 PT-Portugal 2012: second fieldwork round (complementary sample)</span></span>
<span id="cb10-61"><a href="#cb10-61"></a><span class="co"># Myös tämä on erikoinen, näyttää olevan vakio kun V4 = 826:</span></span>
<span id="cb10-62"><a href="#cb10-62"></a><span class="co"># 82601 GB-GBN-Great Britain</span></span>
<span id="cb10-63"><a href="#cb10-63"></a><span class="co"># Portugalissa ainestoa täydennettiin, koska siinä oli puutteita. Jako ei siis ole oleellinen,</span></span>
<span id="cb10-64"><a href="#cb10-64"></a><span class="co"># mutta muuut ovat. Tähdellä merkityt maat valitaan johdattelevaan esimerkkiin.</span></span>
<span id="cb10-65"><a href="#cb10-65"></a><span class="co">#</span></span>
<span id="cb10-66"><a href="#cb10-66"></a><span class="co"># Maat (25)</span></span>
<span id="cb10-67"><a href="#cb10-67"></a><span class="co">#</span></span>
<span id="cb10-68"><a href="#cb10-68"></a><span class="co"># 36 AU-Australia</span></span>
<span id="cb10-69"><a href="#cb10-69"></a><span class="co"># 40 AT-Austria</span></span>
<span id="cb10-70"><a href="#cb10-70"></a><span class="co"># 56 BE-Belgium*</span></span>
<span id="cb10-71"><a href="#cb10-71"></a><span class="co"># 100 BG-Bulgaria*</span></span>
<span id="cb10-72"><a href="#cb10-72"></a><span class="co"># 124 CA-Canada</span></span>
<span id="cb10-73"><a href="#cb10-73"></a><span class="co"># 191 HR-Croatia</span></span>
<span id="cb10-74"><a href="#cb10-74"></a><span class="co"># 203 CZ-Czech Republic</span></span>
<span id="cb10-75"><a href="#cb10-75"></a><span class="co"># 208 DK-Denmark*</span></span>
<span id="cb10-76"><a href="#cb10-76"></a><span class="co"># 246 FI-Finland*</span></span>
<span id="cb10-77"><a href="#cb10-77"></a><span class="co"># 250 FR-France</span></span>
<span id="cb10-78"><a href="#cb10-78"></a><span class="co"># 276 DE-Germany*</span></span>
<span id="cb10-79"><a href="#cb10-79"></a><span class="co"># 348 HU-Hungary*</span></span>
<span id="cb10-80"><a href="#cb10-80"></a><span class="co"># 352 IS-Iceland</span></span>
<span id="cb10-81"><a href="#cb10-81"></a><span class="co"># 372 IE-Ireland</span></span>
<span id="cb10-82"><a href="#cb10-82"></a><span class="co"># 428 LV-Latvia</span></span>
<span id="cb10-83"><a href="#cb10-83"></a><span class="co"># 440 LT-Lithuania</span></span>
<span id="cb10-84"><a href="#cb10-84"></a><span class="co"># 528 NL-Netherlands</span></span>
<span id="cb10-85"><a href="#cb10-85"></a><span class="co"># 578 NO-Norway</span></span>
<span id="cb10-86"><a href="#cb10-86"></a><span class="co"># 616 PL-Poland</span></span>
<span id="cb10-87"><a href="#cb10-87"></a><span class="co"># 620 PT-Portugal</span></span>
<span id="cb10-88"><a href="#cb10-88"></a><span class="co"># 643 RU-Russia</span></span>
<span id="cb10-89"><a href="#cb10-89"></a><span class="co"># 703 SK-Slovakia</span></span>
<span id="cb10-90"><a href="#cb10-90"></a><span class="co"># 705 SI-Slovenia</span></span>
<span id="cb10-91"><a href="#cb10-91"></a><span class="co"># 752 SE-Sweden</span></span>
<span id="cb10-92"><a href="#cb10-92"></a><span class="co"># 756 CH-Switzerland</span></span>
<span id="cb10-93"><a href="#cb10-93"></a><span class="co"># 826 GB-Great Britain and/or United Kingdom - jätetään pois jotta saadaan TOPBOT </span></span>
<span id="cb10-94"><a href="#cb10-94"></a><span class="co">#                          -muuttuja mukaan (top-bottom self-placement) .(9.10.18)</span></span>
<span id="cb10-95"><a href="#cb10-95"></a><span class="co"># 840 US-United States - jätetään pois, jotta saadaan TOPBOT-muuttuja mukaan.(10.10.18)</span></span>
<span id="cb10-96"><a href="#cb10-96"></a><span class="co">#</span></span>
<span id="cb10-97"><a href="#cb10-97"></a><span class="co"># Belgian ja Saksan alueet:</span></span>
<span id="cb10-98"><a href="#cb10-98"></a><span class="co">#  V3</span></span>
<span id="cb10-99"><a href="#cb10-99"></a><span class="co">#  5601     BE-FLA-Belgium/ Flanders</span></span>
<span id="cb10-100"><a href="#cb10-100"></a><span class="co">#  5602     BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb10-101"><a href="#cb10-101"></a><span class="co">#  5603     BE-BRU-Belgium/ Brussels</span></span>
<span id="cb10-102"><a href="#cb10-102"></a><span class="co"># 27601     DE-W-Germany-West</span></span>
<span id="cb10-103"><a href="#cb10-103"></a><span class="co"># 27602     DE-E-Germany-East</span></span>
<span id="cb10-104"><a href="#cb10-104"></a><span class="co">#</span></span>
<span id="cb10-105"><a href="#cb10-105"></a><span class="co"># Unkari (348) toistaiseksi mukana, mutta joissain kysymyksissä myös Unkarilla on </span></span>
<span id="cb10-106"><a href="#cb10-106"></a><span class="co"># poikkeavia vastausvaihtoehtoja(HU_V18, HU_V19,HU_V20). Jos näitä muuttujia käytetään, </span></span>
<span id="cb10-107"><a href="#cb10-107"></a><span class="co"># Unkari on parempi jättää pois. </span></span>
<span id="cb10-108"><a href="#cb10-108"></a><span class="co"># </span></span>
<span id="cb10-109"><a href="#cb10-109"></a><span class="co">#</span></span>
<span id="cb10-110"><a href="#cb10-110"></a><span class="co"># (25.4.2018) user_na  </span></span>
<span id="cb10-111"><a href="#cb10-111"></a><span class="co"># haven-paketin read_spss - funktiolla voi r-tiedostoon lukea myös SPSS:n sallimat kolme </span></span>
<span id="cb10-112"><a href="#cb10-112"></a><span class="co"># (yleensä 7, 8, 9) tarkempaa koodia puuttuvalle tiedolle.</span></span>
<span id="cb10-113"><a href="#cb10-113"></a><span class="co"># &quot;If TRUE variables with user defined missing will be read into labelled_spss objects. </span></span>
<span id="cb10-114"><a href="#cb10-114"></a><span class="co"># If FALSE, the default, user-defined missings will be converted to NA&quot;</span></span>
<span id="cb10-115"><a href="#cb10-115"></a><span class="co"># https://www.rdocumentation.org/packages/haven/versions/1.1.0/topics/read_spss</span></span>
<span id="cb10-116"><a href="#cb10-116"></a><span class="co">#</span></span>
<span id="cb10-117"><a href="#cb10-117"></a> </span>
<span id="cb10-118"><a href="#cb10-118"></a>ISSP2012jh.data &lt;-<span class="st"> </span><span class="kw">read_spss</span>(<span class="st">&quot;data/ZA5900_v4-0-0.sav&quot;</span>) <span class="co">#luetaan alkuperäinen data R- dataksi (df).</span></span>
<span id="cb10-119"><a href="#cb10-119"></a></span>
<span id="cb10-120"><a href="#cb10-120"></a><span class="co">#str(ISSP2012jh.data)</span></span>
<span id="cb10-121"><a href="#cb10-121"></a></span>
<span id="cb10-122"><a href="#cb10-122"></a>incl_countries25 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">36</span>, <span class="dv">40</span>, <span class="dv">56</span>,<span class="dv">100</span>, <span class="dv">124</span>, <span class="dv">191</span>, <span class="dv">203</span>, <span class="dv">208</span>, <span class="dv">246</span>, <span class="dv">250</span>, <span class="dv">276</span>, <span class="dv">348</span>, <span class="dv">352</span>, </span>
<span id="cb10-123"><a href="#cb10-123"></a>                      <span class="dv">372</span>, <span class="dv">428</span>, <span class="dv">440</span>, <span class="dv">528</span>, <span class="dv">578</span>, <span class="dv">616</span>, <span class="dv">620</span>, <span class="dv">643</span>, <span class="dv">703</span>, <span class="dv">705</span>, <span class="dv">752</span>, <span class="dv">756</span>)</span>
<span id="cb10-124"><a href="#cb10-124"></a></span>
<span id="cb10-125"><a href="#cb10-125"></a><span class="co">#str(ISSP2012jh.data)</span></span>
<span id="cb10-126"><a href="#cb10-126"></a><span class="co">#str(ISSP2012jh.data) #61754 obs. of  420 variables - kaikki</span></span>
<span id="cb10-127"><a href="#cb10-127"></a></span>
<span id="cb10-128"><a href="#cb10-128"></a>ISSP2012jh1a.data &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012jh.data, V4 <span class="op">%in%</span><span class="st"> </span>incl_countries25)</span>
<span id="cb10-129"><a href="#cb10-129"></a></span>
<span id="cb10-130"><a href="#cb10-130"></a><span class="co">#head(ISSP2012jh1a.data)</span></span>
<span id="cb10-131"><a href="#cb10-131"></a><span class="co">#str(ISSP2012jh1a.data) #34271 obs. of  420 variables, Espanja ja Iso-Britannia</span></span>
<span id="cb10-132"><a href="#cb10-132"></a><span class="co">#                       pois (9.10.2018)</span></span>
<span id="cb10-133"><a href="#cb10-133"></a><span class="co"># str(ISSP2012jh1a.data) # 32969 obs. of  420 variable, Espanja Iso-Britannia, </span></span>
<span id="cb10-134"><a href="#cb10-134"></a><span class="co">#                        USA pois (10.10.2018)</span></span>
<span id="cb10-135"><a href="#cb10-135"></a><span class="co">#</span></span>
<span id="cb10-136"><a href="#cb10-136"></a><span class="co"># names() # muuttujen nimet</span></span>
<span id="cb10-137"><a href="#cb10-137"></a><span class="co"># Maakohtaiset muuttujat (kun on poikettu ISSP2012 - vastausvaihtoehdoista tms.) </span></span>
<span id="cb10-138"><a href="#cb10-138"></a><span class="co"># on aineistossa eroteltu maatunnus-etuliitteellä (esimerkiksi ES_V7).</span></span>
<span id="cb10-139"><a href="#cb10-139"></a><span class="co"># Demografisissa ja muissa taustamuuttujissa suuri osa tiedoista on kerätty maa-</span></span>
<span id="cb10-140"><a href="#cb10-140"></a><span class="co"># kohtaisilla lomakkeilla. Vertailukelpoiset muuttujat on konstruoitu niistä.</span></span>
<span id="cb10-141"><a href="#cb10-141"></a><span class="co"># Muuttujia on 420, vain osa yhteisiä kaikille maille.</span></span>
<span id="cb10-142"><a href="#cb10-142"></a></span>
<span id="cb10-143"><a href="#cb10-143"></a><span class="co"># include FALSE: ei koodia eikä tulostusta dokumenttiin - poistettava turhia</span></span>
<span id="cb10-144"><a href="#cb10-144"></a><span class="co"># välitulostuksia (18.10.2020)</span></span>
<span id="cb10-145"><a href="#cb10-145"></a><span class="co"># 2. VALITAAN MUUTTUJAT  -&gt; ISSP2012jh1b.data. Maat valittu koodilohkossa datasel_country1</span></span>
<span id="cb10-146"><a href="#cb10-146"></a><span class="co">#</span></span>
<span id="cb10-147"><a href="#cb10-147"></a><span class="co">#</span></span>
<span id="cb10-148"><a href="#cb10-148"></a><span class="co"># Muuttujat on luokiteltu dokumentissa ZA5900_overview.pdf</span></span>
<span id="cb10-149"><a href="#cb10-149"></a><span class="co"># https://zacat.gesis.org/webview/index.jsp?object=http://zacat.gesis.org/obj/fStudy/ZA5900</span></span>
<span id="cb10-150"><a href="#cb10-150"></a><span class="co"># Study Description -&gt; Other Study Description -&gt; Related Materials</span></span>
<span id="cb10-151"><a href="#cb10-151"></a><span class="co"># </span></span>
<span id="cb10-152"><a href="#cb10-152"></a><span class="co">#</span></span>
<span id="cb10-153"><a href="#cb10-153"></a></span>
<span id="cb10-154"><a href="#cb10-154"></a><span class="co"># METADATA</span></span>
<span id="cb10-155"><a href="#cb10-155"></a></span>
<span id="cb10-156"><a href="#cb10-156"></a>metavars1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;V1&quot;</span>, <span class="st">&quot;V2&quot;</span>, <span class="st">&quot;DOI&quot;</span>)</span>
<span id="cb10-157"><a href="#cb10-157"></a></span>
<span id="cb10-158"><a href="#cb10-158"></a><span class="co">#MAA - maakoodit ja maan kahden merkin tunnus</span></span>
<span id="cb10-159"><a href="#cb10-159"></a></span>
<span id="cb10-160"><a href="#cb10-160"></a>countryvars1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;V3&quot;</span>,<span class="st">&quot;V4&quot;</span>,<span class="st">&quot;C_ALPHAN&quot;</span>)</span>
<span id="cb10-161"><a href="#cb10-161"></a></span>
<span id="cb10-162"><a href="#cb10-162"></a><span class="co"># SUBSTANSSIMUUTTUJAT - Attitudes towards family and gender roles (9)</span></span>
<span id="cb10-163"><a href="#cb10-163"></a><span class="co">#</span></span>
<span id="cb10-164"><a href="#cb10-164"></a><span class="co"># Yhdeksän kysymystä (lyhennetyt versiot, englanniksi), vastausvaihtoehdot Q1-Q2</span></span>
<span id="cb10-165"><a href="#cb10-165"></a><span class="co">#</span></span>
<span id="cb10-166"><a href="#cb10-166"></a><span class="co"># 1 = täysin samaa mieltä, 2 = samaa mieltä, 3 = ei samaa eikä eri mieltä, </span></span>
<span id="cb10-167"><a href="#cb10-167"></a><span class="co"># 4 = eri mieltä, 5 = täysin eri mieltä</span></span>
<span id="cb10-168"><a href="#cb10-168"></a><span class="co"># </span></span>
<span id="cb10-169"><a href="#cb10-169"></a><span class="co"># Q1a Working mother can have warm relation with child</span></span>
<span id="cb10-170"><a href="#cb10-170"></a><span class="co"># Q1b Pre-school child suffers through working mother</span></span>
<span id="cb10-171"><a href="#cb10-171"></a><span class="co"># Q1c Family life suffers through working mother</span></span>
<span id="cb10-172"><a href="#cb10-172"></a><span class="co"># Q1d Women’s preference: home and children</span></span>
<span id="cb10-173"><a href="#cb10-173"></a><span class="co"># Q1e Being housewife is satisfying</span></span>
<span id="cb10-174"><a href="#cb10-174"></a><span class="co">#</span></span>
<span id="cb10-175"><a href="#cb10-175"></a><span class="co"># Q2a Both should contribute to household income</span></span>
<span id="cb10-176"><a href="#cb10-176"></a><span class="co"># Q2b Men’s job is earn money, women’s job household</span></span>
<span id="cb10-177"><a href="#cb10-177"></a><span class="co">#</span></span>
<span id="cb10-178"><a href="#cb10-178"></a><span class="co"># Q3a Should women work: Child under school age </span></span>
<span id="cb10-179"><a href="#cb10-179"></a><span class="co"># Q3b Should women work: Youngest kid at school</span></span>
<span id="cb10-180"><a href="#cb10-180"></a><span class="co"># 1= kokopäivätyö, 2 = osa-aikatyö, 3 = pysyä kotona, 8 = en osaa sanoa (can&#39;t choose), 9 = no answer</span></span>
<span id="cb10-181"><a href="#cb10-181"></a><span class="co">#</span></span>
<span id="cb10-182"><a href="#cb10-182"></a><span class="co"># Kysymysten Q3a ja Q3b eos-vastaus ei ole sama kuin &quot;en samaa enkä eri  mieltä&quot; (ns. neutraali </span></span>
<span id="cb10-183"><a href="#cb10-183"></a><span class="co"># vaihtoehto), mutta kieltäytymisiä jne. (koodi 9) on aika vähän. Kolmessa </span></span>
<span id="cb10-184"><a href="#cb10-184"></a><span class="co"># maassa ne on yhdistety: </span></span>
<span id="cb10-185"><a href="#cb10-185"></a><span class="co"># (8 Can&#39;t choose, CA:can&#39;t choose+no answer, KR:don&#39;t know+refused, NL:don&#39;t know).</span></span>
<span id="cb10-186"><a href="#cb10-186"></a><span class="co"># Kun SPSS-tiedostosta ei ole tuotu puuttuvan tiedon tarkempaa luokittelua,</span></span>
<span id="cb10-187"><a href="#cb10-187"></a><span class="co"># erottelua ei voi tehdä.</span></span>
<span id="cb10-188"><a href="#cb10-188"></a><span class="co">#</span></span>
<span id="cb10-189"><a href="#cb10-189"></a><span class="co"># </span></span>
<span id="cb10-190"><a href="#cb10-190"></a><span class="co">#</span></span>
<span id="cb10-191"><a href="#cb10-191"></a></span>
<span id="cb10-192"><a href="#cb10-192"></a>substvars1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;V5&quot;</span>,<span class="st">&quot;V6&quot;</span>,<span class="st">&quot;V7&quot;</span>,<span class="st">&quot;V8&quot;</span>,<span class="st">&quot;V9&quot;</span>,<span class="st">&quot;V10&quot;</span>,<span class="st">&quot;V11&quot;</span>,<span class="st">&quot;V12&quot;</span>,<span class="st">&quot;V13&quot;</span>) <span class="co"># 9 muuttujaa</span></span>
<span id="cb10-193"><a href="#cb10-193"></a></span>
<span id="cb10-194"><a href="#cb10-194"></a><span class="co"># Nämä yhteiset muuttujat pois (maaspesifien muuttujien lisäksi) :</span></span>
<span id="cb10-195"><a href="#cb10-195"></a><span class="co">#</span></span>
<span id="cb10-196"><a href="#cb10-196"></a><span class="co"># &quot;V14&quot;,&quot;V15&quot;,&quot;V16&quot;,  &quot;V17&quot;,&quot;V18&quot;,&quot;HU_V18&quot;,&quot;V19&quot;,&quot;HU_V19&quot;,&quot;V20&quot;,&quot;HU_V20&quot;,&quot;V21&quot;,</span></span>
<span id="cb10-197"><a href="#cb10-197"></a><span class="co"># &quot;V28&quot;,&quot;V29&quot;,&quot;V30&quot;,&quot;V31&quot;,&quot;V32&quot;,&quot;V33&quot;,# &quot;V34&quot;, &quot;V35&quot;, &quot;V36&quot;, &quot;V37&quot;, &quot;V38&quot;, &quot;V39&quot;,</span></span>
<span id="cb10-198"><a href="#cb10-198"></a><span class="co"># &quot;V40&quot;, &quot;V41&quot;, &quot;V42&quot;, &quot;V43&quot;, &quot;V44&quot;, &quot;V45&quot;, &quot;V46&quot;, &quot;V47&quot;, &quot;V48&quot;, &quot;V49&quot;, &quot;V50&quot;, </span></span>
<span id="cb10-199"><a href="#cb10-199"></a><span class="co"># &quot;V51&quot;, &quot;V52&quot;, &quot;V53&quot;, &quot;V54&quot;, &quot;V55&quot;, &quot;V56&quot;, &quot;V57&quot;, &quot;V58&quot;, &quot;V59&quot;, &quot;V60&quot;, &quot;V61&quot;, </span></span>
<span id="cb10-200"><a href="#cb10-200"></a><span class="co"># &quot;V62&quot;, &quot;V63&quot;, &quot;V64&quot;, &quot;V65&quot;, &quot;V65a&quot;,&quot;V66&quot;, &quot;V67&quot;</span></span>
<span id="cb10-201"><a href="#cb10-201"></a><span class="co">#</span></span>
<span id="cb10-202"><a href="#cb10-202"></a><span class="co">#</span></span>
<span id="cb10-203"><a href="#cb10-203"></a><span class="co"># DEMOGRAFISET JA MUUT TAUSTAMUUTTUJAT (8)</span></span>
<span id="cb10-204"><a href="#cb10-204"></a><span class="co">#</span></span>
<span id="cb10-205"><a href="#cb10-205"></a><span class="co"># AGE, SEX</span></span>
<span id="cb10-206"><a href="#cb10-206"></a><span class="co">#</span></span>
<span id="cb10-207"><a href="#cb10-207"></a><span class="co"># DEGREE - Highest completed degree of education: Categories for international comparison. </span></span>
<span id="cb10-208"><a href="#cb10-208"></a><span class="co"># Slightly re-arranged subset of ISCED-97</span></span>
<span id="cb10-209"><a href="#cb10-209"></a><span class="co">#</span></span>
<span id="cb10-210"><a href="#cb10-210"></a><span class="co"># 0 No formal education</span></span>
<span id="cb10-211"><a href="#cb10-211"></a><span class="co"># 1 Primary school (elementary school)</span></span>
<span id="cb10-212"><a href="#cb10-212"></a><span class="co"># 2 Lower secondary (secondary completed does not allow entry to university: obligatory school)</span></span>
<span id="cb10-213"><a href="#cb10-213"></a><span class="co"># 3 Upper secondary (programs that allow entry to university or programs that allow to entry </span></span>
<span id="cb10-214"><a href="#cb10-214"></a><span class="co">#   other ISCED level 3 programs - designed to prepare students for direct entry into the labour market)</span></span>
<span id="cb10-215"><a href="#cb10-215"></a><span class="co"># 4 Post secondary, non-tertiary (other upper secondary programs toward labour market or technical formation)</span></span>
<span id="cb10-216"><a href="#cb10-216"></a><span class="co"># 5 Lower level tertiary, first stage (also technical schools at a tertiary level)</span></span>
<span id="cb10-217"><a href="#cb10-217"></a><span class="co"># 6 Upper level tertiary (Master, Dr.)</span></span>
<span id="cb10-218"><a href="#cb10-218"></a><span class="co"># 9 No answer, CH: don&#39;t know</span></span>
<span id="cb10-219"><a href="#cb10-219"></a><span class="co"># Yhdistelyt?</span></span>
<span id="cb10-220"><a href="#cb10-220"></a><span class="co">#</span></span>
<span id="cb10-221"><a href="#cb10-221"></a><span class="co"># MAINSTAT - main status: Which of the following best describes your current situation?</span></span>
<span id="cb10-222"><a href="#cb10-222"></a><span class="co">#</span></span>
<span id="cb10-223"><a href="#cb10-223"></a><span class="co"># 1 In paid work</span></span>
<span id="cb10-224"><a href="#cb10-224"></a><span class="co"># 2 Unemployed and looking for a job, HR: incl never had a job</span></span>
<span id="cb10-225"><a href="#cb10-225"></a><span class="co"># 3 In education</span></span>
<span id="cb10-226"><a href="#cb10-226"></a><span class="co"># 4 Apprentice or trainee</span></span>
<span id="cb10-227"><a href="#cb10-227"></a><span class="co"># 5 Permanently sick or disabled</span></span>
<span id="cb10-228"><a href="#cb10-228"></a><span class="co"># 6 Retired</span></span>
<span id="cb10-229"><a href="#cb10-229"></a><span class="co"># 7 Domestic work</span></span>
<span id="cb10-230"><a href="#cb10-230"></a><span class="co"># 8 In compulsory military service or community service</span></span>
<span id="cb10-231"><a href="#cb10-231"></a><span class="co"># 9 Other</span></span>
<span id="cb10-232"><a href="#cb10-232"></a><span class="co"># 99 No answer</span></span>
<span id="cb10-233"><a href="#cb10-233"></a><span class="co"># Armeijassa tai yhdyskuntapalvelussa muutamia, muutamissa maissa.Kategoriassa 9 </span></span>
<span id="cb10-234"><a href="#cb10-234"></a><span class="co"># on hieman väkeä. Yhdistetään 8 ja 9. Huom! Esim Puolassa ei yhtään eläkeläistä</span></span>
<span id="cb10-235"><a href="#cb10-235"></a><span class="co"># eikä kategoriaa 9, Saksassa ei ketään kategoriassa 9.</span></span>
<span id="cb10-236"><a href="#cb10-236"></a><span class="co">#</span></span>
<span id="cb10-237"><a href="#cb10-237"></a><span class="co"># TOPBOT - Top-Bottom self-placement (10 pt scale)</span></span>
<span id="cb10-238"><a href="#cb10-238"></a><span class="co">#</span></span>
<span id="cb10-239"><a href="#cb10-239"></a><span class="co"># &quot;In our society, there are groups which tend to be towards the top and groups </span></span>
<span id="cb10-240"><a href="#cb10-240"></a><span class="co"># which tend to be towards the bottom. Below is a scale that runs</span></span>
<span id="cb10-241"><a href="#cb10-241"></a><span class="co"># from the top to the bottom. Where would you put yourself on this scale?&quot;</span></span>
<span id="cb10-242"><a href="#cb10-242"></a><span class="co"># Eri maissa hieman erilaisia kysymyksiä. </span></span>
<span id="cb10-243"><a href="#cb10-243"></a><span class="co">#</span></span>
<span id="cb10-244"><a href="#cb10-244"></a><span class="co"># HHCHILDR - How many children in household: children between [school age] and</span></span>
<span id="cb10-245"><a href="#cb10-245"></a><span class="co"># 17 years of age</span></span>
<span id="cb10-246"><a href="#cb10-246"></a><span class="co">#</span></span>
<span id="cb10-247"><a href="#cb10-247"></a><span class="co"># 0 No children</span></span>
<span id="cb10-248"><a href="#cb10-248"></a><span class="co"># 1 One child</span></span>
<span id="cb10-249"><a href="#cb10-249"></a><span class="co"># 2 2 children</span></span>
<span id="cb10-250"><a href="#cb10-250"></a><span class="co"># 21 21 children</span></span>
<span id="cb10-251"><a href="#cb10-251"></a><span class="co"># 96 NAP (Code 0 in HOMPOP)</span></span>
<span id="cb10-252"><a href="#cb10-252"></a><span class="co"># 97 Refused</span></span>
<span id="cb10-253"><a href="#cb10-253"></a><span class="co"># 99 No answer</span></span>
<span id="cb10-254"><a href="#cb10-254"></a><span class="co">#</span></span>
<span id="cb10-255"><a href="#cb10-255"></a><span class="co"># Voisi koodata dummymuuttujaksi lapsia (1) - ei lapsia (0).</span></span>
<span id="cb10-256"><a href="#cb10-256"></a><span class="co"># Ranskan datassa on erittäin iso osa puuttuvia tietoja ( &quot;99&quot;&quot;, n. 20 %), myös </span></span>
<span id="cb10-257"><a href="#cb10-257"></a><span class="co"># Austarlialla aika paljon. Sama tilanne myös muissa perheen kokoon liittyvissä </span></span>
<span id="cb10-258"><a href="#cb10-258"></a><span class="co"># kysymyksissä.</span></span>
<span id="cb10-259"><a href="#cb10-259"></a><span class="co">#</span></span>
<span id="cb10-260"><a href="#cb10-260"></a><span class="co"># MARITAL - Legal partnership status </span></span>
<span id="cb10-261"><a href="#cb10-261"></a><span class="co">#</span></span>
<span id="cb10-262"><a href="#cb10-262"></a><span class="co"># What is your current legal marital status?</span></span>
<span id="cb10-263"><a href="#cb10-263"></a><span class="co"># The aim of this variable is to measure the current &#39;legal&#39; marital status &#39;. </span></span>
<span id="cb10-264"><a href="#cb10-264"></a><span class="co"># PARTLIV - muuttujassa on &#39;de facto&#39; - tilanteen tieto parisuhteesta</span></span>
<span id="cb10-265"><a href="#cb10-265"></a><span class="co">#</span></span>
<span id="cb10-266"><a href="#cb10-266"></a><span class="co"># 1 Married</span></span>
<span id="cb10-267"><a href="#cb10-267"></a><span class="co"># 2 Civil partnership</span></span>
<span id="cb10-268"><a href="#cb10-268"></a><span class="co"># 3 Separated from spouse/ civil partner (still legally married/ still legally </span></span>
<span id="cb10-269"><a href="#cb10-269"></a><span class="co">#   in a civil partnership)</span></span>
<span id="cb10-270"><a href="#cb10-270"></a><span class="co"># 4 Divorced from spouse/ legally separated from civil partner</span></span>
<span id="cb10-271"><a href="#cb10-271"></a><span class="co"># 5 Widowed/ civil partner died</span></span>
<span id="cb10-272"><a href="#cb10-272"></a><span class="co"># 6 Never married/ never in a civil partnership, single</span></span>
<span id="cb10-273"><a href="#cb10-273"></a><span class="co"># 7 Refused</span></span>
<span id="cb10-274"><a href="#cb10-274"></a><span class="co"># 8 Don&#39;t know</span></span>
<span id="cb10-275"><a href="#cb10-275"></a><span class="co"># 9 No answer</span></span>
<span id="cb10-276"><a href="#cb10-276"></a><span class="co">#</span></span>
<span id="cb10-277"><a href="#cb10-277"></a><span class="co"># URBRURAL - Place of living: urban - rural</span></span>
<span id="cb10-278"><a href="#cb10-278"></a><span class="co">#</span></span>
<span id="cb10-279"><a href="#cb10-279"></a><span class="co"># 1 A big city</span></span>
<span id="cb10-280"><a href="#cb10-280"></a><span class="co"># 2 The suburbs or outskirts of a big city</span></span>
<span id="cb10-281"><a href="#cb10-281"></a><span class="co"># 3 A town or a small city</span></span>
<span id="cb10-282"><a href="#cb10-282"></a><span class="co"># 4 A country village</span></span>
<span id="cb10-283"><a href="#cb10-283"></a><span class="co"># 5 A farm or home in the country</span></span>
<span id="cb10-284"><a href="#cb10-284"></a><span class="co"># 7 Other answer</span></span>
<span id="cb10-285"><a href="#cb10-285"></a><span class="co"># 9 No answer</span></span>
<span id="cb10-286"><a href="#cb10-286"></a><span class="co"># 1 ja 2 vaihtelevat aika paljon maittain, parempi laskea yhteen. Unkarista puuttuu </span></span>
<span id="cb10-287"><a href="#cb10-287"></a><span class="co"># jostain syystä kokonaan vaihtoehto 5.  Vaihotehdon 7 on valinnut vain 4 vastaajaa Ranskasta.</span></span>
<span id="cb10-288"><a href="#cb10-288"></a><span class="co"># Yhdistetään 1 ja 2 = city, 3 = town, rural= 4, 5, 7</span></span>
<span id="cb10-289"><a href="#cb10-289"></a><span class="co">#</span></span>
<span id="cb10-290"><a href="#cb10-290"></a></span>
<span id="cb10-291"><a href="#cb10-291"></a>bgvars1 &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="st">&quot;SEX&quot;</span>,<span class="st">&quot;AGE&quot;</span>,<span class="st">&quot;DEGREE&quot;</span>, <span class="st">&quot;MAINSTAT&quot;</span>, <span class="st">&quot;TOPBOT&quot;</span>, <span class="st">&quot;HHCHILDR&quot;</span>, <span class="st">&quot;MARITAL&quot;</span>, <span class="st">&quot;URBRURAL&quot;</span>)</span>
<span id="cb10-292"><a href="#cb10-292"></a></span>
<span id="cb10-293"><a href="#cb10-293"></a><span class="co">#Valitaan muuttujat</span></span>
<span id="cb10-294"><a href="#cb10-294"></a></span>
<span id="cb10-295"><a href="#cb10-295"></a>jhvars1 &lt;-<span class="st"> </span><span class="kw">c</span>(metavars1,countryvars1, substvars1,bgvars1)</span>
<span id="cb10-296"><a href="#cb10-296"></a></span>
<span id="cb10-297"><a href="#cb10-297"></a><span class="co">#jhvars1</span></span>
<span id="cb10-298"><a href="#cb10-298"></a>ISSP2012jh1b.data &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012jh1a.data, <span class="kw">all_of</span>(jhvars1)) </span>
<span id="cb10-299"><a href="#cb10-299"></a></span>
<span id="cb10-300"><a href="#cb10-300"></a><span class="co"># laaja aineisto - mukana havainnot joissa puuttuvia tietoja</span></span>
<span id="cb10-301"><a href="#cb10-301"></a><span class="co"># hauska detalji URBRURAL - muuttujan metatiedoissa viite jonkun työaseman hakemistoon</span></span>
<span id="cb10-302"><a href="#cb10-302"></a><span class="co"># str(ISSP2012jh1b.data) #32969 obs. of  23 variables </span></span>
<span id="cb10-303"><a href="#cb10-303"></a><span class="co"># </span></span>
<span id="cb10-304"><a href="#cb10-304"></a><span class="co"># SUBSTANSSIMUUTTUJAT</span></span>
<span id="cb10-305"><a href="#cb10-305"></a><span class="co">#</span></span>
<span id="cb10-306"><a href="#cb10-306"></a><span class="co"># $ V5      : &#39;haven_labelled&#39; num  5 1 2 2 1 NA 2 4 2 2 ...</span></span>
<span id="cb10-307"><a href="#cb10-307"></a><span class="co">#  ..- attr(*, &quot;label&quot;)= chr &quot;Q1a Working mom: warm relationship with children as a not working mom&quot;</span></span>
<span id="cb10-308"><a href="#cb10-308"></a><span class="co">#  ..- attr(*, &quot;labels&quot;)= Named num  0 1 2 3 4 5 8 9</span></span>
<span id="cb10-309"><a href="#cb10-309"></a><span class="co">#</span></span>
<span id="cb10-310"><a href="#cb10-310"></a><span class="co"># ISSP2012jh1b.data$V5 näyttää tarkemmin rakenteen</span></span>
<span id="cb10-311"><a href="#cb10-311"></a><span class="co">#</span></span>
<span id="cb10-312"><a href="#cb10-312"></a><span class="co"># glimpse(ISSP2012jh1b.data)</span></span>
<span id="cb10-313"><a href="#cb10-313"></a><span class="co"># str(ISSP2012jh1b.data) # 32969 obs. of  23 variables</span></span>
<span id="cb10-314"><a href="#cb10-314"></a></span>
<span id="cb10-315"><a href="#cb10-315"></a><span class="co"># Poistetaan havainnot, joissa ikä (AGE) tai sukupuolitieto puuttuu (5.7.2019)</span></span>
<span id="cb10-316"><a href="#cb10-316"></a></span>
<span id="cb10-317"><a href="#cb10-317"></a>ISSP2012jh1c.data &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012jh1b.data, (<span class="op">!</span><span class="kw">is.na</span>(SEX) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(AGE)))</span>
<span id="cb10-318"><a href="#cb10-318"></a></span>
<span id="cb10-319"><a href="#cb10-319"></a><span class="kw">str</span>(ISSP2012jh1c.data) <span class="co"># 32823 obs. of  23 variables, 32969-32823 = 146</span></span>
<span id="cb10-320"><a href="#cb10-320"></a><span class="co"># TARKISTUS 8.6.20 dplyr 1.0.0-päivitys: havaintojen ja muuttujien määrä ok.</span></span>
<span id="cb10-321"><a href="#cb10-321"></a></span>
<span id="cb10-322"><a href="#cb10-322"></a><span class="co"># VAIHE 1 - muuttujat joissa ei ole puuttuvia tietoja</span></span>
<span id="cb10-323"><a href="#cb10-323"></a></span>
<span id="cb10-324"><a href="#cb10-324"></a><span class="co"># vaihe 1.1 haven_labelled ja chr -&gt; as_factor</span></span>
<span id="cb10-325"><a href="#cb10-325"></a></span>
<span id="cb10-326"><a href="#cb10-326"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1c.data <span class="op">%&gt;%</span></span>
<span id="cb10-327"><a href="#cb10-327"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">maa =</span> <span class="kw">as_factor</span>(C_ALPHAN), <span class="co"># ei puuttuvia, ei tyhjiä leveleitä</span></span>
<span id="cb10-328"><a href="#cb10-328"></a>           <span class="dt">maa3 =</span> <span class="kw">as_factor</span>(V3),  <span class="co"># maakoodi, jossa aluejako joillan mailla</span></span>
<span id="cb10-329"><a href="#cb10-329"></a>           <span class="dt">sp1 =</span> <span class="kw">as_factor</span>(SEX), <span class="co"># ei puuttuvia, tyhjä level &quot;no answer&quot; 999</span></span>
<span id="cb10-330"><a href="#cb10-330"></a>         )</span>
<span id="cb10-331"><a href="#cb10-331"></a></span>
<span id="cb10-332"><a href="#cb10-332"></a></span>
<span id="cb10-333"><a href="#cb10-333"></a><span class="co"># C_ALPHAN - maa - maa3 tarkistuksia</span></span>
<span id="cb10-334"><a href="#cb10-334"></a></span>
<span id="cb10-335"><a href="#cb10-335"></a><span class="co"># V3</span></span>
<span id="cb10-336"><a href="#cb10-336"></a><span class="co"># &quot;Pulma&quot; on järjestys. C_ALPHAN (&quot;chr&quot;) on aakkosjärjestyksessä, kun luodaan</span></span>
<span id="cb10-337"><a href="#cb10-337"></a><span class="co"># maa = as_factor(C_ALPHAN) järjestys muuttuu (esiintymisjärjestys datassa?)</span></span>
<span id="cb10-338"><a href="#cb10-338"></a><span class="co"># maa3 muunnetaan maakoodista (haven_labelled&#39; num), jonka</span></span>
<span id="cb10-339"><a href="#cb10-339"></a></span>
<span id="cb10-340"><a href="#cb10-340"></a><span class="co"># str(ISSP2012jh1d.dat$maa) #Country Prefix ISO 3166 Code - alphanumeric</span></span>
<span id="cb10-341"><a href="#cb10-341"></a><span class="co"># attributes(ISSP2012jh1d.dat$maa) # ei tyhiä levels-arvoja, 25 levels</span></span>
<span id="cb10-342"><a href="#cb10-342"></a><span class="co"># ISSP2012jh1d.dat$maa %&gt;% fct_unique()</span></span>
<span id="cb10-343"><a href="#cb10-343"></a><span class="co"># ISSP2012jh1d.dat$maa %&gt;% fct_count() # summary kertoo samat tiedot (20.2.20)</span></span>
<span id="cb10-344"><a href="#cb10-344"></a><span class="co"># sum(is.na(ISSP2012jh1d.dat$maa)) # ei puuttuvia tietoja</span></span>
<span id="cb10-345"><a href="#cb10-345"></a><span class="co"># ISSP2012jh1d.dat$maa %&gt;% summary() # mukana vain valitut 25 maata</span></span>
<span id="cb10-346"><a href="#cb10-346"></a></span>
<span id="cb10-347"><a href="#cb10-347"></a><span class="co"># str(ISSP2012jh1d.dat$maa3)  #&quot;Country/ Sample ISO 3166 Code</span></span>
<span id="cb10-348"><a href="#cb10-348"></a>                            <span class="co">#(see V4 for codes for whole nation states)&quot;</span></span>
<span id="cb10-349"><a href="#cb10-349"></a>                            <span class="co"># 29 levels</span></span>
<span id="cb10-350"><a href="#cb10-350"></a><span class="co"># str(ISSP2012jh1d.dat$V3)</span></span>
<span id="cb10-351"><a href="#cb10-351"></a></span>
<span id="cb10-352"><a href="#cb10-352"></a><span class="co"># attributes(ISSP2012jh1d.dat$maa3) # ei tyhiä levels-arvoja, 29 levels</span></span>
<span id="cb10-353"><a href="#cb10-353"></a><span class="co"># sum(is.na(ISSP2012jh1d.dat$maa3)) # nolla ei ole puuttuva tieto! (3.2.20)</span></span>
<span id="cb10-354"><a href="#cb10-354"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_unique()</span></span>
<span id="cb10-355"><a href="#cb10-355"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_count()</span></span>
<span id="cb10-356"><a href="#cb10-356"></a><span class="co"># Vain näissä on jaettu maan havainnot (3.2.20)</span></span>
<span id="cb10-357"><a href="#cb10-357"></a><span class="co">#</span></span>
<span id="cb10-358"><a href="#cb10-358"></a><span class="co"># [38] BE-FLA-Belgium/ Flanders</span></span>
<span id="cb10-359"><a href="#cb10-359"></a><span class="co"># [39] BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb10-360"><a href="#cb10-360"></a><span class="co"># [40] BE-BRU-Belgium/ Brussels</span></span>
<span id="cb10-361"><a href="#cb10-361"></a><span class="co"># [41] DE-W-Germany-West</span></span>
<span id="cb10-362"><a href="#cb10-362"></a><span class="co"># [42] DE-E-Germany-East</span></span>
<span id="cb10-363"><a href="#cb10-363"></a><span class="co"># [43] PT-Portugal 2012: first fieldwork round (main sample)</span></span>
<span id="cb10-364"><a href="#cb10-364"></a><span class="co"># [44] PT-Portugal 2012: second fieldwork round (complementary sample)</span></span>
<span id="cb10-365"><a href="#cb10-365"></a></span>
<span id="cb10-366"><a href="#cb10-366"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_count() #miksi ei tulosta mitään? (3.2.2020)</span></span>
<span id="cb10-367"><a href="#cb10-367"></a></span>
<span id="cb10-368"><a href="#cb10-368"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% summary()</span></span>
<span id="cb10-369"><a href="#cb10-369"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_unique()</span></span>
<span id="cb10-370"><a href="#cb10-370"></a><span class="co"># maa3: 25 maata, havaintojen määrä. Poisjätetyissä havaintoja 0.</span></span>
<span id="cb10-371"><a href="#cb10-371"></a><span class="co"># glimpse(ISSP2012jh1d.dat$maa3)</span></span>
<span id="cb10-372"><a href="#cb10-372"></a><span class="co"># head(ISSP2012jh1d.dat$maa3)</span></span>
<span id="cb10-373"><a href="#cb10-373"></a><span class="co"># length(levels(ISSP2012jh1d.dat$maa3))</span></span>
<span id="cb10-374"><a href="#cb10-374"></a></span>
<span id="cb10-375"><a href="#cb10-375"></a><span class="co"># C_ALPHAN alkuperäinen järjestys, maa aakkosjärjestyssä  (2.2.20)</span></span>
<span id="cb10-376"><a href="#cb10-376"></a><span class="co">#</span></span>
<span id="cb10-377"><a href="#cb10-377"></a><span class="co"># Huom1: Myös merkkijonomuuttujaa C_ALPHAN tarvitaan jatkossa.</span></span>
<span id="cb10-378"><a href="#cb10-378"></a><span class="co">#</span></span>
<span id="cb10-379"><a href="#cb10-379"></a><span class="co"># Huom2: kun dataa rajataan, on tarkistettava ja tarvittaessa poistettava</span></span>
<span id="cb10-380"><a href="#cb10-380"></a><span class="co"># &quot;tyhjät&quot; R-factor - muuttujan &quot;maa&quot; luokat (3.2.2020)</span></span>
<span id="cb10-381"><a href="#cb10-381"></a></span>
<span id="cb10-382"><a href="#cb10-382"></a></span>
<span id="cb10-383"><a href="#cb10-383"></a><span class="co"># vaihe 1.2 tyhjät luokat (levels) pois faktoreista</span></span>
<span id="cb10-384"><a href="#cb10-384"></a></span>
<span id="cb10-385"><a href="#cb10-385"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb10-386"><a href="#cb10-386"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">sp =</span> <span class="kw">fct_drop</span>(sp1),</span>
<span id="cb10-387"><a href="#cb10-387"></a>           <span class="dt">maa3 =</span> <span class="kw">fct_drop</span>(maa3)</span>
<span id="cb10-388"><a href="#cb10-388"></a>           )</span>
<span id="cb10-389"><a href="#cb10-389"></a></span>
<span id="cb10-390"><a href="#cb10-390"></a><span class="co">#  maa3 - tarkistuksia</span></span>
<span id="cb10-391"><a href="#cb10-391"></a></span>
<span id="cb10-392"><a href="#cb10-392"></a><span class="co"># str(ISSP2012jh1d.dat$maa3)  # 29 levels</span></span>
<span id="cb10-393"><a href="#cb10-393"></a><span class="co"># attributes(ISSP2012jh1d.dat$maa3)</span></span>
<span id="cb10-394"><a href="#cb10-394"></a><span class="co">#sum(is.na(ISSP2012jh1d.dat$maa3)) # nolla ei ole puuttuva tieto! (3.2.20)</span></span>
<span id="cb10-395"><a href="#cb10-395"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% summary()</span></span>
<span id="cb10-396"><a href="#cb10-396"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_unique()</span></span>
<span id="cb10-397"><a href="#cb10-397"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_count()</span></span>
<span id="cb10-398"><a href="#cb10-398"></a><span class="co">#</span></span>
<span id="cb10-399"><a href="#cb10-399"></a><span class="co"># str(ISSP2012jh1d.dat$C_ALPHAN)</span></span>
<span id="cb10-400"><a href="#cb10-400"></a><span class="co"># attributes(ISSP2012jh1d.dat$C_ALPHAN)</span></span>
<span id="cb10-401"><a href="#cb10-401"></a></span>
<span id="cb10-402"><a href="#cb10-402"></a><span class="co"># TESTAUKSIA</span></span>
<span id="cb10-403"><a href="#cb10-403"></a><span class="co"># </span></span>
<span id="cb10-404"><a href="#cb10-404"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(C_ALPHAN, maa)</span></span>
<span id="cb10-405"><a href="#cb10-405"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(C_ALPHAN, maa3)</span></span>
<span id="cb10-406"><a href="#cb10-406"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(maa, maa3)</span></span>
<span id="cb10-407"><a href="#cb10-407"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(V3, maa3)</span></span>
<span id="cb10-408"><a href="#cb10-408"></a></span>
<span id="cb10-409"><a href="#cb10-409"></a><span class="co"># sp, sp1, SEX - tarkistuksia</span></span>
<span id="cb10-410"><a href="#cb10-410"></a><span class="co"># </span></span>
<span id="cb10-411"><a href="#cb10-411"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_count()</span></span>
<span id="cb10-412"><a href="#cb10-412"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_count()</span></span>
<span id="cb10-413"><a href="#cb10-413"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(SEX,sp1)</span></span>
<span id="cb10-414"><a href="#cb10-414"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(SEX,sp)</span></span>
<span id="cb10-415"><a href="#cb10-415"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(sp1,sp)</span></span>
<span id="cb10-416"><a href="#cb10-416"></a></span>
<span id="cb10-417"><a href="#cb10-417"></a><span class="co"># vaihe 1.3 uudet &quot;faktorilabelit&quot;</span></span>
<span id="cb10-418"><a href="#cb10-418"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb10-419"><a href="#cb10-419"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">sp =</span></span>
<span id="cb10-420"><a href="#cb10-420"></a>          <span class="kw">fct_recode</span>(sp,</span>
<span id="cb10-421"><a href="#cb10-421"></a>            <span class="st">&quot;m&quot;</span> =<span class="st"> &quot;Male&quot;</span>,</span>
<span id="cb10-422"><a href="#cb10-422"></a>            <span class="st">&quot;f&quot;</span> =<span class="st"> &quot;Female&quot;</span>)</span>
<span id="cb10-423"><a href="#cb10-423"></a>            )</span>
<span id="cb10-424"><a href="#cb10-424"></a></span>
<span id="cb10-425"><a href="#cb10-425"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb10-426"><a href="#cb10-426"></a></span>
<span id="cb10-427"><a href="#cb10-427"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_unique()</span></span>
<span id="cb10-428"><a href="#cb10-428"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_count()</span></span>
<span id="cb10-429"><a href="#cb10-429"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% summary()</span></span>
<span id="cb10-430"><a href="#cb10-430"></a></span>
<span id="cb10-431"><a href="#cb10-431"></a><span class="co"># AGE -&gt; ika</span></span>
<span id="cb10-432"><a href="#cb10-432"></a>ISSP2012jh1d.dat<span class="op">$</span>ika &lt;-<span class="st"> </span>ISSP2012jh1d.dat<span class="op">$</span>AGE</span>
<span id="cb10-433"><a href="#cb10-433"></a></span>
<span id="cb10-434"><a href="#cb10-434"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb10-435"><a href="#cb10-435"></a><span class="kw">attributes</span>(ISSP2012jh1d.dat<span class="op">$</span>ika) <span class="co"># tyhjä level &quot;No answer&quot;</span></span>
<span id="cb10-436"><a href="#cb10-436"></a><span class="co"># str(ISSP2012jh1d.dat$ika)</span></span>
<span id="cb10-437"><a href="#cb10-437"></a>ISSP2012jh1d.dat<span class="op">$</span>ika <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>()</span>
<span id="cb10-438"><a href="#cb10-438"></a></span>
<span id="cb10-439"><a href="#cb10-439"></a>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb10-440"><a href="#cb10-440"></a><span class="kw">tableC</span>(AGE, ika,<span class="dt">cor_type =</span> <span class="st">&quot;pearson&quot;</span>, <span class="dt">na.rm =</span> <span class="ot">FALSE</span>, <span class="dt">rounding =</span> <span class="dv">5</span>,</span>
<span id="cb10-441"><a href="#cb10-441"></a>       <span class="dt">output =</span> <span class="st">&quot;text&quot;</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>, <span class="dt">caption =</span> <span class="ot">NULL</span>, <span class="dt">align =</span> <span class="ot">NULL</span>,</span>
<span id="cb10-442"><a href="#cb10-442"></a>       <span class="dt">float =</span> <span class="st">&quot;htb&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable</span>()</span>
<span id="cb10-443"><a href="#cb10-443"></a></span>
<span id="cb10-444"><a href="#cb10-444"></a><span class="co"># Ikäjakauma - ei tarvita (18.10.2020)</span></span>
<span id="cb10-445"><a href="#cb10-445"></a><span class="co">#</span></span>
<span id="cb10-446"><a href="#cb10-446"></a><span class="co"># ISSP2012jh1d.dat$ika %&gt;% hist(main = &quot;ISSP 2012: vastaajan ikä&quot;)</span></span>
<span id="cb10-447"><a href="#cb10-447"></a></span>
<span id="cb10-448"><a href="#cb10-448"></a><span class="co"># Substanssi- ja taustamuuttujat R-faktoreiksi</span></span>
<span id="cb10-449"><a href="#cb10-449"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb10-450"><a href="#cb10-450"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1a1 =</span> <span class="kw">as_factor</span>(V5), <span class="co">#labels</span></span>
<span id="cb10-451"><a href="#cb10-451"></a>            <span class="dt">Q1b1 =</span> <span class="kw">as_factor</span>(V6),</span>
<span id="cb10-452"><a href="#cb10-452"></a>            <span class="dt">Q1c1 =</span> <span class="kw">as_factor</span>(V7),</span>
<span id="cb10-453"><a href="#cb10-453"></a>            <span class="dt">Q1d1 =</span> <span class="kw">as_factor</span>(V8),</span>
<span id="cb10-454"><a href="#cb10-454"></a>            <span class="dt">Q1e1 =</span> <span class="kw">as_factor</span>(V9),</span>
<span id="cb10-455"><a href="#cb10-455"></a>            <span class="dt">Q2a1 =</span> <span class="kw">as_factor</span>(V10),</span>
<span id="cb10-456"><a href="#cb10-456"></a>            <span class="dt">Q2b1 =</span> <span class="kw">as_factor</span>(V11),</span>
<span id="cb10-457"><a href="#cb10-457"></a>            <span class="dt">Q3a1 =</span> <span class="kw">as_factor</span>(V12), <span class="co">#labels = vastQ3_labels (W,w,H)</span></span>
<span id="cb10-458"><a href="#cb10-458"></a>            <span class="dt">Q3b1 =</span> <span class="kw">as_factor</span>(V13), <span class="co">#labels = vastQ3_labels</span></span>
<span id="cb10-459"><a href="#cb10-459"></a>            <span class="dt">edu1 =</span> <span class="kw">as_factor</span>(DEGREE),</span>
<span id="cb10-460"><a href="#cb10-460"></a>            <span class="dt">msta1 =</span> <span class="kw">as_factor</span>(MAINSTAT),</span>
<span id="cb10-461"><a href="#cb10-461"></a>            <span class="dt">sosta1 =</span> <span class="kw">as_factor</span>(TOPBOT),</span>
<span id="cb10-462"><a href="#cb10-462"></a>            <span class="dt">nchild1 =</span> <span class="kw">as_factor</span>(HHCHILDR),</span>
<span id="cb10-463"><a href="#cb10-463"></a>            <span class="dt">lifsta1 =</span> <span class="kw">as_factor</span>(MARITAL),</span>
<span id="cb10-464"><a href="#cb10-464"></a>            <span class="dt">urbru1 =</span> <span class="kw">as_factor</span>(URBRURAL)</span>
<span id="cb10-465"><a href="#cb10-465"></a>           )</span>
<span id="cb10-466"><a href="#cb10-466"></a></span>
<span id="cb10-467"><a href="#cb10-467"></a><span class="co"># Muuttujat Q1a1...urbru1 ovat apumuuttujia, joissa on periaatteessa kaikki SPSS-</span></span>
<span id="cb10-468"><a href="#cb10-468"></a><span class="co"># tiedostosta siirtyvä metatieto. Poikkeus on SPSS:n kolme tarkentavaa koodia</span></span>
<span id="cb10-469"><a href="#cb10-469"></a><span class="co"># puuttuvalle tiedolle, ne saisi mukaan read_spss - parametrin avulla (user_na=TRUE)</span></span>
<span id="cb10-470"><a href="#cb10-470"></a><span class="co">#</span></span>
<span id="cb10-471"><a href="#cb10-471"></a></span>
<span id="cb10-472"><a href="#cb10-472"></a><span class="co"># Tarkistusksia</span></span>
<span id="cb10-473"><a href="#cb10-473"></a><span class="co"># ISSP2012jh1d.dat %&gt;% summary()</span></span>
<span id="cb10-474"><a href="#cb10-474"></a></span>
<span id="cb10-475"><a href="#cb10-475"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-476"><a href="#cb10-476"></a><span class="co">#    select(Q1a1, Q1b1, Q1c1,Q1d1,Q1e1, Q2a1, Q2b1, Q3a1,Q3b1) %&gt;%</span></span>
<span id="cb10-477"><a href="#cb10-477"></a><span class="co">#    summary()</span></span>
<span id="cb10-478"><a href="#cb10-478"></a><span class="co">#</span></span>
<span id="cb10-479"><a href="#cb10-479"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-480"><a href="#cb10-480"></a><span class="co">#    select(edu1,msta1, sosta1, nchild1, lifsta1, urbru1) %&gt;%</span></span>
<span id="cb10-481"><a href="#cb10-481"></a><span class="co">#    summary()</span></span>
<span id="cb10-482"><a href="#cb10-482"></a></span>
<span id="cb10-483"><a href="#cb10-483"></a></span>
<span id="cb10-484"><a href="#cb10-484"></a><span class="co"># Substanssimuuttujat - ristiintaulukoinnit riittävät (6.2.20)</span></span>
<span id="cb10-485"><a href="#cb10-485"></a></span>
<span id="cb10-486"><a href="#cb10-486"></a><span class="co"># ISSP2012jh1d.dat$Q1a1 %&gt;% fct_count()</span></span>
<span id="cb10-487"><a href="#cb10-487"></a><span class="co"># ISSP2012jh1d.dat$Q1b1 %&gt;% fct_count()</span></span>
<span id="cb10-488"><a href="#cb10-488"></a><span class="co"># ISSP2012jh1d.dat$Q1c1 %&gt;% fct_count()</span></span>
<span id="cb10-489"><a href="#cb10-489"></a><span class="co"># ISSP2012jh1d.dat$Q1d1 %&gt;% fct_count()</span></span>
<span id="cb10-490"><a href="#cb10-490"></a><span class="co"># ISSP2012jh1d.dat$Q1e1 %&gt;% fct_count()</span></span>
<span id="cb10-491"><a href="#cb10-491"></a><span class="co"># ISSP2012jh1d.dat$Q2a1 %&gt;% fct_count()</span></span>
<span id="cb10-492"><a href="#cb10-492"></a><span class="co"># ISSP2012jh1d.dat$Q2b1 %&gt;% fct_count()</span></span>
<span id="cb10-493"><a href="#cb10-493"></a><span class="co"># ISSP2012jh1d.dat$Q3a1 %&gt;% fct_count()</span></span>
<span id="cb10-494"><a href="#cb10-494"></a><span class="co">#ISSP2012jh1d.dat$Q3b1 %&gt;% fct_count()</span></span>
<span id="cb10-495"><a href="#cb10-495"></a></span>
<span id="cb10-496"><a href="#cb10-496"></a><span class="co"># Taustamuuttujat - ristiintaulukoinnit riittävät (6.2.20)</span></span>
<span id="cb10-497"><a href="#cb10-497"></a></span>
<span id="cb10-498"><a href="#cb10-498"></a><span class="co"># ISSP2012jh1d.dat$edu1 %&gt;% fct_count()</span></span>
<span id="cb10-499"><a href="#cb10-499"></a><span class="co"># ISSP2012jh1d.dat$msta1 %&gt;% fct_count()</span></span>
<span id="cb10-500"><a href="#cb10-500"></a><span class="co"># ISSP2012jh1d.dat$sosta1 %&gt;% fct_count()</span></span>
<span id="cb10-501"><a href="#cb10-501"></a><span class="co"># ISSP2012jh1d.dat$nchild1 %&gt;% fct_count()</span></span>
<span id="cb10-502"><a href="#cb10-502"></a><span class="co"># ISSP2012jh1d.dat$lifsta1 %&gt;% fct_count()</span></span>
<span id="cb10-503"><a href="#cb10-503"></a><span class="co"># ISSP2012jh1d.dat$urbru1 %&gt;% fct_count()</span></span>
<span id="cb10-504"><a href="#cb10-504"></a></span>
<span id="cb10-505"><a href="#cb10-505"></a><span class="co"># Poistetaan tyhjät luokat muuttujista</span></span>
<span id="cb10-506"><a href="#cb10-506"></a></span>
<span id="cb10-507"><a href="#cb10-507"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb10-508"><a href="#cb10-508"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1a =</span> <span class="kw">fct_drop</span>(Q1a1),</span>
<span id="cb10-509"><a href="#cb10-509"></a>           <span class="dt">Q1b =</span> <span class="kw">fct_drop</span>(Q1b1),</span>
<span id="cb10-510"><a href="#cb10-510"></a>           <span class="dt">Q1c =</span> <span class="kw">fct_drop</span>(Q1c1),</span>
<span id="cb10-511"><a href="#cb10-511"></a>           <span class="dt">Q1d =</span> <span class="kw">fct_drop</span>(Q1d1),</span>
<span id="cb10-512"><a href="#cb10-512"></a>           <span class="dt">Q1e =</span> <span class="kw">fct_drop</span>(Q1e1),</span>
<span id="cb10-513"><a href="#cb10-513"></a>           <span class="dt">Q2a =</span> <span class="kw">fct_drop</span>(Q2a1),</span>
<span id="cb10-514"><a href="#cb10-514"></a>           <span class="dt">Q2b =</span> <span class="kw">fct_drop</span>(Q2b1),</span>
<span id="cb10-515"><a href="#cb10-515"></a>           <span class="dt">Q3a =</span> <span class="kw">fct_drop</span>(Q3a1),</span>
<span id="cb10-516"><a href="#cb10-516"></a>           <span class="dt">Q3b =</span> <span class="kw">fct_drop</span>(Q3b1),</span>
<span id="cb10-517"><a href="#cb10-517"></a>           <span class="dt">edu =</span> <span class="kw">fct_drop</span>(edu1),</span>
<span id="cb10-518"><a href="#cb10-518"></a>           <span class="dt">msta =</span> <span class="kw">fct_drop</span>(msta1),</span>
<span id="cb10-519"><a href="#cb10-519"></a>           <span class="dt">sosta =</span> <span class="kw">fct_drop</span>(sosta1),</span>
<span id="cb10-520"><a href="#cb10-520"></a>           <span class="dt">nchild =</span> <span class="kw">fct_drop</span>(nchild1),</span>
<span id="cb10-521"><a href="#cb10-521"></a>           <span class="dt">lifsta =</span> <span class="kw">fct_drop</span>(lifsta1),</span>
<span id="cb10-522"><a href="#cb10-522"></a>           <span class="dt">urbru =</span> <span class="kw">fct_drop</span>(urbru1)</span>
<span id="cb10-523"><a href="#cb10-523"></a></span>
<span id="cb10-524"><a href="#cb10-524"></a>    )</span>
<span id="cb10-525"><a href="#cb10-525"></a><span class="co"># Tarkistuksia 1</span></span>
<span id="cb10-526"><a href="#cb10-526"></a></span>
<span id="cb10-527"><a href="#cb10-527"></a><span class="co"># ISSP2012jh1d.dat %&gt;% summary()</span></span>
<span id="cb10-528"><a href="#cb10-528"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-529"><a href="#cb10-529"></a><span class="co">#    select(Q1a, Q1b, Q1c, Q1d, Q1e,Q2a,Q2b,Q3a, Q3b) %&gt;%</span></span>
<span id="cb10-530"><a href="#cb10-530"></a><span class="co">#    str()</span></span>
<span id="cb10-531"><a href="#cb10-531"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-532"><a href="#cb10-532"></a><span class="co">#    select(Q1a1, Q1b1, Q1c1, Q1d1, Q1e1,Q2a1,Q2b1,Q3a1, Q3b1) %&gt;%</span></span>
<span id="cb10-533"><a href="#cb10-533"></a><span class="co">#    str()</span></span>
<span id="cb10-534"><a href="#cb10-534"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-535"><a href="#cb10-535"></a><span class="co">#    select(edu, msta, sosta, nchild,lifsta, urbru) %&gt;%</span></span>
<span id="cb10-536"><a href="#cb10-536"></a><span class="co">#    str()</span></span>
<span id="cb10-537"><a href="#cb10-537"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-538"><a href="#cb10-538"></a><span class="co">#    select(edu1, msta1, sosta1, nchild1,lifsta1, urbru1) %&gt;%</span></span>
<span id="cb10-539"><a href="#cb10-539"></a><span class="co">#    str()</span></span>
<span id="cb10-540"><a href="#cb10-540"></a></span>
<span id="cb10-541"><a href="#cb10-541"></a><span class="co"># Tarkistuksia 2 - ristiintaulukointeja</span></span>
<span id="cb10-542"><a href="#cb10-542"></a><span class="co"># Substanssimuuttujat</span></span>
<span id="cb10-543"><a href="#cb10-543"></a></span>
<span id="cb10-544"><a href="#cb10-544"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1a,Q1a1)</span></span>
<span id="cb10-545"><a href="#cb10-545"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1b,Q1b1)</span></span>
<span id="cb10-546"><a href="#cb10-546"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1c,Q1c1)</span></span>
<span id="cb10-547"><a href="#cb10-547"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1d,Q1d1)</span></span>
<span id="cb10-548"><a href="#cb10-548"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1e,Q1e1)</span></span>
<span id="cb10-549"><a href="#cb10-549"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q2a,Q2a1)</span></span>
<span id="cb10-550"><a href="#cb10-550"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q2b,Q2b1)</span></span>
<span id="cb10-551"><a href="#cb10-551"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q3a,Q3a1)</span></span>
<span id="cb10-552"><a href="#cb10-552"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q3b,Q3b1)</span></span>
<span id="cb10-553"><a href="#cb10-553"></a></span>
<span id="cb10-554"><a href="#cb10-554"></a><span class="co"># Taustamuuttujat</span></span>
<span id="cb10-555"><a href="#cb10-555"></a></span>
<span id="cb10-556"><a href="#cb10-556"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(edu,edu1)</span></span>
<span id="cb10-557"><a href="#cb10-557"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(msta,msta1)</span></span>
<span id="cb10-558"><a href="#cb10-558"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(sosta,sosta1)</span></span>
<span id="cb10-559"><a href="#cb10-559"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(nchild,nchild1)</span></span>
<span id="cb10-560"><a href="#cb10-560"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(lifsta,lifsta1)</span></span>
<span id="cb10-561"><a href="#cb10-561"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(urbru,urbru1)</span></span>
<span id="cb10-562"><a href="#cb10-562"></a></span>
<span id="cb10-563"><a href="#cb10-563"></a><span class="co"># Uusi muuttuja, jossa NA-arvot ovat mukana muuttujan uutena luokkana. Muuttujat</span></span>
<span id="cb10-564"><a href="#cb10-564"></a><span class="co"># nimetään Q1a -&gt; Q1am.</span></span>
<span id="cb10-565"><a href="#cb10-565"></a></span>
<span id="cb10-566"><a href="#cb10-566"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb10-567"><a href="#cb10-567"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1am =</span> <span class="kw">fct_explicit_na</span>(Q1a, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-568"><a href="#cb10-568"></a>           <span class="dt">Q1bm =</span> <span class="kw">fct_explicit_na</span>(Q1b, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-569"><a href="#cb10-569"></a>           <span class="dt">Q1cm =</span> <span class="kw">fct_explicit_na</span>(Q1c, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-570"><a href="#cb10-570"></a>           <span class="dt">Q1dm =</span> <span class="kw">fct_explicit_na</span>(Q1d, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-571"><a href="#cb10-571"></a>           <span class="dt">Q1em =</span> <span class="kw">fct_explicit_na</span>(Q1e, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-572"><a href="#cb10-572"></a>           <span class="dt">Q2am =</span> <span class="kw">fct_explicit_na</span>(Q2a, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-573"><a href="#cb10-573"></a>           <span class="dt">Q2bm =</span> <span class="kw">fct_explicit_na</span>(Q2b, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-574"><a href="#cb10-574"></a>           <span class="dt">Q3am =</span> <span class="kw">fct_explicit_na</span>(Q3a, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-575"><a href="#cb10-575"></a>           <span class="dt">Q3bm =</span> <span class="kw">fct_explicit_na</span>(Q3b, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-576"><a href="#cb10-576"></a>           <span class="dt">edum =</span> <span class="kw">fct_explicit_na</span>(edu, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-577"><a href="#cb10-577"></a>           <span class="dt">mstam =</span> <span class="kw">fct_explicit_na</span>(msta, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-578"><a href="#cb10-578"></a>           <span class="dt">sostam =</span> <span class="kw">fct_explicit_na</span>(sosta, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-579"><a href="#cb10-579"></a>           <span class="dt">nchildm =</span> <span class="kw">fct_explicit_na</span>(nchild, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-580"><a href="#cb10-580"></a>           <span class="dt">lifstam =</span> <span class="kw">fct_explicit_na</span>(lifsta, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-581"><a href="#cb10-581"></a>           <span class="dt">urbrum =</span> <span class="kw">fct_explicit_na</span>(urbru, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb10-582"><a href="#cb10-582"></a>           )</span>
<span id="cb10-583"><a href="#cb10-583"></a><span class="co"># Tarkistuksia 3</span></span>
<span id="cb10-584"><a href="#cb10-584"></a></span>
<span id="cb10-585"><a href="#cb10-585"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-586"><a href="#cb10-586"></a><span class="co">#    select(Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm) %&gt;%</span></span>
<span id="cb10-587"><a href="#cb10-587"></a><span class="co">#    summary()</span></span>
<span id="cb10-588"><a href="#cb10-588"></a><span class="co">#</span></span>
<span id="cb10-589"><a href="#cb10-589"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-590"><a href="#cb10-590"></a><span class="co">#    select(edum,mstam, sostam,nchildm,lifstam, urbrum) %&gt;%</span></span>
<span id="cb10-591"><a href="#cb10-591"></a><span class="co">#    summary()</span></span>
<span id="cb10-592"><a href="#cb10-592"></a><span class="co">#</span></span>
<span id="cb10-593"><a href="#cb10-593"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-594"><a href="#cb10-594"></a><span class="co">#    select(Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm) %&gt;%</span></span>
<span id="cb10-595"><a href="#cb10-595"></a><span class="co">#    str()</span></span>
<span id="cb10-596"><a href="#cb10-596"></a><span class="co">#</span></span>
<span id="cb10-597"><a href="#cb10-597"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-598"><a href="#cb10-598"></a><span class="co">#    select(edum,mstam, sostam,nchildm,lifstam, urbrum) %&gt;%</span></span>
<span id="cb10-599"><a href="#cb10-599"></a><span class="co">#    str()</span></span>
<span id="cb10-600"><a href="#cb10-600"></a></span>
<span id="cb10-601"><a href="#cb10-601"></a><span class="co"># Taustamuuttuja, puuttuva tieto mukana - ristiintaulkointeja</span></span>
<span id="cb10-602"><a href="#cb10-602"></a></span>
<span id="cb10-603"><a href="#cb10-603"></a><span class="co"># ISSP2012jh1d.dat$edum %&gt;% fct_count()</span></span>
<span id="cb10-604"><a href="#cb10-604"></a><span class="co"># ISSP2012jh1d.dat$mstam %&gt;% fct_count()</span></span>
<span id="cb10-605"><a href="#cb10-605"></a><span class="co"># ISSP2012jh1d.dat$sostam %&gt;% fct_count()</span></span>
<span id="cb10-606"><a href="#cb10-606"></a><span class="co"># ISSP2012jh1d.dat$nchildm %&gt;% fct_count()</span></span>
<span id="cb10-607"><a href="#cb10-607"></a><span class="co"># ISSP2012jh1d.dat$lifstam %&gt;% fct_count()</span></span>
<span id="cb10-608"><a href="#cb10-608"></a><span class="co"># ISSP2012jh1d.dat$urbrum %&gt;% fct_count()</span></span>
<span id="cb10-609"><a href="#cb10-609"></a></span>
<span id="cb10-610"><a href="#cb10-610"></a><span class="co"># Substanssimuuttujat, puuttuva tieto mukana  - ristiintaulkointeja</span></span>
<span id="cb10-611"><a href="#cb10-611"></a></span>
<span id="cb10-612"><a href="#cb10-612"></a><span class="co"># ISSP2012jh1d.dat$Q1am %&gt;% fct_count()</span></span>
<span id="cb10-613"><a href="#cb10-613"></a><span class="co"># ISSP2012jh1d.dat$Q1bm %&gt;% fct_count()</span></span>
<span id="cb10-614"><a href="#cb10-614"></a><span class="co"># ISSP2012jh1d.dat$Q1cm %&gt;% fct_count()</span></span>
<span id="cb10-615"><a href="#cb10-615"></a><span class="co"># ISSP2012jh1d.dat$Q1dm %&gt;% fct_count()</span></span>
<span id="cb10-616"><a href="#cb10-616"></a><span class="co"># ISSP2012jh1d.dat$Q1em %&gt;% fct_count()</span></span>
<span id="cb10-617"><a href="#cb10-617"></a><span class="co"># ISSP2012jh1d.dat$Q2am %&gt;% fct_count()</span></span>
<span id="cb10-618"><a href="#cb10-618"></a><span class="co"># ISSP2012jh1d.dat$Q2bm %&gt;% fct_count()</span></span>
<span id="cb10-619"><a href="#cb10-619"></a><span class="co"># ISSP2012jh1d.dat$Q3am %&gt;% fct_count()</span></span>
<span id="cb10-620"><a href="#cb10-620"></a><span class="co"># ISSP2012jh1d.dat$Q3bm %&gt;% fct_count()</span></span>
<span id="cb10-621"><a href="#cb10-621"></a></span>
<span id="cb10-622"><a href="#cb10-622"></a><span class="co"># Vaihe 2.4.1</span></span>
<span id="cb10-623"><a href="#cb10-623"></a></span>
<span id="cb10-624"><a href="#cb10-624"></a><span class="co"># Q1a - Q1e,Q2a, Q2b  Viisi vastausvaihtoehtoa - ei eksplisiittistä NA-tietoa(&quot;missing&quot;)</span></span>
<span id="cb10-625"><a href="#cb10-625"></a><span class="co"># Q3a - Q3b  kolme vastausvaihtoehtoa</span></span>
<span id="cb10-626"><a href="#cb10-626"></a></span>
<span id="cb10-627"><a href="#cb10-627"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb10-628"><a href="#cb10-628"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1a =</span> <span class="kw">fct_recode</span>(Q1a,</span>
<span id="cb10-629"><a href="#cb10-629"></a>                        <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-630"><a href="#cb10-630"></a>                        <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-631"><a href="#cb10-631"></a>                        <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-632"><a href="#cb10-632"></a>                        <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-633"><a href="#cb10-633"></a>                        <span class="st">&quot;E&quot;</span>=<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb10-634"><a href="#cb10-634"></a>            <span class="dt">Q1b =</span> <span class="kw">fct_recode</span>(Q1b,</span>
<span id="cb10-635"><a href="#cb10-635"></a>                      <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-636"><a href="#cb10-636"></a>                      <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-637"><a href="#cb10-637"></a>                      <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-638"><a href="#cb10-638"></a>                      <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-639"><a href="#cb10-639"></a>                      <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb10-640"><a href="#cb10-640"></a>           <span class="dt">Q1c =</span> <span class="kw">fct_recode</span>(Q1c,</span>
<span id="cb10-641"><a href="#cb10-641"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-642"><a href="#cb10-642"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-643"><a href="#cb10-643"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-644"><a href="#cb10-644"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-645"><a href="#cb10-645"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb10-646"><a href="#cb10-646"></a>           <span class="dt">Q1d =</span> <span class="kw">fct_recode</span>(Q1d,</span>
<span id="cb10-647"><a href="#cb10-647"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-648"><a href="#cb10-648"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-649"><a href="#cb10-649"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-650"><a href="#cb10-650"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-651"><a href="#cb10-651"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb10-652"><a href="#cb10-652"></a>           <span class="dt">Q1e =</span> <span class="kw">fct_recode</span>(Q1e,</span>
<span id="cb10-653"><a href="#cb10-653"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-654"><a href="#cb10-654"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-655"><a href="#cb10-655"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-656"><a href="#cb10-656"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-657"><a href="#cb10-657"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb10-658"><a href="#cb10-658"></a>          <span class="dt">Q2a =</span> <span class="kw">fct_recode</span>(Q2a,</span>
<span id="cb10-659"><a href="#cb10-659"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-660"><a href="#cb10-660"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-661"><a href="#cb10-661"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-662"><a href="#cb10-662"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-663"><a href="#cb10-663"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span> ),</span>
<span id="cb10-664"><a href="#cb10-664"></a>          <span class="dt">Q2b =</span> <span class="kw">fct_recode</span>(Q2b,</span>
<span id="cb10-665"><a href="#cb10-665"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-666"><a href="#cb10-666"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-667"><a href="#cb10-667"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-668"><a href="#cb10-668"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-669"><a href="#cb10-669"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb10-670"><a href="#cb10-670"></a>          <span class="dt">Q3a =</span> <span class="kw">fct_recode</span>(Q3a,</span>
<span id="cb10-671"><a href="#cb10-671"></a>                          <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb10-672"><a href="#cb10-672"></a>                          <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb10-673"><a href="#cb10-673"></a>                          <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span> ),</span>
<span id="cb10-674"><a href="#cb10-674"></a>          <span class="dt">Q3b =</span> <span class="kw">fct_recode</span>(Q3b,</span>
<span id="cb10-675"><a href="#cb10-675"></a>                           <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb10-676"><a href="#cb10-676"></a>                           <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb10-677"><a href="#cb10-677"></a>                           <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span> )</span>
<span id="cb10-678"><a href="#cb10-678"></a>                        )</span>
<span id="cb10-679"><a href="#cb10-679"></a></span>
<span id="cb10-680"><a href="#cb10-680"></a></span>
<span id="cb10-681"><a href="#cb10-681"></a><span class="co"># Tarkistuksia 1</span></span>
<span id="cb10-682"><a href="#cb10-682"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-683"><a href="#cb10-683"></a><span class="co">#    select(Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b, Q3a, Q3b) %&gt;%</span></span>
<span id="cb10-684"><a href="#cb10-684"></a><span class="co">#    summary()</span></span>
<span id="cb10-685"><a href="#cb10-685"></a></span>
<span id="cb10-686"><a href="#cb10-686"></a></span>
<span id="cb10-687"><a href="#cb10-687"></a><span class="co"># Vaihe 2.4.2 - muuttujassa eksplisiittinen NA-tieto</span></span>
<span id="cb10-688"><a href="#cb10-688"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb10-689"><a href="#cb10-689"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1am =</span> <span class="kw">fct_recode</span>(Q1am,</span>
<span id="cb10-690"><a href="#cb10-690"></a>                            <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-691"><a href="#cb10-691"></a>                            <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-692"><a href="#cb10-692"></a>                            <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-693"><a href="#cb10-693"></a>                            <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-694"><a href="#cb10-694"></a>                            <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb10-695"><a href="#cb10-695"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb10-696"><a href="#cb10-696"></a>           <span class="dt">Q1bm =</span> <span class="kw">fct_recode</span>(Q1bm,</span>
<span id="cb10-697"><a href="#cb10-697"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-698"><a href="#cb10-698"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-699"><a href="#cb10-699"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-700"><a href="#cb10-700"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-701"><a href="#cb10-701"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb10-702"><a href="#cb10-702"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb10-703"><a href="#cb10-703"></a>           <span class="dt">Q1cm =</span> <span class="kw">fct_recode</span>(Q1cm,</span>
<span id="cb10-704"><a href="#cb10-704"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-705"><a href="#cb10-705"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-706"><a href="#cb10-706"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-707"><a href="#cb10-707"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-708"><a href="#cb10-708"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb10-709"><a href="#cb10-709"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb10-710"><a href="#cb10-710"></a>           <span class="dt">Q1dm =</span> <span class="kw">fct_recode</span>(Q1dm,</span>
<span id="cb10-711"><a href="#cb10-711"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-712"><a href="#cb10-712"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-713"><a href="#cb10-713"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-714"><a href="#cb10-714"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-715"><a href="#cb10-715"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb10-716"><a href="#cb10-716"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb10-717"><a href="#cb10-717"></a>           <span class="dt">Q1em =</span> <span class="kw">fct_recode</span>(Q1em,</span>
<span id="cb10-718"><a href="#cb10-718"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-719"><a href="#cb10-719"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-720"><a href="#cb10-720"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-721"><a href="#cb10-721"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-722"><a href="#cb10-722"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb10-723"><a href="#cb10-723"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb10-724"><a href="#cb10-724"></a>           <span class="dt">Q2am =</span> <span class="kw">fct_recode</span>(Q2am,</span>
<span id="cb10-725"><a href="#cb10-725"></a>                            <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-726"><a href="#cb10-726"></a>                            <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-727"><a href="#cb10-727"></a>                            <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-728"><a href="#cb10-728"></a>                            <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-729"><a href="#cb10-729"></a>                            <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb10-730"><a href="#cb10-730"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb10-731"><a href="#cb10-731"></a>           <span class="dt">Q2bm =</span> <span class="kw">fct_recode</span>(Q2bm,</span>
<span id="cb10-732"><a href="#cb10-732"></a>                            <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb10-733"><a href="#cb10-733"></a>                            <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb10-734"><a href="#cb10-734"></a>                            <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb10-735"><a href="#cb10-735"></a>                            <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb10-736"><a href="#cb10-736"></a>                            <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb10-737"><a href="#cb10-737"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb10-738"><a href="#cb10-738"></a>           <span class="dt">Q3am =</span> <span class="kw">fct_recode</span>(Q3am,</span>
<span id="cb10-739"><a href="#cb10-739"></a>                            <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb10-740"><a href="#cb10-740"></a>                            <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb10-741"><a href="#cb10-741"></a>                            <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span>,</span>
<span id="cb10-742"><a href="#cb10-742"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb10-743"><a href="#cb10-743"></a>           <span class="dt">Q3bm =</span> <span class="kw">fct_recode</span>(Q3bm,</span>
<span id="cb10-744"><a href="#cb10-744"></a>                            <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb10-745"><a href="#cb10-745"></a>                            <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb10-746"><a href="#cb10-746"></a>                            <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span>,</span>
<span id="cb10-747"><a href="#cb10-747"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>)</span>
<span id="cb10-748"><a href="#cb10-748"></a>               )</span>
<span id="cb10-749"><a href="#cb10-749"></a></span>
<span id="cb10-750"><a href="#cb10-750"></a><span class="co"># Tarkistuksia 4</span></span>
<span id="cb10-751"><a href="#cb10-751"></a></span>
<span id="cb10-752"><a href="#cb10-752"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-753"><a href="#cb10-753"></a><span class="co">#    select(Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm) %&gt;%</span></span>
<span id="cb10-754"><a href="#cb10-754"></a><span class="co">#    summary()</span></span>
<span id="cb10-755"><a href="#cb10-755"></a></span>
<span id="cb10-756"><a href="#cb10-756"></a><span class="co"># Tarkistuksia 5</span></span>
<span id="cb10-757"><a href="#cb10-757"></a></span>
<span id="cb10-758"><a href="#cb10-758"></a><span class="co"># Substanssimuuttuja</span></span>
<span id="cb10-759"><a href="#cb10-759"></a></span>
<span id="cb10-760"><a href="#cb10-760"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-761"><a href="#cb10-761"></a><span class="co">#    tableX(Q1a,Q1am)</span></span>
<span id="cb10-762"><a href="#cb10-762"></a><span class="co">#</span></span>
<span id="cb10-763"><a href="#cb10-763"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-764"><a href="#cb10-764"></a><span class="co">#    tableX(Q1b,Q1bm)</span></span>
<span id="cb10-765"><a href="#cb10-765"></a><span class="co">#</span></span>
<span id="cb10-766"><a href="#cb10-766"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-767"><a href="#cb10-767"></a><span class="co">#    tableX(Q1c,Q1cm)</span></span>
<span id="cb10-768"><a href="#cb10-768"></a><span class="co">#</span></span>
<span id="cb10-769"><a href="#cb10-769"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-770"><a href="#cb10-770"></a><span class="co">#    tableX(Q1d,Q1dm)</span></span>
<span id="cb10-771"><a href="#cb10-771"></a><span class="co">#</span></span>
<span id="cb10-772"><a href="#cb10-772"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-773"><a href="#cb10-773"></a><span class="co">#    tableX(Q1e,Q1em)</span></span>
<span id="cb10-774"><a href="#cb10-774"></a><span class="co">#</span></span>
<span id="cb10-775"><a href="#cb10-775"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-776"><a href="#cb10-776"></a><span class="co">#    tableX(Q2a,Q2am)</span></span>
<span id="cb10-777"><a href="#cb10-777"></a><span class="co">#</span></span>
<span id="cb10-778"><a href="#cb10-778"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-779"><a href="#cb10-779"></a><span class="co">#    tableX(Q2b,Q2bm)</span></span>
<span id="cb10-780"><a href="#cb10-780"></a><span class="co">#</span></span>
<span id="cb10-781"><a href="#cb10-781"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-782"><a href="#cb10-782"></a><span class="co">#    tableX(Q3a,Q3am)</span></span>
<span id="cb10-783"><a href="#cb10-783"></a><span class="co">#</span></span>
<span id="cb10-784"><a href="#cb10-784"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-785"><a href="#cb10-785"></a><span class="co">#    tableX(Q3b,Q3bm)</span></span>
<span id="cb10-786"><a href="#cb10-786"></a><span class="co">#</span></span>
<span id="cb10-787"><a href="#cb10-787"></a><span class="co"># ISSP2012jh1d.dat %&gt;% </span></span>
<span id="cb10-788"><a href="#cb10-788"></a><span class="co">#    tableX(Q3am,Q3a)</span></span>
<span id="cb10-789"><a href="#cb10-789"></a><span class="co">#</span></span>
<span id="cb10-790"><a href="#cb10-790"></a><span class="co"># ISSP2012jh1d.dat$Q3a %&gt;% levels()</span></span>
<span id="cb10-791"><a href="#cb10-791"></a><span class="co"># ISSP2012jh1d.dat$Q3am %&gt;% levels()</span></span>
<span id="cb10-792"><a href="#cb10-792"></a></span>
<span id="cb10-793"><a href="#cb10-793"></a><span class="co"># Taustamuuttujat - ristiintaulukointeja</span></span>
<span id="cb10-794"><a href="#cb10-794"></a></span>
<span id="cb10-795"><a href="#cb10-795"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-796"><a href="#cb10-796"></a><span class="co">#    tableX(edu, edum)</span></span>
<span id="cb10-797"><a href="#cb10-797"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-798"><a href="#cb10-798"></a><span class="co">#    tableX(msta, mstam)</span></span>
<span id="cb10-799"><a href="#cb10-799"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-800"><a href="#cb10-800"></a><span class="co">#    tableX(sosta, sostam)</span></span>
<span id="cb10-801"><a href="#cb10-801"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-802"><a href="#cb10-802"></a><span class="co">#    tableX(nchild,nchildm)</span></span>
<span id="cb10-803"><a href="#cb10-803"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-804"><a href="#cb10-804"></a><span class="co">#    tableX(lifsta, lifstam)</span></span>
<span id="cb10-805"><a href="#cb10-805"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb10-806"><a href="#cb10-806"></a><span class="co">#    tableX(urbru, urbrum)</span></span>
<span id="cb10-807"><a href="#cb10-807"></a></span>
<span id="cb10-808"><a href="#cb10-808"></a><span class="co"># (16.9.2020) Testaus uusille muuttujille</span></span>
<span id="cb10-809"><a href="#cb10-809"></a><span class="co"># Koodilohkoissa on jo testattu taulukoimalla muuttujia. Tässä varmistetaan, että</span></span>
<span id="cb10-810"><a href="#cb10-810"></a><span class="co"># muuttujat pysyvät sellaisina millaisiksi ne on luotu.</span></span>
<span id="cb10-811"><a href="#cb10-811"></a></span>
<span id="cb10-812"><a href="#cb10-812"></a><span class="co"># ika - onpas hankala testata !</span></span>
<span id="cb10-813"><a href="#cb10-813"></a><span class="co"># Min. 1st Qu.  Median    Mean 3rd Qu.    Max.</span></span>
<span id="cb10-814"><a href="#cb10-814"></a><span class="co"># 15.00   36.00   50.00   49.52   63.00  102.00</span></span>
<span id="cb10-815"><a href="#cb10-815"></a><span class="co"># ikatest &lt;- ISSP2012jh1d.dat$ika %&gt;% summary()</span></span>
<span id="cb10-816"><a href="#cb10-816"></a><span class="co">#   ikatest &lt;- ikatest[2,]</span></span>
<span id="cb10-817"><a href="#cb10-817"></a><span class="co">#validate_that(are_equal(ikatest, c(15, 36, 50, 49.5, 63, 102)))</span></span>
<span id="cb10-818"><a href="#cb10-818"></a><span class="co">#str(ISSP2012jh1d.dat)</span></span>
<span id="cb10-819"><a href="#cb10-819"></a><span class="co">#ISSP2012jh1d.dat %&gt;% </span></span>
<span id="cb10-820"><a href="#cb10-820"></a></span>
<span id="cb10-821"><a href="#cb10-821"></a><span class="co"># substanssimuuttujat 1</span></span>
<span id="cb10-822"><a href="#cb10-822"></a><span class="co"># Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b, Q3a, Q3b (r. 423-&gt;)</span></span>
<span id="cb10-823"><a href="#cb10-823"></a></span>
<span id="cb10-824"><a href="#cb10-824"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1a)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb10-825"><a href="#cb10-825"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1a),</span>
<span id="cb10-826"><a href="#cb10-826"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb10-827"><a href="#cb10-827"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1b)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb10-828"><a href="#cb10-828"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1b),</span>
<span id="cb10-829"><a href="#cb10-829"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb10-830"><a href="#cb10-830"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1c)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb10-831"><a href="#cb10-831"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1c),</span>
<span id="cb10-832"><a href="#cb10-832"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb10-833"><a href="#cb10-833"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1d)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb10-834"><a href="#cb10-834"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1d),</span>
<span id="cb10-835"><a href="#cb10-835"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb10-836"><a href="#cb10-836"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1e)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb10-837"><a href="#cb10-837"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1e),</span>
<span id="cb10-838"><a href="#cb10-838"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb10-839"><a href="#cb10-839"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2a)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb10-840"><a href="#cb10-840"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2a),</span>
<span id="cb10-841"><a href="#cb10-841"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb10-842"><a href="#cb10-842"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2b)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb10-843"><a href="#cb10-843"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2b),</span>
<span id="cb10-844"><a href="#cb10-844"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb10-845"><a href="#cb10-845"></a></span>
<span id="cb10-846"><a href="#cb10-846"></a><span class="co"># substanssimuuttujat 2</span></span>
<span id="cb10-847"><a href="#cb10-847"></a></span>
<span id="cb10-848"><a href="#cb10-848"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3a)) <span class="op">==</span><span class="st"> </span><span class="dv">3</span>)</span>
<span id="cb10-849"><a href="#cb10-849"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3a),</span>
<span id="cb10-850"><a href="#cb10-850"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>)))</span>
<span id="cb10-851"><a href="#cb10-851"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3b)) <span class="op">==</span><span class="st"> </span><span class="dv">3</span>)</span>
<span id="cb10-852"><a href="#cb10-852"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3b),</span>
<span id="cb10-853"><a href="#cb10-853"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>)))</span>
<span id="cb10-854"><a href="#cb10-854"></a></span>
<span id="cb10-855"><a href="#cb10-855"></a></span>
<span id="cb10-856"><a href="#cb10-856"></a></span>
<span id="cb10-857"><a href="#cb10-857"></a><span class="co"># substanssimuuttujat, puuttuva tieto muuttujan arvona</span></span>
<span id="cb10-858"><a href="#cb10-858"></a><span class="co"># Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm</span></span>
<span id="cb10-859"><a href="#cb10-859"></a></span>
<span id="cb10-860"><a href="#cb10-860"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1am)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb10-861"><a href="#cb10-861"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1am),</span>
<span id="cb10-862"><a href="#cb10-862"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb10-863"><a href="#cb10-863"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1bm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb10-864"><a href="#cb10-864"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1bm),</span>
<span id="cb10-865"><a href="#cb10-865"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb10-866"><a href="#cb10-866"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1cm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb10-867"><a href="#cb10-867"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1cm),</span>
<span id="cb10-868"><a href="#cb10-868"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb10-869"><a href="#cb10-869"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1dm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb10-870"><a href="#cb10-870"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1dm),</span>
<span id="cb10-871"><a href="#cb10-871"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb10-872"><a href="#cb10-872"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1em)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb10-873"><a href="#cb10-873"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1em),</span>
<span id="cb10-874"><a href="#cb10-874"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb10-875"><a href="#cb10-875"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2am)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb10-876"><a href="#cb10-876"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2am),</span>
<span id="cb10-877"><a href="#cb10-877"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb10-878"><a href="#cb10-878"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2bm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb10-879"><a href="#cb10-879"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2bm),</span>
<span id="cb10-880"><a href="#cb10-880"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb10-881"><a href="#cb10-881"></a></span>
<span id="cb10-882"><a href="#cb10-882"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3am)) <span class="op">==</span><span class="st"> </span><span class="dv">4</span>)</span>
<span id="cb10-883"><a href="#cb10-883"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3am),</span>
<span id="cb10-884"><a href="#cb10-884"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb10-885"><a href="#cb10-885"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3bm)) <span class="op">==</span><span class="st"> </span><span class="dv">4</span>)</span>
<span id="cb10-886"><a href="#cb10-886"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3bm),</span>
<span id="cb10-887"><a href="#cb10-887"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb10-888"><a href="#cb10-888"></a></span>
<span id="cb10-889"><a href="#cb10-889"></a><span class="co"># taustamuuttujat puuttuvilla tiedoilla ja ilman</span></span>
<span id="cb10-890"><a href="#cb10-890"></a><span class="co"># testataan vain tasojen määrä, ei labeleita jotka ovat </span></span>
<span id="cb10-891"><a href="#cb10-891"></a><span class="co"># alkuperäisestä datasta.</span></span>
<span id="cb10-892"><a href="#cb10-892"></a></span>
<span id="cb10-893"><a href="#cb10-893"></a><span class="co"># edu, edum Huom! Koulutustasoluokitus alkuperäisessä</span></span>
<span id="cb10-894"><a href="#cb10-894"></a><span class="co"># datassa 0-6 (ei muodollista koulusta - korkeampi kolmas aste (maisteri, tohtori)</span></span>
<span id="cb10-895"><a href="#cb10-895"></a><span class="co"># R-faktorissa 1-7</span></span>
<span id="cb10-896"><a href="#cb10-896"></a></span>
<span id="cb10-897"><a href="#cb10-897"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>edu)) <span class="op">==</span><span class="st"> </span><span class="dv">7</span>)</span>
<span id="cb10-898"><a href="#cb10-898"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>edum)) <span class="op">==</span><span class="st"> </span><span class="dv">8</span>)</span>
<span id="cb10-899"><a href="#cb10-899"></a></span>
<span id="cb10-900"><a href="#cb10-900"></a><span class="co"># msta, mstam</span></span>
<span id="cb10-901"><a href="#cb10-901"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>msta)) <span class="op">==</span><span class="st"> </span><span class="dv">9</span>)</span>
<span id="cb10-902"><a href="#cb10-902"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>mstam)) <span class="op">==</span><span class="st"> </span><span class="dv">10</span>)</span>
<span id="cb10-903"><a href="#cb10-903"></a></span>
<span id="cb10-904"><a href="#cb10-904"></a><span class="co"># sosta, sostam</span></span>
<span id="cb10-905"><a href="#cb10-905"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>sosta)) <span class="op">==</span><span class="st"> </span><span class="dv">10</span>)</span>
<span id="cb10-906"><a href="#cb10-906"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>sostam)) <span class="op">==</span><span class="st"> </span><span class="dv">11</span>)</span>
<span id="cb10-907"><a href="#cb10-907"></a></span>
<span id="cb10-908"><a href="#cb10-908"></a><span class="co"># nchild, ncildm</span></span>
<span id="cb10-909"><a href="#cb10-909"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>nchild)) <span class="op">==</span><span class="st"> </span><span class="dv">11</span>)</span>
<span id="cb10-910"><a href="#cb10-910"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>nchildm)) <span class="op">==</span><span class="st"> </span><span class="dv">12</span>)</span>
<span id="cb10-911"><a href="#cb10-911"></a></span>
<span id="cb10-912"><a href="#cb10-912"></a><span class="co"># lifsta, lifstam</span></span>
<span id="cb10-913"><a href="#cb10-913"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>lifsta)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb10-914"><a href="#cb10-914"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>lifstam)) <span class="op">==</span><span class="st"> </span><span class="dv">7</span>)</span>
<span id="cb10-915"><a href="#cb10-915"></a></span>
<span id="cb10-916"><a href="#cb10-916"></a><span class="co"># urbru, urbrum</span></span>
<span id="cb10-917"><a href="#cb10-917"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>urbru)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb10-918"><a href="#cb10-918"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>urbrum)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb10-919"><a href="#cb10-919"></a></span>
<span id="cb10-920"><a href="#cb10-920"></a></span>
<span id="cb10-921"><a href="#cb10-921"></a><span class="co"># Muuttuja taulukkona - karkea tapa</span></span>
<span id="cb10-922"><a href="#cb10-922"></a><span class="co"># HUOM! Taulkot ovat hankalia, kun tulostus halutaan pdf- ja html- formaattiin</span></span>
<span id="cb10-923"><a href="#cb10-923"></a><span class="co"># Kysymyste pitkät versiot on siksi esitetty suomenkielisen lomakkeen kuvana.</span></span>
<span id="cb10-924"><a href="#cb10-924"></a></span>
<span id="cb10-925"><a href="#cb10-925"></a>tabVarnames &lt;-<span class="st"> </span><span class="kw">c</span>(substvars1,bgvars1) <span class="co"># muuttujanimet muuttujille</span></span>
<span id="cb10-926"><a href="#cb10-926"></a></span>
<span id="cb10-927"><a href="#cb10-927"></a><span class="co"># Kysymysten lyhyet versiot englanniksi</span></span>
<span id="cb10-928"><a href="#cb10-928"></a>tabVarDesc &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Q1a Working mother can have warm relation with child &quot;</span>,</span>
<span id="cb10-929"><a href="#cb10-929"></a>                <span class="st">&quot;Q1b Pre-school child suffers through working mother&quot;</span>,</span>
<span id="cb10-930"><a href="#cb10-930"></a>                <span class="st">&quot;Q1c Family life suffers through working mother&quot;</span>,</span>
<span id="cb10-931"><a href="#cb10-931"></a>                <span class="st">&quot;Q1d Women’s preference: home and children&quot;</span>,</span>
<span id="cb10-932"><a href="#cb10-932"></a>                <span class="st">&quot;Q1e Being housewife is satisfying&quot;</span>,</span>
<span id="cb10-933"><a href="#cb10-933"></a>                <span class="st">&quot;Q2a Both should contribute to household income&quot;</span>,</span>
<span id="cb10-934"><a href="#cb10-934"></a>                <span class="st">&quot;Q2b Men’s job is earn money, women’s job household&quot;</span>,</span>
<span id="cb10-935"><a href="#cb10-935"></a>                <span class="st">&quot;Q3a Should women work: Child under school age&quot;</span>,</span>
<span id="cb10-936"><a href="#cb10-936"></a>                <span class="st">&quot;Q3b Should women work: Youngest kid at school&quot;</span>,</span>
<span id="cb10-937"><a href="#cb10-937"></a>                <span class="st">&quot;Respondents age &quot;</span>,</span>
<span id="cb10-938"><a href="#cb10-938"></a>                <span class="st">&quot;Respondents gender&quot;</span>,</span>
<span id="cb10-939"><a href="#cb10-939"></a>                <span class="st">&quot;Highest completed degree of education: Categories for international comparison&quot;</span>,</span>
<span id="cb10-940"><a href="#cb10-940"></a>                <span class="st">&quot;Main status: work, unemployed, in education...&quot;</span>,</span>
<span id="cb10-941"><a href="#cb10-941"></a>                <span class="st">&quot;Top-Bottom self-placement (10 pt scale)&quot;</span>,</span>
<span id="cb10-942"><a href="#cb10-942"></a>                <span class="st">&quot;How many children in household: children between [school age] and 17 years of age&quot;</span>,</span>
<span id="cb10-943"><a href="#cb10-943"></a>                <span class="st">&quot;Legal partnership status: married, civil partership...&quot;</span>,</span>
<span id="cb10-944"><a href="#cb10-944"></a>                <span class="st">&quot;Place of living: urban - rural&quot;</span></span>
<span id="cb10-945"><a href="#cb10-945"></a>              )</span>
<span id="cb10-946"><a href="#cb10-946"></a><span class="co">#tabVarDesc</span></span>
<span id="cb10-947"><a href="#cb10-947"></a></span>
<span id="cb10-948"><a href="#cb10-948"></a><span class="co"># Taulukko</span></span>
<span id="cb10-949"><a href="#cb10-949"></a></span>
<span id="cb10-950"><a href="#cb10-950"></a><span class="co"># luodaan df - varoitus: data_frame() is deprecated, use tibble” (4.2.20),</span></span>
<span id="cb10-951"><a href="#cb10-951"></a><span class="co"># vaihdetaan tibbleen (21.2.20)</span></span>
<span id="cb10-952"><a href="#cb10-952"></a></span>
<span id="cb10-953"><a href="#cb10-953"></a><span class="co"># jhVarTable1.df &lt;- data_frame(tabVarnames,tabVarDesc) OLD</span></span>
<span id="cb10-954"><a href="#cb10-954"></a>jhVarTable1.tbl &lt;-<span class="st"> </span><span class="kw">tibble</span>(tabVarnames,tabVarDesc)</span>
<span id="cb10-955"><a href="#cb10-955"></a>cols_jhVarTable1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;muuttuja&quot;</span>,<span class="st">&quot;kysymyksen tunnus, lyhennetty kysymys&quot;</span>)</span>
<span id="cb10-956"><a href="#cb10-956"></a><span class="kw">colnames</span>(jhVarTable1.tbl) &lt;-<span class="st"> </span>cols_jhVarTable1</span>
<span id="cb10-957"><a href="#cb10-957"></a><span class="co">#str(jhVarTable1.tbl)</span></span>
<span id="cb10-958"><a href="#cb10-958"></a><span class="co"># Lyhyet kysymykset englanniksi</span></span>
<span id="cb10-959"><a href="#cb10-959"></a></span>
<span id="cb10-960"><a href="#cb10-960"></a>knitr<span class="op">::</span><span class="kw">kable</span>(jhVarTable1.tbl, <span class="dt">booktab =</span> <span class="ot">TRUE</span>,</span>
<span id="cb10-961"><a href="#cb10-961"></a>               <span class="dt">caption =</span> <span class="st">&quot;ISSP2012:Työelämä ja perhearvot - kysymykset&quot;</span>)</span>
<span id="cb10-962"><a href="#cb10-962"></a></span>
<span id="cb10-963"><a href="#cb10-963"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/substvar_fi_Q1Q2.png&#39;</span>)</span>
<span id="cb10-964"><a href="#cb10-964"></a><span class="co"># UUSI DATA 30.1.20</span></span>
<span id="cb10-965"><a href="#cb10-965"></a><span class="co">#</span></span>
<span id="cb10-966"><a href="#cb10-966"></a><span class="co"># LUETAAN DATA G1_1_data2.Rmd - tiedostossa, luodaan faktorimuuttujat</span></span>
<span id="cb10-967"><a href="#cb10-967"></a><span class="co"># G1_1_data_fct1.Rmd-tiedostossa -&gt; ISSP2012jh1d.dat (df)</span></span>
<span id="cb10-968"><a href="#cb10-968"></a><span class="co"># 23 muuttujaa (9 substanssimuuttujaa, 8 taustamuuttujaa, 3 maa-muuttujaa, 3 metadatamuuttujaa)</span></span>
<span id="cb10-969"><a href="#cb10-969"></a><span class="co"># 25 maata.</span></span>
<span id="cb10-970"><a href="#cb10-970"></a><span class="co"># Poistettu 146 havaintoa, joilla SEX tai AGE puuttuu</span></span>
<span id="cb10-971"><a href="#cb10-971"></a><span class="co"># Johdattelevassa esimerkissä kuusi maata, kaksi taustamuuttujaa ja yksi kysymys</span></span>
<span id="cb10-972"><a href="#cb10-972"></a><span class="co"># (V6/Q1b)</span></span>
<span id="cb10-973"><a href="#cb10-973"></a></span>
<span id="cb10-974"><a href="#cb10-974"></a></span>
<span id="cb10-975"><a href="#cb10-975"></a><span class="co"># Kuusi maata</span></span>
<span id="cb10-976"><a href="#cb10-976"></a></span>
<span id="cb10-977"><a href="#cb10-977"></a>countries_esim1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">56</span>, <span class="dv">100</span>, <span class="dv">208</span>, <span class="dv">246</span>, <span class="dv">276</span>, <span class="dv">348</span>) <span class="co">#BE,BG,DK,FI,DE,HU</span></span>
<span id="cb10-978"><a href="#cb10-978"></a>ISSP2012esim3.dat &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012jh1d.dat, V4 <span class="op">%in%</span><span class="st"> </span>countries_esim1)</span>
<span id="cb10-979"><a href="#cb10-979"></a><span class="co"># str(ISSP2012esim3.dat) - pitkä listaus pois (24.2.20)</span></span>
<span id="cb10-980"><a href="#cb10-980"></a></span>
<span id="cb10-981"><a href="#cb10-981"></a><span class="co">#neljä maamuuttujaa, kysymys Q1b, ikä ja sukupuoli</span></span>
<span id="cb10-982"><a href="#cb10-982"></a></span>
<span id="cb10-983"><a href="#cb10-983"></a>vars_esim1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;C_ALPHAN&quot;</span>, <span class="st">&quot;V3&quot;</span>, <span class="st">&quot;maa&quot;</span>,<span class="st">&quot;maa3&quot;</span>, <span class="st">&quot;Q1b&quot;</span>, <span class="st">&quot;sp&quot;</span>, <span class="st">&quot;ika&quot;</span>)</span>
<span id="cb10-984"><a href="#cb10-984"></a>ISSP2012esim2.dat &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012esim3.dat, <span class="kw">all_of</span>(vars_esim1))</span>
<span id="cb10-985"><a href="#cb10-985"></a></span>
<span id="cb10-986"><a href="#cb10-986"></a><span class="kw">str</span>(ISSP2012esim2.dat) <span class="co"># 8542 obs. of  7 variables, ja sama 8.6.2020</span></span>
<span id="cb10-987"><a href="#cb10-987"></a><span class="co"># C_ALPHAN: chr, maa: Factor w/ 25</span></span>
<span id="cb10-988"><a href="#cb10-988"></a></span>
<span id="cb10-989"><a href="#cb10-989"></a><span class="co"># Poistetaan havainnot, joilla Q1b - muuttujassa puuttuva tieto &#39;NA&#39;</span></span>
<span id="cb10-990"><a href="#cb10-990"></a><span class="co"># sum(is.na(ISSP2012esim2.dat$Q1b)) = 399</span></span>
<span id="cb10-991"><a href="#cb10-991"></a></span>
<span id="cb10-992"><a href="#cb10-992"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012esim2.dat, <span class="op">!</span><span class="kw">is.na</span>(Q1b))</span>
<span id="cb10-993"><a href="#cb10-993"></a></span>
<span id="cb10-994"><a href="#cb10-994"></a><span class="co">#str(ISSP2012esim1.dat) # 8143 obs. of  6 variable</span></span>
<span id="cb10-995"><a href="#cb10-995"></a></span>
<span id="cb10-996"><a href="#cb10-996"></a><span class="co"># Tarkistuksia (3.2.20)</span></span>
<span id="cb10-997"><a href="#cb10-997"></a><span class="co">#</span></span>
<span id="cb10-998"><a href="#cb10-998"></a><span class="co">#fct_count(ISSP2012esim1.dat$sp)</span></span>
<span id="cb10-999"><a href="#cb10-999"></a><span class="co">#fct_count(ISSP2012esim1.dat$Q1b)</span></span>
<span id="cb10-1000"><a href="#cb10-1000"></a><span class="co">#fct_count(ISSP2012esim1.dat$maa)</span></span>
<span id="cb10-1001"><a href="#cb10-1001"></a><span class="co">#fct_count(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb10-1002"><a href="#cb10-1002"></a><span class="co">#</span></span>
<span id="cb10-1003"><a href="#cb10-1003"></a><span class="co">#summary(ISSP2012esim1.dat$sp)</span></span>
<span id="cb10-1004"><a href="#cb10-1004"></a><span class="co">#sp: 3799 + 4344 = 8143</span></span>
<span id="cb10-1005"><a href="#cb10-1005"></a><span class="co">#summary(ISSP2012esim1.dat$Q1b)</span></span>
<span id="cb10-1006"><a href="#cb10-1006"></a><span class="co">#  S      s      ?     e      E</span></span>
<span id="cb10-1007"><a href="#cb10-1007"></a><span class="co"># 810 + 1935 + 1367 + 2125 + 1906 = 8143</span></span>
<span id="cb10-1008"><a href="#cb10-1008"></a><span class="co">#</span></span>
<span id="cb10-1009"><a href="#cb10-1009"></a><span class="co"># EDELLINEN DATA - havaintojen määrät samat kuin uudella datalla (31.1.20)</span></span>
<span id="cb10-1010"><a href="#cb10-1010"></a><span class="co">#</span></span>
<span id="cb10-1011"><a href="#cb10-1011"></a><span class="co"># 8557 obs. ennen kuin sexagemissing poistettiin, nyt 8542, 8557-8542 = 15</span></span>
<span id="cb10-1012"><a href="#cb10-1012"></a><span class="co">#</span></span>
<span id="cb10-1013"><a href="#cb10-1013"></a><span class="co"># Poistetaan havainnot joissa puuttuva tieto muuttujassa V6 (Q1b) n = 399</span></span>
<span id="cb10-1014"><a href="#cb10-1014"></a><span class="co"># 8542-399 = 8143</span></span>
<span id="cb10-1015"><a href="#cb10-1015"></a></span>
<span id="cb10-1016"><a href="#cb10-1016"></a><span class="co"># Tyhjät &quot;faktorilabelit&quot; on poistettava</span></span>
<span id="cb10-1017"><a href="#cb10-1017"></a></span>
<span id="cb10-1018"><a href="#cb10-1018"></a> ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb10-1019"><a href="#cb10-1019"></a><span class="st">     </span><span class="kw">mutate</span>(<span class="dt">maa =</span> <span class="kw">fct_drop</span>(maa),</span>
<span id="cb10-1020"><a href="#cb10-1020"></a>            <span class="dt">maa3 =</span> <span class="kw">fct_drop</span>(maa3)</span>
<span id="cb10-1021"><a href="#cb10-1021"></a>            )</span>
<span id="cb10-1022"><a href="#cb10-1022"></a></span>
<span id="cb10-1023"><a href="#cb10-1023"></a><span class="co">#summary(ISSP2012esim1.dat$maa)</span></span>
<span id="cb10-1024"><a href="#cb10-1024"></a><span class="co">#summary(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb10-1025"><a href="#cb10-1025"></a><span class="co">#</span></span>
<span id="cb10-1026"><a href="#cb10-1026"></a><span class="co"># str(ISSP2012esim1.dat$maa)</span></span>
<span id="cb10-1027"><a href="#cb10-1027"></a><span class="co"># attributes(ISSP2012esim1.dat$maa)</span></span>
<span id="cb10-1028"><a href="#cb10-1028"></a><span class="co">#</span></span>
<span id="cb10-1029"><a href="#cb10-1029"></a><span class="co"># str(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb10-1030"><a href="#cb10-1030"></a><span class="co"># attributes(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb10-1031"><a href="#cb10-1031"></a><span class="co">#</span></span>
<span id="cb10-1032"><a href="#cb10-1032"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa, Q1b, type = &quot;count&quot;)</span></span>
<span id="cb10-1033"><a href="#cb10-1033"></a><span class="co">#fct_count(ISSP2012esim1.dat$Q1b)</span></span>
<span id="cb10-1034"><a href="#cb10-1034"></a><span class="co"># fct_count(ISSP2012esim1.dat$sp)</span></span>
<span id="cb10-1035"><a href="#cb10-1035"></a><span class="co"># fct_unique(ISSP2012esim1.dat$maa)</span></span>
<span id="cb10-1036"><a href="#cb10-1036"></a><span class="co"># fct_count(ISSP2012esim1.dat$maa)</span></span>
<span id="cb10-1037"><a href="#cb10-1037"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa, C_ALPHAN, type = &quot;count&quot;)</span></span>
<span id="cb10-1038"><a href="#cb10-1038"></a><span class="co">#</span></span>
<span id="cb10-1039"><a href="#cb10-1039"></a><span class="co"># maa3 - siistitään &quot;faktorilabelit&quot; kaksikirjaimisiksi</span></span>
<span id="cb10-1040"><a href="#cb10-1040"></a><span class="co">#</span></span>
<span id="cb10-1041"><a href="#cb10-1041"></a><span class="co"># ISO 3166 Code V3 - maiden jaot</span></span>
<span id="cb10-1042"><a href="#cb10-1042"></a><span class="co">#  5601     BE-FLA-Belgium/ Flanders</span></span>
<span id="cb10-1043"><a href="#cb10-1043"></a><span class="co">#  5602     BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb10-1044"><a href="#cb10-1044"></a><span class="co">#  5603     BE-BRU-Belgium/ Brussels</span></span>
<span id="cb10-1045"><a href="#cb10-1045"></a><span class="co"># 27601     DE-W-Germany-West</span></span>
<span id="cb10-1046"><a href="#cb10-1046"></a><span class="co"># 27602     DE-E-Germany-East</span></span>
<span id="cb10-1047"><a href="#cb10-1047"></a><span class="co"># Tähän pitäisi päästä</span></span>
<span id="cb10-1048"><a href="#cb10-1048"></a><span class="co"># levels = c(&quot;100&quot;,&quot;208&quot;,&quot;246&quot;,&quot;348&quot;,&quot;5601&quot;,&quot;5602&quot;,&quot;5603&quot;,&quot;27601&quot;,&quot;27602&quot;),</span></span>
<span id="cb10-1049"><a href="#cb10-1049"></a><span class="co"># labels = c(&quot;BG&quot;,&quot;DK&quot;,&quot;FI&quot;,&quot;HU&quot;,&quot;bF&quot;,&quot;bW&quot;,&quot;bB&quot;,&quot;dW&quot;,&quot;dE&quot;))</span></span>
<span id="cb10-1050"><a href="#cb10-1050"></a><span class="co"># levels(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb10-1051"><a href="#cb10-1051"></a></span>
<span id="cb10-1052"><a href="#cb10-1052"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb10-1053"><a href="#cb10-1053"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">maa3 =</span></span>
<span id="cb10-1054"><a href="#cb10-1054"></a>                <span class="kw">fct_recode</span>(maa3,</span>
<span id="cb10-1055"><a href="#cb10-1055"></a>                 <span class="st">&quot;BG&quot;</span> =<span class="st"> &quot;BG-Bulgaria&quot;</span>,</span>
<span id="cb10-1056"><a href="#cb10-1056"></a>                 <span class="st">&quot;DK&quot;</span> =<span class="st"> &quot;DK-Denmark&quot;</span>,</span>
<span id="cb10-1057"><a href="#cb10-1057"></a>                 <span class="st">&quot;FI&quot;</span> =<span class="st"> &quot;FI-Finland&quot;</span>,</span>
<span id="cb10-1058"><a href="#cb10-1058"></a>                 <span class="st">&quot;HU&quot;</span> =<span class="st"> &quot;HU-Hungary&quot;</span>,</span>
<span id="cb10-1059"><a href="#cb10-1059"></a>                 <span class="st">&quot;bF&quot;</span> =<span class="st"> &quot;BE-FLA-Belgium/ Flanders&quot;</span>,</span>
<span id="cb10-1060"><a href="#cb10-1060"></a>                 <span class="st">&quot;bW&quot;</span> =<span class="st"> &quot;BE-WAL-Belgium/ Wallonia&quot;</span>,</span>
<span id="cb10-1061"><a href="#cb10-1061"></a>                 <span class="st">&quot;bB&quot;</span> =<span class="st"> &quot;BE-BRU-Belgium/ Brussels&quot;</span>,</span>
<span id="cb10-1062"><a href="#cb10-1062"></a>                 <span class="st">&quot;dW&quot;</span> =<span class="st"> &quot;DE-W-Germany-West&quot;</span>,</span>
<span id="cb10-1063"><a href="#cb10-1063"></a>                 <span class="st">&quot;dE&quot;</span> =<span class="st"> &quot;DE-E-Germany-East&quot;</span>)</span>
<span id="cb10-1064"><a href="#cb10-1064"></a>               )</span>
<span id="cb10-1065"><a href="#cb10-1065"></a><span class="co"># tarkistuksia</span></span>
<span id="cb10-1066"><a href="#cb10-1066"></a><span class="co">#levels(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb10-1067"><a href="#cb10-1067"></a><span class="co"># str(ISSP2012esim1.dat$maa3) # 9 levels</span></span>
<span id="cb10-1068"><a href="#cb10-1068"></a><span class="co">#summary(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb10-1069"><a href="#cb10-1069"></a><span class="co">#</span></span>
<span id="cb10-1070"><a href="#cb10-1070"></a><span class="co"># TÄSSÄ TOISTOA! (4.2.20)</span></span>
<span id="cb10-1071"><a href="#cb10-1071"></a><span class="co"># Muutetaan muuttujien &quot;maa&quot; ja &quot;maa3&quot; arvojen (levels) järjestys samaksi kuin</span></span>
<span id="cb10-1072"><a href="#cb10-1072"></a><span class="co"># alkuperäisen muuttujan C_ALPHAN. Helpomi verrata aikaisempiin tuloksiin.</span></span>
<span id="cb10-1073"><a href="#cb10-1073"></a></span>
<span id="cb10-1074"><a href="#cb10-1074"></a><span class="co"># &quot;alkuperäinen&quot; maa talteen</span></span>
<span id="cb10-1075"><a href="#cb10-1075"></a>ISSP2012esim1.dat<span class="op">$</span>maa2 &lt;-<span class="st"> </span>ISSP2012esim1.dat<span class="op">$</span>maa</span>
<span id="cb10-1076"><a href="#cb10-1076"></a></span>
<span id="cb10-1077"><a href="#cb10-1077"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb10-1078"><a href="#cb10-1078"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">maa =</span></span>
<span id="cb10-1079"><a href="#cb10-1079"></a>                <span class="kw">fct_relevel</span>(maa,</span>
<span id="cb10-1080"><a href="#cb10-1080"></a>                            <span class="st">&quot;BE&quot;</span>,</span>
<span id="cb10-1081"><a href="#cb10-1081"></a>                            <span class="st">&quot;BG&quot;</span>,</span>
<span id="cb10-1082"><a href="#cb10-1082"></a>                            <span class="st">&quot;DE&quot;</span>,</span>
<span id="cb10-1083"><a href="#cb10-1083"></a>                            <span class="st">&quot;DK&quot;</span>,</span>
<span id="cb10-1084"><a href="#cb10-1084"></a>                            <span class="st">&quot;FI&quot;</span>,</span>
<span id="cb10-1085"><a href="#cb10-1085"></a>                            <span class="st">&quot;HU&quot;</span>))</span>
<span id="cb10-1086"><a href="#cb10-1086"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb10-1087"><a href="#cb10-1087"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">maa3 =</span></span>
<span id="cb10-1088"><a href="#cb10-1088"></a>                <span class="kw">fct_relevel</span>(maa3,</span>
<span id="cb10-1089"><a href="#cb10-1089"></a>                        <span class="st">&quot;bF&quot;</span>,</span>
<span id="cb10-1090"><a href="#cb10-1090"></a>                        <span class="st">&quot;bW&quot;</span>,</span>
<span id="cb10-1091"><a href="#cb10-1091"></a>                        <span class="st">&quot;bB&quot;</span>,</span>
<span id="cb10-1092"><a href="#cb10-1092"></a>                        <span class="st">&quot;BG&quot;</span>,</span>
<span id="cb10-1093"><a href="#cb10-1093"></a>                        <span class="st">&quot;dW&quot;</span>,</span>
<span id="cb10-1094"><a href="#cb10-1094"></a>                        <span class="st">&quot;dE&quot;</span>,</span>
<span id="cb10-1095"><a href="#cb10-1095"></a>                        <span class="st">&quot;DK&quot;</span>,</span>
<span id="cb10-1096"><a href="#cb10-1096"></a>                        <span class="st">&quot;FI&quot;</span>,</span>
<span id="cb10-1097"><a href="#cb10-1097"></a>                        <span class="st">&quot;HU&quot;</span>))</span>
<span id="cb10-1098"><a href="#cb10-1098"></a></span>
<span id="cb10-1099"><a href="#cb10-1099"></a><span class="co"># Tarkistus</span></span>
<span id="cb10-1100"><a href="#cb10-1100"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa2,maa, type = &quot;count&quot;)</span></span>
<span id="cb10-1101"><a href="#cb10-1101"></a><span class="co"># &quot;alkuperäinen&quot; maa talteenISSP2012esim1.dat %&gt;% tableX(maa,C_ALPHAN, type = &quot;count&quot;)</span></span>
<span id="cb10-1102"><a href="#cb10-1102"></a><span class="co"># &quot;alkuperäinen&quot; maa talteenstr(ISSP2012esim1.dat)</span></span>
<span id="cb10-1103"><a href="#cb10-1103"></a></span>
<span id="cb10-1104"><a href="#cb10-1104"></a><span class="co"># Taulukoita (31.1.2020) ja tarkistuksia</span></span>
<span id="cb10-1105"><a href="#cb10-1105"></a><span class="co">#</span></span>
<span id="cb10-1106"><a href="#cb10-1106"></a><span class="co"># toinen maa-muuttuja, jossa Saksan ja Belgian jako</span></span>
<span id="cb10-1107"><a href="#cb10-1107"></a><span class="co">#  V3</span></span>
<span id="cb10-1108"><a href="#cb10-1108"></a><span class="co">#  5601     BE-FLA-Belgium/ Flanders</span></span>
<span id="cb10-1109"><a href="#cb10-1109"></a><span class="co">#  5602     BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb10-1110"><a href="#cb10-1110"></a><span class="co">#  5603     BE-BRU-Belgium/ Brussels</span></span>
<span id="cb10-1111"><a href="#cb10-1111"></a><span class="co"># 27601     DE-W-Germany-West</span></span>
<span id="cb10-1112"><a href="#cb10-1112"></a><span class="co"># 27602     DE-E-Germany-East</span></span>
<span id="cb10-1113"><a href="#cb10-1113"></a></span>
<span id="cb10-1114"><a href="#cb10-1114"></a><span class="co"># Tarkastuksia</span></span>
<span id="cb10-1115"><a href="#cb10-1115"></a></span>
<span id="cb10-1116"><a href="#cb10-1116"></a><span class="co"># assert_that ehkä tarpeeton - expect_equivalet testaa levelien</span></span>
<span id="cb10-1117"><a href="#cb10-1117"></a><span class="co"># järjestyksen ja määrän (20.2.20)</span></span>
<span id="cb10-1118"><a href="#cb10-1118"></a></span>
<span id="cb10-1119"><a href="#cb10-1119"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>sp)) <span class="op">==</span><span class="st"> </span><span class="dv">2</span>)</span>
<span id="cb10-1120"><a href="#cb10-1120"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>sp),</span>
<span id="cb10-1121"><a href="#cb10-1121"></a>                <span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>)))</span>
<span id="cb10-1122"><a href="#cb10-1122"></a></span>
<span id="cb10-1123"><a href="#cb10-1123"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb10-1124"><a href="#cb10-1124"></a></span>
<span id="cb10-1125"><a href="#cb10-1125"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa),</span>
<span id="cb10-1126"><a href="#cb10-1126"></a>                  <span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)))</span>
<span id="cb10-1127"><a href="#cb10-1127"></a></span>
<span id="cb10-1128"><a href="#cb10-1128"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa3)) <span class="op">==</span><span class="st"> </span><span class="dv">9</span>)</span>
<span id="cb10-1129"><a href="#cb10-1129"></a></span>
<span id="cb10-1130"><a href="#cb10-1130"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa3),</span>
<span id="cb10-1131"><a href="#cb10-1131"></a>                 <span class="kw">c</span>(<span class="st">&quot;bF&quot;</span>,<span class="st">&quot;bW&quot;</span>,<span class="st">&quot;bB&quot;</span>, <span class="st">&quot;BG&quot;</span>,<span class="st">&quot;dW&quot;</span>,<span class="st">&quot;dE&quot;</span>,<span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)))</span>
<span id="cb10-1132"><a href="#cb10-1132"></a></span>
<span id="cb10-1133"><a href="#cb10-1133"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>Q1b)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb10-1134"><a href="#cb10-1134"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>Q1b),</span>
<span id="cb10-1135"><a href="#cb10-1135"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb10-1136"><a href="#cb10-1136"></a></span>
<span id="cb10-1137"><a href="#cb10-1137"></a><span class="co"># testthat - paketti - pois käytöstä 16.9.20</span></span>
<span id="cb10-1138"><a href="#cb10-1138"></a><span class="co"># expect_ ei anna ok-ilmoitusta, ainoastaan virheilmoituksen? (11.4.20)</span></span>
<span id="cb10-1139"><a href="#cb10-1139"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$maa),</span></span>
<span id="cb10-1140"><a href="#cb10-1140"></a><span class="co">#                  c(&quot;BE&quot;, &quot;BG&quot;, &quot;DE&quot;, &quot;DK&quot;, &quot;FI&quot;, &quot;HU&quot;))</span></span>
<span id="cb10-1141"><a href="#cb10-1141"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$maa3),</span></span>
<span id="cb10-1142"><a href="#cb10-1142"></a><span class="co">#                  c(&quot;bF&quot;,&quot;bW&quot;,&quot;bB&quot;, &quot;BG&quot;,&quot;dW&quot;,&quot;dE&quot;,&quot;DK&quot;, &quot;FI&quot;, &quot;HU&quot;))</span></span>
<span id="cb10-1143"><a href="#cb10-1143"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$sp), c(&quot;m&quot;, &quot;f&quot;))</span></span>
<span id="cb10-1144"><a href="#cb10-1144"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$Q1b),</span></span>
<span id="cb10-1145"><a href="#cb10-1145"></a><span class="co">#                  c(&quot;S&quot;, &quot;s&quot;, &quot;?&quot;, &quot;e&quot;, &quot;E&quot;))</span></span>
<span id="cb10-1146"><a href="#cb10-1146"></a><span class="co">#</span></span>
<span id="cb10-1147"><a href="#cb10-1147"></a><span class="co"># ISSP2012esim1.dat %&gt;% tableX(maa,ika,type = &quot;row_perc&quot;)</span></span>
<span id="cb10-1148"><a href="#cb10-1148"></a><span class="co">#</span></span>
<span id="cb10-1149"><a href="#cb10-1149"></a><span class="co"># Riviprofiilit</span></span>
<span id="cb10-1150"><a href="#cb10-1150"></a><span class="co">#</span></span>
<span id="cb10-1151"><a href="#cb10-1151"></a><span class="co"># ISSP2012esim1.dat %&gt;% tableX(maa,ika,type = &quot;row_perc&quot;)</span></span>
<span id="cb10-1152"><a href="#cb10-1152"></a><span class="co"># ISSP2012esim1.dat %&gt;% tableX(maa,sp ,type = &quot;row_perc&quot;)</span></span>
<span id="cb10-1153"><a href="#cb10-1153"></a><span class="co">#</span></span>
<span id="cb10-1154"><a href="#cb10-1154"></a><span class="co">#</span></span>
<span id="cb10-1155"><a href="#cb10-1155"></a><span class="co"># Kysymyksen Q1b vastaukset</span></span>
<span id="cb10-1156"><a href="#cb10-1156"></a><span class="co">#</span></span>
<span id="cb10-1157"><a href="#cb10-1157"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa,Q1b,type = &quot;row_perc&quot;)</span></span>
<span id="cb10-1158"><a href="#cb10-1158"></a><span class="co">#</span></span>
<span id="cb10-1159"><a href="#cb10-1159"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa3,Q1b,type = &quot;row_perc&quot;)</span></span>
<span id="cb10-1160"><a href="#cb10-1160"></a><span class="co">#</span></span>
<span id="cb10-1161"><a href="#cb10-1161"></a><span class="co"># str(ISSP2012esim1.dat) # 8143 obs. of  7 variable,</span></span>
<span id="cb10-1162"><a href="#cb10-1162"></a><span class="co"># sama kuin vanhassa Galku-koodissa.</span></span>
<span id="cb10-1163"><a href="#cb10-1163"></a><span class="co">#</span></span>
<span id="cb10-1164"><a href="#cb10-1164"></a><span class="co"># str(ISSP2012esim1.dat) # 8143 obs. of  7 variable,</span></span>
<span id="cb10-1165"><a href="#cb10-1165"></a><span class="co"># sama kuin vanhassa Galku-koodissa.</span></span>
<span id="cb10-1166"><a href="#cb10-1166"></a></span>
<span id="cb10-1167"><a href="#cb10-1167"></a>taulu2 &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa, Q1b, <span class="dt">type =</span> <span class="st">&quot;count&quot;</span>)</span>
<span id="cb10-1168"><a href="#cb10-1168"></a>knitr<span class="op">::</span><span class="kw">kable</span>(taulu2,<span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb10-1169"><a href="#cb10-1169"></a>             <span class="dt">caption =</span> <span class="st">&quot;Kysymyksen Q1b vastaukset maittain&quot;</span>)</span>
<span id="cb10-1170"><a href="#cb10-1170"></a>taulu3 &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa,Q1b,<span class="dt">type =</span> <span class="st">&quot;row_perc&quot;</span>)</span>
<span id="cb10-1171"><a href="#cb10-1171"></a></span>
<span id="cb10-1172"><a href="#cb10-1172"></a>knitr<span class="op">::</span><span class="kw">kable</span>(taulu3,<span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb10-1173"><a href="#cb10-1173"></a>             <span class="dt">caption =</span> <span class="st">&quot;Kysymyksen Q1b vastaukset, riviprosentit&quot;</span>)</span>
<span id="cb10-1174"><a href="#cb10-1174"></a>taulu4 &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa,Q1b,<span class="dt">type =</span> <span class="st">&quot;col_perc&quot;</span>)</span>
<span id="cb10-1175"><a href="#cb10-1175"></a></span>
<span id="cb10-1176"><a href="#cb10-1176"></a>knitr<span class="op">::</span><span class="kw">kable</span>(taulu4,<span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb10-1177"><a href="#cb10-1177"></a>             <span class="dt">caption =</span> <span class="st">&quot;Kysymyksen Q1b vastaukset, sarakeprosentit&quot;</span>)</span>
<span id="cb10-1178"><a href="#cb10-1178"></a></span>
<span id="cb10-1179"><a href="#cb10-1179"></a><span class="co"># CA tässä, jotta saadaan rivi- ja sarakeprofiilikuvat</span></span>
<span id="cb10-1180"><a href="#cb10-1180"></a><span class="co"># Lasketaan samalla CA-ratkaisu riviprofiilitaulkolle (maille samat painot)</span></span>
<span id="cb10-1181"><a href="#cb10-1181"></a></span>
<span id="cb10-1182"><a href="#cb10-1182"></a>simpleCA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maa <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1.dat)</span>
<span id="cb10-1183"><a href="#cb10-1183"></a></span>
<span id="cb10-1184"><a href="#cb10-1184"></a><span class="co"># Maiden järjestys kääntää kuvan (1.2.20) - esimerkki on</span></span>
<span id="cb10-1185"><a href="#cb10-1185"></a><span class="co"># vähän kuriositeetti. Kartta voi tietysti &quot;flipata&quot; koordintaattien suhteen ainakin</span></span>
<span id="cb10-1186"><a href="#cb10-1186"></a><span class="co"># neljällä tavalla (? 180 astetta molempien akseleiden ympäri molempiin suuntiin?)</span></span>
<span id="cb10-1187"><a href="#cb10-1187"></a><span class="co"># (18.2.20). Tämän maa2-muuttujaa käyttävän kuvan voi jättää pois (8.4.20)</span></span>
<span id="cb10-1188"><a href="#cb10-1188"></a></span>
<span id="cb10-1189"><a href="#cb10-1189"></a><span class="co"># simpleCA2 &lt;- ca(~maa2 + Q1b,ISSP2012esim1.dat)</span></span>
<span id="cb10-1190"><a href="#cb10-1190"></a></span>
<span id="cb10-1191"><a href="#cb10-1191"></a><span class="co"># Oikeastaan maiden vertailussa pitäisi niiden massat skaalata yhtä suuriksi, tässä</span></span>
<span id="cb10-1192"><a href="#cb10-1192"></a><span class="co"># pikainen kokeilu (20.2.20)</span></span>
<span id="cb10-1193"><a href="#cb10-1193"></a><span class="co"># Riviprosentit taulukoksi, nimet sarakkeille ja riveille (ei kovin robustia...)</span></span>
<span id="cb10-1194"><a href="#cb10-1194"></a></span>
<span id="cb10-1195"><a href="#cb10-1195"></a></span>
<span id="cb10-1196"><a href="#cb10-1196"></a>johdesim1_rowproc.tab &lt;-<span class="st"> </span>simpleCA1<span class="op">$</span>N <span class="op">/</span><span class="st"> </span><span class="kw">rowSums</span>(simpleCA1<span class="op">$</span>N)</span>
<span id="cb10-1197"><a href="#cb10-1197"></a><span class="kw">colnames</span>(johdesim1_rowproc.tab) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S&quot;</span> ,<span class="st">&quot;s&quot;</span> ,<span class="st">&quot;?&quot;</span>,<span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)</span>
<span id="cb10-1198"><a href="#cb10-1198"></a><span class="kw">rownames</span>(johdesim1_rowproc.tab) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)</span>
<span id="cb10-1199"><a href="#cb10-1199"></a></span>
<span id="cb10-1200"><a href="#cb10-1200"></a><span class="co"># Miten tibblenä? Ei toimi, ei maa-muuttujaa ollenkaan</span></span>
<span id="cb10-1201"><a href="#cb10-1201"></a><span class="co"># johdesim1_rowproc.tbl &lt;- as_tibble(johdesim1_rowproc.tab)</span></span>
<span id="cb10-1202"><a href="#cb10-1202"></a><span class="co"># str(johdesim1_rowproc.tbl)</span></span>
<span id="cb10-1203"><a href="#cb10-1203"></a></span>
<span id="cb10-1204"><a href="#cb10-1204"></a><span class="co"># TARKISTUKSIA (20.2.20)</span></span>
<span id="cb10-1205"><a href="#cb10-1205"></a><span class="co"># johdesim1_rowproc.tab</span></span>
<span id="cb10-1206"><a href="#cb10-1206"></a><span class="co"># rowSums(johdesim1_rowproc.tab)</span></span>
<span id="cb10-1207"><a href="#cb10-1207"></a><span class="co"># str(johdesim1_rowproc.tab)</span></span>
<span id="cb10-1208"><a href="#cb10-1208"></a></span>
<span id="cb10-1209"><a href="#cb10-1209"></a></span>
<span id="cb10-1210"><a href="#cb10-1210"></a>simpleCA3 &lt;-<span class="st"> </span><span class="kw">ca</span>(johdesim1_rowproc.tab)</span>
<span id="cb10-1211"><a href="#cb10-1211"></a></span>
<span id="cb10-1212"><a href="#cb10-1212"></a></span>
<span id="cb10-1213"><a href="#cb10-1213"></a><span class="co"># Kartta piirretään koodilohkossa simpleCAmap1, r. 773 noin.</span></span>
<span id="cb10-1214"><a href="#cb10-1214"></a></span>
<span id="cb10-1215"><a href="#cb10-1215"></a><span class="co"># Riviprosentit tarkistusta varten</span></span>
<span id="cb10-1216"><a href="#cb10-1216"></a><span class="co">#        S  s   ?   e   E</span></span>
<span id="cb10-1217"><a href="#cb10-1217"></a><span class="co">#BE 9.49    22.40   21.76   27.42   18.93</span></span>
<span id="cb10-1218"><a href="#cb10-1218"></a><span class="co">#BG 12.81   42.89   22.26   20.63   1.41</span></span>
<span id="cb10-1219"><a href="#cb10-1219"></a><span class="co">#DE 9.63    21.88   11.55   31.39   25.55</span></span>
<span id="cb10-1220"><a href="#cb10-1220"></a><span class="co">#DK 5.04    17.15   10.95   16.71   50.14</span></span>
<span id="cb10-1221"><a href="#cb10-1221"></a><span class="co">#FI 4.23    16.94   13.42   38.11   27.30</span></span>
<span id="cb10-1222"><a href="#cb10-1222"></a><span class="co">#HU 21.97   28.89   22.57   19.06   7.52</span></span>
<span id="cb10-1223"><a href="#cb10-1223"></a><span class="co">#</span></span>
<span id="cb10-1224"><a href="#cb10-1224"></a><span class="co"># Ja datan saa leikepöydän kautta, jos on tarve pikatarkistuksiin</span></span>
<span id="cb10-1225"><a href="#cb10-1225"></a><span class="co"># read &lt;- read.table(&quot;clipboard&quot;)</span></span>
<span id="cb10-1226"><a href="#cb10-1226"></a></span>
<span id="cb10-1227"><a href="#cb10-1227"></a><span class="co">#mutkikas kuvan piirto - sarakeprofiilit vertailussa</span></span>
<span id="cb10-1228"><a href="#cb10-1228"></a><span class="co">#ggplot vaatii df-rakenteen ja &#39;long data&#39; - muotoon</span></span>
<span id="cb10-1229"><a href="#cb10-1229"></a><span class="co">##https://stackoverflow.com/questions/9563368/create-stacked-barplot</span></span>
<span id="cb10-1230"><a href="#cb10-1230"></a><span class="co"># -where-each-stack-is-scaled-to-sum-to</span></span>
<span id="cb10-1231"><a href="#cb10-1231"></a><span class="co"># Pitkä https-linkki kahdella rivillä</span></span>
<span id="cb10-1232"><a href="#cb10-1232"></a><span class="co">#</span></span>
<span id="cb10-1233"><a href="#cb10-1233"></a><span class="co"># käytetään ca - tuloksia</span></span>
<span id="cb10-1234"><a href="#cb10-1234"></a>apu1 &lt;-<span class="st"> </span>(simpleCA1<span class="op">$</span>N)</span>
<span id="cb10-1235"><a href="#cb10-1235"></a><span class="kw">colnames</span>(apu1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)</span>
<span id="cb10-1236"><a href="#cb10-1236"></a><span class="kw">rownames</span>(apu1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)</span>
<span id="cb10-1237"><a href="#cb10-1237"></a>apu1_df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(apu1)</span>
<span id="cb10-1238"><a href="#cb10-1238"></a><span class="co">#lasketan rivien reunajakauma</span></span>
<span id="cb10-1239"><a href="#cb10-1239"></a>apu1_df<span class="op">$</span>ka_sarake &lt;-<span class="st"> </span><span class="kw">rowSums</span>(apu1_df)</span>
<span id="cb10-1240"><a href="#cb10-1240"></a><span class="co">#muokataan &#39;long data&#39; - muotoon</span></span>
<span id="cb10-1241"><a href="#cb10-1241"></a>apu1b_df &lt;-<span class="st"> </span><span class="kw">melt</span>(<span class="kw">cbind</span>(apu1_df, <span class="dt">ind =</span> <span class="kw">rownames</span>(apu1_df)), <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&#39;ind&#39;</span>))</span>
<span id="cb10-1242"><a href="#cb10-1242"></a></span>
<span id="cb10-1243"><a href="#cb10-1243"></a>p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(apu1b_df, <span class="kw">aes</span>(<span class="dt">x =</span> variable, <span class="dt">y =</span> value, <span class="dt">fill =</span> ind)) <span class="op">+</span></span>
<span id="cb10-1244"><a href="#cb10-1244"></a><span class="st">         </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb10-1245"><a href="#cb10-1245"></a><span class="st">         </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot; &quot;</span>,<span class="dt">labels =</span> <span class="kw">percent_format</span>())</span>
<span id="cb10-1246"><a href="#cb10-1246"></a>p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">&quot;maa&quot;</span>)</span>
<span id="cb10-1247"><a href="#cb10-1247"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">scale_x_discrete</span>(<span class="dt">name =</span> <span class="st">&quot;Q1b - vastauskategoriat&quot;</span>)</span>
<span id="cb10-1248"><a href="#cb10-1248"></a><span class="co"># apu1_df</span></span>
<span id="cb10-1249"><a href="#cb10-1249"></a><span class="co"># apu1b_df</span></span>
<span id="cb10-1250"><a href="#cb10-1250"></a></span>
<span id="cb10-1251"><a href="#cb10-1251"></a><span class="co"># riviprofiilit ja keskiarvorivi -  18.9.2018</span></span>
<span id="cb10-1252"><a href="#cb10-1252"></a>apu2_df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(apu1)</span>
<span id="cb10-1253"><a href="#cb10-1253"></a>apu2_df &lt;-<span class="st"> </span><span class="kw">rbind</span>(apu2_df, <span class="dt">ka_rivi =</span> <span class="kw">colSums</span>(apu2_df))</span>
<span id="cb10-1254"><a href="#cb10-1254"></a></span>
<span id="cb10-1255"><a href="#cb10-1255"></a><span class="co">#apu2_df</span></span>
<span id="cb10-1256"><a href="#cb10-1256"></a><span class="co">#str(apu2_df)</span></span>
<span id="cb10-1257"><a href="#cb10-1257"></a><span class="co">## typeof(apu2_df) # what is it?</span></span>
<span id="cb10-1258"><a href="#cb10-1258"></a><span class="co">## class(apu2_df) # what is it? (sorry)</span></span>
<span id="cb10-1259"><a href="#cb10-1259"></a><span class="co">## storage.mode(apu2_df) # what is it? (very sorry)</span></span>
<span id="cb10-1260"><a href="#cb10-1260"></a><span class="co">## length(apu2_df) # how long is it? What about two dimensional</span></span>
<span id="cb10-1261"><a href="#cb10-1261"></a><span class="co">## objects?</span></span>
<span id="cb10-1262"><a href="#cb10-1262"></a><span class="co"># attributes(apu2_df)</span></span>
<span id="cb10-1263"><a href="#cb10-1263"></a></span>
<span id="cb10-1264"><a href="#cb10-1264"></a><span class="co"># temp1 &lt;- cbind(apu2_df, ind = rownames(apu2_df))</span></span>
<span id="cb10-1265"><a href="#cb10-1265"></a><span class="co"># temp1</span></span>
<span id="cb10-1266"><a href="#cb10-1266"></a><span class="co">##muokataan &#39;long data&#39; - muotoon</span></span>
<span id="cb10-1267"><a href="#cb10-1267"></a>apu2b_df &lt;-<span class="st"> </span><span class="kw">melt</span>(<span class="kw">cbind</span>(apu2_df, <span class="dt">ind =</span> <span class="kw">rownames</span>(apu2_df)), <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&#39;ind&#39;</span>))</span>
<span id="cb10-1268"><a href="#cb10-1268"></a><span class="co"># str(apu2b_df)</span></span>
<span id="cb10-1269"><a href="#cb10-1269"></a><span class="co"># glimpse(apu2b_df)</span></span>
<span id="cb10-1270"><a href="#cb10-1270"></a></span>
<span id="cb10-1271"><a href="#cb10-1271"></a><span class="co">#</span></span>
<span id="cb10-1272"><a href="#cb10-1272"></a><span class="co">#ggplot(apu2b_df, aes(x = value, y = ind, fill = variable)) +</span></span>
<span id="cb10-1273"><a href="#cb10-1273"></a><span class="co">#       geom_bar(position = &quot;fill&quot;, stat =&quot;identity&quot;) +</span></span>
<span id="cb10-1274"><a href="#cb10-1274"></a><span class="co">#       #coord_flip() +</span></span>
<span id="cb10-1275"><a href="#cb10-1275"></a><span class="co">#        scale_x_continuous(labels = percent_format())</span></span>
<span id="cb10-1276"><a href="#cb10-1276"></a></span>
<span id="cb10-1277"><a href="#cb10-1277"></a><span class="co">#versio2 toimii (18.9.2018)</span></span>
<span id="cb10-1278"><a href="#cb10-1278"></a></span>
<span id="cb10-1279"><a href="#cb10-1279"></a>p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(apu2b_df, <span class="kw">aes</span>(<span class="dt">x =</span> ind, <span class="dt">y =</span> value, <span class="dt">fill =</span> variable)) <span class="op">+</span></span>
<span id="cb10-1280"><a href="#cb10-1280"></a><span class="st">       </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb10-1281"><a href="#cb10-1281"></a><span class="st">       </span><span class="kw">coord_flip</span>() <span class="op">+</span></span>
<span id="cb10-1282"><a href="#cb10-1282"></a><span class="st">        </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot; &quot;</span>,<span class="dt">labels =</span> <span class="kw">percent_format</span>())</span>
<span id="cb10-1283"><a href="#cb10-1283"></a>p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">&quot;Q1b&quot;</span>)</span>
<span id="cb10-1284"><a href="#cb10-1284"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">scale_x_discrete</span>(<span class="dt">name =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb10-1285"><a href="#cb10-1285"></a></span>
<span id="cb10-1286"><a href="#cb10-1286"></a></span>
<span id="cb10-1287"><a href="#cb10-1287"></a></span>
<span id="cb10-1288"><a href="#cb10-1288"></a><span class="co"># simpleCA1 luotu aikaisemmin profiilikuvia varten koodilohkossa EkaCA</span></span>
<span id="cb10-1289"><a href="#cb10-1289"></a><span class="co"># HUOM! xlab ja ylab, prosenttiosuudet ensin katsottu ja sitten kirjoitettu</span></span>
<span id="cb10-1290"><a href="#cb10-1290"></a><span class="co"># tässä. Vertaa scree-plot - tietoon!</span></span>
<span id="cb10-1291"><a href="#cb10-1291"></a></span>
<span id="cb10-1292"><a href="#cb10-1292"></a></span>
<span id="cb10-1293"><a href="#cb10-1293"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="dv">1</span>)</span>
<span id="cb10-1294"><a href="#cb10-1294"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;symmetric&quot;</span>, <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb10-1295"><a href="#cb10-1295"></a>     <span class="dt">xlab =</span> <span class="st">&quot;Dimensio 1: moderni/liberaali - perinteinen/konservatiivinen (76%)&quot;</span>,</span>
<span id="cb10-1296"><a href="#cb10-1296"></a>     <span class="dt">ylab =</span> <span class="st">&quot;Dimensio 2: maltillinen/epävarma - radikaali/jyrkkä/varma (15.1%)&quot;</span>,</span>
<span id="cb10-1297"><a href="#cb10-1297"></a>     <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta 1&quot;</span>,</span>
<span id="cb10-1298"><a href="#cb10-1298"></a>     <span class="dt">sub =</span> <span class="st">&quot;Maiden massat eri suuruisia (otoskoko), pisteiden koko suhteessa massaan&quot;</span>)</span>
<span id="cb10-1299"><a href="#cb10-1299"></a><span class="co"># asymmetrinen kartta - rivit pc ja sarakkeet sc</span></span>
<span id="cb10-1300"><a href="#cb10-1300"></a><span class="co"># sarakkeet vektorikuvina</span></span>
<span id="cb10-1301"><a href="#cb10-1301"></a></span>
<span id="cb10-1302"><a href="#cb10-1302"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.7</span>)</span>
<span id="cb10-1303"><a href="#cb10-1303"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowprincipal&quot;</span>, </span>
<span id="cb10-1304"><a href="#cb10-1304"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>,<span class="ot">TRUE</span>), </span>
<span id="cb10-1305"><a href="#cb10-1305"></a>     <span class="dt">main =</span> <span class="st">&quot;asymmetrinen kartta 1&quot;</span></span>
<span id="cb10-1306"><a href="#cb10-1306"></a>    )</span>
<span id="cb10-1307"><a href="#cb10-1307"></a></span>
<span id="cb10-1308"><a href="#cb10-1308"></a><span class="co"># Piirretään Suomen riviprofiilista janat sarakepisteisiin - barysentinen keskiarvo</span></span>
<span id="cb10-1309"><a href="#cb10-1309"></a><span class="co"># Rivipisteet pääkoordinaatteina (principal coordinates)</span></span>
<span id="cb10-1310"><a href="#cb10-1310"></a></span>
<span id="cb10-1311"><a href="#cb10-1311"></a>simpleCA1.rpc &lt;-<span class="st"> </span>simpleCA1<span class="op">$</span>rowcoord <span class="op">%*%</span><span class="st"> </span><span class="kw">diag</span>(simpleCA1<span class="op">$</span>sv)</span>
<span id="cb10-1312"><a href="#cb10-1312"></a></span>
<span id="cb10-1313"><a href="#cb10-1313"></a><span class="co"># X11()</span></span>
<span id="cb10-1314"><a href="#cb10-1314"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="dv">1</span>)</span>
<span id="cb10-1315"><a href="#cb10-1315"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowprincipal&quot;</span>, </span>
<span id="cb10-1316"><a href="#cb10-1316"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>,<span class="ot">FALSE</span>),</span>
<span id="cb10-1317"><a href="#cb10-1317"></a>     <span class="co"># main = &quot;barysentrinen periaate - asymmetrinen kartta 2&quot;,</span></span>
<span id="cb10-1318"><a href="#cb10-1318"></a>     <span class="dt">sub =</span> <span class="st">&quot;Suomen profiili sarakkeiden barysentrisenä keskiarvona&quot;</span>)</span>
<span id="cb10-1319"><a href="#cb10-1319"></a>     <span class="kw">segments</span>(simpleCA1.rpc[<span class="dv">5</span>,<span class="dv">1</span>],simpleCA1.rpc[<span class="dv">5</span>,<span class="dv">2</span>],simpleCA1<span class="op">$</span>colcoord[, <span class="dv">1</span>],</span>
<span id="cb10-1320"><a href="#cb10-1320"></a>         simpleCA1<span class="op">$</span>colcoord[, <span class="dv">2</span>], <span class="dt">col =</span> <span class="st">&quot;pink&quot;</span>)</span>
<span id="cb10-1321"><a href="#cb10-1321"></a></span>
<span id="cb10-1322"><a href="#cb10-1322"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/simpleCAasymmTulk2.png&#39;</span>)</span>
<span id="cb10-1323"><a href="#cb10-1323"></a><span class="co">#par(cex = 0.6)</span></span>
<span id="cb10-1324"><a href="#cb10-1324"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb10-1325"><a href="#cb10-1325"></a>     <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;absolute&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb10-1326"><a href="#cb10-1326"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb10-1327"><a href="#cb10-1327"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb10-1328"><a href="#cb10-1328"></a>     <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 1&quot;</span>,</span>
<span id="cb10-1329"><a href="#cb10-1329"></a>     <span class="dt">sub =</span> <span class="st">&quot;sarakevektorin ja rivipisteiden värin tummuus = absoluuttinen kontribuutio&quot;</span>)</span>
<span id="cb10-1330"><a href="#cb10-1330"></a></span>
<span id="cb10-1331"><a href="#cb10-1331"></a></span>
<span id="cb10-1332"><a href="#cb10-1332"></a><span class="co">#par(cex = 0.7)</span></span>
<span id="cb10-1333"><a href="#cb10-1333"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb10-1334"><a href="#cb10-1334"></a>     <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;relative&quot;</span>),</span>
<span id="cb10-1335"><a href="#cb10-1335"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb10-1336"><a href="#cb10-1336"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb10-1337"><a href="#cb10-1337"></a>     <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 2&quot;</span>,</span>
<span id="cb10-1338"><a href="#cb10-1338"></a>     <span class="dt">sub =</span> <span class="st">&quot;sarakevektorin ja pisteen värin tummuus = suhteellinen kontribuutio&quot;</span>)</span>
<span id="cb10-1339"><a href="#cb10-1339"></a></span>
<span id="cb10-1340"><a href="#cb10-1340"></a></span>
<span id="cb10-1341"><a href="#cb10-1341"></a><span class="co"># Sama kartta - maiden massat vakiotu - simpleCA3 luotu koodilohkossa EkaCA</span></span>
<span id="cb10-1342"><a href="#cb10-1342"></a><span class="co"># CA:n lähtötietona riviprofiilit</span></span>
<span id="cb10-1343"><a href="#cb10-1343"></a></span>
<span id="cb10-1344"><a href="#cb10-1344"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb10-1345"><a href="#cb10-1345"></a><span class="kw">plot</span>(simpleCA3, <span class="dt">map =</span> <span class="st">&quot;symmetric&quot;</span>, <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb10-1346"><a href="#cb10-1346"></a><span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta 2 &quot;</span>,</span>
<span id="cb10-1347"><a href="#cb10-1347"></a><span class="dt">sub =</span> <span class="st">&quot;Maidet massat vakioitu (riviprofiilidata)&quot;</span>)</span>
<span id="cb10-1348"><a href="#cb10-1348"></a></span>
<span id="cb10-1349"><a href="#cb10-1349"></a></span>
<span id="cb10-1350"><a href="#cb10-1350"></a><span class="co"># Belgian ja Saksan aluejako maa3-muuttujassa</span></span>
<span id="cb10-1351"><a href="#cb10-1351"></a><span class="co"># str(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb10-1352"><a href="#cb10-1352"></a><span class="co"># attributes(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb10-1353"><a href="#cb10-1353"></a></span>
<span id="cb10-1354"><a href="#cb10-1354"></a>suppoint1_df1 &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012esim1.dat, maa3,Q1b)</span>
<span id="cb10-1355"><a href="#cb10-1355"></a></span>
<span id="cb10-1356"><a href="#cb10-1356"></a><span class="co"># Taulukoksi jotta saadaan lisättyä Saksan ja Belgian maa-profiilit täydentäviksi</span></span>
<span id="cb10-1357"><a href="#cb10-1357"></a><span class="co"># pisteiksi.</span></span>
<span id="cb10-1358"><a href="#cb10-1358"></a></span>
<span id="cb10-1359"><a href="#cb10-1359"></a>suppoint1_tab1 &lt;-<span class="st"> </span><span class="kw">table</span>(suppoint1_df1<span class="op">$</span>maa3, suppoint1_df1<span class="op">$</span>Q1b)</span>
<span id="cb10-1360"><a href="#cb10-1360"></a></span>
<span id="cb10-1361"><a href="#cb10-1361"></a><span class="co"># Maaprofiilit</span></span>
<span id="cb10-1362"><a href="#cb10-1362"></a>suppoint2_df &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012esim1.dat, (maa <span class="op">==</span><span class="st"> &quot;BE&quot;</span> <span class="op">|</span><span class="st"> </span>maa <span class="op">==</span><span class="st"> &quot;DE&quot;</span>))</span>
<span id="cb10-1363"><a href="#cb10-1363"></a>suppoint2_df &lt;-<span class="st"> </span><span class="kw">select</span>(suppoint2_df, maa, Q1b)</span>
<span id="cb10-1364"><a href="#cb10-1364"></a></span>
<span id="cb10-1365"><a href="#cb10-1365"></a><span class="co">#glimpse(suppoint2_df)</span></span>
<span id="cb10-1366"><a href="#cb10-1366"></a>suppoint2_tab1 &lt;-<span class="st"> </span><span class="kw">table</span>(suppoint2_df<span class="op">$</span>maa, suppoint2_df<span class="op">$</span>Q1b)</span>
<span id="cb10-1367"><a href="#cb10-1367"></a>suppoint2_tab1 <span class="co"># tarkistus 1</span></span>
<span id="cb10-1368"><a href="#cb10-1368"></a><span class="co"># Huom! tämä komento vain kerran - tai koko Rmd-tiedosto uudestaan (17.10.20)</span></span>
<span id="cb10-1369"><a href="#cb10-1369"></a>suppoint2_tab1 &lt;-<span class="st"> </span>suppoint2_tab1[<span class="op">-</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span><span class="op">:</span><span class="dv">6</span>) ,]</span>
<span id="cb10-1370"><a href="#cb10-1370"></a><span class="co">#suppoint2_tab1 # tarkistus 2</span></span>
<span id="cb10-1371"><a href="#cb10-1371"></a></span>
<span id="cb10-1372"><a href="#cb10-1372"></a><span class="co"># lisätään rivit maa3-muuttujan taulukkoon</span></span>
<span id="cb10-1373"><a href="#cb10-1373"></a>suppoint1_tab1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(suppoint1_tab1, suppoint2_tab1)</span>
<span id="cb10-1374"><a href="#cb10-1374"></a><span class="co">#suppoint1_tab1 # tarkistus 3</span></span>
<span id="cb10-1375"><a href="#cb10-1375"></a></span>
<span id="cb10-1376"><a href="#cb10-1376"></a><span class="co"># riviprofiilitaulukko aiheuttaa virheen PDF-tulostuksessa </span></span>
<span id="cb10-1377"><a href="#cb10-1377"></a><span class="co"># </span></span>
<span id="cb10-1378"><a href="#cb10-1378"></a></span>
<span id="cb10-1379"><a href="#cb10-1379"></a>BeDealueTable &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa3, Q1b, <span class="dt">type =</span> <span class="st">&quot;row_perc&quot;</span>)</span>
<span id="cb10-1380"><a href="#cb10-1380"></a></span>
<span id="cb10-1381"><a href="#cb10-1381"></a>knitr<span class="op">::</span><span class="kw">kable</span>(BeDealueTable , <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb10-1382"><a href="#cb10-1382"></a>            <span class="dt">caption =</span> <span class="st">&quot;Q1b vastaukset, Saksan ja Belgian alueet&quot;</span>)</span>
<span id="cb10-1383"><a href="#cb10-1383"></a></span>
<span id="cb10-1384"><a href="#cb10-1384"></a><span class="co"># Q1b vastaukset, Saksan ja Belgian alueet</span></span>
<span id="cb10-1385"><a href="#cb10-1385"></a><span class="co"># S s   ?   e   E   Total</span></span>
<span id="cb10-1386"><a href="#cb10-1386"></a><span class="co"># bF    5.04    23.81   25.89   30.83   14.43   100.00</span></span>
<span id="cb10-1387"><a href="#cb10-1387"></a><span class="co"># bW    10.82   21.02   18.57   24.08   25.51   100.00</span></span>
<span id="cb10-1388"><a href="#cb10-1388"></a><span class="co"># bB    17.03   20.94   16.63   23.87   21.53   100.00</span></span>
<span id="cb10-1389"><a href="#cb10-1389"></a><span class="co"># BG    12.81   42.89   22.26   20.63   1.41    100.00</span></span>
<span id="cb10-1390"><a href="#cb10-1390"></a><span class="co"># dW    11.40   26.82   11.83   32.13   17.82   100.00</span></span>
<span id="cb10-1391"><a href="#cb10-1391"></a><span class="co"># dE    5.85    11.33   10.97   29.80   42.05   100.00</span></span>
<span id="cb10-1392"><a href="#cb10-1392"></a><span class="co"># DK    5.04    17.15   10.95   16.71   50.14   100.00</span></span>
<span id="cb10-1393"><a href="#cb10-1393"></a><span class="co"># FI    4.23    16.94   13.42   38.11   27.30   100.00</span></span>
<span id="cb10-1394"><a href="#cb10-1394"></a><span class="co"># HU    21.97   28.89   22.57   19.06   7.52    100.00</span></span>
<span id="cb10-1395"><a href="#cb10-1395"></a><span class="co"># All   9.95    23.76   16.79   26.10   23.41   100.00</span></span>
<span id="cb10-1396"><a href="#cb10-1396"></a></span>
<span id="cb10-1397"><a href="#cb10-1397"></a>suppointCA2 &lt;-<span class="st"> </span><span class="kw">ca</span>(suppoint1_tab1[,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], <span class="dt">suprow =</span> <span class="dv">10</span><span class="op">:</span><span class="dv">11</span>)</span>
<span id="cb10-1398"><a href="#cb10-1398"></a></span>
<span id="cb10-1399"><a href="#cb10-1399"></a><span class="co"># par(cex = 0.6)</span></span>
<span id="cb10-1400"><a href="#cb10-1400"></a><span class="kw">plot</span>(suppointCA2, <span class="dt">main =</span> <span class="st">&quot;Symmetrinen kartta 1 &quot;</span>,</span>
<span id="cb10-1401"><a href="#cb10-1401"></a>     <span class="co"># mass = c(TRUE, TRUE),</span></span>
<span id="cb10-1402"><a href="#cb10-1402"></a>     <span class="co"># contrib = c(TRUE, TRUE),</span></span>
<span id="cb10-1403"><a href="#cb10-1403"></a>     <span class="dt">sub =</span> <span class="st">&quot;Täydentävät pisteet DE ja BE&quot;</span> )</span>
<span id="cb10-1404"><a href="#cb10-1404"></a></span>
<span id="cb10-1405"><a href="#cb10-1405"></a><span class="kw">plot</span>(suppointCA2, <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta &quot;</span>,</span>
<span id="cb10-1406"><a href="#cb10-1406"></a>        <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb10-1407"><a href="#cb10-1407"></a>        <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb10-1408"><a href="#cb10-1408"></a>        <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>),</span>
<span id="cb10-1409"><a href="#cb10-1409"></a>        <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;absolute&quot;</span>,<span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb10-1410"><a href="#cb10-1410"></a>        <span class="dt">sub =</span> <span class="st">&quot;Täydentävät pisteet DE ja BE&quot;</span> )</span>
<span id="cb10-1411"><a href="#cb10-1411"></a></span>
<span id="cb10-1412"><a href="#cb10-1412"></a></span>
<span id="cb10-1413"><a href="#cb10-1413"></a>suppointCA2</span>
<span id="cb10-1414"><a href="#cb10-1414"></a></span>
<span id="cb10-1415"><a href="#cb10-1415"></a><span class="kw">summary</span>(suppointCA2)</span>
<span id="cb10-1416"><a href="#cb10-1416"></a></span>
<span id="cb10-1417"><a href="#cb10-1417"></a>suppointCA3 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maa3 <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1.dat, <span class="dt">nd =</span> <span class="dv">3</span>)</span>
<span id="cb10-1418"><a href="#cb10-1418"></a></span>
<span id="cb10-1419"><a href="#cb10-1419"></a><span class="co"># summary(suppointCA3)</span></span>
<span id="cb10-1420"><a href="#cb10-1420"></a><span class="co"># Error in rsc %*% diag(sv) : non-conformable arguments</span></span>
<span id="cb10-1421"><a href="#cb10-1421"></a><span class="kw">plot</span>(suppointCA3, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb10-1422"><a href="#cb10-1422"></a>                <span class="dt">main =</span> <span class="st">&quot;Kolmen dimension ratkaisu&quot;</span>,</span>
<span id="cb10-1423"><a href="#cb10-1423"></a>                <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - 1. ja 2. dimensio&quot;</span>)</span>
<span id="cb10-1424"><a href="#cb10-1424"></a></span>
<span id="cb10-1425"><a href="#cb10-1425"></a></span>
<span id="cb10-1426"><a href="#cb10-1426"></a><span class="kw">plot</span>(suppointCA3, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>),</span>
<span id="cb10-1427"><a href="#cb10-1427"></a>                <span class="dt">main =</span> <span class="st">&quot;Kolmen dimension ratkaisu&quot;</span>,</span>
<span id="cb10-1428"><a href="#cb10-1428"></a>                <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - 1. ja 3. dimensio&quot;</span>)</span>
<span id="cb10-1429"><a href="#cb10-1429"></a></span>
<span id="cb10-1430"><a href="#cb10-1430"></a></span>
<span id="cb10-1431"><a href="#cb10-1431"></a><span class="kw">plot</span>(suppointCA3, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>),</span>
<span id="cb10-1432"><a href="#cb10-1432"></a>                <span class="dt">main =</span> <span class="st">&quot;Kolmen dimension ratkaisu&quot;</span>,</span>
<span id="cb10-1433"><a href="#cb10-1433"></a>                <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - 2. ja 3. dimensio&quot;</span>)</span>
<span id="cb10-1434"><a href="#cb10-1434"></a></span>
<span id="cb10-1435"><a href="#cb10-1435"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/3dSymMap_1.PNG&#39;</span>)</span>
<span id="cb10-1436"><a href="#cb10-1436"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/3dSymMap_2.PNG&#39;</span>)</span>
<span id="cb10-1437"><a href="#cb10-1437"></a><span class="co"># Iän ja sukupuolen vuorovaikutusmuuttujia</span></span>
<span id="cb10-1438"><a href="#cb10-1438"></a><span class="co">#</span></span>
<span id="cb10-1439"><a href="#cb10-1439"></a><span class="co"># Uusi R-data: ISSP2012esim1b.dat2esim1b)</span></span>
<span id="cb10-1440"><a href="#cb10-1440"></a><span class="co">#</span></span>
<span id="cb10-1441"><a href="#cb10-1441"></a><span class="co"># Ikäluokat age_cat</span></span>
<span id="cb10-1442"><a href="#cb10-1442"></a><span class="co"># AGE 1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 and older</span></span>
<span id="cb10-1443"><a href="#cb10-1443"></a><span class="co">#</span></span>
<span id="cb10-1444"><a href="#cb10-1444"></a><span class="co"># summary(ISSP2012esim1.dat$AGE)</span></span>
<span id="cb10-1445"><a href="#cb10-1445"></a><span class="co"># hist(ISSP2012esim1.dat$ika)</span></span>
<span id="cb10-1446"><a href="#cb10-1446"></a></span>
<span id="cb10-1447"><a href="#cb10-1447"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1.dat,</span>
<span id="cb10-1448"><a href="#cb10-1448"></a>                      <span class="dt">age_cat =</span> <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">15</span><span class="op">:</span><span class="dv">25</span>, <span class="st">&quot;1&quot;</span>,</span>
<span id="cb10-1449"><a href="#cb10-1449"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">26</span><span class="op">:</span><span class="dv">35</span>, <span class="st">&quot;2&quot;</span>,</span>
<span id="cb10-1450"><a href="#cb10-1450"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">36</span><span class="op">:</span><span class="dv">45</span>, <span class="st">&quot;3&quot;</span>,</span>
<span id="cb10-1451"><a href="#cb10-1451"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">46</span><span class="op">:</span><span class="dv">55</span>, <span class="st">&quot;4&quot;</span>,</span>
<span id="cb10-1452"><a href="#cb10-1452"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">56</span><span class="op">:</span><span class="dv">65</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>))))))</span>
<span id="cb10-1453"><a href="#cb10-1453"></a></span>
<span id="cb10-1454"><a href="#cb10-1454"></a></span>
<span id="cb10-1455"><a href="#cb10-1455"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span>ISSP2012esim1b.dat <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb10-1456"><a href="#cb10-1456"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span> <span class="kw">as_factor</span>(age_cat)) <span class="co"># järjestys omituinen!(4.2.20)</span></span>
<span id="cb10-1457"><a href="#cb10-1457"></a></span>
<span id="cb10-1458"><a href="#cb10-1458"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb10-1459"><a href="#cb10-1459"></a><span class="co"># str(ISSP2012esim2.dat$age_cat)</span></span>
<span id="cb10-1460"><a href="#cb10-1460"></a><span class="co"># levels(ISSP2012esim2.dat$age_cat)</span></span>
<span id="cb10-1461"><a href="#cb10-1461"></a><span class="co"># ISSP2012esim2.dat$age_cat %&gt;% summary()</span></span>
<span id="cb10-1462"><a href="#cb10-1462"></a></span>
<span id="cb10-1463"><a href="#cb10-1463"></a><span class="co"># Järjestetään ikäluokat uudelleen</span></span>
<span id="cb10-1464"><a href="#cb10-1464"></a></span>
<span id="cb10-1465"><a href="#cb10-1465"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span>ISSP2012esim1b.dat <span class="op">%&gt;%</span></span>
<span id="cb10-1466"><a href="#cb10-1466"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span></span>
<span id="cb10-1467"><a href="#cb10-1467"></a>                <span class="kw">fct_relevel</span>(age_cat,</span>
<span id="cb10-1468"><a href="#cb10-1468"></a>                            <span class="st">&quot;1&quot;</span>,</span>
<span id="cb10-1469"><a href="#cb10-1469"></a>                            <span class="st">&quot;2&quot;</span>,</span>
<span id="cb10-1470"><a href="#cb10-1470"></a>                            <span class="st">&quot;3&quot;</span>,</span>
<span id="cb10-1471"><a href="#cb10-1471"></a>                            <span class="st">&quot;4&quot;</span>,</span>
<span id="cb10-1472"><a href="#cb10-1472"></a>                            <span class="st">&quot;5&quot;</span>,</span>
<span id="cb10-1473"><a href="#cb10-1473"></a>                            <span class="st">&quot;6&quot;</span>)</span>
<span id="cb10-1474"><a href="#cb10-1474"></a>               )</span>
<span id="cb10-1475"><a href="#cb10-1475"></a></span>
<span id="cb10-1476"><a href="#cb10-1476"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb10-1477"><a href="#cb10-1477"></a></span>
<span id="cb10-1478"><a href="#cb10-1478"></a><span class="co"># Iso taulukko, voi tarkistaa että muunnos ok.</span></span>
<span id="cb10-1479"><a href="#cb10-1479"></a><span class="co"># test6 %&gt;% tableX(AGE, age_cat, type = &quot;count&quot;)</span></span>
<span id="cb10-1480"><a href="#cb10-1480"></a><span class="co"># taulu42 &lt;- ISSP2012esim2.dat %&gt;% tableX(maa,age_cat,type = &quot;count&quot;)</span></span>
<span id="cb10-1481"><a href="#cb10-1481"></a><span class="co"># kable(taulu42,digits = 2, caption = &quot;Ikäluokka age_cat&quot;)</span></span>
<span id="cb10-1482"><a href="#cb10-1482"></a><span class="co">#</span></span>
<span id="cb10-1483"><a href="#cb10-1483"></a></span>
<span id="cb10-1484"><a href="#cb10-1484"></a><span class="co"># Taulukoita (4.2.20)</span></span>
<span id="cb10-1485"><a href="#cb10-1485"></a></span>
<span id="cb10-1486"><a href="#cb10-1486"></a><span class="co">#ISSP2012esim1b.dat %&gt;%</span></span>
<span id="cb10-1487"><a href="#cb10-1487"></a><span class="co">#    tableX(maa,age_cat,type = &quot;count&quot;) %&gt;%</span></span>
<span id="cb10-1488"><a href="#cb10-1488"></a><span class="co">#    kable(digits = 2, caption = &quot;Ikäluokka age_cat&quot;)</span></span>
<span id="cb10-1489"><a href="#cb10-1489"></a><span class="co">#</span></span>
<span id="cb10-1490"><a href="#cb10-1490"></a><span class="co">#ISSP2012esim1b.dat %&gt;%</span></span>
<span id="cb10-1491"><a href="#cb10-1491"></a><span class="co">#    tableX(maa,age_cat,type = &quot;row_perc&quot;) %&gt;%</span></span>
<span id="cb10-1492"><a href="#cb10-1492"></a><span class="co">#    kable(digits = 2, caption = &quot;age_cat: suhteelliset frekvenssit&quot;)</span></span>
<span id="cb10-1493"><a href="#cb10-1493"></a></span>
<span id="cb10-1494"><a href="#cb10-1494"></a><span class="co"># ga - ikäluokka ja sukupuoli</span></span>
<span id="cb10-1495"><a href="#cb10-1495"></a></span>
<span id="cb10-1496"><a href="#cb10-1496"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1b.dat,</span>
<span id="cb10-1497"><a href="#cb10-1497"></a>                        <span class="dt">ga =</span> <span class="kw">case_when</span>((age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m1&quot;</span>,</span>
<span id="cb10-1498"><a href="#cb10-1498"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m2&quot;</span>,</span>
<span id="cb10-1499"><a href="#cb10-1499"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m3&quot;</span>,</span>
<span id="cb10-1500"><a href="#cb10-1500"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m4&quot;</span>,</span>
<span id="cb10-1501"><a href="#cb10-1501"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m5&quot;</span>,</span>
<span id="cb10-1502"><a href="#cb10-1502"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m6&quot;</span>,</span>
<span id="cb10-1503"><a href="#cb10-1503"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f1&quot;</span>,</span>
<span id="cb10-1504"><a href="#cb10-1504"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f2&quot;</span>,</span>
<span id="cb10-1505"><a href="#cb10-1505"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f3&quot;</span>,</span>
<span id="cb10-1506"><a href="#cb10-1506"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb10-1507"><a href="#cb10-1507"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb10-1508"><a href="#cb10-1508"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f5&quot;</span>,</span>
<span id="cb10-1509"><a href="#cb10-1509"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f6&quot;</span>,</span>
<span id="cb10-1510"><a href="#cb10-1510"></a>                                       <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;missing&quot;</span></span>
<span id="cb10-1511"><a href="#cb10-1511"></a>                                  ))</span>
<span id="cb10-1512"><a href="#cb10-1512"></a></span>
<span id="cb10-1513"><a href="#cb10-1513"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(ga,ga2) # tarkistus</span></span>
<span id="cb10-1514"><a href="#cb10-1514"></a><span class="co"># muuttujien tarkistuksia 19.9.2018</span></span>
<span id="cb10-1515"><a href="#cb10-1515"></a><span class="co"># str(ISSP2012esim1b.dat$ga) # chr-muuttuja, mutta toimii (4.2.20)</span></span>
<span id="cb10-1516"><a href="#cb10-1516"></a></span>
<span id="cb10-1517"><a href="#cb10-1517"></a><span class="co">#Tulostetaan taulukkoina ga - muuttuja</span></span>
<span id="cb10-1518"><a href="#cb10-1518"></a></span>
<span id="cb10-1519"><a href="#cb10-1519"></a><span class="co">#ISSP2012esim1b.dat %&gt;% tableX(maa,ga,type = &quot;count&quot;) %&gt;%</span></span>
<span id="cb10-1520"><a href="#cb10-1520"></a><span class="co">#kable(digits = 2, caption = &quot;Ikäluokka ja sukupuoli ga&quot;)</span></span>
<span id="cb10-1521"><a href="#cb10-1521"></a></span>
<span id="cb10-1522"><a href="#cb10-1522"></a><span class="co">#ISSP2012esim1b.dat %&gt;% tableX(maa,ga,type = &quot;row_perc&quot;) %&gt;%</span></span>
<span id="cb10-1523"><a href="#cb10-1523"></a><span class="co">#kable(digits = 2, caption = &quot;ga: suhteelliset frekvenssit&quot;)</span></span>
<span id="cb10-1524"><a href="#cb10-1524"></a></span>
<span id="cb10-1525"><a href="#cb10-1525"></a></span>
<span id="cb10-1526"><a href="#cb10-1526"></a>gaTestCA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>ga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat)</span>
<span id="cb10-1527"><a href="#cb10-1527"></a></span>
<span id="cb10-1528"><a href="#cb10-1528"></a></span>
<span id="cb10-1529"><a href="#cb10-1529"></a><span class="co"># Maapisteiden pääkoordinaatit janojen piirtämiseen</span></span>
<span id="cb10-1530"><a href="#cb10-1530"></a></span>
<span id="cb10-1531"><a href="#cb10-1531"></a>gaTestCA1.rpc &lt;-<span class="st"> </span>gaTestCA1<span class="op">$</span>rowcoord <span class="op">%*%</span><span class="st"> </span><span class="kw">diag</span>(gaTestCA1<span class="op">$</span>sv)</span>
<span id="cb10-1532"><a href="#cb10-1532"></a></span>
<span id="cb10-1533"><a href="#cb10-1533"></a><span class="co"># par(cex = 0.6)</span></span>
<span id="cb10-1534"><a href="#cb10-1534"></a><span class="kw">plot</span>(gaTestCA1, <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta, m = mies, f = nainen&quot;</span>,</span>
<span id="cb10-1535"><a href="#cb10-1535"></a>     <span class="dt">sub =</span> <span class="st">&quot;1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 tai vanhempi &quot;</span>)</span>
<span id="cb10-1536"><a href="#cb10-1536"></a><span class="co"># naiset</span></span>
<span id="cb10-1537"><a href="#cb10-1537"></a><span class="kw">lines</span>(gaTestCA1.rpc[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">1</span>],gaTestCA1.rpc[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">2</span>])</span>
<span id="cb10-1538"><a href="#cb10-1538"></a><span class="co">#miehet</span></span>
<span id="cb10-1539"><a href="#cb10-1539"></a><span class="kw">lines</span>(gaTestCA1.rpc[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">1</span>],gaTestCA1.rpc[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">2</span>], <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb10-1540"><a href="#cb10-1540"></a></span>
<span id="cb10-1541"><a href="#cb10-1541"></a><span class="kw">summary</span>(gaTestCA1)</span>
<span id="cb10-1542"><a href="#cb10-1542"></a></span>
<span id="cb10-1543"><a href="#cb10-1543"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1b.dat,</span>
<span id="cb10-1544"><a href="#cb10-1544"></a>                             <span class="dt">maaga =</span> <span class="kw">paste</span>(maa, ga, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb10-1545"><a href="#cb10-1545"></a></span>
<span id="cb10-1546"><a href="#cb10-1546"></a><span class="co"># tarkistus, muunnos ok</span></span>
<span id="cb10-1547"><a href="#cb10-1547"></a><span class="co"># ISSP2012esim1b.dat %&gt;% tableX(maa, maaga)</span></span>
<span id="cb10-1548"><a href="#cb10-1548"></a><span class="co"># head(ISSP2012esim2.dat)</span></span>
<span id="cb10-1549"><a href="#cb10-1549"></a><span class="co"># str(ISSP2012esim2.dat)</span></span>
<span id="cb10-1550"><a href="#cb10-1550"></a></span>
<span id="cb10-1551"><a href="#cb10-1551"></a>maagaCA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maaga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat)</span>
<span id="cb10-1552"><a href="#cb10-1552"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.5</span>)</span>
<span id="cb10-1553"><a href="#cb10-1553"></a><span class="kw">plot</span>(maagaCA1, <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta 1&quot;</span>,</span>
<span id="cb10-1554"><a href="#cb10-1554"></a>                <span class="dt">sub =</span> <span class="st">&quot;cex=0.5&quot;</span>)</span>
<span id="cb10-1555"><a href="#cb10-1555"></a></span>
<span id="cb10-1556"><a href="#cb10-1556"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/substvar_fi_Q1Q2.png&#39;</span>)</span>
<span id="cb10-1557"><a href="#cb10-1557"></a><span class="co">#Testataan koodilohkojen listausta, näyttää toimivan mutta vaatii vielä säätämistä.</span></span>
<span id="cb10-1558"><a href="#cb10-1558"></a><span class="co">#Ohje löytyi [Yihui Xienin blogista](https://yihui.name/en/2018/09/code-appendix/)</span></span>
<span id="cb10-1559"><a href="#cb10-1559"></a><span class="co">#(luettu 26.10.2018).</span></span>
<span id="cb10-1560"><a href="#cb10-1560"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/BookdownProc.png&#39;</span>)</span></code></pre></div>
</div>
<div id="tekninen-ympäristö-ja-bookdown-paketti" class="section level2">
<h2><span class="header-section-number">7.6</span> Tekninen ympäristö ja Bookdown-paketti</h2>
<p>Muokataan tiiviimpi pätkä esimerkkireposta bookdown-testi1. Tämä kuva kertoo vain
julkaisutekniikan ympäristön.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/BookdownProc.png&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:L3bdprocess1"></span>
<img src="img/BookdownProc.png" alt="Tulostiedoston prosessointi" width="60%" />
<p class="caption">
Kuva 7.2: Tulostiedoston prosessointi
</p>
</div>

</div>
</div>
<div id="lähteet-1" class="section level1 unnumbered">
<h1>Lähteet</h1>

<div id="refs" class="references">
<div id="ref-RefWorks:doc:5b6c7b0de4b0fd36f5bb4c2a">
<p>(2016), ISSP Research Group. 2016. ”International Social Survey Programme: Family and Changing Gender Roles IV - ISSP 2012”. <a href="https://doi.org/10.4232/1.12661">https://doi.org/10.4232/1.12661</a>.</p>
</div>
<div id="ref-RefWorks:doc:5b15542ee4b0e2616bc42dca">
<p>Blasius, Jörg, ja Victor Thiessen. 2006. ”Assessing Data Quality and Construct Comparability in Cross-National Surveys”. <em>European Sociological Review</em> 22 (3): 229–42. <a href="http://www.jstor.org/stable/3806519">http://www.jstor.org/stable/3806519</a>.</p>
</div>
<div id="ref-RefWorks:doc:5b6f159ce4b0bc0f31734b76">
<p>Greenacre, Michael. 2003. ”Singular value decomposition of matched matrices”. <em>Journal of Applied Statistics</em> 30 (10): 1101–13. <a href="https://doi.org/10.1080/0266476032000107132">https://doi.org/10.1080/0266476032000107132</a>.</p>
</div>
<div id="ref-RefWorks:doc:5b6ef091e4b0984fd9b8c0ca">
<p>———. 2017. ”Multiple Correspondence Analysis (MCA): Theory and Practice, spring 2017 (University of Helsinki )”. <a href="https://moodle.helsinki.fi/course/search.php?search=correspondence+analysis">https://moodle.helsinki.fi/course/search.php?search=correspondence+analysis</a>.</p>
</div>
<div id="ref-RefWorks:doc:5a857a44e4b0ed2d44664d84">
<p>Greenacre, Michael, ja Trevor Hastie. 1987. ”The Geometric Interpretation of Correspondence Analysis”. <em>Journal of the American Statistical Association</em> 82 (398): 437–47. <a href="https://doi.org/10.1080/01621459.1987.10478446">https://doi.org/10.1080/01621459.1987.10478446</a>.</p>
</div>
<div id="ref-RefWorks:doc:5a857a43e4b0ed2d44664d7c">
<p>Greenacre, Michael J. 2010. <em>Biplots in Practice</em>. Bilbao, Spain: Fundacion BBVA. <a href="https://www.fbbva.es/microsite/multivariate-statistics/biplots.html">https://www.fbbva.es/microsite/multivariate-statistics/biplots.html</a>.</p>
</div>
<div id="ref-RefWorks:doc:5a857a43e4b0ed2d44664d78">
<p>———. 2017. <em>Correspondence analysis in practice</em>. Third edition. Boca Raton, Florida: CRC Press. <a href="https://helka.finna.fi/Record/helka.3029760">https://helka.finna.fi/Record/helka.3029760</a>.</p>
</div>
<div id="ref-RefWorks:doc:5c3759c2e4b0085b307c82b5">
<p>McNamara, Amelia, ja Nicholas J. Horton. 2018. ”Wrangling Categorical Data in R”. <em>The American Statistician</em> 72 (1): 97–104. <a href="https://doi.org/10.1080/00031305.2017.1356375">https://doi.org/10.1080/00031305.2017.1356375</a>.</p>
</div>
<div id="ref-RefWorks:doc:5a857a44e4b0ed2d44664d95">
<p>Mustonen, Seppo. 1995. <em>Tilastolliset monimuuttujamenetelmät</em>. Helsinki: Survo Systems. <a href="http://www.survo.fi/mustonen/monim.pdf">http://www.survo.fi/mustonen/monim.pdf</a>.</p>
</div>
<div id="ref-RefWorks:doc:5a857a43e4b0ed2d44664d75">
<p>Roux, Brigitte Le, ja Henry Rouanet. 2004. <em>Geometric data analysis: from correspondence analysis to structured data analysis</em>. Dordrecht: Kluwer Academic Publishers.</p>
</div>
<div id="ref-RefWorks:doc:5a857a44e4b0ed2d44664da4">
<p>Vehkalahti, Kimmo. 2008. <em>Kyselytutkimuksen mittarit ja menetelmät</em>. Helsinki: Tammi. <a href="https://helka.finna.fi/Record/helka.2120450">https://helka.finna.fi/Record/helka.2120450</a>.</p>
</div>
<div id="ref-RefWorks:doc:5bd08fb6e4b05c5447c9a9f9">
<p>Walter, Jessica. 2018. ”The adequacy of measures of gender roles attitudes: a review of current measures in omnibus surveys”. <em>Quality &amp; Quantity</em> 52 (2): 829–48. <a href="https://doi.org/10.1007/s11135-017-0491-x">https://doi.org/10.1007/s11135-017-0491-x</a>.</p>
</div>
<div id="ref-RefWorks:doc:5b6b36dde4b09b7ec442bf8b">
<p>Xie, Yihui. 2016. <em>bookdown: Authoring Books and Technical Documents with R Markdown</em>. Chapman; Hall/CRC. <a href="https://bookdown.org/yihui/bookdown/">https://bookdown.org/yihui/bookdown/</a>.</p>
</div>
<div id="ref-R-bookdown">
<p>———. 2020. <em>bookdown: Authoring Books and Technical Documents with R Markdown</em>. <a href="https://github.com/rstudio/bookdown">https://github.com/rstudio/bookdown</a>.</p>
</div>
<div id="ref-RefWorks:doc:5b6b346fe4b0c619b11b8a3e">
<p>Yihui Xie, Garrett Grolemund, J. J. Allaire. 2018. <em>R Markdown: The Definitive Guide</em>. Chapman; Hall/CRC. <a href="https://bookdown.org/yihui/rmarkdown/">https://bookdown.org/yihui/rmarkdown/</a>.</p>
</div>
</div>
</div>
<p style="text-align: center;">
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
