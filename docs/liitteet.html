<!DOCTYPE html>
<html lang="fi" xml:lang="fi">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Liitteet | Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä</title>
  <meta name="description" content="Tutkielma korrespondenssianalyysistä graafisena data-analyysin menetelmänä." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Liitteet | Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Tutkielma korrespondenssianalyysistä graafisena data-analyysin menetelmänä." />
  <meta name="github-repo" content="hirjus/capaper" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Liitteet | Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä" />
  
  <meta name="twitter:description" content="Tutkielma korrespondenssianalyysistä graafisena data-analyysin menetelmänä." />
  

<meta name="author" content="Jussi Hirvonen" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="yhteenveto.html"/>
<link rel="next" href="lähteet.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Alkutoimia</a></li>
<li class="chapter" data-level="1" data-path="johdanto.html"><a href="johdanto.html"><i class="fa fa-check"></i><b>1</b> Johdanto</a><ul>
<li class="chapter" data-level="1.1" data-path="johdanto.html"><a href="johdanto.html#tutkielman-tavoite"><i class="fa fa-check"></i><b>1.1</b> Tutkielman tavoite</a></li>
<li class="chapter" data-level="1.2" data-path="johdanto.html"><a href="johdanto.html#tärkeimmät-lähteet-ja-ohjelmistot"><i class="fa fa-check"></i><b>1.2</b> Tärkeimmät lähteet ja ohjelmistot</a></li>
<li class="chapter" data-level="1.3" data-path="johdanto.html"><a href="johdanto.html#korrespondenssianalyysin-historiaa"><i class="fa fa-check"></i><b>1.3</b> Korrespondenssianalyysin historiaa</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a><ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#aineiston-rajaaminen-maat-ja-muuttujat"><i class="fa fa-check"></i><b>2.1</b> Aineiston rajaaminen maat ja muuttujat</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html"><i class="fa fa-check"></i><b>3</b> Yksinkertainen korrespondenssianalyysi</a><ul>
<li class="chapter" data-level="3.1" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#äiti-töissä--kärsiikö-lapsi"><i class="fa fa-check"></i><b>3.1</b> Äiti töissä -kärsiikö lapsi?</a></li>
<li class="chapter" data-level="3.2" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#ca---esimerkki"><i class="fa fa-check"></i><b>3.2</b> CA - esimerkki</a></li>
<li class="chapter" data-level="3.3" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#korrespondenssianalyysin-peruskäsitteet"><i class="fa fa-check"></i><b>3.3</b> Korrespondenssianalyysin peruskäsitteet</a><ul>
<li class="chapter" data-level="3.3.1" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#asymmetrinen-kartta-ja-ideaalipisteet"><i class="fa fa-check"></i><b>3.3.1</b> Asymmetrinen kartta ja ideaalipisteet</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#kontribuutiot-kartalla"><i class="fa fa-check"></i><b>3.4</b> Kontribuutiot kartalla</a></li>
<li class="chapter" data-level="3.5" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#massat"><i class="fa fa-check"></i><b>3.5</b> Massat</a></li>
<li class="chapter" data-level="3.6" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#karttojen-erot"><i class="fa fa-check"></i><b>3.6</b> Karttojen erot</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="täydentävät-pisteet.html"><a href="täydentävät-pisteet.html"><i class="fa fa-check"></i><b>4</b> Täydentävät pisteet</a><ul>
<li class="chapter" data-level="4.1" data-path="täydentävät-pisteet.html"><a href="täydentävät-pisteet.html#täydentävät-pisteet-1"><i class="fa fa-check"></i><b>4.1</b> Täydentävät pisteet</a></li>
<li class="chapter" data-level="4.2" data-path="täydentävät-pisteet.html"><a href="täydentävät-pisteet.html#saksan-ja-belgian-alueet"><i class="fa fa-check"></i><b>4.2</b> Saksan ja Belgian alueet</a><ul>
<li class="chapter" data-level="4.2.1" data-path="täydentävät-pisteet.html"><a href="täydentävät-pisteet.html#symmetrinen-kartta"><i class="fa fa-check"></i><b>4.2.1</b> Symmetrinen kartta</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="täydentävät-pisteet.html"><a href="täydentävät-pisteet.html#can-numeeriset-tulokset"><i class="fa fa-check"></i><b>4.3</b> CA:n numeeriset tulokset</a></li>
<li class="chapter" data-level="4.4" data-path="täydentävät-pisteet.html"><a href="täydentävät-pisteet.html#esimerkki-3d--kartasta---saksan-ja-belgian-dimensiot"><i class="fa fa-check"></i><b>4.4</b> Esimerkki 3d- kartasta - Saksan ja Belgian dimensiot</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="yhteisvaikutusmuuttujat.html"><a href="yhteisvaikutusmuuttujat.html"><i class="fa fa-check"></i><b>5</b> Yhteisvaikutusmuuttujat</a><ul>
<li class="chapter" data-level="5.1" data-path="yhteisvaikutusmuuttujat.html"><a href="yhteisvaikutusmuuttujat.html#ikä-ja-sukupuoli"><i class="fa fa-check"></i><b>5.1</b> Ikä ja sukupuoli</a></li>
<li class="chapter" data-level="5.2" data-path="yhteisvaikutusmuuttujat.html"><a href="yhteisvaikutusmuuttujat.html#ikä-sukupuoli-ja-maa"><i class="fa fa-check"></i><b>5.2</b> Ikä, sukupuoli ja maa</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="osajoukon-korrespondenssianalyysi.html"><a href="osajoukon-korrespondenssianalyysi.html"><i class="fa fa-check"></i><b>6</b> Osajoukon korrespondenssianalyysi</a></li>
<li class="chapter" data-level="7" data-path="monimuuttuja-korrespondenssianalyysi-mca.html"><a href="monimuuttuja-korrespondenssianalyysi-mca.html"><i class="fa fa-check"></i><b>7</b> Monimuuttuja-korrespondenssianalyysi (MCA)</a><ul>
<li class="chapter" data-level="7.1" data-path="monimuuttuja-korrespondenssianalyysi-mca.html"><a href="monimuuttuja-korrespondenssianalyysi-mca.html#pinotut-ja-yhdistetyt-taulukot-stacked-and-concatenated-tables"><i class="fa fa-check"></i><b>7.1</b> Pinotut ja yhdistetyt taulukot (stacked and concatenated tables)</a></li>
<li class="chapter" data-level="7.2" data-path="monimuuttuja-korrespondenssianalyysi-mca.html"><a href="monimuuttuja-korrespondenssianalyysi-mca.html#matched-matrices"><i class="fa fa-check"></i><b>7.2</b> Matched matrices</a></li>
<li class="chapter" data-level="7.3" data-path="monimuuttuja-korrespondenssianalyysi-mca.html"><a href="monimuuttuja-korrespondenssianalyysi-mca.html#mca---monimuuttujakorrespondenssianalyysi"><i class="fa fa-check"></i><b>7.3</b> MCA - monimuuttujakorrespondenssianalyysi</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="yhteenveto.html"><a href="yhteenveto.html"><i class="fa fa-check"></i><b>8</b> Yhteenveto</a></li>
<li class="chapter" data-level="" data-path="liitteet.html"><a href="liitteet.html"><i class="fa fa-check"></i>Liitteet</a><ul>
<li class="chapter" data-level="" data-path="liitteet.html"><a href="liitteet.html#liite-1-korrespondenssianalyysin-teoriaa"><i class="fa fa-check"></i>Liite 1: Korrespondenssianalyysin teoriaa</a><ul>
<li class="chapter" data-level="" data-path="liitteet.html"><a href="liitteet.html#korrespondenssianalyysin-perusyhtälöt-ja-kaavat"><i class="fa fa-check"></i>Korrespondenssianalyysin perusyhtälöt ja kaavat</a></li>
<li class="chapter" data-level="" data-path="liitteet.html"><a href="liitteet.html#matriisit-ja-niiden-havainnollistaminen"><i class="fa fa-check"></i>Matriisit ja niiden havainnollistaminen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="liitteet.html"><a href="liitteet.html#liite-2-suomenkielinen-lomake-esimerkki"><i class="fa fa-check"></i>Liite 2: Suomenkielinen lomake (esimerkki)</a></li>
<li class="chapter" data-level="" data-path="liitteet.html"><a href="liitteet.html#liite-3-tekninen-ympäristö-ja-bookdown-paketti"><i class="fa fa-check"></i>Liite 3: Tekninen ympäristö ja Bookdown-paketti</a></li>
<li class="chapter" data-level="" data-path="liitteet.html"><a href="liitteet.html#liite-4-r---koodi"><i class="fa fa-check"></i>Liite 4: R - koodi</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lähteet.html"><a href="lähteet.html"><i class="fa fa-check"></i>Lähteet</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="liitteet" class="section level1 unnumbered">
<h1>Liitteet</h1>
<div id="liite-1-korrespondenssianalyysin-teoriaa" class="section level2 unnumbered">
<h2>Liite 1: Korrespondenssianalyysin teoriaa</h2>
<div id="korrespondenssianalyysin-perusyhtälöt-ja-kaavat" class="section level3 unnumbered">
<h3>Korrespondenssianalyysin perusyhtälöt ja kaavat</h3>
<p>Tässä lähteenä Greenacren kirja<span class="citation">(M. J. Greenacre <a href="lähteet.html#ref-RefWorks:doc:5a857a43e4b0ed2d44664d78" role="doc-biblioref">2017</a>)</span> (ca in practice) ja sen liite
“Theory of CA”.</p>
<p><strong>edit</strong> Muistiinpanoja löytyy, joissa viitataan myös Biplots in practice - kirjaan.
Kevään 2017 kurssin luentokalvoja on myös käytetty. Lisäillään vielä käsitteitä
LeRouxin ja Rouanetin kirjasta, jos on tarvis.</p>
<p>Datamatriisilla <span class="math inline">\(\boldsymbol{N}\)</span> on <span class="math inline">\(I\)</span> riviä ja <span class="math inline">\(J\)</span> sarakketta (<span class="math inline">\(I x J\)</span> ).
Alkiot ovat ei-negatiivisia (eli nollat sallittuja) ja samassa mitta-asteikossa.
Jos mitta-asteikko on intervalli- tai suhdeasteikko, mittayksiköiden on oltava
samoja (esim. euroja, metrejä). Taulukon alkioiden summa on
<span class="math inline">\(\sum_{i} \sum_{j}n_{ij} = n\)</span>, missä <span class="math inline">\(i = 1, \dots , I\)</span> ja <span class="math inline">\(j = 1, \dots , J\)</span>.
GDA-kirjassa on tarkennettu tätä vaatimusta ei-negatiivisuudesta.</p>
<p>Korrespondenssimatriisi <span class="math inline">\(\boldsymbol{P}\)</span> saadaan jakamalla matriisin
<span class="math inline">\(\boldsymbol{N}\)</span> alkiot niiden summalla <span class="math inline">\(n\)</span> .</p>
<p>Merkitään matriisin <span class="math inline">\(\boldsymbol{P}\)</span> rivisummien vektoria
<span class="math inline">\(\boldsymbol{r}\)</span> (= <span class="math inline">\((r_{1}, \dots, r_{I})\)</span>) ja sarakesummien vektoria
<span class="math inline">\(\boldsymbol{c}\)</span> (= <span class="math inline">\((c_{1}, \dots, c_{J})\)</span>).
Niitä vastaavat diagonaalimatriisit ovat <span class="math inline">\(\boldsymbol{D_r}\)</span> ja
<span class="math inline">\(\boldsymbol{D_c}\)</span>.</p>
<p>Korrespondenssianalyysin ratkaistaan singluaariarvohajoitelman avulla. Hyvin
yleinen tulos, jostain syystä tilastotieteessä tullu tunnetuksi melko myöhään
(Mustonen 1985).</p>
<p>Singulaariarvohajoitelma (singular value decomposition) tuottaa ratkaisun kun
sitä sovelletaan standardoituun residuaalimatriisiin <span class="math inline">\(\boldsymbol{S}\)</span>.</p>
<p><span class="math display" id="eq:svd1">\[\begin{equation}
\boldsymbol{S} = \boldsymbol{D_r}^{-1/2}(\boldsymbol{P} - \boldsymbol{r}\boldsymbol{c}^T)\boldsymbol{D_c}^{-1/2}
\tag{8.1}
\end{equation}\]</span></p>
<p>Residuaalimatriisi voidaan esittää myös ns. kontingenssi-suhdelukujen
(contingency ratio) avulla kahdella tavalla.</p>
<p><span class="math display" id="eq:contrat1">\[\begin{equation}
\boldsymbol{D_r}^{-1} \boldsymbol{P} \boldsymbol{D_c}^{-1} = \left( \frac{p_{ij}} {r_{i} c{j}} \right)
\tag{8.2}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:contrat2">\[\begin{equation}
\boldsymbol{S} = \boldsymbol{D_r}^{1/2} (\boldsymbol{D_r}^{-1} \boldsymbol{P} \boldsymbol{D_c}^{-1} - \boldsymbol{1}\boldsymbol{1}^{T} ) \boldsymbol{D_c}^{-1/2}  \;\;\; .
\tag{8.3}
\end{equation}\]</span></p>
<p>Toinen esitystapa on hyödyllinen, kun tarkastellaan CA:n yhteyksiä muihin
läheisiin menetelmiin. Näitä menetelmiä kuten myös korrespondenssianalyysiä kutsutaan monilla
nimillä:“suhteellisten osuuksien datan” analyysi (log ratio analysis of compositiona data),
moniulotteinen skaalaus, lineaarinen diskriminanttianalyysi, kanoninen korrelaatioanalyysi,
pääkomponettianalyysi, kaksoiskuvat ja muutä SVD-hajoitelmaan perustuvat dimensioden
vähentämisen menetelmät.</p>
<p>Samat kaavat voi esittää myös alkiomuodossa:</p>
<p><span class="math display" id="eq:contrat11">\[\begin{equation}
s_{ij} = \frac{p_{ij}-r_{i}c_{j}} { \sqrt{r_{i}c_{j} } }
\tag{8.4}
\end{equation}\]</span></p>
<p>ja toinen
<span class="math display" id="eq:contrat21">\[\begin{equation}
s_{ij} = \sqrt{r_{i}} \left( \frac{p_{ij}}{r_{i}c_{j}} \right) \sqrt{c_{j}} \;\;\; .
\tag{8.5}
\end{equation}\]</span></p>
<p>Alkimuodosasa esitetyistä kaavoista näkee intuitivisesti rivi- ja sarakeratkaisujen sidoksen.
Ratkaisujen duaalisuus on teoreettinen tulos, jonka voi perustella täsmällisesti
algebrallisen geometrian avulla. Käytännössä rivi- ja sarekeongelman duaalisuus tarkoittaa sitä,
että vain toinen ongelma on ratkaistava.</p>
<p>Singulaariarvohajoitelma (singular value decomposition, SVD) matriisille <span class="math inline">\(\boldsymbol{S}\)</span> on</p>
<p><span class="math display" id="eq:svd2">\[\begin{equation}
\boldsymbol{S} = \boldsymbol{U} \boldsymbol{D_{\alpha}} \boldsymbol{V}^{T}
\tag{8.6}
\end{equation}\]</span></p>
<p>missä <span class="math inline">\(\boldsymbol{D_{\alpha}}\)</span> on diagonaalimatriisi, jonka alkiot ovat
singulaariarvot suuruusjärjestyksessä <span class="math inline">\(\alpha_{1}\geq \alpha_{1} \geq \cdots\)</span>.</p>
<p>Matriisit <span class="math inline">\(\boldsymbol{U}\)</span> ja <span class="math inline">\(\boldsymbol{V}\)</span> ovat ortogonaalisia
singulaarivektoreiden matriiseja. Singulaariarvohajoitelman merkitys dimensioiden
vähentämiselle perustuu Eckart - Young - teoreemaan. Teoreema kertoo
että saamme pienimmän neliösumman <span class="math inline">\(m\)</span> - ulotteisen approksimaation matriisille
<span class="math inline">\(\boldsymbol{S}\)</span> (CAinP, ss. 244) matriisien <span class="math inline">\(\boldsymbol{U}\)</span> ja <span class="math inline">\(\boldsymbol{V}\)</span>
ensimmäisten sarakkeiden ja ensimmäisten singulaariarvojen avulla.</p>
<p><span class="math display" id="eq:svd3">\[\begin{equation}
\boldsymbol{S}_{(m)} = \boldsymbol{U}_{(m)} \boldsymbol{D}_{\alpha(m)} \boldsymbol{V}_{(m)}^{T}
\tag{8.7}
\end{equation}\]</span></p>
<p>Korrrespondenssianalyysin ratkaisualgoritmissa tätä tulosta on muokattava niin,
että rivien ja sarakkeiden massat huomioidaan pienimmän neliösumman
approksimaatiossa painoina.</p>
<p>Näin saadaan standardikoordinaatit ja principal-koordinaatit riveille ja
sarakkeille.</p>
<p>Rivien standardikoordinaatit</p>
<p><span class="math display" id="eq:rivistd1">\[\begin{equation}
\boldsymbol{\Phi} = \boldsymbol{D_r}^{-\frac{1}{2}} \boldsymbol{U}
\tag{8.8}
\end{equation}\]</span></p>
<p>Sarakkeiden standardikoordinaatit</p>
<p><span class="math display" id="eq:sarakestd1">\[\begin{equation}
 \boldsymbol{\Gamma} = \boldsymbol{D_c}^{-\frac{1}{2}} \boldsymbol{V}
 \tag{8.9}
\end{equation}\]</span></p>
<p>Rivien pääkoordinaatit</p>
<p><span class="math display" id="eq:riviprinc1">\[\begin{equation}
 \boldsymbol{F} =   \boldsymbol{D_r}^{-\frac{1}{2}} \boldsymbol{U}  \boldsymbol{D_{\alpha}} = \boldsymbol{\Phi} \boldsymbol{D_{\alpha}}
\tag{8.10}
\end{equation}\]</span></p>
<p>Sarakkeiden pääkoordinaatit
<span class="math display" id="eq:sarakeprinc1">\[\begin{equation}
 \boldsymbol{G}  = \boldsymbol{D_c}^{-\frac{1}{2}} \boldsymbol{V} \boldsymbol{D_{\alpha}} = \boldsymbol{\Gamma}  \boldsymbol{D_{\alpha}}
 \tag{8.11}
\end{equation}\]</span></p>
<p>Pääakseleiden inertiat (principal inertias) <span class="math inline">\(\lambda_{k}\)</span></p>
<p><span class="math display">\[\begin{equation}
\lambda_{k} = \alpha_{k}^2, k = 1,\dots,K,
K = min \{ I-1, J-1 \}
\end{equation}\]</span></p>
<p><strong>edit 1</strong> CA:ssa ratkaisun akseleiden inertiaa kutsutaan usein ominaisarvoksi,
mutta periaatteessa SVD-ratkaisulla saadaan singulaariarvot, ja niiden neliöt ovat
akseleiden inertioita. Ominaisarvojen ja sigulaariarvojen yhteys on läheinen ja
riippuu diagonalisoitavan matriisin ominaisuuksista.</p>
<p><strong>edit 1</strong> ratkaisun dimenisio, maksimi-inertia.</p>
<p>Bilineaarinen korresepondenssimalli</p>
<p>Korrespondenssimatriisi <span class="math inline">\(\boldsymbol{P}\)</span> voidaan esittää matriisi- ja
alkiomuodossa ns. palautuskaavana (reconstitution formula).</p>
<p><span class="math display" id="eq:reconstform1">\[\begin{equation}
\boldsymbol{P} = \boldsymbol{D}_{r} \left( \boldsymbol{1}\boldsymbol{1}^{T} + \boldsymbol{\Phi}\boldsymbol{D}_{\lambda}^{\frac {1}{2}}\boldsymbol{\Gamma}^{T}\right)\boldsymbol{D}_{c}
\tag{8.12}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:reconstform2">\[\begin{equation}
p_ {ij}= r_{i}c_{j} \left(1 + \sum_{k=1}^{K} \sqrt{\lambda_{k}} \phi_{ik} \gamma_{jk} \right)
\tag{8.13}
\end{equation}\]</span></p>
<p>Tässä viitataan s. 101 (13.4), 109 (14.9), ja 109-110 (14.10 ja 14.11).
Palautuskavoilla on monta esitystapaa bilineaarisessa mallissa.</p>
<p>Rivien ja sarakkeiden riippuvuus ja transitioyhtälöt. ss. 244, 108-109 skalaariversiot.</p>
<p>Pääkoordinaatit standardikoordinaattien funktiona
(ns. barysentrinen ominaisuus - barycentric relationships)</p>
<p><span class="math display" id="eq:barysentr1">\[\begin{equation}
\boldsymbol{F} = \boldsymbol{D}_{r}^{-1} \boldsymbol{P}\boldsymbol{\Gamma}
\tag{8.14}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:barysentr2">\[\begin{equation}
\boldsymbol{G} = \boldsymbol{D}_{c}^{-1} \boldsymbol{P}^{T}\boldsymbol{\Phi}
\tag{8.15}
\end{equation}\]</span></p>
<p>Pääkoordinaatit pääkoordinaattien funktiointa:</p>
<p><span class="math display" id="eq:barysentr3">\[\begin{equation}
\boldsymbol{F} = \boldsymbol{D}_{r}^{-1} \boldsymbol{P}\boldsymbol{G}\boldsymbol{D}_{\lambda}^{-\frac{1}{2}}
\tag{8.16}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:barysentr4">\[\begin{equation}
\boldsymbol{G} = \boldsymbol{D}_{c}^{-1} \boldsymbol{P}^{T}\boldsymbol{F}\boldsymbol{D}_{\lambda}^{-\frac{1}{2}}
\tag{8.17}
\end{equation}\]</span></p>
<p>Yhtälöt <a href="liitteet.html#eq:barysentr1">(8.14)</a> ja <a href="liitteet.html#eq:barysentr1">(8.14)</a> esittävät profiilipisteet ideaalipisteiden (vertex points)
painotettuina keskiarvoina, painoina profiilin elementit. Asymmetriset kartat
(rivien tai sarakkeiden suhteen) perustuvat näihin yhtälöihin. Yhtälöiden <a href="liitteet.html#eq:barysentr3">(8.16)</a>
ja <a href="liitteet.html#eq:barysentr4">(8.17)</a> kahdet pääkoordinaatit ovat perusta symmetrisille kartoille. Myös niitä
yhdistää barisentrinen painotetun keskiarvon riippuvuus, mutta mukana ovat skaalaustekijät
<span class="math inline">\(\frac{1}{\sqrt{\lambda_{i}}}\)</span>. Skaalaustekijä on jokaisessa dimensiossa sen inertia, suurimmasta pienimpään.</p>
<p>Kokeillaan vielä kaavaviitteitä: kaavojen <a href="yksinkertainen-korrespondenssianalyysi.html#eq:khii21">(3.1)</a> ja <a href="yksinkertainen-korrespondenssianalyysi.html#eq:khii22">(3.2)</a>
yhteyden pitäisi olla selkeä.</p>
<p><strong>Pisteet ja projektio aliavaruuteen</strong></p>
<p>Kuva on kurssimateriaaleista<span class="citation">(M. Greenacre <a href="lähteet.html#ref-RefWorks:doc:5b6ef091e4b0984fd9b8c0ca" role="doc-biblioref">2017</a>)</span>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="liitteet.html#cb28-1"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/CAquality.png&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:projectionimg1"></span>
<img src="img/CAquality.png" alt="Pisteen projektio aliavaruuteen" width="70%" />
<p class="caption">
Kuva 8.1: Pisteen projektio aliavaruuteen
</p>
</div>
<p>Kuvassa on esitetty korrespondenssianalyysin ratkaisun minimointiongelma. Pisteen
projektio on sitä parempi mitä pienempi kulma on sentroidista pisteeseen
piirtetyn janan ja pisteen projektion välillä. COR - tunnusluku ca-funktion
numeerisissa tuloksissa tämän kulman kosinin neliö. Pisteen kuvauksen laatu (qlt)
ca-tuloksissa on valitun approsimaation akseleiden kvaliteettien (COR) summa.</p>
<p>Kuvasta voi myös hahmottaa sen periaatteen, että projektiossa kaukana olevat
pisteet ovat kaukana myös alkuperäisessä avaruudessa. Projektiossa lähekkäin
olevat pisteet voivat olla alkuperäisessä avaruudessa kaukana toisistaan,
jos niiden projektion laatu on huono.</p>
</div>
<div id="matriisit-ja-niiden-havainnollistaminen" class="section level3 unnumbered">
<h3>Matriisit ja niiden havainnollistaminen</h3>
<p><strong>edit</strong> Nämä tässä varalla, jos matriisikaavoja tarvitaan lisää. Ehkä ei?</p>
<p>Korrespondenssianalyysin sovelluksissa tutkimusongelman ratkaisu on usein sopivan
matriisin rakentaminen.</p>
<p><strong>edit: kaavaesimerkkejä</strong></p>
<p><span class="math display">\[\begin{equation}
A = \begin{bmatrix}
    a_{11} &amp; a_{12} &amp; \dots &amp; a_{1k}\\
    \vdots &amp; \ddots &amp; \\
    \\
    \vdots \\
    a_{n1} &amp; \dots  &amp; \dots &amp; a_{nk}
    \end{bmatrix}
\end{equation}\]</span></p>
<p>Ehkäpä ABBA onnistuu paremmin tällä notaatiolla?</p>
<p><span class="math display">\[\begin{equation}
A = \begin{bmatrix}
    A_{11} &amp; B_{12}  \\
    B_{21} &amp; A_{22}
    \end{bmatrix}
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}
A = \begin{bmatrix}
    A_{maa, Q1a} &amp; A_{maa, Q1b}  \\
    B_{gage, Q1a} &amp; B_{gage, Q1b}
    \end{bmatrix}
\end{equation}\]</span></p>
<p><strong>Pinotut tai yhdistetyt matriisit (“stacked and concatenated matrices”)</strong></p>
<p>Yksinkertainen korrespondenssianalyysi on kahden luokittelumuuttujan määrittämän
taulukon analyysiä, mutta sitä voi soveltaa myös usean muuttujan analyysiin.
Menetelmän matemaattinen perusta ja ratkaisualgoritmi (SVD) toimivat, tulkinta
vain muuttuu.</p>
<p>Yksinkertaisin laajennus on lisätä alkuperäisen taulukon alle toinen taulukko.
Rivit ovat esimerkissä maittan summattuja vastauksia, ja niiden alle voidaan
lisätä joku toinen luokittelumuuttuja. Havaintojen määrä yhditetyssä (“pinotussa”)
taulussa kaksinkertaistuu.</p>
<p>Taulukoiden yhdistämisen idea on inertian dekomponointi. Yhdistetyn matriisin inertia
voidaan eri tavoin esittää alimatriisien inertian summana. Tällöin jokaisen alimatriisin
reunajakauman tulee olla sama, ja puuttuvat tiedot vääristävät tuloksia.</p>
<p>Merkitään edellisten analyysien kuuden maan ja viiden vastausvaihtoehdon
taulukkoa matriisilla <span class="math inline">\(\boldsymbol{ A}_{I J}\)</span>, missä <span class="math inline">\(I\)</span> on rivien ja <span class="math inline">\(J\)</span>
sarakkeiden lukumäärä. Taulukoidaan ikäluokan (1 - 6) ja sukupuolen (<span class="math inline">\(f\)</span> = nainen,
<span class="math inline">\(m\)</span> = mies) vuorovaikutusmuuttuja (<span class="math inline">\(f1,\dots , f6\)</span> ja <span class="math inline">\(m1,\dots , m6\)</span>) samojen
vastausvaihtoehtojen kanssa. Jos tätä taulukkoa merkitään matriisilla
<span class="math inline">\(\boldsymbol{ B}_{I^{`} J}\)</span>, voimme muodostaa yhdistetyn matriisin</p>
<p>Rivien lukumäärä on molemmissa matriiseissa sama, koska luokkia sattuu olemaan
kuusi sekä maa- että ikä- ja sukupuoli - luokittelumuuttujissa. Kun matriisit
ovat dimensioiltaan ja myös muuttujien sisällön kannalta samankaltaiset, niitä
kutsutaan yhteensopiviksi (``matched matrix’’). Tällöin yksinkertaista
korrespondenssianalyyisä voi soveltaa tutkimusongelmaan, jossa halutaan erotella
jonkun ryhmän sisäinen vaihtelu ryhmien välisiestä vaihtelusta.
(Greenacren ehdottama ABBA - analyysi).</p>
<p>ABBA on erityistapaus yleisemmästä moniulotteisen taulukon (multiway table) analyysistä,
jossa useita kahden muuttujan taulukoita ``pinotaan’’ päällekkäin ja rinnakkain.
Voimme ottaa yhden kysymyksen vastausten lisäksi analyysiin mukaan useamman
kysymyksen vastaukset laajentamalla kahden päällekkäisen matriisin taulukkoa oikealle.</p>
<p><strong>Monimuuttuja-korrespondenssianalyysi MCA</strong></p>
<p>Usean muuttujan korrespondenssianalyysissä tutkitaan usean muuttujan välisiä yhteyksiä.
Kartan tulkinnan apuna siihen voidaan lisätä havaintojen sijaan niiden keskiarvopisteitä
ja niille simuloituja luottamusellipsejä. Kuvien pääongelma on liian suuri määärä pisteitä,
ja analyysin lopputulos on usein mahdollisimman yksinkertainen kartta.</p>
<p>Usean muuttujan analyysissä kohteena on joko indikaattorimatriisi <span class="math inline">\(\boldsymbol{Z}\)</span> tai
Burtin matriisi <span class="math inline">\(\boldsymbol{B}\)</span></p>
<p>Indikaattorimatriisissa rivit ovat havaintoja ja sarakkeet luokittelumuuttujan arvoja.
Havaintoa vastaa rivi nollia ja arvo 1 valitun vastausvaihtoehdon kohdalla. Tästä seuraa,
että vain erilaiset vastaukset määrittävät rivien etäisyyksiä.</p>
<p>Burtin matriisi on erikoistapaus yhdistetyistä matriiseista. Siihen on koottu kaikki tutkittavien
muuttujien pareittan muodostetut taulukot. Diagonaalilla ovat muuttujien ristiintaulukoinnit
itsensä kanssa. Ratkaisu riippuu vain näistä parittaisista taulukoista.</p>
<p>Burtin matriisi on kätevä välivaihe matriisien yhdistelyssä.</p>
<p>Molemmat matriisit paisuttavat keinotekoisesti kokonaisinertiaa, ja esimerkikisi kaksiulotteisen kartan
selitetyn inertian osuudet jäävät melko pieniksi. Ratkaisuna on inertian oikaisu tai korjaus
(adjusted inertia), jossa mm. poistetaan kokonaisinertialaskelmista Burtin matriisin
diagonaalilla olevat alimatriisit. Näillä korjauksilla ei ole vaikutusta kartan pisteiden
sijaintiin. Tämä menetelmä on ca-paketin mjca-funktion oletus.</p>
<p>Kolmas vaihtoehto on ns. yhdistetty korrespondenssianalyysi (joint ca).</p>
</div>
</div>
<div id="liite-2-suomenkielinen-lomake-esimerkki" class="section level2 unnumbered">
<h2>Liite 2: Suomenkielinen lomake (esimerkki)</h2>
<p>Tämä kuva on myös tekstissä, kätevä tapa esittää siististi kysymysten pitkät
versiot.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="liitteet.html#cb29-1"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/substvar_fi_Q1Q2.png&#39;</span>)</span></code></pre></div>
</div>
<div id="liite-3-tekninen-ympäristö-ja-bookdown-paketti" class="section level2 unnumbered">
<h2>Liite 3: Tekninen ympäristö ja Bookdown-paketti</h2>
<p>Muokataan tiiviimpi pätkä esimerkkireposta bookdown-testi1. Tämä kuva kertoo vain
julkaisutekniikan ympäristön.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="liitteet.html#cb30-1"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/BookdownProc.png&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:L3bdprocess1"></span>
<img src="img/BookdownProc.png" alt="Tulostiedoston prosessointi" width="70%" />
<p class="caption">
Kuva 8.2: Tulostiedoston prosessointi
</p>
</div>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="liitteet.html#cb31-1"></a><span class="co"># pois out.width=&#39;50%&#39;,</span></span></code></pre></div>
</div>
<div id="liite-4-r---koodi" class="section level2 unnumbered">
<h2>Liite 4: R - koodi</h2>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="liitteet.html#cb32-1"></a><span class="co"># testaukseen 7.11.2020 virheilmoituksia varten arvo TRUE</span></span>
<span id="cb32-2"><a href="liitteet.html#cb32-2"></a><span class="kw">options</span>(<span class="dt">tinytex.verbose =</span> <span class="ot">TRUE</span>)</span>
<span id="cb32-3"><a href="liitteet.html#cb32-3"></a></span>
<span id="cb32-4"><a href="liitteet.html#cb32-4"></a><span class="co"># 18.10.2020</span></span>
<span id="cb32-5"><a href="liitteet.html#cb32-5"></a><span class="kw">library</span>(rgl)</span>
<span id="cb32-6"><a href="liitteet.html#cb32-6"></a><span class="kw">library</span>(ca)</span>
<span id="cb32-7"><a href="liitteet.html#cb32-7"></a><span class="kw">library</span>(haven)</span>
<span id="cb32-8"><a href="liitteet.html#cb32-8"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb32-9"><a href="liitteet.html#cb32-9"></a><span class="kw">library</span>(knitr)</span>
<span id="cb32-10"><a href="liitteet.html#cb32-10"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb32-11"><a href="liitteet.html#cb32-11"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb32-12"><a href="liitteet.html#cb32-12"></a><span class="kw">library</span>(rmarkdown)</span>
<span id="cb32-13"><a href="liitteet.html#cb32-13"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb32-14"><a href="liitteet.html#cb32-14"></a><span class="kw">library</span>(furniture)</span>
<span id="cb32-15"><a href="liitteet.html#cb32-15"></a><span class="kw">library</span>(scales) <span class="co"># G_1_2 - kuva</span></span>
<span id="cb32-16"><a href="liitteet.html#cb32-16"></a><span class="kw">library</span>(reshape2)  <span class="co"># G_1_2 - kuva</span></span>
<span id="cb32-17"><a href="liitteet.html#cb32-17"></a><span class="kw">library</span>(printr) <span class="co">#19.5.18 taulukoiden ja matriisien tulostukseen</span></span>
<span id="cb32-18"><a href="liitteet.html#cb32-18"></a><span class="kw">library</span>(bookdown)</span>
<span id="cb32-19"><a href="liitteet.html#cb32-19"></a><span class="kw">library</span>(tinytex)</span>
<span id="cb32-20"><a href="liitteet.html#cb32-20"></a><span class="kw">library</span>(assertthat)</span>
<span id="cb32-21"><a href="liitteet.html#cb32-21"></a></span>
<span id="cb32-22"><a href="liitteet.html#cb32-22"></a></span>
<span id="cb32-23"><a href="liitteet.html#cb32-23"></a><span class="co"># automatically create a bib database for R packages</span></span>
<span id="cb32-24"><a href="liitteet.html#cb32-24"></a>knitr<span class="op">::</span><span class="kw">write_bib</span>(<span class="kw">c</span>(</span>
<span id="cb32-25"><a href="liitteet.html#cb32-25"></a>  <span class="kw">.packages</span>(), <span class="st">&#39;bookdown&#39;</span>, <span class="st">&#39;knitr&#39;</span>, <span class="st">&#39;rmarkdown&#39;</span></span>
<span id="cb32-26"><a href="liitteet.html#cb32-26"></a>), <span class="st">&#39;packages.bib&#39;</span>)</span>
<span id="cb32-27"><a href="liitteet.html#cb32-27"></a></span>
<span id="cb32-28"><a href="liitteet.html#cb32-28"></a><span class="co"># include FALSE: ei koodia eikä tulostusta dokumenttiin - poistettava turhia</span></span>
<span id="cb32-29"><a href="liitteet.html#cb32-29"></a><span class="co"># välitulostuksia (18.10.2020)</span></span>
<span id="cb32-30"><a href="liitteet.html#cb32-30"></a><span class="co"># Aineiston rajaamisen kolme vaihetta (10.2018)</span></span>
<span id="cb32-31"><a href="liitteet.html#cb32-31"></a><span class="co"># </span></span>
<span id="cb32-32"><a href="liitteet.html#cb32-32"></a><span class="co"># TIEDOSTOJEN NIMEÄMINEN</span></span>
<span id="cb32-33"><a href="liitteet.html#cb32-33"></a><span class="co">#</span></span>
<span id="cb32-34"><a href="liitteet.html#cb32-34"></a><span class="co"># R-datatiedostot .data - tarkenteella ovat osajoukkoja koko ISSP-datasta ISSP2012.data</span></span>
<span id="cb32-35"><a href="liitteet.html#cb32-35"></a><span class="co"># R-datatiedostot .dat - tarkenteella: mukana alkuperäisten muuttujien muunnoksia </span></span>
<span id="cb32-36"><a href="liitteet.html#cb32-36"></a><span class="co"># (yleensä as_factor), alkuperäisissä muuttujissa mukana SPSS-tiedoston metadata.</span></span>
<span id="cb32-37"><a href="liitteet.html#cb32-37"></a><span class="co">#</span></span>
<span id="cb32-38"><a href="liitteet.html#cb32-38"></a><span class="co"># Luokittelumuuttujan tyyppi on datan lukemisen jälkeen yleensä merkkijono (char) </span></span>
<span id="cb32-39"><a href="liitteet.html#cb32-39"></a><span class="co"># ja haven_labelled. </span></span>
<span id="cb32-40"><a href="liitteet.html#cb32-40"></a><span class="co">#</span></span>
<span id="cb32-41"><a href="liitteet.html#cb32-41"></a><span class="co"># Muutetaan R-datassa ordinaali- tai  nominaaliasteikon muuttujat haven-paketin </span></span>
<span id="cb32-42"><a href="liitteet.html#cb32-42"></a><span class="co"># as_factor - funktiolla faktoreiksi. R:n faktorityypin muuttujille voidaan tarvittaessa </span></span>
<span id="cb32-43"><a href="liitteet.html#cb32-43"></a><span class="co"># määritellä järjestys, toistaiseksi niin ei tehdä (25.9.2018). </span></span>
<span id="cb32-44"><a href="liitteet.html#cb32-44"></a><span class="co">#</span></span>
<span id="cb32-45"><a href="liitteet.html#cb32-45"></a><span class="co"># Muunnetun muuttujan rinnalla säilytetään SPSS-tiedostosta luettu muuttja, metatiedot säilyvät </span></span>
<span id="cb32-46"><a href="liitteet.html#cb32-46"></a><span class="co"># alkuperäisessä.</span></span>
<span id="cb32-47"><a href="liitteet.html#cb32-47"></a><span class="co">#       </span></span>
<span id="cb32-48"><a href="liitteet.html#cb32-48"></a><span class="co"># R-datatiedostot joiden nimen loppuosa on muotoa *esim1.dat: käytetään analyyseissä</span></span>
<span id="cb32-49"><a href="liitteet.html#cb32-49"></a><span class="co">#</span></span>
<span id="cb32-50"><a href="liitteet.html#cb32-50"></a><span class="co"># 1. VALITAAN MAAT (25) -&gt; ISSP2012jh1a.data. Muuttujat koodilohkossa datasel_vars1</span></span>
<span id="cb32-51"><a href="liitteet.html#cb32-51"></a><span class="co">#</span></span>
<span id="cb32-52"><a href="liitteet.html#cb32-52"></a><span class="co"># kolme maa-muuttujaa datassa. V3 erottelee joidenkin maiden alueita, V4 on koko </span></span>
<span id="cb32-53"><a href="liitteet.html#cb32-53"></a><span class="co"># maan koodi ja C_ALPHAN on maan kaksimerkkinen tunnus.</span></span>
<span id="cb32-54"><a href="liitteet.html#cb32-54"></a><span class="co">#</span></span>
<span id="cb32-55"><a href="liitteet.html#cb32-55"></a><span class="co"># V3 - Country/ Sample ISO 3166 Code (see V4 for codes for whole nation states)</span></span>
<span id="cb32-56"><a href="liitteet.html#cb32-56"></a><span class="co"># V3 erot valituissa maissa</span></span>
<span id="cb32-57"><a href="liitteet.html#cb32-57"></a><span class="co"># 5601 BE-FLA-Belgium/ Flanders</span></span>
<span id="cb32-58"><a href="liitteet.html#cb32-58"></a><span class="co"># 5602 BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb32-59"><a href="liitteet.html#cb32-59"></a><span class="co"># 5603 BE-BRU-Belgium/ Brussels</span></span>
<span id="cb32-60"><a href="liitteet.html#cb32-60"></a><span class="co"># 27601 DE-W-Germany-West</span></span>
<span id="cb32-61"><a href="liitteet.html#cb32-61"></a><span class="co"># 27602 DE-E-Germany-East</span></span>
<span id="cb32-62"><a href="liitteet.html#cb32-62"></a><span class="co"># 62001 PT-Portugal 2012: first fieldwork round (main sample)</span></span>
<span id="cb32-63"><a href="liitteet.html#cb32-63"></a><span class="co"># 62002 PT-Portugal 2012: second fieldwork round (complementary sample)</span></span>
<span id="cb32-64"><a href="liitteet.html#cb32-64"></a><span class="co"># Myös tämä on erikoinen, näyttää olevan vakio kun V4 = 826:</span></span>
<span id="cb32-65"><a href="liitteet.html#cb32-65"></a><span class="co"># 82601 GB-GBN-Great Britain</span></span>
<span id="cb32-66"><a href="liitteet.html#cb32-66"></a><span class="co"># Portugalissa ainestoa täydennettiin, koska siinä oli puutteita. Jako ei siis ole oleellinen,</span></span>
<span id="cb32-67"><a href="liitteet.html#cb32-67"></a><span class="co"># mutta muuut ovat. Tähdellä merkityt maat valitaan johdattelevaan esimerkkiin.</span></span>
<span id="cb32-68"><a href="liitteet.html#cb32-68"></a><span class="co">#</span></span>
<span id="cb32-69"><a href="liitteet.html#cb32-69"></a><span class="co"># Maat (25)</span></span>
<span id="cb32-70"><a href="liitteet.html#cb32-70"></a><span class="co">#</span></span>
<span id="cb32-71"><a href="liitteet.html#cb32-71"></a><span class="co"># 36 AU-Australia</span></span>
<span id="cb32-72"><a href="liitteet.html#cb32-72"></a><span class="co"># 40 AT-Austria</span></span>
<span id="cb32-73"><a href="liitteet.html#cb32-73"></a><span class="co"># 56 BE-Belgium*</span></span>
<span id="cb32-74"><a href="liitteet.html#cb32-74"></a><span class="co"># 100 BG-Bulgaria*</span></span>
<span id="cb32-75"><a href="liitteet.html#cb32-75"></a><span class="co"># 124 CA-Canada</span></span>
<span id="cb32-76"><a href="liitteet.html#cb32-76"></a><span class="co"># 191 HR-Croatia</span></span>
<span id="cb32-77"><a href="liitteet.html#cb32-77"></a><span class="co"># 203 CZ-Czech Republic</span></span>
<span id="cb32-78"><a href="liitteet.html#cb32-78"></a><span class="co"># 208 DK-Denmark*</span></span>
<span id="cb32-79"><a href="liitteet.html#cb32-79"></a><span class="co"># 246 FI-Finland*</span></span>
<span id="cb32-80"><a href="liitteet.html#cb32-80"></a><span class="co"># 250 FR-France</span></span>
<span id="cb32-81"><a href="liitteet.html#cb32-81"></a><span class="co"># 276 DE-Germany*</span></span>
<span id="cb32-82"><a href="liitteet.html#cb32-82"></a><span class="co"># 348 HU-Hungary*</span></span>
<span id="cb32-83"><a href="liitteet.html#cb32-83"></a><span class="co"># 352 IS-Iceland</span></span>
<span id="cb32-84"><a href="liitteet.html#cb32-84"></a><span class="co"># 372 IE-Ireland</span></span>
<span id="cb32-85"><a href="liitteet.html#cb32-85"></a><span class="co"># 428 LV-Latvia</span></span>
<span id="cb32-86"><a href="liitteet.html#cb32-86"></a><span class="co"># 440 LT-Lithuania</span></span>
<span id="cb32-87"><a href="liitteet.html#cb32-87"></a><span class="co"># 528 NL-Netherlands</span></span>
<span id="cb32-88"><a href="liitteet.html#cb32-88"></a><span class="co"># 578 NO-Norway</span></span>
<span id="cb32-89"><a href="liitteet.html#cb32-89"></a><span class="co"># 616 PL-Poland</span></span>
<span id="cb32-90"><a href="liitteet.html#cb32-90"></a><span class="co"># 620 PT-Portugal</span></span>
<span id="cb32-91"><a href="liitteet.html#cb32-91"></a><span class="co"># 643 RU-Russia</span></span>
<span id="cb32-92"><a href="liitteet.html#cb32-92"></a><span class="co"># 703 SK-Slovakia</span></span>
<span id="cb32-93"><a href="liitteet.html#cb32-93"></a><span class="co"># 705 SI-Slovenia</span></span>
<span id="cb32-94"><a href="liitteet.html#cb32-94"></a><span class="co"># 752 SE-Sweden</span></span>
<span id="cb32-95"><a href="liitteet.html#cb32-95"></a><span class="co"># 756 CH-Switzerland</span></span>
<span id="cb32-96"><a href="liitteet.html#cb32-96"></a><span class="co"># 826 GB-Great Britain and/or United Kingdom - jätetään pois jotta saadaan TOPBOT </span></span>
<span id="cb32-97"><a href="liitteet.html#cb32-97"></a><span class="co">#                          -muuttuja mukaan (top-bottom self-placement) .(9.10.18)</span></span>
<span id="cb32-98"><a href="liitteet.html#cb32-98"></a><span class="co"># 840 US-United States - jätetään pois, jotta saadaan TOPBOT-muuttuja mukaan.(10.10.18)</span></span>
<span id="cb32-99"><a href="liitteet.html#cb32-99"></a><span class="co">#</span></span>
<span id="cb32-100"><a href="liitteet.html#cb32-100"></a><span class="co"># Belgian ja Saksan alueet:</span></span>
<span id="cb32-101"><a href="liitteet.html#cb32-101"></a><span class="co">#  V3</span></span>
<span id="cb32-102"><a href="liitteet.html#cb32-102"></a><span class="co">#  5601     BE-FLA-Belgium/ Flanders</span></span>
<span id="cb32-103"><a href="liitteet.html#cb32-103"></a><span class="co">#  5602     BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb32-104"><a href="liitteet.html#cb32-104"></a><span class="co">#  5603     BE-BRU-Belgium/ Brussels</span></span>
<span id="cb32-105"><a href="liitteet.html#cb32-105"></a><span class="co"># 27601     DE-W-Germany-West</span></span>
<span id="cb32-106"><a href="liitteet.html#cb32-106"></a><span class="co"># 27602     DE-E-Germany-East</span></span>
<span id="cb32-107"><a href="liitteet.html#cb32-107"></a><span class="co">#</span></span>
<span id="cb32-108"><a href="liitteet.html#cb32-108"></a><span class="co"># Unkari (348) toistaiseksi mukana, mutta joissain kysymyksissä myös Unkarilla on </span></span>
<span id="cb32-109"><a href="liitteet.html#cb32-109"></a><span class="co"># poikkeavia vastausvaihtoehtoja(HU_V18, HU_V19,HU_V20). Jos näitä muuttujia käytetään, </span></span>
<span id="cb32-110"><a href="liitteet.html#cb32-110"></a><span class="co"># Unkari on parempi jättää pois. </span></span>
<span id="cb32-111"><a href="liitteet.html#cb32-111"></a><span class="co"># </span></span>
<span id="cb32-112"><a href="liitteet.html#cb32-112"></a><span class="co">#</span></span>
<span id="cb32-113"><a href="liitteet.html#cb32-113"></a><span class="co"># (25.4.2018) user_na  </span></span>
<span id="cb32-114"><a href="liitteet.html#cb32-114"></a><span class="co"># haven-paketin read_spss - funktiolla voi r-tiedostoon lukea myös SPSS:n sallimat kolme </span></span>
<span id="cb32-115"><a href="liitteet.html#cb32-115"></a><span class="co"># (yleensä 7, 8, 9) tarkempaa koodia puuttuvalle tiedolle.</span></span>
<span id="cb32-116"><a href="liitteet.html#cb32-116"></a><span class="co"># &quot;If TRUE variables with user defined missing will be read into labelled_spss objects. </span></span>
<span id="cb32-117"><a href="liitteet.html#cb32-117"></a><span class="co"># If FALSE, the default, user-defined missings will be converted to NA&quot;</span></span>
<span id="cb32-118"><a href="liitteet.html#cb32-118"></a><span class="co"># https://www.rdocumentation.org/packages/haven/versions/1.1.0/topics/read_spss</span></span>
<span id="cb32-119"><a href="liitteet.html#cb32-119"></a><span class="co">#</span></span>
<span id="cb32-120"><a href="liitteet.html#cb32-120"></a> </span>
<span id="cb32-121"><a href="liitteet.html#cb32-121"></a>ISSP2012jh.data &lt;-<span class="st"> </span><span class="kw">read_spss</span>(<span class="st">&quot;data/ZA5900_v4-0-0.sav&quot;</span>) <span class="co">#luetaan alkuperäinen data R- dataksi (df).</span></span>
<span id="cb32-122"><a href="liitteet.html#cb32-122"></a></span>
<span id="cb32-123"><a href="liitteet.html#cb32-123"></a><span class="co">#str(ISSP2012jh.data)</span></span>
<span id="cb32-124"><a href="liitteet.html#cb32-124"></a></span>
<span id="cb32-125"><a href="liitteet.html#cb32-125"></a>incl_countries25 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">36</span>, <span class="dv">40</span>, <span class="dv">56</span>,<span class="dv">100</span>, <span class="dv">124</span>, <span class="dv">191</span>, <span class="dv">203</span>, <span class="dv">208</span>, <span class="dv">246</span>, <span class="dv">250</span>, <span class="dv">276</span>, <span class="dv">348</span>, <span class="dv">352</span>, </span>
<span id="cb32-126"><a href="liitteet.html#cb32-126"></a>                      <span class="dv">372</span>, <span class="dv">428</span>, <span class="dv">440</span>, <span class="dv">528</span>, <span class="dv">578</span>, <span class="dv">616</span>, <span class="dv">620</span>, <span class="dv">643</span>, <span class="dv">703</span>, <span class="dv">705</span>, <span class="dv">752</span>, <span class="dv">756</span>)</span>
<span id="cb32-127"><a href="liitteet.html#cb32-127"></a></span>
<span id="cb32-128"><a href="liitteet.html#cb32-128"></a><span class="co">#str(ISSP2012jh.data)</span></span>
<span id="cb32-129"><a href="liitteet.html#cb32-129"></a><span class="co">#str(ISSP2012jh.data) #61754 obs. of  420 variables - kaikki</span></span>
<span id="cb32-130"><a href="liitteet.html#cb32-130"></a></span>
<span id="cb32-131"><a href="liitteet.html#cb32-131"></a>ISSP2012jh1a.data &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012jh.data, V4 <span class="op">%in%</span><span class="st"> </span>incl_countries25)</span>
<span id="cb32-132"><a href="liitteet.html#cb32-132"></a></span>
<span id="cb32-133"><a href="liitteet.html#cb32-133"></a><span class="co">#head(ISSP2012jh1a.data)</span></span>
<span id="cb32-134"><a href="liitteet.html#cb32-134"></a><span class="co">#str(ISSP2012jh1a.data) #34271 obs. of  420 variables, Espanja ja Iso-Britannia</span></span>
<span id="cb32-135"><a href="liitteet.html#cb32-135"></a><span class="co">#                       pois (9.10.2018)</span></span>
<span id="cb32-136"><a href="liitteet.html#cb32-136"></a><span class="co"># str(ISSP2012jh1a.data) # 32969 obs. of  420 variable, Espanja Iso-Britannia, </span></span>
<span id="cb32-137"><a href="liitteet.html#cb32-137"></a><span class="co">#                        USA pois (10.10.2018)</span></span>
<span id="cb32-138"><a href="liitteet.html#cb32-138"></a><span class="co">#</span></span>
<span id="cb32-139"><a href="liitteet.html#cb32-139"></a><span class="co"># names() # muuttujen nimet</span></span>
<span id="cb32-140"><a href="liitteet.html#cb32-140"></a><span class="co"># Maakohtaiset muuttujat (kun on poikettu ISSP2012 - vastausvaihtoehdoista tms.) </span></span>
<span id="cb32-141"><a href="liitteet.html#cb32-141"></a><span class="co"># on aineistossa eroteltu maatunnus-etuliitteellä (esimerkiksi ES_V7).</span></span>
<span id="cb32-142"><a href="liitteet.html#cb32-142"></a><span class="co"># Demografisissa ja muissa taustamuuttujissa suuri osa tiedoista on kerätty maa-</span></span>
<span id="cb32-143"><a href="liitteet.html#cb32-143"></a><span class="co"># kohtaisilla lomakkeilla. Vertailukelpoiset muuttujat on konstruoitu niistä.</span></span>
<span id="cb32-144"><a href="liitteet.html#cb32-144"></a><span class="co"># Muuttujia on 420, vain osa yhteisiä kaikille maille.</span></span>
<span id="cb32-145"><a href="liitteet.html#cb32-145"></a></span>
<span id="cb32-146"><a href="liitteet.html#cb32-146"></a><span class="co"># include FALSE: ei koodia eikä tulostusta dokumenttiin - poistettava turhia</span></span>
<span id="cb32-147"><a href="liitteet.html#cb32-147"></a><span class="co"># välitulostuksia (18.10.2020)</span></span>
<span id="cb32-148"><a href="liitteet.html#cb32-148"></a><span class="co"># 2. VALITAAN MUUTTUJAT  -&gt; ISSP2012jh1b.data. Maat valittu koodilohkossa datasel_country1</span></span>
<span id="cb32-149"><a href="liitteet.html#cb32-149"></a><span class="co">#</span></span>
<span id="cb32-150"><a href="liitteet.html#cb32-150"></a><span class="co">#</span></span>
<span id="cb32-151"><a href="liitteet.html#cb32-151"></a><span class="co"># Muuttujat on luokiteltu dokumentissa ZA5900_overview.pdf</span></span>
<span id="cb32-152"><a href="liitteet.html#cb32-152"></a><span class="co"># https://zacat.gesis.org/webview/index.jsp?object=http://zacat.gesis.org/obj/fStudy/ZA5900</span></span>
<span id="cb32-153"><a href="liitteet.html#cb32-153"></a><span class="co"># Study Description -&gt; Other Study Description -&gt; Related Materials</span></span>
<span id="cb32-154"><a href="liitteet.html#cb32-154"></a><span class="co"># </span></span>
<span id="cb32-155"><a href="liitteet.html#cb32-155"></a><span class="co">#</span></span>
<span id="cb32-156"><a href="liitteet.html#cb32-156"></a></span>
<span id="cb32-157"><a href="liitteet.html#cb32-157"></a><span class="co"># METADATA</span></span>
<span id="cb32-158"><a href="liitteet.html#cb32-158"></a></span>
<span id="cb32-159"><a href="liitteet.html#cb32-159"></a>metavars1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;V1&quot;</span>, <span class="st">&quot;V2&quot;</span>, <span class="st">&quot;DOI&quot;</span>)</span>
<span id="cb32-160"><a href="liitteet.html#cb32-160"></a></span>
<span id="cb32-161"><a href="liitteet.html#cb32-161"></a><span class="co">#MAA - maakoodit ja maan kahden merkin tunnus</span></span>
<span id="cb32-162"><a href="liitteet.html#cb32-162"></a></span>
<span id="cb32-163"><a href="liitteet.html#cb32-163"></a>countryvars1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;V3&quot;</span>,<span class="st">&quot;V4&quot;</span>,<span class="st">&quot;C_ALPHAN&quot;</span>)</span>
<span id="cb32-164"><a href="liitteet.html#cb32-164"></a></span>
<span id="cb32-165"><a href="liitteet.html#cb32-165"></a><span class="co"># SUBSTANSSIMUUTTUJAT - Attitudes towards family and gender roles (9)</span></span>
<span id="cb32-166"><a href="liitteet.html#cb32-166"></a><span class="co">#</span></span>
<span id="cb32-167"><a href="liitteet.html#cb32-167"></a><span class="co"># Yhdeksän kysymystä (lyhennetyt versiot, englanniksi), vastausvaihtoehdot Q1-Q2</span></span>
<span id="cb32-168"><a href="liitteet.html#cb32-168"></a><span class="co">#</span></span>
<span id="cb32-169"><a href="liitteet.html#cb32-169"></a><span class="co"># 1 = täysin samaa mieltä, 2 = samaa mieltä, 3 = ei samaa eikä eri mieltä, </span></span>
<span id="cb32-170"><a href="liitteet.html#cb32-170"></a><span class="co"># 4 = eri mieltä, 5 = täysin eri mieltä</span></span>
<span id="cb32-171"><a href="liitteet.html#cb32-171"></a><span class="co"># </span></span>
<span id="cb32-172"><a href="liitteet.html#cb32-172"></a><span class="co"># Q1a Working mother can have warm relation with child</span></span>
<span id="cb32-173"><a href="liitteet.html#cb32-173"></a><span class="co"># Q1b Pre-school child suffers through working mother</span></span>
<span id="cb32-174"><a href="liitteet.html#cb32-174"></a><span class="co"># Q1c Family life suffers through working mother</span></span>
<span id="cb32-175"><a href="liitteet.html#cb32-175"></a><span class="co"># Q1d Women’s preference: home and children</span></span>
<span id="cb32-176"><a href="liitteet.html#cb32-176"></a><span class="co"># Q1e Being housewife is satisfying</span></span>
<span id="cb32-177"><a href="liitteet.html#cb32-177"></a><span class="co">#</span></span>
<span id="cb32-178"><a href="liitteet.html#cb32-178"></a><span class="co"># Q2a Both should contribute to household income</span></span>
<span id="cb32-179"><a href="liitteet.html#cb32-179"></a><span class="co"># Q2b Men’s job is earn money, women’s job household</span></span>
<span id="cb32-180"><a href="liitteet.html#cb32-180"></a><span class="co">#</span></span>
<span id="cb32-181"><a href="liitteet.html#cb32-181"></a><span class="co"># Q3a Should women work: Child under school age </span></span>
<span id="cb32-182"><a href="liitteet.html#cb32-182"></a><span class="co"># Q3b Should women work: Youngest kid at school</span></span>
<span id="cb32-183"><a href="liitteet.html#cb32-183"></a><span class="co"># 1= kokopäivätyö, 2 = osa-aikatyö, 3 = pysyä kotona, 8 = en osaa sanoa</span></span>
<span id="cb32-184"><a href="liitteet.html#cb32-184"></a><span class="co"># (can&#39;t choose), 9 = no answer</span></span>
<span id="cb32-185"><a href="liitteet.html#cb32-185"></a><span class="co">#</span></span>
<span id="cb32-186"><a href="liitteet.html#cb32-186"></a><span class="co"># Kysymysten Q3a ja Q3b eos-vastaus ei ole sama kuin &quot;en samaa enkä eri  mieltä&quot;</span></span>
<span id="cb32-187"><a href="liitteet.html#cb32-187"></a><span class="co"># (ns. neutraali # vaihtoehto), mutta kieltäytymisiä jne. (koodi 9) on aika</span></span>
<span id="cb32-188"><a href="liitteet.html#cb32-188"></a><span class="co"># vähän. Kolmessa # maassa ne on yhdistety: </span></span>
<span id="cb32-189"><a href="liitteet.html#cb32-189"></a><span class="co"># (8 Can&#39;t choose, CA:can&#39;t choose+no answer, KR:don&#39;t know+refused, NL:don&#39;t know).</span></span>
<span id="cb32-190"><a href="liitteet.html#cb32-190"></a><span class="co"># Kun SPSS-tiedostosta ei ole tuotu puuttuvan tiedon tarkempaa luokittelua,</span></span>
<span id="cb32-191"><a href="liitteet.html#cb32-191"></a><span class="co"># erottelua ei voi tehdä.</span></span>
<span id="cb32-192"><a href="liitteet.html#cb32-192"></a><span class="co">#</span></span>
<span id="cb32-193"><a href="liitteet.html#cb32-193"></a></span>
<span id="cb32-194"><a href="liitteet.html#cb32-194"></a>substvars1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;V5&quot;</span>,<span class="st">&quot;V6&quot;</span>,<span class="st">&quot;V7&quot;</span>,<span class="st">&quot;V8&quot;</span>,<span class="st">&quot;V9&quot;</span>,<span class="st">&quot;V10&quot;</span>,<span class="st">&quot;V11&quot;</span>,<span class="st">&quot;V12&quot;</span>,<span class="st">&quot;V13&quot;</span>) <span class="co"># 9 muuttujaa</span></span>
<span id="cb32-195"><a href="liitteet.html#cb32-195"></a></span>
<span id="cb32-196"><a href="liitteet.html#cb32-196"></a><span class="co"># Nämä yhteiset muuttujat pois (maaspesifien muuttujien lisäksi) :</span></span>
<span id="cb32-197"><a href="liitteet.html#cb32-197"></a><span class="co">#</span></span>
<span id="cb32-198"><a href="liitteet.html#cb32-198"></a><span class="co"># &quot;V14&quot;,&quot;V15&quot;,&quot;V16&quot;,  &quot;V17&quot;,&quot;V18&quot;,&quot;HU_V18&quot;,&quot;V19&quot;,&quot;HU_V19&quot;,&quot;V20&quot;,&quot;HU_V20&quot;,&quot;V21&quot;,</span></span>
<span id="cb32-199"><a href="liitteet.html#cb32-199"></a><span class="co"># &quot;V28&quot;,&quot;V29&quot;,&quot;V30&quot;,&quot;V31&quot;,&quot;V32&quot;,&quot;V33&quot;,# &quot;V34&quot;, &quot;V35&quot;, &quot;V36&quot;, &quot;V37&quot;, &quot;V38&quot;, &quot;V39&quot;,</span></span>
<span id="cb32-200"><a href="liitteet.html#cb32-200"></a><span class="co"># &quot;V40&quot;, &quot;V41&quot;, &quot;V42&quot;, &quot;V43&quot;, &quot;V44&quot;, &quot;V45&quot;, &quot;V46&quot;, &quot;V47&quot;, &quot;V48&quot;, &quot;V49&quot;, &quot;V50&quot;, </span></span>
<span id="cb32-201"><a href="liitteet.html#cb32-201"></a><span class="co"># &quot;V51&quot;, &quot;V52&quot;, &quot;V53&quot;, &quot;V54&quot;, &quot;V55&quot;, &quot;V56&quot;, &quot;V57&quot;, &quot;V58&quot;, &quot;V59&quot;, &quot;V60&quot;, &quot;V61&quot;, </span></span>
<span id="cb32-202"><a href="liitteet.html#cb32-202"></a><span class="co"># &quot;V62&quot;, &quot;V63&quot;, &quot;V64&quot;, &quot;V65&quot;, &quot;V65a&quot;,&quot;V66&quot;, &quot;V67&quot;</span></span>
<span id="cb32-203"><a href="liitteet.html#cb32-203"></a><span class="co">#</span></span>
<span id="cb32-204"><a href="liitteet.html#cb32-204"></a><span class="co">#</span></span>
<span id="cb32-205"><a href="liitteet.html#cb32-205"></a><span class="co"># DEMOGRAFISET JA MUUT TAUSTAMUUTTUJAT (8)</span></span>
<span id="cb32-206"><a href="liitteet.html#cb32-206"></a><span class="co">#</span></span>
<span id="cb32-207"><a href="liitteet.html#cb32-207"></a><span class="co"># AGE, SEX</span></span>
<span id="cb32-208"><a href="liitteet.html#cb32-208"></a><span class="co">#</span></span>
<span id="cb32-209"><a href="liitteet.html#cb32-209"></a><span class="co"># DEGREE - Highest completed degree of education: Categories for international</span></span>
<span id="cb32-210"><a href="liitteet.html#cb32-210"></a><span class="co"># comparison. Slightly re-arranged subset of ISCED-97</span></span>
<span id="cb32-211"><a href="liitteet.html#cb32-211"></a><span class="co">#</span></span>
<span id="cb32-212"><a href="liitteet.html#cb32-212"></a><span class="co"># 0 No formal education</span></span>
<span id="cb32-213"><a href="liitteet.html#cb32-213"></a><span class="co"># 1 Primary school (elementary school)</span></span>
<span id="cb32-214"><a href="liitteet.html#cb32-214"></a><span class="co"># 2 Lower secondary (secondary completed does not allow entry to university:</span></span>
<span id="cb32-215"><a href="liitteet.html#cb32-215"></a><span class="co">#  obligatory school)</span></span>
<span id="cb32-216"><a href="liitteet.html#cb32-216"></a><span class="co"># 3 Upper secondary (programs that allow entry to university or programs that</span></span>
<span id="cb32-217"><a href="liitteet.html#cb32-217"></a><span class="co">#  allow to entry other ISCED level 3 programs - designed to prepare students for</span></span>
<span id="cb32-218"><a href="liitteet.html#cb32-218"></a><span class="co">#  direct entry into the labour market)</span></span>
<span id="cb32-219"><a href="liitteet.html#cb32-219"></a><span class="co"># 4 Post secondary, non-tertiary (other upper secondary programs toward labour</span></span>
<span id="cb32-220"><a href="liitteet.html#cb32-220"></a><span class="co">#  market or technical formation)</span></span>
<span id="cb32-221"><a href="liitteet.html#cb32-221"></a><span class="co"># 5 Lower level tertiary, first stage (also technical schools at a tertiary level)</span></span>
<span id="cb32-222"><a href="liitteet.html#cb32-222"></a><span class="co"># 6 Upper level tertiary (Master, Dr.)</span></span>
<span id="cb32-223"><a href="liitteet.html#cb32-223"></a><span class="co"># 9 No answer, CH: don&#39;t know</span></span>
<span id="cb32-224"><a href="liitteet.html#cb32-224"></a><span class="co"># HUOM! R-factor - muunnoksessa koodaus on 1-7</span></span>
<span id="cb32-225"><a href="liitteet.html#cb32-225"></a><span class="co">#</span></span>
<span id="cb32-226"><a href="liitteet.html#cb32-226"></a><span class="co"># MAINSTAT - main status: Which of the following best describes your current situation?</span></span>
<span id="cb32-227"><a href="liitteet.html#cb32-227"></a><span class="co">#</span></span>
<span id="cb32-228"><a href="liitteet.html#cb32-228"></a><span class="co"># 1 In paid work</span></span>
<span id="cb32-229"><a href="liitteet.html#cb32-229"></a><span class="co"># 2 Unemployed and looking for a job, HR: incl never had a job</span></span>
<span id="cb32-230"><a href="liitteet.html#cb32-230"></a><span class="co"># 3 In education</span></span>
<span id="cb32-231"><a href="liitteet.html#cb32-231"></a><span class="co"># 4 Apprentice or trainee</span></span>
<span id="cb32-232"><a href="liitteet.html#cb32-232"></a><span class="co"># 5 Permanently sick or disabled</span></span>
<span id="cb32-233"><a href="liitteet.html#cb32-233"></a><span class="co"># 6 Retired</span></span>
<span id="cb32-234"><a href="liitteet.html#cb32-234"></a><span class="co"># 7 Domestic work</span></span>
<span id="cb32-235"><a href="liitteet.html#cb32-235"></a><span class="co"># 8 In compulsory military service or community service</span></span>
<span id="cb32-236"><a href="liitteet.html#cb32-236"></a><span class="co"># 9 Other</span></span>
<span id="cb32-237"><a href="liitteet.html#cb32-237"></a><span class="co"># 99 No answer</span></span>
<span id="cb32-238"><a href="liitteet.html#cb32-238"></a><span class="co"># Armeijassa tai yhdyskuntapalvelussa muutamia, muutamissa maissa.Kategoriassa 9 </span></span>
<span id="cb32-239"><a href="liitteet.html#cb32-239"></a><span class="co"># on hieman väkeä. Yhdistetään 8 ja 9. Huom! Esim Puolassa ei yhtään eläkeläistä</span></span>
<span id="cb32-240"><a href="liitteet.html#cb32-240"></a><span class="co"># eikä kategoriaa 9, Saksassa ei ketään kategoriassa 9.</span></span>
<span id="cb32-241"><a href="liitteet.html#cb32-241"></a><span class="co">#</span></span>
<span id="cb32-242"><a href="liitteet.html#cb32-242"></a><span class="co"># TOPBOT - Top-Bottom self-placement (10 pt scale)</span></span>
<span id="cb32-243"><a href="liitteet.html#cb32-243"></a><span class="co">#</span></span>
<span id="cb32-244"><a href="liitteet.html#cb32-244"></a><span class="co"># &quot;In our society, there are groups which tend to be towards the top and groups </span></span>
<span id="cb32-245"><a href="liitteet.html#cb32-245"></a><span class="co"># which tend to be towards the bottom. Below is a scale that runs</span></span>
<span id="cb32-246"><a href="liitteet.html#cb32-246"></a><span class="co"># from the top to the bottom. Where would you put yourself on this scale?&quot;</span></span>
<span id="cb32-247"><a href="liitteet.html#cb32-247"></a><span class="co"># Eri maissa hieman erilaisia kysymyksiä. </span></span>
<span id="cb32-248"><a href="liitteet.html#cb32-248"></a><span class="co">#</span></span>
<span id="cb32-249"><a href="liitteet.html#cb32-249"></a><span class="co"># HHCHILDR - How many children in household: children between [school age] and</span></span>
<span id="cb32-250"><a href="liitteet.html#cb32-250"></a><span class="co"># 17 years of age</span></span>
<span id="cb32-251"><a href="liitteet.html#cb32-251"></a><span class="co">#</span></span>
<span id="cb32-252"><a href="liitteet.html#cb32-252"></a><span class="co"># 0 No children</span></span>
<span id="cb32-253"><a href="liitteet.html#cb32-253"></a><span class="co"># 1 One child</span></span>
<span id="cb32-254"><a href="liitteet.html#cb32-254"></a><span class="co"># 2 2 children</span></span>
<span id="cb32-255"><a href="liitteet.html#cb32-255"></a><span class="co"># 21 21 children</span></span>
<span id="cb32-256"><a href="liitteet.html#cb32-256"></a><span class="co"># 96 NAP (Code 0 in HOMPOP)</span></span>
<span id="cb32-257"><a href="liitteet.html#cb32-257"></a><span class="co"># 97 Refused</span></span>
<span id="cb32-258"><a href="liitteet.html#cb32-258"></a><span class="co"># 99 No answer</span></span>
<span id="cb32-259"><a href="liitteet.html#cb32-259"></a><span class="co">#</span></span>
<span id="cb32-260"><a href="liitteet.html#cb32-260"></a><span class="co"># Voisi koodata dummymuuttujaksi lapsia (1) - ei lapsia (0).</span></span>
<span id="cb32-261"><a href="liitteet.html#cb32-261"></a><span class="co"># Ranskan datassa on erittäin iso osa puuttuvia tietoja (yli 20 %), Sama tilanne</span></span>
<span id="cb32-262"><a href="liitteet.html#cb32-262"></a><span class="co"># myös  muissa perheen kokoon liittyvissä kysymyksissä.  Myös Austarlialla aika</span></span>
<span id="cb32-263"><a href="liitteet.html#cb32-263"></a><span class="co"># paljon puuttuvia vastauksia.</span></span>
<span id="cb32-264"><a href="liitteet.html#cb32-264"></a><span class="co">#</span></span>
<span id="cb32-265"><a href="liitteet.html#cb32-265"></a><span class="co"># MARITAL - Legal partnership status </span></span>
<span id="cb32-266"><a href="liitteet.html#cb32-266"></a><span class="co">#</span></span>
<span id="cb32-267"><a href="liitteet.html#cb32-267"></a><span class="co"># What is your current legal marital status?</span></span>
<span id="cb32-268"><a href="liitteet.html#cb32-268"></a><span class="co"># The aim of this variable is to measure the current &#39;legal&#39; marital status &#39;. </span></span>
<span id="cb32-269"><a href="liitteet.html#cb32-269"></a><span class="co"># PARTLIV - muuttujassa on &#39;de facto&#39; - tilanteen tieto parisuhteesta</span></span>
<span id="cb32-270"><a href="liitteet.html#cb32-270"></a><span class="co">#</span></span>
<span id="cb32-271"><a href="liitteet.html#cb32-271"></a><span class="co"># 1 Married</span></span>
<span id="cb32-272"><a href="liitteet.html#cb32-272"></a><span class="co"># 2 Civil partnership</span></span>
<span id="cb32-273"><a href="liitteet.html#cb32-273"></a><span class="co"># 3 Separated from spouse/ civil partner (still legally married/ still legally </span></span>
<span id="cb32-274"><a href="liitteet.html#cb32-274"></a><span class="co">#   in a civil partnership)</span></span>
<span id="cb32-275"><a href="liitteet.html#cb32-275"></a><span class="co"># 4 Divorced from spouse/ legally separated from civil partner</span></span>
<span id="cb32-276"><a href="liitteet.html#cb32-276"></a><span class="co"># 5 Widowed/ civil partner died</span></span>
<span id="cb32-277"><a href="liitteet.html#cb32-277"></a><span class="co"># 6 Never married/ never in a civil partnership, single</span></span>
<span id="cb32-278"><a href="liitteet.html#cb32-278"></a><span class="co"># 7 Refused</span></span>
<span id="cb32-279"><a href="liitteet.html#cb32-279"></a><span class="co"># 8 Don&#39;t know</span></span>
<span id="cb32-280"><a href="liitteet.html#cb32-280"></a><span class="co"># 9 No answer</span></span>
<span id="cb32-281"><a href="liitteet.html#cb32-281"></a><span class="co">#</span></span>
<span id="cb32-282"><a href="liitteet.html#cb32-282"></a><span class="co"># URBRURAL - Place of living: urban - rural</span></span>
<span id="cb32-283"><a href="liitteet.html#cb32-283"></a><span class="co">#</span></span>
<span id="cb32-284"><a href="liitteet.html#cb32-284"></a><span class="co"># 1 A big city</span></span>
<span id="cb32-285"><a href="liitteet.html#cb32-285"></a><span class="co"># 2 The suburbs or outskirts of a big city</span></span>
<span id="cb32-286"><a href="liitteet.html#cb32-286"></a><span class="co"># 3 A town or a small city</span></span>
<span id="cb32-287"><a href="liitteet.html#cb32-287"></a><span class="co"># 4 A country village</span></span>
<span id="cb32-288"><a href="liitteet.html#cb32-288"></a><span class="co"># 5 A farm or home in the country</span></span>
<span id="cb32-289"><a href="liitteet.html#cb32-289"></a><span class="co"># 7 Other answer</span></span>
<span id="cb32-290"><a href="liitteet.html#cb32-290"></a><span class="co"># 9 No answer</span></span>
<span id="cb32-291"><a href="liitteet.html#cb32-291"></a><span class="co"># 1 ja 2 vaihtelevat aika paljon maittain, parempi laskea yhteen. Unkarista puuttuu </span></span>
<span id="cb32-292"><a href="liitteet.html#cb32-292"></a><span class="co"># jostain syystä kokonaan vaihtoehto 5.  Vaihotehdon 7 on valinnut vain 4</span></span>
<span id="cb32-293"><a href="liitteet.html#cb32-293"></a><span class="co"># vastaajaa Ranskasta.</span></span>
<span id="cb32-294"><a href="liitteet.html#cb32-294"></a><span class="co">#</span></span>
<span id="cb32-295"><a href="liitteet.html#cb32-295"></a></span>
<span id="cb32-296"><a href="liitteet.html#cb32-296"></a>bgvars1 &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="st">&quot;SEX&quot;</span>,<span class="st">&quot;AGE&quot;</span>,<span class="st">&quot;DEGREE&quot;</span>, <span class="st">&quot;MAINSTAT&quot;</span>, <span class="st">&quot;TOPBOT&quot;</span>,</span>
<span id="cb32-297"><a href="liitteet.html#cb32-297"></a>              <span class="st">&quot;HHCHILDR&quot;</span>, <span class="st">&quot;MARITAL&quot;</span>, <span class="st">&quot;URBRURAL&quot;</span>)</span>
<span id="cb32-298"><a href="liitteet.html#cb32-298"></a></span>
<span id="cb32-299"><a href="liitteet.html#cb32-299"></a><span class="co">#Valitaan muuttujat</span></span>
<span id="cb32-300"><a href="liitteet.html#cb32-300"></a></span>
<span id="cb32-301"><a href="liitteet.html#cb32-301"></a>jhvars1 &lt;-<span class="st"> </span><span class="kw">c</span>(metavars1,countryvars1, substvars1,bgvars1)</span>
<span id="cb32-302"><a href="liitteet.html#cb32-302"></a></span>
<span id="cb32-303"><a href="liitteet.html#cb32-303"></a><span class="co">#jhvars1</span></span>
<span id="cb32-304"><a href="liitteet.html#cb32-304"></a>ISSP2012jh1b.data &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012jh1a.data, <span class="kw">all_of</span>(jhvars1)) </span>
<span id="cb32-305"><a href="liitteet.html#cb32-305"></a></span>
<span id="cb32-306"><a href="liitteet.html#cb32-306"></a><span class="co"># laaja aineisto - mukana havainnot joissa puuttuvia tietoja</span></span>
<span id="cb32-307"><a href="liitteet.html#cb32-307"></a><span class="co"># str(ISSP2012jh1b.data) #32969 obs. of  23 variables </span></span>
<span id="cb32-308"><a href="liitteet.html#cb32-308"></a><span class="co"># </span></span>
<span id="cb32-309"><a href="liitteet.html#cb32-309"></a><span class="co"># SUBSTANSSIMUUTTUJAT</span></span>
<span id="cb32-310"><a href="liitteet.html#cb32-310"></a><span class="co">#</span></span>
<span id="cb32-311"><a href="liitteet.html#cb32-311"></a><span class="co"># $ V5      : &#39;haven_labelled&#39; num  5 1 2 2 1 NA 2 4 2 2 ...</span></span>
<span id="cb32-312"><a href="liitteet.html#cb32-312"></a><span class="co">#  ..- attr(*, &quot;label&quot;)= chr &quot;Q1a Working mom: warm relationship with children</span></span>
<span id="cb32-313"><a href="liitteet.html#cb32-313"></a><span class="co">#       as a not working mom&quot;</span></span>
<span id="cb32-314"><a href="liitteet.html#cb32-314"></a><span class="co">#  ..- attr(*, &quot;labels&quot;)= Named num  0 1 2 3 4 5 8 9</span></span>
<span id="cb32-315"><a href="liitteet.html#cb32-315"></a><span class="co">#</span></span>
<span id="cb32-316"><a href="liitteet.html#cb32-316"></a><span class="co"># ISSP2012jh1b.data$V5 näyttää tarkemmin rakenteen</span></span>
<span id="cb32-317"><a href="liitteet.html#cb32-317"></a><span class="co">#</span></span>
<span id="cb32-318"><a href="liitteet.html#cb32-318"></a><span class="co"># glimpse(ISSP2012jh1b.data)</span></span>
<span id="cb32-319"><a href="liitteet.html#cb32-319"></a></span>
<span id="cb32-320"><a href="liitteet.html#cb32-320"></a><span class="co"># Poistetaan havainnot, joissa ikä (AGE) tai sukupuolitieto puuttuu (5.7.2019)</span></span>
<span id="cb32-321"><a href="liitteet.html#cb32-321"></a></span>
<span id="cb32-322"><a href="liitteet.html#cb32-322"></a>ISSP2012jh1c.data &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012jh1b.data, (<span class="op">!</span><span class="kw">is.na</span>(SEX) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(AGE)))</span>
<span id="cb32-323"><a href="liitteet.html#cb32-323"></a></span>
<span id="cb32-324"><a href="liitteet.html#cb32-324"></a><span class="co"># str(ISSP2012jh1c.data) # 32823 obs. of  23 variables, 32969-32823 = 146</span></span>
<span id="cb32-325"><a href="liitteet.html#cb32-325"></a><span class="co"># TARKISTUS 8.6.20 dplyr 1.0.0-päivitys: havaintojen ja muuttujien määrä ok.</span></span>
<span id="cb32-326"><a href="liitteet.html#cb32-326"></a></span>
<span id="cb32-327"><a href="liitteet.html#cb32-327"></a><span class="co"># VAIHE 1 - muuttujat joissa ei ole puuttuvia tietoja</span></span>
<span id="cb32-328"><a href="liitteet.html#cb32-328"></a></span>
<span id="cb32-329"><a href="liitteet.html#cb32-329"></a><span class="co"># vaihe 1.1 haven_labelled ja chr -&gt; as_factor</span></span>
<span id="cb32-330"><a href="liitteet.html#cb32-330"></a></span>
<span id="cb32-331"><a href="liitteet.html#cb32-331"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1c.data <span class="op">%&gt;%</span></span>
<span id="cb32-332"><a href="liitteet.html#cb32-332"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">maa =</span> <span class="kw">as_factor</span>(C_ALPHAN), <span class="co"># ei puuttuvia, ei tyhjiä leveleitä</span></span>
<span id="cb32-333"><a href="liitteet.html#cb32-333"></a>           <span class="dt">maa3 =</span> <span class="kw">as_factor</span>(V3),  <span class="co"># maakoodi, jossa aluejako joillan mailla</span></span>
<span id="cb32-334"><a href="liitteet.html#cb32-334"></a>           <span class="dt">sp1 =</span> <span class="kw">as_factor</span>(SEX), <span class="co"># ei puuttuvia, tyhjä level &quot;no answer&quot; 999</span></span>
<span id="cb32-335"><a href="liitteet.html#cb32-335"></a>         )</span>
<span id="cb32-336"><a href="liitteet.html#cb32-336"></a></span>
<span id="cb32-337"><a href="liitteet.html#cb32-337"></a></span>
<span id="cb32-338"><a href="liitteet.html#cb32-338"></a><span class="co"># C_ALPHAN - maa - maa3 tarkistuksia</span></span>
<span id="cb32-339"><a href="liitteet.html#cb32-339"></a></span>
<span id="cb32-340"><a href="liitteet.html#cb32-340"></a><span class="co"># V3</span></span>
<span id="cb32-341"><a href="liitteet.html#cb32-341"></a><span class="co"># &quot;Pulma&quot; on järjestys. C_ALPHAN (&quot;chr&quot;) on aakkosjärjestyksessä, kun luodaan</span></span>
<span id="cb32-342"><a href="liitteet.html#cb32-342"></a><span class="co"># maa = as_factor(C_ALPHAN) järjestys muuttuu (esiintymisjärjestys datassa?)</span></span>
<span id="cb32-343"><a href="liitteet.html#cb32-343"></a><span class="co"># maa3 muunnetaan maakoodista (haven_labelled&#39; num), jonka</span></span>
<span id="cb32-344"><a href="liitteet.html#cb32-344"></a></span>
<span id="cb32-345"><a href="liitteet.html#cb32-345"></a><span class="co"># str(ISSP2012jh1d.dat$maa) #Country Prefix ISO 3166 Code - alphanumeric</span></span>
<span id="cb32-346"><a href="liitteet.html#cb32-346"></a><span class="co"># attributes(ISSP2012jh1d.dat$maa) # ei tyhiä levels-arvoja, 25 levels</span></span>
<span id="cb32-347"><a href="liitteet.html#cb32-347"></a><span class="co"># ISSP2012jh1d.dat$maa %&gt;% fct_unique()</span></span>
<span id="cb32-348"><a href="liitteet.html#cb32-348"></a><span class="co"># ISSP2012jh1d.dat$maa %&gt;% fct_count() # summary kertoo samat tiedot (20.2.20)</span></span>
<span id="cb32-349"><a href="liitteet.html#cb32-349"></a><span class="co"># sum(is.na(ISSP2012jh1d.dat$maa)) # ei puuttuvia tietoja</span></span>
<span id="cb32-350"><a href="liitteet.html#cb32-350"></a><span class="co"># ISSP2012jh1d.dat$maa %&gt;% summary() # mukana vain valitut 25 maata</span></span>
<span id="cb32-351"><a href="liitteet.html#cb32-351"></a></span>
<span id="cb32-352"><a href="liitteet.html#cb32-352"></a><span class="co"># str(ISSP2012jh1d.dat$maa3)  #&quot;Country/ Sample ISO 3166 Code</span></span>
<span id="cb32-353"><a href="liitteet.html#cb32-353"></a>                            <span class="co">#(see V4 for codes for whole nation states)&quot;</span></span>
<span id="cb32-354"><a href="liitteet.html#cb32-354"></a>                            <span class="co"># 29 levels</span></span>
<span id="cb32-355"><a href="liitteet.html#cb32-355"></a><span class="co"># str(ISSP2012jh1d.dat$V3)</span></span>
<span id="cb32-356"><a href="liitteet.html#cb32-356"></a></span>
<span id="cb32-357"><a href="liitteet.html#cb32-357"></a><span class="co"># attributes(ISSP2012jh1d.dat$maa3) # ei tyhiä levels-arvoja, 29 levels</span></span>
<span id="cb32-358"><a href="liitteet.html#cb32-358"></a><span class="co"># sum(is.na(ISSP2012jh1d.dat$maa3)) # nolla ei ole puuttuva tieto! (3.2.20)</span></span>
<span id="cb32-359"><a href="liitteet.html#cb32-359"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_unique()</span></span>
<span id="cb32-360"><a href="liitteet.html#cb32-360"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_count()</span></span>
<span id="cb32-361"><a href="liitteet.html#cb32-361"></a><span class="co"># Vain näissä on jaettu maan havainnot (3.2.20)</span></span>
<span id="cb32-362"><a href="liitteet.html#cb32-362"></a><span class="co">#</span></span>
<span id="cb32-363"><a href="liitteet.html#cb32-363"></a><span class="co"># [38] BE-FLA-Belgium/ Flanders</span></span>
<span id="cb32-364"><a href="liitteet.html#cb32-364"></a><span class="co"># [39] BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb32-365"><a href="liitteet.html#cb32-365"></a><span class="co"># [40] BE-BRU-Belgium/ Brussels</span></span>
<span id="cb32-366"><a href="liitteet.html#cb32-366"></a><span class="co"># [41] DE-W-Germany-West</span></span>
<span id="cb32-367"><a href="liitteet.html#cb32-367"></a><span class="co"># [42] DE-E-Germany-East</span></span>
<span id="cb32-368"><a href="liitteet.html#cb32-368"></a><span class="co"># [43] PT-Portugal 2012: first fieldwork round (main sample)</span></span>
<span id="cb32-369"><a href="liitteet.html#cb32-369"></a><span class="co"># [44] PT-Portugal 2012: second fieldwork round (complementary sample)</span></span>
<span id="cb32-370"><a href="liitteet.html#cb32-370"></a></span>
<span id="cb32-371"><a href="liitteet.html#cb32-371"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_count() #miksi ei tulosta mitään? (3.2.2020)</span></span>
<span id="cb32-372"><a href="liitteet.html#cb32-372"></a></span>
<span id="cb32-373"><a href="liitteet.html#cb32-373"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% summary()</span></span>
<span id="cb32-374"><a href="liitteet.html#cb32-374"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_unique()</span></span>
<span id="cb32-375"><a href="liitteet.html#cb32-375"></a><span class="co"># maa3: 25 maata, havaintojen määrä. Poisjätetyissä havaintoja 0.</span></span>
<span id="cb32-376"><a href="liitteet.html#cb32-376"></a><span class="co"># glimpse(ISSP2012jh1d.dat$maa3)</span></span>
<span id="cb32-377"><a href="liitteet.html#cb32-377"></a><span class="co"># head(ISSP2012jh1d.dat$maa3)</span></span>
<span id="cb32-378"><a href="liitteet.html#cb32-378"></a><span class="co"># length(levels(ISSP2012jh1d.dat$maa3))</span></span>
<span id="cb32-379"><a href="liitteet.html#cb32-379"></a></span>
<span id="cb32-380"><a href="liitteet.html#cb32-380"></a><span class="co"># C_ALPHAN alkuperäinen järjestys, maa aakkosjärjestyssä  (2.2.20)</span></span>
<span id="cb32-381"><a href="liitteet.html#cb32-381"></a><span class="co">#</span></span>
<span id="cb32-382"><a href="liitteet.html#cb32-382"></a><span class="co"># Huom1: Myös merkkijonomuuttujaa C_ALPHAN tarvitaan jatkossa.</span></span>
<span id="cb32-383"><a href="liitteet.html#cb32-383"></a><span class="co">#</span></span>
<span id="cb32-384"><a href="liitteet.html#cb32-384"></a><span class="co"># Huom2: kun dataa rajataan, on tarkistettava ja tarvittaessa poistettava</span></span>
<span id="cb32-385"><a href="liitteet.html#cb32-385"></a><span class="co"># &quot;tyhjät&quot; R-factor - muuttujan &quot;maa&quot; luokat (3.2.2020)</span></span>
<span id="cb32-386"><a href="liitteet.html#cb32-386"></a></span>
<span id="cb32-387"><a href="liitteet.html#cb32-387"></a></span>
<span id="cb32-388"><a href="liitteet.html#cb32-388"></a><span class="co"># vaihe 1.2 tyhjät luokat (levels) pois faktoreista</span></span>
<span id="cb32-389"><a href="liitteet.html#cb32-389"></a></span>
<span id="cb32-390"><a href="liitteet.html#cb32-390"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb32-391"><a href="liitteet.html#cb32-391"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">sp =</span> <span class="kw">fct_drop</span>(sp1),</span>
<span id="cb32-392"><a href="liitteet.html#cb32-392"></a>           <span class="dt">maa3 =</span> <span class="kw">fct_drop</span>(maa3)</span>
<span id="cb32-393"><a href="liitteet.html#cb32-393"></a>           )</span>
<span id="cb32-394"><a href="liitteet.html#cb32-394"></a></span>
<span id="cb32-395"><a href="liitteet.html#cb32-395"></a><span class="co">#  maa3 - tarkistuksia</span></span>
<span id="cb32-396"><a href="liitteet.html#cb32-396"></a></span>
<span id="cb32-397"><a href="liitteet.html#cb32-397"></a><span class="co"># str(ISSP2012jh1d.dat$maa3)  # 29 levels</span></span>
<span id="cb32-398"><a href="liitteet.html#cb32-398"></a><span class="co"># attributes(ISSP2012jh1d.dat$maa3)</span></span>
<span id="cb32-399"><a href="liitteet.html#cb32-399"></a><span class="co">#sum(is.na(ISSP2012jh1d.dat$maa3)) # nolla ei ole puuttuva tieto! (3.2.20)</span></span>
<span id="cb32-400"><a href="liitteet.html#cb32-400"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% summary()</span></span>
<span id="cb32-401"><a href="liitteet.html#cb32-401"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_unique()</span></span>
<span id="cb32-402"><a href="liitteet.html#cb32-402"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_count()</span></span>
<span id="cb32-403"><a href="liitteet.html#cb32-403"></a><span class="co">#</span></span>
<span id="cb32-404"><a href="liitteet.html#cb32-404"></a><span class="co"># str(ISSP2012jh1d.dat$C_ALPHAN)</span></span>
<span id="cb32-405"><a href="liitteet.html#cb32-405"></a><span class="co"># attributes(ISSP2012jh1d.dat$C_ALPHAN)</span></span>
<span id="cb32-406"><a href="liitteet.html#cb32-406"></a></span>
<span id="cb32-407"><a href="liitteet.html#cb32-407"></a><span class="co"># TESTAUKSIA</span></span>
<span id="cb32-408"><a href="liitteet.html#cb32-408"></a><span class="co"># </span></span>
<span id="cb32-409"><a href="liitteet.html#cb32-409"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(C_ALPHAN, maa)</span></span>
<span id="cb32-410"><a href="liitteet.html#cb32-410"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(C_ALPHAN, maa3)</span></span>
<span id="cb32-411"><a href="liitteet.html#cb32-411"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(maa, maa3)</span></span>
<span id="cb32-412"><a href="liitteet.html#cb32-412"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(V3, maa3)</span></span>
<span id="cb32-413"><a href="liitteet.html#cb32-413"></a></span>
<span id="cb32-414"><a href="liitteet.html#cb32-414"></a><span class="co"># sp, sp1, SEX - tarkistuksia</span></span>
<span id="cb32-415"><a href="liitteet.html#cb32-415"></a><span class="co"># </span></span>
<span id="cb32-416"><a href="liitteet.html#cb32-416"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_count()</span></span>
<span id="cb32-417"><a href="liitteet.html#cb32-417"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_count()</span></span>
<span id="cb32-418"><a href="liitteet.html#cb32-418"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(SEX,sp1)</span></span>
<span id="cb32-419"><a href="liitteet.html#cb32-419"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(SEX,sp)</span></span>
<span id="cb32-420"><a href="liitteet.html#cb32-420"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(sp1,sp)</span></span>
<span id="cb32-421"><a href="liitteet.html#cb32-421"></a></span>
<span id="cb32-422"><a href="liitteet.html#cb32-422"></a><span class="co"># vaihe 1.3 uudet &quot;faktorilabelit&quot;</span></span>
<span id="cb32-423"><a href="liitteet.html#cb32-423"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb32-424"><a href="liitteet.html#cb32-424"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">sp =</span></span>
<span id="cb32-425"><a href="liitteet.html#cb32-425"></a>          <span class="kw">fct_recode</span>(sp,</span>
<span id="cb32-426"><a href="liitteet.html#cb32-426"></a>            <span class="st">&quot;m&quot;</span> =<span class="st"> &quot;Male&quot;</span>,</span>
<span id="cb32-427"><a href="liitteet.html#cb32-427"></a>            <span class="st">&quot;f&quot;</span> =<span class="st"> &quot;Female&quot;</span>)</span>
<span id="cb32-428"><a href="liitteet.html#cb32-428"></a>            )</span>
<span id="cb32-429"><a href="liitteet.html#cb32-429"></a></span>
<span id="cb32-430"><a href="liitteet.html#cb32-430"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb32-431"><a href="liitteet.html#cb32-431"></a></span>
<span id="cb32-432"><a href="liitteet.html#cb32-432"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_unique()</span></span>
<span id="cb32-433"><a href="liitteet.html#cb32-433"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_count()</span></span>
<span id="cb32-434"><a href="liitteet.html#cb32-434"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% summary()</span></span>
<span id="cb32-435"><a href="liitteet.html#cb32-435"></a></span>
<span id="cb32-436"><a href="liitteet.html#cb32-436"></a><span class="co"># AGE -&gt; ika</span></span>
<span id="cb32-437"><a href="liitteet.html#cb32-437"></a>ISSP2012jh1d.dat<span class="op">$</span>ika &lt;-<span class="st"> </span>ISSP2012jh1d.dat<span class="op">$</span>AGE</span>
<span id="cb32-438"><a href="liitteet.html#cb32-438"></a></span>
<span id="cb32-439"><a href="liitteet.html#cb32-439"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb32-440"><a href="liitteet.html#cb32-440"></a><span class="kw">attributes</span>(ISSP2012jh1d.dat<span class="op">$</span>ika) <span class="co"># tyhjä level &quot;No answer&quot;</span></span>
<span id="cb32-441"><a href="liitteet.html#cb32-441"></a><span class="co"># str(ISSP2012jh1d.dat$ika)</span></span>
<span id="cb32-442"><a href="liitteet.html#cb32-442"></a>ISSP2012jh1d.dat<span class="op">$</span>ika <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>()</span>
<span id="cb32-443"><a href="liitteet.html#cb32-443"></a></span>
<span id="cb32-444"><a href="liitteet.html#cb32-444"></a>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb32-445"><a href="liitteet.html#cb32-445"></a><span class="kw">tableC</span>(AGE, ika,<span class="dt">cor_type =</span> <span class="st">&quot;pearson&quot;</span>, <span class="dt">na.rm =</span> <span class="ot">FALSE</span>, <span class="dt">rounding =</span> <span class="dv">5</span>,</span>
<span id="cb32-446"><a href="liitteet.html#cb32-446"></a>       <span class="dt">output =</span> <span class="st">&quot;text&quot;</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>, <span class="dt">caption =</span> <span class="ot">NULL</span>, <span class="dt">align =</span> <span class="ot">NULL</span>,</span>
<span id="cb32-447"><a href="liitteet.html#cb32-447"></a>       <span class="dt">float =</span> <span class="st">&quot;htb&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable</span>()</span>
<span id="cb32-448"><a href="liitteet.html#cb32-448"></a></span>
<span id="cb32-449"><a href="liitteet.html#cb32-449"></a><span class="co"># Ikäjakauma - ei tarvita (18.10.2020)</span></span>
<span id="cb32-450"><a href="liitteet.html#cb32-450"></a><span class="co">#</span></span>
<span id="cb32-451"><a href="liitteet.html#cb32-451"></a><span class="co"># ISSP2012jh1d.dat$ika %&gt;% hist(main = &quot;ISSP 2012: vastaajan ikä&quot;)</span></span>
<span id="cb32-452"><a href="liitteet.html#cb32-452"></a></span>
<span id="cb32-453"><a href="liitteet.html#cb32-453"></a><span class="co"># Substanssi- ja taustamuuttujat R-faktoreiksi</span></span>
<span id="cb32-454"><a href="liitteet.html#cb32-454"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb32-455"><a href="liitteet.html#cb32-455"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1a1 =</span> <span class="kw">as_factor</span>(V5), <span class="co">#labels</span></span>
<span id="cb32-456"><a href="liitteet.html#cb32-456"></a>            <span class="dt">Q1b1 =</span> <span class="kw">as_factor</span>(V6),</span>
<span id="cb32-457"><a href="liitteet.html#cb32-457"></a>            <span class="dt">Q1c1 =</span> <span class="kw">as_factor</span>(V7),</span>
<span id="cb32-458"><a href="liitteet.html#cb32-458"></a>            <span class="dt">Q1d1 =</span> <span class="kw">as_factor</span>(V8),</span>
<span id="cb32-459"><a href="liitteet.html#cb32-459"></a>            <span class="dt">Q1e1 =</span> <span class="kw">as_factor</span>(V9),</span>
<span id="cb32-460"><a href="liitteet.html#cb32-460"></a>            <span class="dt">Q2a1 =</span> <span class="kw">as_factor</span>(V10),</span>
<span id="cb32-461"><a href="liitteet.html#cb32-461"></a>            <span class="dt">Q2b1 =</span> <span class="kw">as_factor</span>(V11),</span>
<span id="cb32-462"><a href="liitteet.html#cb32-462"></a>            <span class="dt">Q3a1 =</span> <span class="kw">as_factor</span>(V12), <span class="co">#labels = vastQ3_labels (W,w,H)</span></span>
<span id="cb32-463"><a href="liitteet.html#cb32-463"></a>            <span class="dt">Q3b1 =</span> <span class="kw">as_factor</span>(V13), <span class="co">#labels = vastQ3_labels</span></span>
<span id="cb32-464"><a href="liitteet.html#cb32-464"></a>            <span class="dt">edu1 =</span> <span class="kw">as_factor</span>(DEGREE),</span>
<span id="cb32-465"><a href="liitteet.html#cb32-465"></a>            <span class="dt">msta1 =</span> <span class="kw">as_factor</span>(MAINSTAT),</span>
<span id="cb32-466"><a href="liitteet.html#cb32-466"></a>            <span class="dt">sosta1 =</span> <span class="kw">as_factor</span>(TOPBOT),</span>
<span id="cb32-467"><a href="liitteet.html#cb32-467"></a>            <span class="dt">nchild1 =</span> <span class="kw">as_factor</span>(HHCHILDR),</span>
<span id="cb32-468"><a href="liitteet.html#cb32-468"></a>            <span class="dt">lifsta1 =</span> <span class="kw">as_factor</span>(MARITAL),</span>
<span id="cb32-469"><a href="liitteet.html#cb32-469"></a>            <span class="dt">urbru1 =</span> <span class="kw">as_factor</span>(URBRURAL)</span>
<span id="cb32-470"><a href="liitteet.html#cb32-470"></a>           )</span>
<span id="cb32-471"><a href="liitteet.html#cb32-471"></a></span>
<span id="cb32-472"><a href="liitteet.html#cb32-472"></a><span class="co"># Muuttujat Q1a1...urbru1 ovat apumuuttujia, joissa on periaatteessa kaikki SPSS-</span></span>
<span id="cb32-473"><a href="liitteet.html#cb32-473"></a><span class="co"># tiedostosta siirtyvä metatieto. Poikkeus on SPSS:n kolme tarkentavaa koodia</span></span>
<span id="cb32-474"><a href="liitteet.html#cb32-474"></a><span class="co"># puuttuvalle tiedolle, ne saisi mukaan read_spss - parametrin avulla (user_na=TRUE)</span></span>
<span id="cb32-475"><a href="liitteet.html#cb32-475"></a><span class="co">#</span></span>
<span id="cb32-476"><a href="liitteet.html#cb32-476"></a></span>
<span id="cb32-477"><a href="liitteet.html#cb32-477"></a><span class="co"># Tarkistusksia</span></span>
<span id="cb32-478"><a href="liitteet.html#cb32-478"></a><span class="co"># ISSP2012jh1d.dat %&gt;% summary()</span></span>
<span id="cb32-479"><a href="liitteet.html#cb32-479"></a></span>
<span id="cb32-480"><a href="liitteet.html#cb32-480"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-481"><a href="liitteet.html#cb32-481"></a><span class="co">#    select(Q1a1, Q1b1, Q1c1,Q1d1,Q1e1, Q2a1, Q2b1, Q3a1,Q3b1) %&gt;%</span></span>
<span id="cb32-482"><a href="liitteet.html#cb32-482"></a><span class="co">#    summary()</span></span>
<span id="cb32-483"><a href="liitteet.html#cb32-483"></a><span class="co">#</span></span>
<span id="cb32-484"><a href="liitteet.html#cb32-484"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-485"><a href="liitteet.html#cb32-485"></a><span class="co">#    select(edu1,msta1, sosta1, nchild1, lifsta1, urbru1) %&gt;%</span></span>
<span id="cb32-486"><a href="liitteet.html#cb32-486"></a><span class="co">#    summary()</span></span>
<span id="cb32-487"><a href="liitteet.html#cb32-487"></a></span>
<span id="cb32-488"><a href="liitteet.html#cb32-488"></a></span>
<span id="cb32-489"><a href="liitteet.html#cb32-489"></a><span class="co"># Substanssimuuttujat - ristiintaulukoinnit riittävät (6.2.20)</span></span>
<span id="cb32-490"><a href="liitteet.html#cb32-490"></a></span>
<span id="cb32-491"><a href="liitteet.html#cb32-491"></a><span class="co"># ISSP2012jh1d.dat$Q1a1 %&gt;% fct_count()</span></span>
<span id="cb32-492"><a href="liitteet.html#cb32-492"></a><span class="co"># ISSP2012jh1d.dat$Q1b1 %&gt;% fct_count()</span></span>
<span id="cb32-493"><a href="liitteet.html#cb32-493"></a><span class="co"># ISSP2012jh1d.dat$Q1c1 %&gt;% fct_count()</span></span>
<span id="cb32-494"><a href="liitteet.html#cb32-494"></a><span class="co"># ISSP2012jh1d.dat$Q1d1 %&gt;% fct_count()</span></span>
<span id="cb32-495"><a href="liitteet.html#cb32-495"></a><span class="co"># ISSP2012jh1d.dat$Q1e1 %&gt;% fct_count()</span></span>
<span id="cb32-496"><a href="liitteet.html#cb32-496"></a><span class="co"># ISSP2012jh1d.dat$Q2a1 %&gt;% fct_count()</span></span>
<span id="cb32-497"><a href="liitteet.html#cb32-497"></a><span class="co"># ISSP2012jh1d.dat$Q2b1 %&gt;% fct_count()</span></span>
<span id="cb32-498"><a href="liitteet.html#cb32-498"></a><span class="co"># ISSP2012jh1d.dat$Q3a1 %&gt;% fct_count()</span></span>
<span id="cb32-499"><a href="liitteet.html#cb32-499"></a><span class="co">#ISSP2012jh1d.dat$Q3b1 %&gt;% fct_count()</span></span>
<span id="cb32-500"><a href="liitteet.html#cb32-500"></a></span>
<span id="cb32-501"><a href="liitteet.html#cb32-501"></a><span class="co"># Taustamuuttujat - ristiintaulukoinnit riittävät (6.2.20)</span></span>
<span id="cb32-502"><a href="liitteet.html#cb32-502"></a></span>
<span id="cb32-503"><a href="liitteet.html#cb32-503"></a><span class="co"># ISSP2012jh1d.dat$edu1 %&gt;% fct_count()</span></span>
<span id="cb32-504"><a href="liitteet.html#cb32-504"></a><span class="co"># ISSP2012jh1d.dat$msta1 %&gt;% fct_count()</span></span>
<span id="cb32-505"><a href="liitteet.html#cb32-505"></a><span class="co"># ISSP2012jh1d.dat$sosta1 %&gt;% fct_count()</span></span>
<span id="cb32-506"><a href="liitteet.html#cb32-506"></a><span class="co"># ISSP2012jh1d.dat$nchild1 %&gt;% fct_count()</span></span>
<span id="cb32-507"><a href="liitteet.html#cb32-507"></a><span class="co"># ISSP2012jh1d.dat$lifsta1 %&gt;% fct_count()</span></span>
<span id="cb32-508"><a href="liitteet.html#cb32-508"></a><span class="co"># ISSP2012jh1d.dat$urbru1 %&gt;% fct_count()</span></span>
<span id="cb32-509"><a href="liitteet.html#cb32-509"></a></span>
<span id="cb32-510"><a href="liitteet.html#cb32-510"></a><span class="co"># Poistetaan tyhjät luokat muuttujista</span></span>
<span id="cb32-511"><a href="liitteet.html#cb32-511"></a></span>
<span id="cb32-512"><a href="liitteet.html#cb32-512"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb32-513"><a href="liitteet.html#cb32-513"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1a =</span> <span class="kw">fct_drop</span>(Q1a1),</span>
<span id="cb32-514"><a href="liitteet.html#cb32-514"></a>           <span class="dt">Q1b =</span> <span class="kw">fct_drop</span>(Q1b1),</span>
<span id="cb32-515"><a href="liitteet.html#cb32-515"></a>           <span class="dt">Q1c =</span> <span class="kw">fct_drop</span>(Q1c1),</span>
<span id="cb32-516"><a href="liitteet.html#cb32-516"></a>           <span class="dt">Q1d =</span> <span class="kw">fct_drop</span>(Q1d1),</span>
<span id="cb32-517"><a href="liitteet.html#cb32-517"></a>           <span class="dt">Q1e =</span> <span class="kw">fct_drop</span>(Q1e1),</span>
<span id="cb32-518"><a href="liitteet.html#cb32-518"></a>           <span class="dt">Q2a =</span> <span class="kw">fct_drop</span>(Q2a1),</span>
<span id="cb32-519"><a href="liitteet.html#cb32-519"></a>           <span class="dt">Q2b =</span> <span class="kw">fct_drop</span>(Q2b1),</span>
<span id="cb32-520"><a href="liitteet.html#cb32-520"></a>           <span class="dt">Q3a =</span> <span class="kw">fct_drop</span>(Q3a1),</span>
<span id="cb32-521"><a href="liitteet.html#cb32-521"></a>           <span class="dt">Q3b =</span> <span class="kw">fct_drop</span>(Q3b1),</span>
<span id="cb32-522"><a href="liitteet.html#cb32-522"></a>           <span class="dt">edu =</span> <span class="kw">fct_drop</span>(edu1),</span>
<span id="cb32-523"><a href="liitteet.html#cb32-523"></a>           <span class="dt">msta =</span> <span class="kw">fct_drop</span>(msta1),</span>
<span id="cb32-524"><a href="liitteet.html#cb32-524"></a>           <span class="dt">sosta =</span> <span class="kw">fct_drop</span>(sosta1),</span>
<span id="cb32-525"><a href="liitteet.html#cb32-525"></a>           <span class="dt">nchild =</span> <span class="kw">fct_drop</span>(nchild1),</span>
<span id="cb32-526"><a href="liitteet.html#cb32-526"></a>           <span class="dt">lifsta =</span> <span class="kw">fct_drop</span>(lifsta1),</span>
<span id="cb32-527"><a href="liitteet.html#cb32-527"></a>           <span class="dt">urbru =</span> <span class="kw">fct_drop</span>(urbru1)</span>
<span id="cb32-528"><a href="liitteet.html#cb32-528"></a></span>
<span id="cb32-529"><a href="liitteet.html#cb32-529"></a>    )</span>
<span id="cb32-530"><a href="liitteet.html#cb32-530"></a><span class="co"># Tarkistuksia 1</span></span>
<span id="cb32-531"><a href="liitteet.html#cb32-531"></a></span>
<span id="cb32-532"><a href="liitteet.html#cb32-532"></a><span class="co"># ISSP2012jh1d.dat %&gt;% summary()</span></span>
<span id="cb32-533"><a href="liitteet.html#cb32-533"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-534"><a href="liitteet.html#cb32-534"></a><span class="co">#    select(Q1a, Q1b, Q1c, Q1d, Q1e,Q2a,Q2b,Q3a, Q3b) %&gt;%</span></span>
<span id="cb32-535"><a href="liitteet.html#cb32-535"></a><span class="co">#    str()</span></span>
<span id="cb32-536"><a href="liitteet.html#cb32-536"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-537"><a href="liitteet.html#cb32-537"></a><span class="co">#    select(Q1a1, Q1b1, Q1c1, Q1d1, Q1e1,Q2a1,Q2b1,Q3a1, Q3b1) %&gt;%</span></span>
<span id="cb32-538"><a href="liitteet.html#cb32-538"></a><span class="co">#    str()</span></span>
<span id="cb32-539"><a href="liitteet.html#cb32-539"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-540"><a href="liitteet.html#cb32-540"></a><span class="co">#    select(edu, msta, sosta, nchild,lifsta, urbru) %&gt;%</span></span>
<span id="cb32-541"><a href="liitteet.html#cb32-541"></a><span class="co">#    str()</span></span>
<span id="cb32-542"><a href="liitteet.html#cb32-542"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-543"><a href="liitteet.html#cb32-543"></a><span class="co">#    select(edu1, msta1, sosta1, nchild1,lifsta1, urbru1) %&gt;%</span></span>
<span id="cb32-544"><a href="liitteet.html#cb32-544"></a><span class="co">#    str()</span></span>
<span id="cb32-545"><a href="liitteet.html#cb32-545"></a></span>
<span id="cb32-546"><a href="liitteet.html#cb32-546"></a><span class="co"># Tarkistuksia 2 - ristiintaulukointeja</span></span>
<span id="cb32-547"><a href="liitteet.html#cb32-547"></a><span class="co"># Substanssimuuttujat</span></span>
<span id="cb32-548"><a href="liitteet.html#cb32-548"></a></span>
<span id="cb32-549"><a href="liitteet.html#cb32-549"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1a,Q1a1)</span></span>
<span id="cb32-550"><a href="liitteet.html#cb32-550"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1b,Q1b1)</span></span>
<span id="cb32-551"><a href="liitteet.html#cb32-551"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1c,Q1c1)</span></span>
<span id="cb32-552"><a href="liitteet.html#cb32-552"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1d,Q1d1)</span></span>
<span id="cb32-553"><a href="liitteet.html#cb32-553"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1e,Q1e1)</span></span>
<span id="cb32-554"><a href="liitteet.html#cb32-554"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q2a,Q2a1)</span></span>
<span id="cb32-555"><a href="liitteet.html#cb32-555"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q2b,Q2b1)</span></span>
<span id="cb32-556"><a href="liitteet.html#cb32-556"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q3a,Q3a1)</span></span>
<span id="cb32-557"><a href="liitteet.html#cb32-557"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q3b,Q3b1)</span></span>
<span id="cb32-558"><a href="liitteet.html#cb32-558"></a></span>
<span id="cb32-559"><a href="liitteet.html#cb32-559"></a><span class="co"># Taustamuuttujat</span></span>
<span id="cb32-560"><a href="liitteet.html#cb32-560"></a></span>
<span id="cb32-561"><a href="liitteet.html#cb32-561"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(edu,edu1)</span></span>
<span id="cb32-562"><a href="liitteet.html#cb32-562"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(msta,msta1)</span></span>
<span id="cb32-563"><a href="liitteet.html#cb32-563"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(sosta,sosta1)</span></span>
<span id="cb32-564"><a href="liitteet.html#cb32-564"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(nchild,nchild1)</span></span>
<span id="cb32-565"><a href="liitteet.html#cb32-565"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(lifsta,lifsta1)</span></span>
<span id="cb32-566"><a href="liitteet.html#cb32-566"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(urbru,urbru1)</span></span>
<span id="cb32-567"><a href="liitteet.html#cb32-567"></a></span>
<span id="cb32-568"><a href="liitteet.html#cb32-568"></a><span class="co"># Uusi muuttuja, jossa NA-arvot ovat mukana muuttujan uutena luokkana. Muuttujat</span></span>
<span id="cb32-569"><a href="liitteet.html#cb32-569"></a><span class="co"># nimetään Q1a -&gt; Q1am.</span></span>
<span id="cb32-570"><a href="liitteet.html#cb32-570"></a></span>
<span id="cb32-571"><a href="liitteet.html#cb32-571"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb32-572"><a href="liitteet.html#cb32-572"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1am =</span> <span class="kw">fct_explicit_na</span>(Q1a, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-573"><a href="liitteet.html#cb32-573"></a>           <span class="dt">Q1bm =</span> <span class="kw">fct_explicit_na</span>(Q1b, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-574"><a href="liitteet.html#cb32-574"></a>           <span class="dt">Q1cm =</span> <span class="kw">fct_explicit_na</span>(Q1c, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-575"><a href="liitteet.html#cb32-575"></a>           <span class="dt">Q1dm =</span> <span class="kw">fct_explicit_na</span>(Q1d, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-576"><a href="liitteet.html#cb32-576"></a>           <span class="dt">Q1em =</span> <span class="kw">fct_explicit_na</span>(Q1e, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-577"><a href="liitteet.html#cb32-577"></a>           <span class="dt">Q2am =</span> <span class="kw">fct_explicit_na</span>(Q2a, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-578"><a href="liitteet.html#cb32-578"></a>           <span class="dt">Q2bm =</span> <span class="kw">fct_explicit_na</span>(Q2b, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-579"><a href="liitteet.html#cb32-579"></a>           <span class="dt">Q3am =</span> <span class="kw">fct_explicit_na</span>(Q3a, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-580"><a href="liitteet.html#cb32-580"></a>           <span class="dt">Q3bm =</span> <span class="kw">fct_explicit_na</span>(Q3b, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-581"><a href="liitteet.html#cb32-581"></a>           <span class="dt">edum =</span> <span class="kw">fct_explicit_na</span>(edu, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-582"><a href="liitteet.html#cb32-582"></a>           <span class="dt">mstam =</span> <span class="kw">fct_explicit_na</span>(msta, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-583"><a href="liitteet.html#cb32-583"></a>           <span class="dt">sostam =</span> <span class="kw">fct_explicit_na</span>(sosta, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-584"><a href="liitteet.html#cb32-584"></a>           <span class="dt">nchildm =</span> <span class="kw">fct_explicit_na</span>(nchild, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-585"><a href="liitteet.html#cb32-585"></a>           <span class="dt">lifstam =</span> <span class="kw">fct_explicit_na</span>(lifsta, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-586"><a href="liitteet.html#cb32-586"></a>           <span class="dt">urbrum =</span> <span class="kw">fct_explicit_na</span>(urbru, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb32-587"><a href="liitteet.html#cb32-587"></a>           )</span>
<span id="cb32-588"><a href="liitteet.html#cb32-588"></a><span class="co"># Tarkistuksia 3</span></span>
<span id="cb32-589"><a href="liitteet.html#cb32-589"></a></span>
<span id="cb32-590"><a href="liitteet.html#cb32-590"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-591"><a href="liitteet.html#cb32-591"></a><span class="co">#    select(Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm) %&gt;%</span></span>
<span id="cb32-592"><a href="liitteet.html#cb32-592"></a><span class="co">#    summary()</span></span>
<span id="cb32-593"><a href="liitteet.html#cb32-593"></a><span class="co">#</span></span>
<span id="cb32-594"><a href="liitteet.html#cb32-594"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-595"><a href="liitteet.html#cb32-595"></a><span class="co">#    select(edum,mstam, sostam,nchildm,lifstam, urbrum) %&gt;%</span></span>
<span id="cb32-596"><a href="liitteet.html#cb32-596"></a><span class="co">#    summary()</span></span>
<span id="cb32-597"><a href="liitteet.html#cb32-597"></a><span class="co">#</span></span>
<span id="cb32-598"><a href="liitteet.html#cb32-598"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-599"><a href="liitteet.html#cb32-599"></a><span class="co">#    select(Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm) %&gt;%</span></span>
<span id="cb32-600"><a href="liitteet.html#cb32-600"></a><span class="co">#    str()</span></span>
<span id="cb32-601"><a href="liitteet.html#cb32-601"></a><span class="co">#</span></span>
<span id="cb32-602"><a href="liitteet.html#cb32-602"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-603"><a href="liitteet.html#cb32-603"></a><span class="co">#    select(edum,mstam, sostam,nchildm,lifstam, urbrum) %&gt;%</span></span>
<span id="cb32-604"><a href="liitteet.html#cb32-604"></a><span class="co">#    str()</span></span>
<span id="cb32-605"><a href="liitteet.html#cb32-605"></a></span>
<span id="cb32-606"><a href="liitteet.html#cb32-606"></a><span class="co"># Taustamuuttuja, puuttuva tieto mukana - ristiintaulkointeja</span></span>
<span id="cb32-607"><a href="liitteet.html#cb32-607"></a></span>
<span id="cb32-608"><a href="liitteet.html#cb32-608"></a><span class="co"># ISSP2012jh1d.dat$edum %&gt;% fct_count()</span></span>
<span id="cb32-609"><a href="liitteet.html#cb32-609"></a><span class="co"># ISSP2012jh1d.dat$mstam %&gt;% fct_count()</span></span>
<span id="cb32-610"><a href="liitteet.html#cb32-610"></a><span class="co"># ISSP2012jh1d.dat$sostam %&gt;% fct_count()</span></span>
<span id="cb32-611"><a href="liitteet.html#cb32-611"></a><span class="co"># ISSP2012jh1d.dat$nchildm %&gt;% fct_count()</span></span>
<span id="cb32-612"><a href="liitteet.html#cb32-612"></a><span class="co"># ISSP2012jh1d.dat$lifstam %&gt;% fct_count()</span></span>
<span id="cb32-613"><a href="liitteet.html#cb32-613"></a><span class="co"># ISSP2012jh1d.dat$urbrum %&gt;% fct_count()</span></span>
<span id="cb32-614"><a href="liitteet.html#cb32-614"></a></span>
<span id="cb32-615"><a href="liitteet.html#cb32-615"></a><span class="co"># Substanssimuuttujat, puuttuva tieto mukana  - ristiintaulkointeja</span></span>
<span id="cb32-616"><a href="liitteet.html#cb32-616"></a></span>
<span id="cb32-617"><a href="liitteet.html#cb32-617"></a><span class="co"># ISSP2012jh1d.dat$Q1am %&gt;% fct_count()</span></span>
<span id="cb32-618"><a href="liitteet.html#cb32-618"></a><span class="co"># ISSP2012jh1d.dat$Q1bm %&gt;% fct_count()</span></span>
<span id="cb32-619"><a href="liitteet.html#cb32-619"></a><span class="co"># ISSP2012jh1d.dat$Q1cm %&gt;% fct_count()</span></span>
<span id="cb32-620"><a href="liitteet.html#cb32-620"></a><span class="co"># ISSP2012jh1d.dat$Q1dm %&gt;% fct_count()</span></span>
<span id="cb32-621"><a href="liitteet.html#cb32-621"></a><span class="co"># ISSP2012jh1d.dat$Q1em %&gt;% fct_count()</span></span>
<span id="cb32-622"><a href="liitteet.html#cb32-622"></a><span class="co"># ISSP2012jh1d.dat$Q2am %&gt;% fct_count()</span></span>
<span id="cb32-623"><a href="liitteet.html#cb32-623"></a><span class="co"># ISSP2012jh1d.dat$Q2bm %&gt;% fct_count()</span></span>
<span id="cb32-624"><a href="liitteet.html#cb32-624"></a><span class="co"># ISSP2012jh1d.dat$Q3am %&gt;% fct_count()</span></span>
<span id="cb32-625"><a href="liitteet.html#cb32-625"></a><span class="co"># ISSP2012jh1d.dat$Q3bm %&gt;% fct_count()</span></span>
<span id="cb32-626"><a href="liitteet.html#cb32-626"></a></span>
<span id="cb32-627"><a href="liitteet.html#cb32-627"></a><span class="co"># Vaihe 2.4.1</span></span>
<span id="cb32-628"><a href="liitteet.html#cb32-628"></a></span>
<span id="cb32-629"><a href="liitteet.html#cb32-629"></a><span class="co"># Q1a - Q1e,Q2a, Q2b  Viisi vastausvaihtoehtoa - ei eksplisiittistä NA-tietoa(&quot;missing&quot;)</span></span>
<span id="cb32-630"><a href="liitteet.html#cb32-630"></a><span class="co"># Q3a - Q3b  kolme vastausvaihtoehtoa</span></span>
<span id="cb32-631"><a href="liitteet.html#cb32-631"></a></span>
<span id="cb32-632"><a href="liitteet.html#cb32-632"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb32-633"><a href="liitteet.html#cb32-633"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1a =</span> <span class="kw">fct_recode</span>(Q1a,</span>
<span id="cb32-634"><a href="liitteet.html#cb32-634"></a>                        <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-635"><a href="liitteet.html#cb32-635"></a>                        <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-636"><a href="liitteet.html#cb32-636"></a>                        <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-637"><a href="liitteet.html#cb32-637"></a>                        <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-638"><a href="liitteet.html#cb32-638"></a>                        <span class="st">&quot;E&quot;</span>=<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb32-639"><a href="liitteet.html#cb32-639"></a>            <span class="dt">Q1b =</span> <span class="kw">fct_recode</span>(Q1b,</span>
<span id="cb32-640"><a href="liitteet.html#cb32-640"></a>                      <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-641"><a href="liitteet.html#cb32-641"></a>                      <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-642"><a href="liitteet.html#cb32-642"></a>                      <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-643"><a href="liitteet.html#cb32-643"></a>                      <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-644"><a href="liitteet.html#cb32-644"></a>                      <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb32-645"><a href="liitteet.html#cb32-645"></a>           <span class="dt">Q1c =</span> <span class="kw">fct_recode</span>(Q1c,</span>
<span id="cb32-646"><a href="liitteet.html#cb32-646"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-647"><a href="liitteet.html#cb32-647"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-648"><a href="liitteet.html#cb32-648"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-649"><a href="liitteet.html#cb32-649"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-650"><a href="liitteet.html#cb32-650"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb32-651"><a href="liitteet.html#cb32-651"></a>           <span class="dt">Q1d =</span> <span class="kw">fct_recode</span>(Q1d,</span>
<span id="cb32-652"><a href="liitteet.html#cb32-652"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-653"><a href="liitteet.html#cb32-653"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-654"><a href="liitteet.html#cb32-654"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-655"><a href="liitteet.html#cb32-655"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-656"><a href="liitteet.html#cb32-656"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb32-657"><a href="liitteet.html#cb32-657"></a>           <span class="dt">Q1e =</span> <span class="kw">fct_recode</span>(Q1e,</span>
<span id="cb32-658"><a href="liitteet.html#cb32-658"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-659"><a href="liitteet.html#cb32-659"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-660"><a href="liitteet.html#cb32-660"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-661"><a href="liitteet.html#cb32-661"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-662"><a href="liitteet.html#cb32-662"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb32-663"><a href="liitteet.html#cb32-663"></a>          <span class="dt">Q2a =</span> <span class="kw">fct_recode</span>(Q2a,</span>
<span id="cb32-664"><a href="liitteet.html#cb32-664"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-665"><a href="liitteet.html#cb32-665"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-666"><a href="liitteet.html#cb32-666"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-667"><a href="liitteet.html#cb32-667"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-668"><a href="liitteet.html#cb32-668"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span> ),</span>
<span id="cb32-669"><a href="liitteet.html#cb32-669"></a>          <span class="dt">Q2b =</span> <span class="kw">fct_recode</span>(Q2b,</span>
<span id="cb32-670"><a href="liitteet.html#cb32-670"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-671"><a href="liitteet.html#cb32-671"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-672"><a href="liitteet.html#cb32-672"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-673"><a href="liitteet.html#cb32-673"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-674"><a href="liitteet.html#cb32-674"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb32-675"><a href="liitteet.html#cb32-675"></a>          <span class="dt">Q3a =</span> <span class="kw">fct_recode</span>(Q3a,</span>
<span id="cb32-676"><a href="liitteet.html#cb32-676"></a>                          <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb32-677"><a href="liitteet.html#cb32-677"></a>                          <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb32-678"><a href="liitteet.html#cb32-678"></a>                          <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span> ),</span>
<span id="cb32-679"><a href="liitteet.html#cb32-679"></a>          <span class="dt">Q3b =</span> <span class="kw">fct_recode</span>(Q3b,</span>
<span id="cb32-680"><a href="liitteet.html#cb32-680"></a>                           <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb32-681"><a href="liitteet.html#cb32-681"></a>                           <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb32-682"><a href="liitteet.html#cb32-682"></a>                           <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span> )</span>
<span id="cb32-683"><a href="liitteet.html#cb32-683"></a>                        )</span>
<span id="cb32-684"><a href="liitteet.html#cb32-684"></a></span>
<span id="cb32-685"><a href="liitteet.html#cb32-685"></a></span>
<span id="cb32-686"><a href="liitteet.html#cb32-686"></a><span class="co"># Tarkistuksia 1</span></span>
<span id="cb32-687"><a href="liitteet.html#cb32-687"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-688"><a href="liitteet.html#cb32-688"></a><span class="co">#    select(Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b, Q3a, Q3b) %&gt;%</span></span>
<span id="cb32-689"><a href="liitteet.html#cb32-689"></a><span class="co">#    summary()</span></span>
<span id="cb32-690"><a href="liitteet.html#cb32-690"></a></span>
<span id="cb32-691"><a href="liitteet.html#cb32-691"></a></span>
<span id="cb32-692"><a href="liitteet.html#cb32-692"></a><span class="co"># Vaihe 2.4.2 - muuttujassa eksplisiittinen NA-tieto</span></span>
<span id="cb32-693"><a href="liitteet.html#cb32-693"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb32-694"><a href="liitteet.html#cb32-694"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1am =</span> <span class="kw">fct_recode</span>(Q1am,</span>
<span id="cb32-695"><a href="liitteet.html#cb32-695"></a>                            <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-696"><a href="liitteet.html#cb32-696"></a>                            <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-697"><a href="liitteet.html#cb32-697"></a>                            <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-698"><a href="liitteet.html#cb32-698"></a>                            <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-699"><a href="liitteet.html#cb32-699"></a>                            <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb32-700"><a href="liitteet.html#cb32-700"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb32-701"><a href="liitteet.html#cb32-701"></a>           <span class="dt">Q1bm =</span> <span class="kw">fct_recode</span>(Q1bm,</span>
<span id="cb32-702"><a href="liitteet.html#cb32-702"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-703"><a href="liitteet.html#cb32-703"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-704"><a href="liitteet.html#cb32-704"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-705"><a href="liitteet.html#cb32-705"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-706"><a href="liitteet.html#cb32-706"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb32-707"><a href="liitteet.html#cb32-707"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb32-708"><a href="liitteet.html#cb32-708"></a>           <span class="dt">Q1cm =</span> <span class="kw">fct_recode</span>(Q1cm,</span>
<span id="cb32-709"><a href="liitteet.html#cb32-709"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-710"><a href="liitteet.html#cb32-710"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-711"><a href="liitteet.html#cb32-711"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-712"><a href="liitteet.html#cb32-712"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-713"><a href="liitteet.html#cb32-713"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb32-714"><a href="liitteet.html#cb32-714"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb32-715"><a href="liitteet.html#cb32-715"></a>           <span class="dt">Q1dm =</span> <span class="kw">fct_recode</span>(Q1dm,</span>
<span id="cb32-716"><a href="liitteet.html#cb32-716"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-717"><a href="liitteet.html#cb32-717"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-718"><a href="liitteet.html#cb32-718"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-719"><a href="liitteet.html#cb32-719"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-720"><a href="liitteet.html#cb32-720"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb32-721"><a href="liitteet.html#cb32-721"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb32-722"><a href="liitteet.html#cb32-722"></a>           <span class="dt">Q1em =</span> <span class="kw">fct_recode</span>(Q1em,</span>
<span id="cb32-723"><a href="liitteet.html#cb32-723"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-724"><a href="liitteet.html#cb32-724"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-725"><a href="liitteet.html#cb32-725"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-726"><a href="liitteet.html#cb32-726"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-727"><a href="liitteet.html#cb32-727"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb32-728"><a href="liitteet.html#cb32-728"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb32-729"><a href="liitteet.html#cb32-729"></a>           <span class="dt">Q2am =</span> <span class="kw">fct_recode</span>(Q2am,</span>
<span id="cb32-730"><a href="liitteet.html#cb32-730"></a>                            <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-731"><a href="liitteet.html#cb32-731"></a>                            <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-732"><a href="liitteet.html#cb32-732"></a>                            <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-733"><a href="liitteet.html#cb32-733"></a>                            <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-734"><a href="liitteet.html#cb32-734"></a>                            <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb32-735"><a href="liitteet.html#cb32-735"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb32-736"><a href="liitteet.html#cb32-736"></a>           <span class="dt">Q2bm =</span> <span class="kw">fct_recode</span>(Q2bm,</span>
<span id="cb32-737"><a href="liitteet.html#cb32-737"></a>                            <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb32-738"><a href="liitteet.html#cb32-738"></a>                            <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb32-739"><a href="liitteet.html#cb32-739"></a>                            <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb32-740"><a href="liitteet.html#cb32-740"></a>                            <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb32-741"><a href="liitteet.html#cb32-741"></a>                            <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb32-742"><a href="liitteet.html#cb32-742"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb32-743"><a href="liitteet.html#cb32-743"></a>           <span class="dt">Q3am =</span> <span class="kw">fct_recode</span>(Q3am,</span>
<span id="cb32-744"><a href="liitteet.html#cb32-744"></a>                            <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb32-745"><a href="liitteet.html#cb32-745"></a>                            <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb32-746"><a href="liitteet.html#cb32-746"></a>                            <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span>,</span>
<span id="cb32-747"><a href="liitteet.html#cb32-747"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb32-748"><a href="liitteet.html#cb32-748"></a>           <span class="dt">Q3bm =</span> <span class="kw">fct_recode</span>(Q3bm,</span>
<span id="cb32-749"><a href="liitteet.html#cb32-749"></a>                            <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb32-750"><a href="liitteet.html#cb32-750"></a>                            <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb32-751"><a href="liitteet.html#cb32-751"></a>                            <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span>,</span>
<span id="cb32-752"><a href="liitteet.html#cb32-752"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>)</span>
<span id="cb32-753"><a href="liitteet.html#cb32-753"></a>               )</span>
<span id="cb32-754"><a href="liitteet.html#cb32-754"></a></span>
<span id="cb32-755"><a href="liitteet.html#cb32-755"></a><span class="co"># Tarkistuksia 4</span></span>
<span id="cb32-756"><a href="liitteet.html#cb32-756"></a></span>
<span id="cb32-757"><a href="liitteet.html#cb32-757"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-758"><a href="liitteet.html#cb32-758"></a><span class="co">#    select(Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm) %&gt;%</span></span>
<span id="cb32-759"><a href="liitteet.html#cb32-759"></a><span class="co">#    summary()</span></span>
<span id="cb32-760"><a href="liitteet.html#cb32-760"></a></span>
<span id="cb32-761"><a href="liitteet.html#cb32-761"></a><span class="co"># Tarkistuksia 5</span></span>
<span id="cb32-762"><a href="liitteet.html#cb32-762"></a></span>
<span id="cb32-763"><a href="liitteet.html#cb32-763"></a><span class="co"># Substanssimuuttuja</span></span>
<span id="cb32-764"><a href="liitteet.html#cb32-764"></a></span>
<span id="cb32-765"><a href="liitteet.html#cb32-765"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-766"><a href="liitteet.html#cb32-766"></a><span class="co">#    tableX(Q1a,Q1am)</span></span>
<span id="cb32-767"><a href="liitteet.html#cb32-767"></a><span class="co">#</span></span>
<span id="cb32-768"><a href="liitteet.html#cb32-768"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-769"><a href="liitteet.html#cb32-769"></a><span class="co">#    tableX(Q1b,Q1bm)</span></span>
<span id="cb32-770"><a href="liitteet.html#cb32-770"></a><span class="co">#</span></span>
<span id="cb32-771"><a href="liitteet.html#cb32-771"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-772"><a href="liitteet.html#cb32-772"></a><span class="co">#    tableX(Q1c,Q1cm)</span></span>
<span id="cb32-773"><a href="liitteet.html#cb32-773"></a><span class="co">#</span></span>
<span id="cb32-774"><a href="liitteet.html#cb32-774"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-775"><a href="liitteet.html#cb32-775"></a><span class="co">#    tableX(Q1d,Q1dm)</span></span>
<span id="cb32-776"><a href="liitteet.html#cb32-776"></a><span class="co">#</span></span>
<span id="cb32-777"><a href="liitteet.html#cb32-777"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-778"><a href="liitteet.html#cb32-778"></a><span class="co">#    tableX(Q1e,Q1em)</span></span>
<span id="cb32-779"><a href="liitteet.html#cb32-779"></a><span class="co">#</span></span>
<span id="cb32-780"><a href="liitteet.html#cb32-780"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-781"><a href="liitteet.html#cb32-781"></a><span class="co">#    tableX(Q2a,Q2am)</span></span>
<span id="cb32-782"><a href="liitteet.html#cb32-782"></a><span class="co">#</span></span>
<span id="cb32-783"><a href="liitteet.html#cb32-783"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-784"><a href="liitteet.html#cb32-784"></a><span class="co">#    tableX(Q2b,Q2bm)</span></span>
<span id="cb32-785"><a href="liitteet.html#cb32-785"></a><span class="co">#</span></span>
<span id="cb32-786"><a href="liitteet.html#cb32-786"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-787"><a href="liitteet.html#cb32-787"></a><span class="co">#    tableX(Q3a,Q3am)</span></span>
<span id="cb32-788"><a href="liitteet.html#cb32-788"></a><span class="co">#</span></span>
<span id="cb32-789"><a href="liitteet.html#cb32-789"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-790"><a href="liitteet.html#cb32-790"></a><span class="co">#    tableX(Q3b,Q3bm)</span></span>
<span id="cb32-791"><a href="liitteet.html#cb32-791"></a><span class="co">#</span></span>
<span id="cb32-792"><a href="liitteet.html#cb32-792"></a><span class="co"># ISSP2012jh1d.dat %&gt;% </span></span>
<span id="cb32-793"><a href="liitteet.html#cb32-793"></a><span class="co">#    tableX(Q3am,Q3a)</span></span>
<span id="cb32-794"><a href="liitteet.html#cb32-794"></a><span class="co">#</span></span>
<span id="cb32-795"><a href="liitteet.html#cb32-795"></a><span class="co"># ISSP2012jh1d.dat$Q3a %&gt;% levels()</span></span>
<span id="cb32-796"><a href="liitteet.html#cb32-796"></a><span class="co"># ISSP2012jh1d.dat$Q3am %&gt;% levels()</span></span>
<span id="cb32-797"><a href="liitteet.html#cb32-797"></a></span>
<span id="cb32-798"><a href="liitteet.html#cb32-798"></a><span class="co"># Taustamuuttujat - ristiintaulukointeja</span></span>
<span id="cb32-799"><a href="liitteet.html#cb32-799"></a></span>
<span id="cb32-800"><a href="liitteet.html#cb32-800"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-801"><a href="liitteet.html#cb32-801"></a><span class="co">#    tableX(edu, edum)</span></span>
<span id="cb32-802"><a href="liitteet.html#cb32-802"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-803"><a href="liitteet.html#cb32-803"></a><span class="co">#    tableX(msta, mstam)</span></span>
<span id="cb32-804"><a href="liitteet.html#cb32-804"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-805"><a href="liitteet.html#cb32-805"></a><span class="co">#    tableX(sosta, sostam)</span></span>
<span id="cb32-806"><a href="liitteet.html#cb32-806"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-807"><a href="liitteet.html#cb32-807"></a><span class="co">#    tableX(nchild,nchildm)</span></span>
<span id="cb32-808"><a href="liitteet.html#cb32-808"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-809"><a href="liitteet.html#cb32-809"></a><span class="co">#    tableX(lifsta, lifstam)</span></span>
<span id="cb32-810"><a href="liitteet.html#cb32-810"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb32-811"><a href="liitteet.html#cb32-811"></a><span class="co">#    tableX(urbru, urbrum)</span></span>
<span id="cb32-812"><a href="liitteet.html#cb32-812"></a></span>
<span id="cb32-813"><a href="liitteet.html#cb32-813"></a><span class="co"># (16.9.2020) Testaus uusille muuttujille</span></span>
<span id="cb32-814"><a href="liitteet.html#cb32-814"></a><span class="co"># Koodilohkoissa on jo testattu taulukoimalla muuttujia. Tässä varmistetaan, että</span></span>
<span id="cb32-815"><a href="liitteet.html#cb32-815"></a><span class="co"># muuttujat pysyvät sellaisina millaisiksi ne on luotu.</span></span>
<span id="cb32-816"><a href="liitteet.html#cb32-816"></a></span>
<span id="cb32-817"><a href="liitteet.html#cb32-817"></a><span class="co"># ika - onpas hankala testata !</span></span>
<span id="cb32-818"><a href="liitteet.html#cb32-818"></a><span class="co"># Min. 1st Qu.  Median    Mean 3rd Qu.    Max.</span></span>
<span id="cb32-819"><a href="liitteet.html#cb32-819"></a><span class="co"># 15.00   36.00   50.00   49.52   63.00  102.00</span></span>
<span id="cb32-820"><a href="liitteet.html#cb32-820"></a><span class="co"># ikatest &lt;- ISSP2012jh1d.dat$ika %&gt;% summary()</span></span>
<span id="cb32-821"><a href="liitteet.html#cb32-821"></a><span class="co">#   ikatest &lt;- ikatest[2,]</span></span>
<span id="cb32-822"><a href="liitteet.html#cb32-822"></a><span class="co">#validate_that(are_equal(ikatest, c(15, 36, 50, 49.5, 63, 102)))</span></span>
<span id="cb32-823"><a href="liitteet.html#cb32-823"></a><span class="co">#str(ISSP2012jh1d.dat)</span></span>
<span id="cb32-824"><a href="liitteet.html#cb32-824"></a><span class="co">#ISSP2012jh1d.dat %&gt;% </span></span>
<span id="cb32-825"><a href="liitteet.html#cb32-825"></a></span>
<span id="cb32-826"><a href="liitteet.html#cb32-826"></a><span class="co"># substanssimuuttujat 1</span></span>
<span id="cb32-827"><a href="liitteet.html#cb32-827"></a><span class="co"># Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b, Q3a, Q3b (r. 423-&gt;)</span></span>
<span id="cb32-828"><a href="liitteet.html#cb32-828"></a></span>
<span id="cb32-829"><a href="liitteet.html#cb32-829"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1a)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb32-830"><a href="liitteet.html#cb32-830"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1a),</span>
<span id="cb32-831"><a href="liitteet.html#cb32-831"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb32-832"><a href="liitteet.html#cb32-832"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1b)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb32-833"><a href="liitteet.html#cb32-833"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1b),</span>
<span id="cb32-834"><a href="liitteet.html#cb32-834"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb32-835"><a href="liitteet.html#cb32-835"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1c)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb32-836"><a href="liitteet.html#cb32-836"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1c),</span>
<span id="cb32-837"><a href="liitteet.html#cb32-837"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb32-838"><a href="liitteet.html#cb32-838"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1d)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb32-839"><a href="liitteet.html#cb32-839"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1d),</span>
<span id="cb32-840"><a href="liitteet.html#cb32-840"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb32-841"><a href="liitteet.html#cb32-841"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1e)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb32-842"><a href="liitteet.html#cb32-842"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1e),</span>
<span id="cb32-843"><a href="liitteet.html#cb32-843"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb32-844"><a href="liitteet.html#cb32-844"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2a)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb32-845"><a href="liitteet.html#cb32-845"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2a),</span>
<span id="cb32-846"><a href="liitteet.html#cb32-846"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb32-847"><a href="liitteet.html#cb32-847"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2b)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb32-848"><a href="liitteet.html#cb32-848"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2b),</span>
<span id="cb32-849"><a href="liitteet.html#cb32-849"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb32-850"><a href="liitteet.html#cb32-850"></a></span>
<span id="cb32-851"><a href="liitteet.html#cb32-851"></a><span class="co"># substanssimuuttujat 2</span></span>
<span id="cb32-852"><a href="liitteet.html#cb32-852"></a></span>
<span id="cb32-853"><a href="liitteet.html#cb32-853"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3a)) <span class="op">==</span><span class="st"> </span><span class="dv">3</span>)</span>
<span id="cb32-854"><a href="liitteet.html#cb32-854"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3a),</span>
<span id="cb32-855"><a href="liitteet.html#cb32-855"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>)))</span>
<span id="cb32-856"><a href="liitteet.html#cb32-856"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3b)) <span class="op">==</span><span class="st"> </span><span class="dv">3</span>)</span>
<span id="cb32-857"><a href="liitteet.html#cb32-857"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3b),</span>
<span id="cb32-858"><a href="liitteet.html#cb32-858"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>)))</span>
<span id="cb32-859"><a href="liitteet.html#cb32-859"></a></span>
<span id="cb32-860"><a href="liitteet.html#cb32-860"></a></span>
<span id="cb32-861"><a href="liitteet.html#cb32-861"></a></span>
<span id="cb32-862"><a href="liitteet.html#cb32-862"></a><span class="co"># substanssimuuttujat, puuttuva tieto muuttujan arvona</span></span>
<span id="cb32-863"><a href="liitteet.html#cb32-863"></a><span class="co"># Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm</span></span>
<span id="cb32-864"><a href="liitteet.html#cb32-864"></a></span>
<span id="cb32-865"><a href="liitteet.html#cb32-865"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1am)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb32-866"><a href="liitteet.html#cb32-866"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1am),</span>
<span id="cb32-867"><a href="liitteet.html#cb32-867"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb32-868"><a href="liitteet.html#cb32-868"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1bm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb32-869"><a href="liitteet.html#cb32-869"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1bm),</span>
<span id="cb32-870"><a href="liitteet.html#cb32-870"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb32-871"><a href="liitteet.html#cb32-871"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1cm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb32-872"><a href="liitteet.html#cb32-872"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1cm),</span>
<span id="cb32-873"><a href="liitteet.html#cb32-873"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb32-874"><a href="liitteet.html#cb32-874"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1dm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb32-875"><a href="liitteet.html#cb32-875"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1dm),</span>
<span id="cb32-876"><a href="liitteet.html#cb32-876"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb32-877"><a href="liitteet.html#cb32-877"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1em)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb32-878"><a href="liitteet.html#cb32-878"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1em),</span>
<span id="cb32-879"><a href="liitteet.html#cb32-879"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb32-880"><a href="liitteet.html#cb32-880"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2am)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb32-881"><a href="liitteet.html#cb32-881"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2am),</span>
<span id="cb32-882"><a href="liitteet.html#cb32-882"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb32-883"><a href="liitteet.html#cb32-883"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2bm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb32-884"><a href="liitteet.html#cb32-884"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2bm),</span>
<span id="cb32-885"><a href="liitteet.html#cb32-885"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb32-886"><a href="liitteet.html#cb32-886"></a></span>
<span id="cb32-887"><a href="liitteet.html#cb32-887"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3am)) <span class="op">==</span><span class="st"> </span><span class="dv">4</span>)</span>
<span id="cb32-888"><a href="liitteet.html#cb32-888"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3am),</span>
<span id="cb32-889"><a href="liitteet.html#cb32-889"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb32-890"><a href="liitteet.html#cb32-890"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3bm)) <span class="op">==</span><span class="st"> </span><span class="dv">4</span>)</span>
<span id="cb32-891"><a href="liitteet.html#cb32-891"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3bm),</span>
<span id="cb32-892"><a href="liitteet.html#cb32-892"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb32-893"><a href="liitteet.html#cb32-893"></a></span>
<span id="cb32-894"><a href="liitteet.html#cb32-894"></a><span class="co"># taustamuuttujat puuttuvilla tiedoilla ja ilman</span></span>
<span id="cb32-895"><a href="liitteet.html#cb32-895"></a><span class="co"># testataan vain tasojen määrä, ei labeleita jotka ovat </span></span>
<span id="cb32-896"><a href="liitteet.html#cb32-896"></a><span class="co"># alkuperäisestä datasta.</span></span>
<span id="cb32-897"><a href="liitteet.html#cb32-897"></a></span>
<span id="cb32-898"><a href="liitteet.html#cb32-898"></a><span class="co"># edu, edum Huom! Koulutustasoluokitus alkuperäisessä</span></span>
<span id="cb32-899"><a href="liitteet.html#cb32-899"></a><span class="co"># datassa 0-6 (ei muodollista koulusta - korkeampi kolmas aste (maisteri, tohtori)</span></span>
<span id="cb32-900"><a href="liitteet.html#cb32-900"></a><span class="co"># R-faktorissa 1-7</span></span>
<span id="cb32-901"><a href="liitteet.html#cb32-901"></a></span>
<span id="cb32-902"><a href="liitteet.html#cb32-902"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>edu)) <span class="op">==</span><span class="st"> </span><span class="dv">7</span>)</span>
<span id="cb32-903"><a href="liitteet.html#cb32-903"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>edum)) <span class="op">==</span><span class="st"> </span><span class="dv">8</span>)</span>
<span id="cb32-904"><a href="liitteet.html#cb32-904"></a></span>
<span id="cb32-905"><a href="liitteet.html#cb32-905"></a><span class="co"># msta, mstam</span></span>
<span id="cb32-906"><a href="liitteet.html#cb32-906"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>msta)) <span class="op">==</span><span class="st"> </span><span class="dv">9</span>)</span>
<span id="cb32-907"><a href="liitteet.html#cb32-907"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>mstam)) <span class="op">==</span><span class="st"> </span><span class="dv">10</span>)</span>
<span id="cb32-908"><a href="liitteet.html#cb32-908"></a></span>
<span id="cb32-909"><a href="liitteet.html#cb32-909"></a><span class="co"># sosta, sostam</span></span>
<span id="cb32-910"><a href="liitteet.html#cb32-910"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>sosta)) <span class="op">==</span><span class="st"> </span><span class="dv">10</span>)</span>
<span id="cb32-911"><a href="liitteet.html#cb32-911"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>sostam)) <span class="op">==</span><span class="st"> </span><span class="dv">11</span>)</span>
<span id="cb32-912"><a href="liitteet.html#cb32-912"></a></span>
<span id="cb32-913"><a href="liitteet.html#cb32-913"></a><span class="co"># nchild, ncildm</span></span>
<span id="cb32-914"><a href="liitteet.html#cb32-914"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>nchild)) <span class="op">==</span><span class="st"> </span><span class="dv">11</span>)</span>
<span id="cb32-915"><a href="liitteet.html#cb32-915"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>nchildm)) <span class="op">==</span><span class="st"> </span><span class="dv">12</span>)</span>
<span id="cb32-916"><a href="liitteet.html#cb32-916"></a></span>
<span id="cb32-917"><a href="liitteet.html#cb32-917"></a><span class="co"># lifsta, lifstam</span></span>
<span id="cb32-918"><a href="liitteet.html#cb32-918"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>lifsta)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb32-919"><a href="liitteet.html#cb32-919"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>lifstam)) <span class="op">==</span><span class="st"> </span><span class="dv">7</span>)</span>
<span id="cb32-920"><a href="liitteet.html#cb32-920"></a></span>
<span id="cb32-921"><a href="liitteet.html#cb32-921"></a><span class="co"># urbru, urbrum</span></span>
<span id="cb32-922"><a href="liitteet.html#cb32-922"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>urbru)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb32-923"><a href="liitteet.html#cb32-923"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>urbrum)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb32-924"><a href="liitteet.html#cb32-924"></a></span>
<span id="cb32-925"><a href="liitteet.html#cb32-925"></a>issp_docname &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Variable Report&quot;</span>, <span class="st">&quot;Study Monitoring Report&quot;</span>,<span class="st">&quot;Basic Questionnaire&quot;</span>,</span>
<span id="cb32-926"><a href="liitteet.html#cb32-926"></a>                  <span class="st">&quot;Contents of ISSP 2012 module&quot;</span>, <span class="st">&quot;Questionnaire Development&quot;</span>)</span>
<span id="cb32-927"><a href="liitteet.html#cb32-927"></a>issp_docdesc &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Perusdokumentti, muuttujien kuvaukset ja taulukot&quot;</span>,</span>
<span id="cb32-928"><a href="liitteet.html#cb32-928"></a>                  <span class="st">&quot;tiedokeruun toteutus eri maissa&quot;</span>,</span>
<span id="cb32-929"><a href="liitteet.html#cb32-929"></a>                  <span class="st">&quot;Maittain sovellettava kyselylomake&quot;</span>, <span class="st">&quot;substanssikysymykset taulukkona&quot;</span>,</span>
<span id="cb32-930"><a href="liitteet.html#cb32-930"></a>                  <span class="st">&quot;kyselylomakkeen laatiminen&quot;</span>)</span>
<span id="cb32-931"><a href="liitteet.html#cb32-931"></a>issp_docfile &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ZA5900_cdb.pdf&quot;</span>, <span class="st">&quot;ZA5900_mr.pdf&quot;</span>, <span class="st">&quot;ZA5900_bq.pdf&quot;</span>,<span class="st">&quot;ZA5900_overview.pdf&quot;</span>,</span>
<span id="cb32-932"><a href="liitteet.html#cb32-932"></a>                  <span class="st">&quot;ssoar-2014-scholz_et_al-ISSP_2012_Family_and_Changing.pdf&quot;</span>)</span>
<span id="cb32-933"><a href="liitteet.html#cb32-933"></a></span>
<span id="cb32-934"><a href="liitteet.html#cb32-934"></a></span>
<span id="cb32-935"><a href="liitteet.html#cb32-935"></a>col_isspdocs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dokumentti&quot;</span>,<span class="st">&quot;sisältö&quot;</span>,<span class="st">&quot;tiedosto&quot;</span>)</span>
<span id="cb32-936"><a href="liitteet.html#cb32-936"></a></span>
<span id="cb32-937"><a href="liitteet.html#cb32-937"></a>ISSPdocsT.tbl &lt;-<span class="st"> </span><span class="kw">tibble</span>(issp_docname, issp_docdesc, issp_docfile)</span>
<span id="cb32-938"><a href="liitteet.html#cb32-938"></a><span class="kw">colnames</span>(ISSPdocsT.tbl) &lt;-<span class="st"> </span>col_isspdocs</span>
<span id="cb32-939"><a href="liitteet.html#cb32-939"></a></span>
<span id="cb32-940"><a href="liitteet.html#cb32-940"></a>knitr<span class="op">::</span><span class="kw">kable</span>(ISSPdocsT.tbl, <span class="dt">booktab =</span> <span class="ot">TRUE</span>,</span>
<span id="cb32-941"><a href="liitteet.html#cb32-941"></a>             <span class="dt">caption =</span> <span class="st">&#39; ISSP 2012: tärkeimmät dokumentit&#39;</span>)</span>
<span id="cb32-942"><a href="liitteet.html#cb32-942"></a></span>
<span id="cb32-943"><a href="liitteet.html#cb32-943"></a></span>
<span id="cb32-944"><a href="liitteet.html#cb32-944"></a><span class="co"># Muuttuja taulukkona - karkea tapa</span></span>
<span id="cb32-945"><a href="liitteet.html#cb32-945"></a><span class="co"># HUOM! Taulkot ovat hankalia, kun tulostus halutaan pdf- ja html- formaattiin</span></span>
<span id="cb32-946"><a href="liitteet.html#cb32-946"></a><span class="co"># Kysymyste pitkät versiot on siksi esitetty suomenkielisen lomakkeen kuvana.</span></span>
<span id="cb32-947"><a href="liitteet.html#cb32-947"></a></span>
<span id="cb32-948"><a href="liitteet.html#cb32-948"></a>tabVarnames &lt;-<span class="st"> </span><span class="kw">c</span>(substvars1,bgvars1) <span class="co"># muuttujanimet muuttujille</span></span>
<span id="cb32-949"><a href="liitteet.html#cb32-949"></a></span>
<span id="cb32-950"><a href="liitteet.html#cb32-950"></a><span class="co"># Kysymysten lyhyet versiot englanniksi</span></span>
<span id="cb32-951"><a href="liitteet.html#cb32-951"></a>tabVarDesc &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Q1a Working mother can have warm relation with child &quot;</span>,</span>
<span id="cb32-952"><a href="liitteet.html#cb32-952"></a>                <span class="st">&quot;Q1b Pre-school child suffers through working mother&quot;</span>,</span>
<span id="cb32-953"><a href="liitteet.html#cb32-953"></a>                <span class="st">&quot;Q1c Family life suffers through working mother&quot;</span>,</span>
<span id="cb32-954"><a href="liitteet.html#cb32-954"></a>                <span class="st">&quot;Q1d Women’s preference: home and children&quot;</span>,</span>
<span id="cb32-955"><a href="liitteet.html#cb32-955"></a>                <span class="st">&quot;Q1e Being housewife is satisfying&quot;</span>,</span>
<span id="cb32-956"><a href="liitteet.html#cb32-956"></a>                <span class="st">&quot;Q2a Both should contribute to household income&quot;</span>,</span>
<span id="cb32-957"><a href="liitteet.html#cb32-957"></a>                <span class="st">&quot;Q2b Men’s job is earn money, women’s job household&quot;</span>,</span>
<span id="cb32-958"><a href="liitteet.html#cb32-958"></a>                <span class="st">&quot;Q3a Should women work: Child under school age&quot;</span>,</span>
<span id="cb32-959"><a href="liitteet.html#cb32-959"></a>                <span class="st">&quot;Q3b Should women work: Youngest kid at school&quot;</span>,</span>
<span id="cb32-960"><a href="liitteet.html#cb32-960"></a>                <span class="st">&quot;Respondents age &quot;</span>,</span>
<span id="cb32-961"><a href="liitteet.html#cb32-961"></a>                <span class="st">&quot;Respondents gender&quot;</span>,</span>
<span id="cb32-962"><a href="liitteet.html#cb32-962"></a>                <span class="st">&quot;Highest completed degree of education: Categories for international comparison&quot;</span>,</span>
<span id="cb32-963"><a href="liitteet.html#cb32-963"></a>                <span class="st">&quot;Main status: work, unemployed, in education...&quot;</span>,</span>
<span id="cb32-964"><a href="liitteet.html#cb32-964"></a>                <span class="st">&quot;Top-Bottom self-placement (10 pt scale)&quot;</span>,</span>
<span id="cb32-965"><a href="liitteet.html#cb32-965"></a>                <span class="st">&quot;How many children in household: children between [school age] and 17 years of age&quot;</span>,</span>
<span id="cb32-966"><a href="liitteet.html#cb32-966"></a>                <span class="st">&quot;Legal partnership status: married, civil partership...&quot;</span>,</span>
<span id="cb32-967"><a href="liitteet.html#cb32-967"></a>                <span class="st">&quot;Place of living: urban - rural&quot;</span></span>
<span id="cb32-968"><a href="liitteet.html#cb32-968"></a>              )</span>
<span id="cb32-969"><a href="liitteet.html#cb32-969"></a><span class="co">#tabVarDesc</span></span>
<span id="cb32-970"><a href="liitteet.html#cb32-970"></a></span>
<span id="cb32-971"><a href="liitteet.html#cb32-971"></a><span class="co"># Taulukko</span></span>
<span id="cb32-972"><a href="liitteet.html#cb32-972"></a></span>
<span id="cb32-973"><a href="liitteet.html#cb32-973"></a><span class="co"># luodaan df - varoitus: data_frame() is deprecated, use tibble” (4.2.20),</span></span>
<span id="cb32-974"><a href="liitteet.html#cb32-974"></a><span class="co"># vaihdetaan tibbleen (21.2.20)</span></span>
<span id="cb32-975"><a href="liitteet.html#cb32-975"></a></span>
<span id="cb32-976"><a href="liitteet.html#cb32-976"></a><span class="co"># jhVarTable1.df &lt;- data_frame(tabVarnames,tabVarDesc) OLD</span></span>
<span id="cb32-977"><a href="liitteet.html#cb32-977"></a>jhVarTable1.tbl &lt;-<span class="st"> </span><span class="kw">tibble</span>(tabVarnames,tabVarDesc)</span>
<span id="cb32-978"><a href="liitteet.html#cb32-978"></a>cols_jhVarTable1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;muuttuja&quot;</span>,<span class="st">&quot;kysymyksen tunnus, lyhennetty kysymys&quot;</span>)</span>
<span id="cb32-979"><a href="liitteet.html#cb32-979"></a><span class="kw">colnames</span>(jhVarTable1.tbl) &lt;-<span class="st"> </span>cols_jhVarTable1</span>
<span id="cb32-980"><a href="liitteet.html#cb32-980"></a><span class="co">#str(jhVarTable1.tbl)</span></span>
<span id="cb32-981"><a href="liitteet.html#cb32-981"></a><span class="co"># Lyhyet kysymykset englanniksi</span></span>
<span id="cb32-982"><a href="liitteet.html#cb32-982"></a></span>
<span id="cb32-983"><a href="liitteet.html#cb32-983"></a>knitr<span class="op">::</span><span class="kw">kable</span>(jhVarTable1.tbl, <span class="dt">booktab =</span> <span class="ot">TRUE</span>,</span>
<span id="cb32-984"><a href="liitteet.html#cb32-984"></a>               <span class="dt">caption =</span> <span class="st">&quot;ISSP2012:Työelämä ja perhearvot - kysymykset&quot;</span>)</span>
<span id="cb32-985"><a href="liitteet.html#cb32-985"></a></span>
<span id="cb32-986"><a href="liitteet.html#cb32-986"></a></span>
<span id="cb32-987"><a href="liitteet.html#cb32-987"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/substvar_fi_Q1Q2.png&#39;</span>)</span>
<span id="cb32-988"><a href="liitteet.html#cb32-988"></a></span>
<span id="cb32-989"><a href="liitteet.html#cb32-989"></a><span class="co"># UUSI DATA 30.1.20</span></span>
<span id="cb32-990"><a href="liitteet.html#cb32-990"></a><span class="co">#</span></span>
<span id="cb32-991"><a href="liitteet.html#cb32-991"></a><span class="co"># LUETAAN DATA G1_1_data2.Rmd - tiedostossa, luodaan faktorimuuttujat</span></span>
<span id="cb32-992"><a href="liitteet.html#cb32-992"></a><span class="co"># G1_1_data_fct1.Rmd-tiedostossa -&gt; ISSP2012jh1d.dat (df)</span></span>
<span id="cb32-993"><a href="liitteet.html#cb32-993"></a><span class="co"># 23 muuttujaa (9 substanssimuuttujaa, 8 taustamuuttujaa, 3 maa-muuttujaa, 3 metadatamuuttujaa)</span></span>
<span id="cb32-994"><a href="liitteet.html#cb32-994"></a><span class="co"># 25 maata.</span></span>
<span id="cb32-995"><a href="liitteet.html#cb32-995"></a><span class="co"># Poistettu 146 havaintoa, joilla SEX tai AGE puuttuu</span></span>
<span id="cb32-996"><a href="liitteet.html#cb32-996"></a><span class="co"># Johdattelevassa esimerkissä kuusi maata, kaksi taustamuuttujaa ja yksi kysymys</span></span>
<span id="cb32-997"><a href="liitteet.html#cb32-997"></a><span class="co"># (V6/Q1b)</span></span>
<span id="cb32-998"><a href="liitteet.html#cb32-998"></a></span>
<span id="cb32-999"><a href="liitteet.html#cb32-999"></a></span>
<span id="cb32-1000"><a href="liitteet.html#cb32-1000"></a><span class="co"># Kuusi maata</span></span>
<span id="cb32-1001"><a href="liitteet.html#cb32-1001"></a></span>
<span id="cb32-1002"><a href="liitteet.html#cb32-1002"></a>countries_esim1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">56</span>, <span class="dv">100</span>, <span class="dv">208</span>, <span class="dv">246</span>, <span class="dv">276</span>, <span class="dv">348</span>) <span class="co">#BE,BG,DK,FI,DE,HU</span></span>
<span id="cb32-1003"><a href="liitteet.html#cb32-1003"></a>ISSP2012esim3.dat &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012jh1d.dat, V4 <span class="op">%in%</span><span class="st"> </span>countries_esim1)</span>
<span id="cb32-1004"><a href="liitteet.html#cb32-1004"></a><span class="co"># str(ISSP2012esim3.dat) - pitkä listaus pois (24.2.20)</span></span>
<span id="cb32-1005"><a href="liitteet.html#cb32-1005"></a></span>
<span id="cb32-1006"><a href="liitteet.html#cb32-1006"></a><span class="co">#neljä maamuuttujaa, kysymys Q1b, ikä ja sukupuoli</span></span>
<span id="cb32-1007"><a href="liitteet.html#cb32-1007"></a></span>
<span id="cb32-1008"><a href="liitteet.html#cb32-1008"></a>vars_esim1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;C_ALPHAN&quot;</span>, <span class="st">&quot;V3&quot;</span>, <span class="st">&quot;maa&quot;</span>,<span class="st">&quot;maa3&quot;</span>, <span class="st">&quot;Q1b&quot;</span>, <span class="st">&quot;sp&quot;</span>, <span class="st">&quot;ika&quot;</span>)</span>
<span id="cb32-1009"><a href="liitteet.html#cb32-1009"></a>ISSP2012esim2.dat &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012esim3.dat, <span class="kw">all_of</span>(vars_esim1))</span>
<span id="cb32-1010"><a href="liitteet.html#cb32-1010"></a></span>
<span id="cb32-1011"><a href="liitteet.html#cb32-1011"></a><span class="kw">str</span>(ISSP2012esim2.dat) <span class="co"># 8542 obs. of  7 variables, ja sama 8.6.2020</span></span>
<span id="cb32-1012"><a href="liitteet.html#cb32-1012"></a><span class="co"># C_ALPHAN: chr, maa: Factor w/ 25</span></span>
<span id="cb32-1013"><a href="liitteet.html#cb32-1013"></a></span>
<span id="cb32-1014"><a href="liitteet.html#cb32-1014"></a><span class="co"># Poistetaan havainnot, joilla Q1b - muuttujassa puuttuva tieto &#39;NA&#39;</span></span>
<span id="cb32-1015"><a href="liitteet.html#cb32-1015"></a><span class="co"># sum(is.na(ISSP2012esim2.dat$Q1b)) = 399</span></span>
<span id="cb32-1016"><a href="liitteet.html#cb32-1016"></a></span>
<span id="cb32-1017"><a href="liitteet.html#cb32-1017"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012esim2.dat, <span class="op">!</span><span class="kw">is.na</span>(Q1b))</span>
<span id="cb32-1018"><a href="liitteet.html#cb32-1018"></a></span>
<span id="cb32-1019"><a href="liitteet.html#cb32-1019"></a><span class="co">#str(ISSP2012esim1.dat) # 8143 obs. of  6 variable</span></span>
<span id="cb32-1020"><a href="liitteet.html#cb32-1020"></a></span>
<span id="cb32-1021"><a href="liitteet.html#cb32-1021"></a><span class="co"># Tarkistuksia (3.2.20)</span></span>
<span id="cb32-1022"><a href="liitteet.html#cb32-1022"></a><span class="co">#</span></span>
<span id="cb32-1023"><a href="liitteet.html#cb32-1023"></a><span class="co">#fct_count(ISSP2012esim1.dat$sp)</span></span>
<span id="cb32-1024"><a href="liitteet.html#cb32-1024"></a><span class="co">#fct_count(ISSP2012esim1.dat$Q1b)</span></span>
<span id="cb32-1025"><a href="liitteet.html#cb32-1025"></a><span class="co">#fct_count(ISSP2012esim1.dat$maa)</span></span>
<span id="cb32-1026"><a href="liitteet.html#cb32-1026"></a><span class="co">#fct_count(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb32-1027"><a href="liitteet.html#cb32-1027"></a><span class="co">#</span></span>
<span id="cb32-1028"><a href="liitteet.html#cb32-1028"></a><span class="co">#summary(ISSP2012esim1.dat$sp)</span></span>
<span id="cb32-1029"><a href="liitteet.html#cb32-1029"></a><span class="co">#sp: 3799 + 4344 = 8143</span></span>
<span id="cb32-1030"><a href="liitteet.html#cb32-1030"></a><span class="co">#summary(ISSP2012esim1.dat$Q1b)</span></span>
<span id="cb32-1031"><a href="liitteet.html#cb32-1031"></a><span class="co">#  S      s      ?     e      E</span></span>
<span id="cb32-1032"><a href="liitteet.html#cb32-1032"></a><span class="co"># 810 + 1935 + 1367 + 2125 + 1906 = 8143</span></span>
<span id="cb32-1033"><a href="liitteet.html#cb32-1033"></a><span class="co">#</span></span>
<span id="cb32-1034"><a href="liitteet.html#cb32-1034"></a><span class="co"># EDELLINEN DATA - havaintojen määrät samat kuin uudella datalla (31.1.20)</span></span>
<span id="cb32-1035"><a href="liitteet.html#cb32-1035"></a><span class="co">#</span></span>
<span id="cb32-1036"><a href="liitteet.html#cb32-1036"></a><span class="co"># 8557 obs. ennen kuin sexagemissing poistettiin, nyt 8542, 8557-8542 = 15</span></span>
<span id="cb32-1037"><a href="liitteet.html#cb32-1037"></a><span class="co">#</span></span>
<span id="cb32-1038"><a href="liitteet.html#cb32-1038"></a><span class="co"># Poistetaan havainnot joissa puuttuva tieto muuttujassa V6 (Q1b) n = 399</span></span>
<span id="cb32-1039"><a href="liitteet.html#cb32-1039"></a><span class="co"># 8542-399 = 8143</span></span>
<span id="cb32-1040"><a href="liitteet.html#cb32-1040"></a></span>
<span id="cb32-1041"><a href="liitteet.html#cb32-1041"></a><span class="co"># Tyhjät &quot;faktorilabelit&quot; on poistettava</span></span>
<span id="cb32-1042"><a href="liitteet.html#cb32-1042"></a></span>
<span id="cb32-1043"><a href="liitteet.html#cb32-1043"></a> ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb32-1044"><a href="liitteet.html#cb32-1044"></a><span class="st">     </span><span class="kw">mutate</span>(<span class="dt">maa =</span> <span class="kw">fct_drop</span>(maa),</span>
<span id="cb32-1045"><a href="liitteet.html#cb32-1045"></a>            <span class="dt">maa3 =</span> <span class="kw">fct_drop</span>(maa3)</span>
<span id="cb32-1046"><a href="liitteet.html#cb32-1046"></a>            )</span>
<span id="cb32-1047"><a href="liitteet.html#cb32-1047"></a></span>
<span id="cb32-1048"><a href="liitteet.html#cb32-1048"></a><span class="co">#summary(ISSP2012esim1.dat$maa)</span></span>
<span id="cb32-1049"><a href="liitteet.html#cb32-1049"></a><span class="co">#summary(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb32-1050"><a href="liitteet.html#cb32-1050"></a><span class="co">#</span></span>
<span id="cb32-1051"><a href="liitteet.html#cb32-1051"></a><span class="co"># str(ISSP2012esim1.dat$maa)</span></span>
<span id="cb32-1052"><a href="liitteet.html#cb32-1052"></a><span class="co"># attributes(ISSP2012esim1.dat$maa)</span></span>
<span id="cb32-1053"><a href="liitteet.html#cb32-1053"></a><span class="co">#</span></span>
<span id="cb32-1054"><a href="liitteet.html#cb32-1054"></a><span class="co"># str(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb32-1055"><a href="liitteet.html#cb32-1055"></a><span class="co"># attributes(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb32-1056"><a href="liitteet.html#cb32-1056"></a><span class="co">#</span></span>
<span id="cb32-1057"><a href="liitteet.html#cb32-1057"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa, Q1b, type = &quot;count&quot;)</span></span>
<span id="cb32-1058"><a href="liitteet.html#cb32-1058"></a><span class="co">#fct_count(ISSP2012esim1.dat$Q1b)</span></span>
<span id="cb32-1059"><a href="liitteet.html#cb32-1059"></a><span class="co"># fct_count(ISSP2012esim1.dat$sp)</span></span>
<span id="cb32-1060"><a href="liitteet.html#cb32-1060"></a><span class="co"># fct_unique(ISSP2012esim1.dat$maa)</span></span>
<span id="cb32-1061"><a href="liitteet.html#cb32-1061"></a><span class="co"># fct_count(ISSP2012esim1.dat$maa)</span></span>
<span id="cb32-1062"><a href="liitteet.html#cb32-1062"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa, C_ALPHAN, type = &quot;count&quot;)</span></span>
<span id="cb32-1063"><a href="liitteet.html#cb32-1063"></a><span class="co">#</span></span>
<span id="cb32-1064"><a href="liitteet.html#cb32-1064"></a><span class="co"># maa3 - siistitään &quot;faktorilabelit&quot; kaksikirjaimisiksi</span></span>
<span id="cb32-1065"><a href="liitteet.html#cb32-1065"></a><span class="co">#</span></span>
<span id="cb32-1066"><a href="liitteet.html#cb32-1066"></a><span class="co"># ISO 3166 Code V3 - maiden jaot</span></span>
<span id="cb32-1067"><a href="liitteet.html#cb32-1067"></a><span class="co">#  5601     BE-FLA-Belgium/ Flanders</span></span>
<span id="cb32-1068"><a href="liitteet.html#cb32-1068"></a><span class="co">#  5602     BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb32-1069"><a href="liitteet.html#cb32-1069"></a><span class="co">#  5603     BE-BRU-Belgium/ Brussels</span></span>
<span id="cb32-1070"><a href="liitteet.html#cb32-1070"></a><span class="co"># 27601     DE-W-Germany-West</span></span>
<span id="cb32-1071"><a href="liitteet.html#cb32-1071"></a><span class="co"># 27602     DE-E-Germany-East</span></span>
<span id="cb32-1072"><a href="liitteet.html#cb32-1072"></a><span class="co"># Tähän pitäisi päästä</span></span>
<span id="cb32-1073"><a href="liitteet.html#cb32-1073"></a><span class="co"># levels = c(&quot;100&quot;,&quot;208&quot;,&quot;246&quot;,&quot;348&quot;,&quot;5601&quot;,&quot;5602&quot;,&quot;5603&quot;,&quot;27601&quot;,&quot;27602&quot;),</span></span>
<span id="cb32-1074"><a href="liitteet.html#cb32-1074"></a><span class="co"># labels = c(&quot;BG&quot;,&quot;DK&quot;,&quot;FI&quot;,&quot;HU&quot;,&quot;bF&quot;,&quot;bW&quot;,&quot;bB&quot;,&quot;dW&quot;,&quot;dE&quot;))</span></span>
<span id="cb32-1075"><a href="liitteet.html#cb32-1075"></a><span class="co"># levels(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb32-1076"><a href="liitteet.html#cb32-1076"></a></span>
<span id="cb32-1077"><a href="liitteet.html#cb32-1077"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb32-1078"><a href="liitteet.html#cb32-1078"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">maa3 =</span></span>
<span id="cb32-1079"><a href="liitteet.html#cb32-1079"></a>                <span class="kw">fct_recode</span>(maa3,</span>
<span id="cb32-1080"><a href="liitteet.html#cb32-1080"></a>                 <span class="st">&quot;BG&quot;</span> =<span class="st"> &quot;BG-Bulgaria&quot;</span>,</span>
<span id="cb32-1081"><a href="liitteet.html#cb32-1081"></a>                 <span class="st">&quot;DK&quot;</span> =<span class="st"> &quot;DK-Denmark&quot;</span>,</span>
<span id="cb32-1082"><a href="liitteet.html#cb32-1082"></a>                 <span class="st">&quot;FI&quot;</span> =<span class="st"> &quot;FI-Finland&quot;</span>,</span>
<span id="cb32-1083"><a href="liitteet.html#cb32-1083"></a>                 <span class="st">&quot;HU&quot;</span> =<span class="st"> &quot;HU-Hungary&quot;</span>,</span>
<span id="cb32-1084"><a href="liitteet.html#cb32-1084"></a>                 <span class="st">&quot;bF&quot;</span> =<span class="st"> &quot;BE-FLA-Belgium/ Flanders&quot;</span>,</span>
<span id="cb32-1085"><a href="liitteet.html#cb32-1085"></a>                 <span class="st">&quot;bW&quot;</span> =<span class="st"> &quot;BE-WAL-Belgium/ Wallonia&quot;</span>,</span>
<span id="cb32-1086"><a href="liitteet.html#cb32-1086"></a>                 <span class="st">&quot;bB&quot;</span> =<span class="st"> &quot;BE-BRU-Belgium/ Brussels&quot;</span>,</span>
<span id="cb32-1087"><a href="liitteet.html#cb32-1087"></a>                 <span class="st">&quot;dW&quot;</span> =<span class="st"> &quot;DE-W-Germany-West&quot;</span>,</span>
<span id="cb32-1088"><a href="liitteet.html#cb32-1088"></a>                 <span class="st">&quot;dE&quot;</span> =<span class="st"> &quot;DE-E-Germany-East&quot;</span>)</span>
<span id="cb32-1089"><a href="liitteet.html#cb32-1089"></a>               )</span>
<span id="cb32-1090"><a href="liitteet.html#cb32-1090"></a><span class="co"># tarkistuksia</span></span>
<span id="cb32-1091"><a href="liitteet.html#cb32-1091"></a><span class="co">#levels(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb32-1092"><a href="liitteet.html#cb32-1092"></a><span class="co"># str(ISSP2012esim1.dat$maa3) # 9 levels</span></span>
<span id="cb32-1093"><a href="liitteet.html#cb32-1093"></a><span class="co">#summary(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb32-1094"><a href="liitteet.html#cb32-1094"></a><span class="co">#</span></span>
<span id="cb32-1095"><a href="liitteet.html#cb32-1095"></a><span class="co"># TÄSSÄ TOISTOA! (4.2.20)</span></span>
<span id="cb32-1096"><a href="liitteet.html#cb32-1096"></a><span class="co"># Muutetaan muuttujien &quot;maa&quot; ja &quot;maa3&quot; arvojen (levels) järjestys samaksi kuin</span></span>
<span id="cb32-1097"><a href="liitteet.html#cb32-1097"></a><span class="co"># alkuperäisen muuttujan C_ALPHAN. Helpomi verrata aikaisempiin tuloksiin.</span></span>
<span id="cb32-1098"><a href="liitteet.html#cb32-1098"></a></span>
<span id="cb32-1099"><a href="liitteet.html#cb32-1099"></a><span class="co"># &quot;alkuperäinen&quot; maa talteen</span></span>
<span id="cb32-1100"><a href="liitteet.html#cb32-1100"></a>ISSP2012esim1.dat<span class="op">$</span>maa2 &lt;-<span class="st"> </span>ISSP2012esim1.dat<span class="op">$</span>maa</span>
<span id="cb32-1101"><a href="liitteet.html#cb32-1101"></a></span>
<span id="cb32-1102"><a href="liitteet.html#cb32-1102"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb32-1103"><a href="liitteet.html#cb32-1103"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">maa =</span></span>
<span id="cb32-1104"><a href="liitteet.html#cb32-1104"></a>                <span class="kw">fct_relevel</span>(maa,</span>
<span id="cb32-1105"><a href="liitteet.html#cb32-1105"></a>                            <span class="st">&quot;BE&quot;</span>,</span>
<span id="cb32-1106"><a href="liitteet.html#cb32-1106"></a>                            <span class="st">&quot;BG&quot;</span>,</span>
<span id="cb32-1107"><a href="liitteet.html#cb32-1107"></a>                            <span class="st">&quot;DE&quot;</span>,</span>
<span id="cb32-1108"><a href="liitteet.html#cb32-1108"></a>                            <span class="st">&quot;DK&quot;</span>,</span>
<span id="cb32-1109"><a href="liitteet.html#cb32-1109"></a>                            <span class="st">&quot;FI&quot;</span>,</span>
<span id="cb32-1110"><a href="liitteet.html#cb32-1110"></a>                            <span class="st">&quot;HU&quot;</span>))</span>
<span id="cb32-1111"><a href="liitteet.html#cb32-1111"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb32-1112"><a href="liitteet.html#cb32-1112"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">maa3 =</span></span>
<span id="cb32-1113"><a href="liitteet.html#cb32-1113"></a>                <span class="kw">fct_relevel</span>(maa3,</span>
<span id="cb32-1114"><a href="liitteet.html#cb32-1114"></a>                        <span class="st">&quot;bF&quot;</span>,</span>
<span id="cb32-1115"><a href="liitteet.html#cb32-1115"></a>                        <span class="st">&quot;bW&quot;</span>,</span>
<span id="cb32-1116"><a href="liitteet.html#cb32-1116"></a>                        <span class="st">&quot;bB&quot;</span>,</span>
<span id="cb32-1117"><a href="liitteet.html#cb32-1117"></a>                        <span class="st">&quot;BG&quot;</span>,</span>
<span id="cb32-1118"><a href="liitteet.html#cb32-1118"></a>                        <span class="st">&quot;dW&quot;</span>,</span>
<span id="cb32-1119"><a href="liitteet.html#cb32-1119"></a>                        <span class="st">&quot;dE&quot;</span>,</span>
<span id="cb32-1120"><a href="liitteet.html#cb32-1120"></a>                        <span class="st">&quot;DK&quot;</span>,</span>
<span id="cb32-1121"><a href="liitteet.html#cb32-1121"></a>                        <span class="st">&quot;FI&quot;</span>,</span>
<span id="cb32-1122"><a href="liitteet.html#cb32-1122"></a>                        <span class="st">&quot;HU&quot;</span>))</span>
<span id="cb32-1123"><a href="liitteet.html#cb32-1123"></a></span>
<span id="cb32-1124"><a href="liitteet.html#cb32-1124"></a><span class="co"># Tarkistus</span></span>
<span id="cb32-1125"><a href="liitteet.html#cb32-1125"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa2,maa, type = &quot;count&quot;)</span></span>
<span id="cb32-1126"><a href="liitteet.html#cb32-1126"></a><span class="co"># &quot;alkuperäinen&quot; maa talteenISSP2012esim1.dat %&gt;% tableX(maa,C_ALPHAN, type = &quot;count&quot;)</span></span>
<span id="cb32-1127"><a href="liitteet.html#cb32-1127"></a><span class="co"># &quot;alkuperäinen&quot; maa talteenstr(ISSP2012esim1.dat)</span></span>
<span id="cb32-1128"><a href="liitteet.html#cb32-1128"></a></span>
<span id="cb32-1129"><a href="liitteet.html#cb32-1129"></a><span class="co"># Taulukoita (31.1.2020) ja tarkistuksia</span></span>
<span id="cb32-1130"><a href="liitteet.html#cb32-1130"></a><span class="co">#</span></span>
<span id="cb32-1131"><a href="liitteet.html#cb32-1131"></a><span class="co"># toinen maa-muuttuja, jossa Saksan ja Belgian jako</span></span>
<span id="cb32-1132"><a href="liitteet.html#cb32-1132"></a><span class="co">#  V3</span></span>
<span id="cb32-1133"><a href="liitteet.html#cb32-1133"></a><span class="co">#  5601     BE-FLA-Belgium/ Flanders</span></span>
<span id="cb32-1134"><a href="liitteet.html#cb32-1134"></a><span class="co">#  5602     BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb32-1135"><a href="liitteet.html#cb32-1135"></a><span class="co">#  5603     BE-BRU-Belgium/ Brussels</span></span>
<span id="cb32-1136"><a href="liitteet.html#cb32-1136"></a><span class="co"># 27601     DE-W-Germany-West</span></span>
<span id="cb32-1137"><a href="liitteet.html#cb32-1137"></a><span class="co"># 27602     DE-E-Germany-East</span></span>
<span id="cb32-1138"><a href="liitteet.html#cb32-1138"></a></span>
<span id="cb32-1139"><a href="liitteet.html#cb32-1139"></a><span class="co"># Tarkastuksia</span></span>
<span id="cb32-1140"><a href="liitteet.html#cb32-1140"></a></span>
<span id="cb32-1141"><a href="liitteet.html#cb32-1141"></a><span class="co"># assert_that ehkä tarpeeton - expect_equivalet testaa levelien</span></span>
<span id="cb32-1142"><a href="liitteet.html#cb32-1142"></a><span class="co"># järjestyksen ja määrän (20.2.20)</span></span>
<span id="cb32-1143"><a href="liitteet.html#cb32-1143"></a></span>
<span id="cb32-1144"><a href="liitteet.html#cb32-1144"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>sp)) <span class="op">==</span><span class="st"> </span><span class="dv">2</span>)</span>
<span id="cb32-1145"><a href="liitteet.html#cb32-1145"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>sp),</span>
<span id="cb32-1146"><a href="liitteet.html#cb32-1146"></a>                <span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>)))</span>
<span id="cb32-1147"><a href="liitteet.html#cb32-1147"></a></span>
<span id="cb32-1148"><a href="liitteet.html#cb32-1148"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb32-1149"><a href="liitteet.html#cb32-1149"></a></span>
<span id="cb32-1150"><a href="liitteet.html#cb32-1150"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa),</span>
<span id="cb32-1151"><a href="liitteet.html#cb32-1151"></a>                  <span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)))</span>
<span id="cb32-1152"><a href="liitteet.html#cb32-1152"></a></span>
<span id="cb32-1153"><a href="liitteet.html#cb32-1153"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa3)) <span class="op">==</span><span class="st"> </span><span class="dv">9</span>)</span>
<span id="cb32-1154"><a href="liitteet.html#cb32-1154"></a></span>
<span id="cb32-1155"><a href="liitteet.html#cb32-1155"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa3),</span>
<span id="cb32-1156"><a href="liitteet.html#cb32-1156"></a>                 <span class="kw">c</span>(<span class="st">&quot;bF&quot;</span>,<span class="st">&quot;bW&quot;</span>,<span class="st">&quot;bB&quot;</span>, <span class="st">&quot;BG&quot;</span>,<span class="st">&quot;dW&quot;</span>,<span class="st">&quot;dE&quot;</span>,<span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)))</span>
<span id="cb32-1157"><a href="liitteet.html#cb32-1157"></a></span>
<span id="cb32-1158"><a href="liitteet.html#cb32-1158"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>Q1b)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb32-1159"><a href="liitteet.html#cb32-1159"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>Q1b),</span>
<span id="cb32-1160"><a href="liitteet.html#cb32-1160"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb32-1161"><a href="liitteet.html#cb32-1161"></a></span>
<span id="cb32-1162"><a href="liitteet.html#cb32-1162"></a><span class="co"># testthat - paketti - pois käytöstä 16.9.20</span></span>
<span id="cb32-1163"><a href="liitteet.html#cb32-1163"></a><span class="co"># expect_ ei anna ok-ilmoitusta, ainoastaan virheilmoituksen? (11.4.20)</span></span>
<span id="cb32-1164"><a href="liitteet.html#cb32-1164"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$maa),</span></span>
<span id="cb32-1165"><a href="liitteet.html#cb32-1165"></a><span class="co">#                  c(&quot;BE&quot;, &quot;BG&quot;, &quot;DE&quot;, &quot;DK&quot;, &quot;FI&quot;, &quot;HU&quot;))</span></span>
<span id="cb32-1166"><a href="liitteet.html#cb32-1166"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$maa3),</span></span>
<span id="cb32-1167"><a href="liitteet.html#cb32-1167"></a><span class="co">#                  c(&quot;bF&quot;,&quot;bW&quot;,&quot;bB&quot;, &quot;BG&quot;,&quot;dW&quot;,&quot;dE&quot;,&quot;DK&quot;, &quot;FI&quot;, &quot;HU&quot;))</span></span>
<span id="cb32-1168"><a href="liitteet.html#cb32-1168"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$sp), c(&quot;m&quot;, &quot;f&quot;))</span></span>
<span id="cb32-1169"><a href="liitteet.html#cb32-1169"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$Q1b),</span></span>
<span id="cb32-1170"><a href="liitteet.html#cb32-1170"></a><span class="co">#                  c(&quot;S&quot;, &quot;s&quot;, &quot;?&quot;, &quot;e&quot;, &quot;E&quot;))</span></span>
<span id="cb32-1171"><a href="liitteet.html#cb32-1171"></a><span class="co">#</span></span>
<span id="cb32-1172"><a href="liitteet.html#cb32-1172"></a><span class="co"># ISSP2012esim1.dat %&gt;% tableX(maa,ika,type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1173"><a href="liitteet.html#cb32-1173"></a><span class="co">#</span></span>
<span id="cb32-1174"><a href="liitteet.html#cb32-1174"></a><span class="co"># Riviprofiilit</span></span>
<span id="cb32-1175"><a href="liitteet.html#cb32-1175"></a><span class="co">#</span></span>
<span id="cb32-1176"><a href="liitteet.html#cb32-1176"></a><span class="co"># ISSP2012esim1.dat %&gt;% tableX(maa,ika,type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1177"><a href="liitteet.html#cb32-1177"></a><span class="co"># ISSP2012esim1.dat %&gt;% tableX(maa,sp ,type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1178"><a href="liitteet.html#cb32-1178"></a><span class="co">#</span></span>
<span id="cb32-1179"><a href="liitteet.html#cb32-1179"></a><span class="co">#</span></span>
<span id="cb32-1180"><a href="liitteet.html#cb32-1180"></a><span class="co"># Kysymyksen Q1b vastaukset</span></span>
<span id="cb32-1181"><a href="liitteet.html#cb32-1181"></a><span class="co">#</span></span>
<span id="cb32-1182"><a href="liitteet.html#cb32-1182"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa,Q1b,type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1183"><a href="liitteet.html#cb32-1183"></a><span class="co">#</span></span>
<span id="cb32-1184"><a href="liitteet.html#cb32-1184"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa3,Q1b,type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1185"><a href="liitteet.html#cb32-1185"></a><span class="co">#</span></span>
<span id="cb32-1186"><a href="liitteet.html#cb32-1186"></a><span class="co"># str(ISSP2012esim1.dat) # 8143 obs. of  7 variable,</span></span>
<span id="cb32-1187"><a href="liitteet.html#cb32-1187"></a><span class="co"># sama kuin vanhassa Galku-koodissa.</span></span>
<span id="cb32-1188"><a href="liitteet.html#cb32-1188"></a><span class="co">#</span></span>
<span id="cb32-1189"><a href="liitteet.html#cb32-1189"></a><span class="co"># str(ISSP2012esim1.dat) # 8143 obs. of  7 variable,</span></span>
<span id="cb32-1190"><a href="liitteet.html#cb32-1190"></a><span class="co"># sama kuin vanhassa Galku-koodissa.</span></span>
<span id="cb32-1191"><a href="liitteet.html#cb32-1191"></a></span>
<span id="cb32-1192"><a href="liitteet.html#cb32-1192"></a>taulu2 &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa, Q1b, <span class="dt">type =</span> <span class="st">&quot;cell_perc&quot;</span>)</span>
<span id="cb32-1193"><a href="liitteet.html#cb32-1193"></a>knitr<span class="op">::</span><span class="kw">kable</span>(taulu2,<span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb32-1194"><a href="liitteet.html#cb32-1194"></a>             <span class="dt">caption =</span> <span class="st">&quot;Kysymyksen Q1b vastaukset maittain, suhteelliset frekvenssit&quot;</span>)</span>
<span id="cb32-1195"><a href="liitteet.html#cb32-1195"></a></span>
<span id="cb32-1196"><a href="liitteet.html#cb32-1196"></a>taulu3 &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa,Q1b,<span class="dt">type =</span> <span class="st">&quot;row_perc&quot;</span>)</span>
<span id="cb32-1197"><a href="liitteet.html#cb32-1197"></a></span>
<span id="cb32-1198"><a href="liitteet.html#cb32-1198"></a>knitr<span class="op">::</span><span class="kw">kable</span>(taulu3,<span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb32-1199"><a href="liitteet.html#cb32-1199"></a>             <span class="dt">caption =</span> <span class="st">&quot;Kysymyksen Q1b vastaukset, riviprosentit&quot;</span>)</span>
<span id="cb32-1200"><a href="liitteet.html#cb32-1200"></a></span>
<span id="cb32-1201"><a href="liitteet.html#cb32-1201"></a>taulu4 &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa,Q1b,<span class="dt">type =</span> <span class="st">&quot;col_perc&quot;</span>)</span>
<span id="cb32-1202"><a href="liitteet.html#cb32-1202"></a></span>
<span id="cb32-1203"><a href="liitteet.html#cb32-1203"></a>knitr<span class="op">::</span><span class="kw">kable</span>(taulu4,<span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb32-1204"><a href="liitteet.html#cb32-1204"></a>             <span class="dt">caption =</span> <span class="st">&quot;Kysymyksen Q1b vastaukset, sarakeprosentit&quot;</span>)</span>
<span id="cb32-1205"><a href="liitteet.html#cb32-1205"></a></span>
<span id="cb32-1206"><a href="liitteet.html#cb32-1206"></a><span class="co"># CA tässä, jotta saadaan rivi- ja sarakeprofiilikuvat</span></span>
<span id="cb32-1207"><a href="liitteet.html#cb32-1207"></a><span class="co"># Lasketaan samalla CA-ratkaisu riviprofiilitaulkolle (maille samat painot)</span></span>
<span id="cb32-1208"><a href="liitteet.html#cb32-1208"></a></span>
<span id="cb32-1209"><a href="liitteet.html#cb32-1209"></a>simpleCA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maa <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1.dat)</span>
<span id="cb32-1210"><a href="liitteet.html#cb32-1210"></a></span>
<span id="cb32-1211"><a href="liitteet.html#cb32-1211"></a><span class="co"># Maiden järjestys kääntää kuvan (1.2.20) - esimerkki on</span></span>
<span id="cb32-1212"><a href="liitteet.html#cb32-1212"></a><span class="co"># vähän kuriositeetti. Kartta voi tietysti &quot;flipata&quot; koordintaattien suhteen ainakin</span></span>
<span id="cb32-1213"><a href="liitteet.html#cb32-1213"></a><span class="co"># neljällä tavalla (? 180 astetta molempien akseleiden ympäri molempiin suuntiin?)</span></span>
<span id="cb32-1214"><a href="liitteet.html#cb32-1214"></a><span class="co"># (18.2.20). Tämän maa2-muuttujaa käyttävän kuvan voi jättää pois (8.4.20)</span></span>
<span id="cb32-1215"><a href="liitteet.html#cb32-1215"></a></span>
<span id="cb32-1216"><a href="liitteet.html#cb32-1216"></a><span class="co"># simpleCA2 &lt;- ca(~maa2 + Q1b,ISSP2012esim1.dat)</span></span>
<span id="cb32-1217"><a href="liitteet.html#cb32-1217"></a></span>
<span id="cb32-1218"><a href="liitteet.html#cb32-1218"></a><span class="co"># Oikeastaan maiden vertailussa pitäisi niiden massat skaalata yhtä suuriksi, tässä</span></span>
<span id="cb32-1219"><a href="liitteet.html#cb32-1219"></a><span class="co"># pikainen kokeilu (20.2.20)</span></span>
<span id="cb32-1220"><a href="liitteet.html#cb32-1220"></a><span class="co"># Riviprosentit taulukoksi, nimet sarakkeille ja riveille (ei kovin robustia...)</span></span>
<span id="cb32-1221"><a href="liitteet.html#cb32-1221"></a></span>
<span id="cb32-1222"><a href="liitteet.html#cb32-1222"></a></span>
<span id="cb32-1223"><a href="liitteet.html#cb32-1223"></a>johdesim1_rowproc.tab &lt;-<span class="st"> </span>simpleCA1<span class="op">$</span>N <span class="op">/</span><span class="st"> </span><span class="kw">rowSums</span>(simpleCA1<span class="op">$</span>N)</span>
<span id="cb32-1224"><a href="liitteet.html#cb32-1224"></a><span class="kw">colnames</span>(johdesim1_rowproc.tab) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S&quot;</span> ,<span class="st">&quot;s&quot;</span> ,<span class="st">&quot;?&quot;</span>,<span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)</span>
<span id="cb32-1225"><a href="liitteet.html#cb32-1225"></a><span class="kw">rownames</span>(johdesim1_rowproc.tab) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)</span>
<span id="cb32-1226"><a href="liitteet.html#cb32-1226"></a></span>
<span id="cb32-1227"><a href="liitteet.html#cb32-1227"></a><span class="co"># Miten tibblenä? Ei toimi, ei maa-muuttujaa ollenkaan</span></span>
<span id="cb32-1228"><a href="liitteet.html#cb32-1228"></a><span class="co"># johdesim1_rowproc.tbl &lt;- as_tibble(johdesim1_rowproc.tab)</span></span>
<span id="cb32-1229"><a href="liitteet.html#cb32-1229"></a><span class="co"># str(johdesim1_rowproc.tbl)</span></span>
<span id="cb32-1230"><a href="liitteet.html#cb32-1230"></a></span>
<span id="cb32-1231"><a href="liitteet.html#cb32-1231"></a><span class="co"># TARKISTUKSIA (20.2.20)</span></span>
<span id="cb32-1232"><a href="liitteet.html#cb32-1232"></a><span class="co"># johdesim1_rowproc.tab</span></span>
<span id="cb32-1233"><a href="liitteet.html#cb32-1233"></a><span class="co"># rowSums(johdesim1_rowproc.tab)</span></span>
<span id="cb32-1234"><a href="liitteet.html#cb32-1234"></a><span class="co"># str(johdesim1_rowproc.tab)</span></span>
<span id="cb32-1235"><a href="liitteet.html#cb32-1235"></a></span>
<span id="cb32-1236"><a href="liitteet.html#cb32-1236"></a></span>
<span id="cb32-1237"><a href="liitteet.html#cb32-1237"></a>simpleCA3 &lt;-<span class="st"> </span><span class="kw">ca</span>(johdesim1_rowproc.tab)</span>
<span id="cb32-1238"><a href="liitteet.html#cb32-1238"></a></span>
<span id="cb32-1239"><a href="liitteet.html#cb32-1239"></a></span>
<span id="cb32-1240"><a href="liitteet.html#cb32-1240"></a><span class="co"># Kartta piirretään koodilohkossa simpleCAmap1, r. 773 noin.</span></span>
<span id="cb32-1241"><a href="liitteet.html#cb32-1241"></a></span>
<span id="cb32-1242"><a href="liitteet.html#cb32-1242"></a><span class="co"># Riviprosentit tarkistusta varten</span></span>
<span id="cb32-1243"><a href="liitteet.html#cb32-1243"></a><span class="co">#        S  s   ?   e   E</span></span>
<span id="cb32-1244"><a href="liitteet.html#cb32-1244"></a><span class="co">#BE 9.49    22.40   21.76   27.42   18.93</span></span>
<span id="cb32-1245"><a href="liitteet.html#cb32-1245"></a><span class="co">#BG 12.81   42.89   22.26   20.63   1.41</span></span>
<span id="cb32-1246"><a href="liitteet.html#cb32-1246"></a><span class="co">#DE 9.63    21.88   11.55   31.39   25.55</span></span>
<span id="cb32-1247"><a href="liitteet.html#cb32-1247"></a><span class="co">#DK 5.04    17.15   10.95   16.71   50.14</span></span>
<span id="cb32-1248"><a href="liitteet.html#cb32-1248"></a><span class="co">#FI 4.23    16.94   13.42   38.11   27.30</span></span>
<span id="cb32-1249"><a href="liitteet.html#cb32-1249"></a><span class="co">#HU 21.97   28.89   22.57   19.06   7.52</span></span>
<span id="cb32-1250"><a href="liitteet.html#cb32-1250"></a><span class="co">#</span></span>
<span id="cb32-1251"><a href="liitteet.html#cb32-1251"></a><span class="co"># Ja datan saa leikepöydän kautta, jos on tarve pikatarkistuksiin</span></span>
<span id="cb32-1252"><a href="liitteet.html#cb32-1252"></a><span class="co"># read &lt;- read.table(&quot;clipboard&quot;)</span></span>
<span id="cb32-1253"><a href="liitteet.html#cb32-1253"></a></span>
<span id="cb32-1254"><a href="liitteet.html#cb32-1254"></a><span class="co">#mutkikas kuvan piirto - sarakeprofiilit vertailussa</span></span>
<span id="cb32-1255"><a href="liitteet.html#cb32-1255"></a><span class="co">#ggplot vaatii df-rakenteen ja &#39;long data&#39; - muotoon</span></span>
<span id="cb32-1256"><a href="liitteet.html#cb32-1256"></a><span class="co">##https://stackoverflow.com/questions/9563368/create-stacked-barplot</span></span>
<span id="cb32-1257"><a href="liitteet.html#cb32-1257"></a><span class="co"># -where-each-stack-is-scaled-to-sum-to</span></span>
<span id="cb32-1258"><a href="liitteet.html#cb32-1258"></a><span class="co"># Pitkä https-linkki kahdella rivillä</span></span>
<span id="cb32-1259"><a href="liitteet.html#cb32-1259"></a><span class="co">#</span></span>
<span id="cb32-1260"><a href="liitteet.html#cb32-1260"></a><span class="co"># käytetään ca - tuloksia</span></span>
<span id="cb32-1261"><a href="liitteet.html#cb32-1261"></a>apu1 &lt;-<span class="st"> </span>(simpleCA1<span class="op">$</span>N)</span>
<span id="cb32-1262"><a href="liitteet.html#cb32-1262"></a><span class="kw">colnames</span>(apu1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)</span>
<span id="cb32-1263"><a href="liitteet.html#cb32-1263"></a><span class="kw">rownames</span>(apu1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)</span>
<span id="cb32-1264"><a href="liitteet.html#cb32-1264"></a>apu1_df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(apu1)</span>
<span id="cb32-1265"><a href="liitteet.html#cb32-1265"></a><span class="co">#lasketan rivien reunajakauma</span></span>
<span id="cb32-1266"><a href="liitteet.html#cb32-1266"></a>apu1_df<span class="op">$</span>ka_sarake &lt;-<span class="st"> </span><span class="kw">rowSums</span>(apu1_df)</span>
<span id="cb32-1267"><a href="liitteet.html#cb32-1267"></a><span class="co">#muokataan &#39;long data&#39; - muotoon</span></span>
<span id="cb32-1268"><a href="liitteet.html#cb32-1268"></a>apu1b_df &lt;-<span class="st"> </span><span class="kw">melt</span>(<span class="kw">cbind</span>(apu1_df, <span class="dt">ind =</span> <span class="kw">rownames</span>(apu1_df)), <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&#39;ind&#39;</span>))</span>
<span id="cb32-1269"><a href="liitteet.html#cb32-1269"></a></span>
<span id="cb32-1270"><a href="liitteet.html#cb32-1270"></a>p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(apu1b_df, <span class="kw">aes</span>(<span class="dt">x =</span> variable, <span class="dt">y =</span> value, <span class="dt">fill =</span> ind)) <span class="op">+</span></span>
<span id="cb32-1271"><a href="liitteet.html#cb32-1271"></a><span class="st">         </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb32-1272"><a href="liitteet.html#cb32-1272"></a><span class="st">         </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot; &quot;</span>,<span class="dt">labels =</span> <span class="kw">percent_format</span>())</span>
<span id="cb32-1273"><a href="liitteet.html#cb32-1273"></a>p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">&quot;maa&quot;</span>)</span>
<span id="cb32-1274"><a href="liitteet.html#cb32-1274"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">scale_x_discrete</span>(<span class="dt">name =</span> <span class="st">&quot;Q1b - vastauskategoriat&quot;</span>)</span>
<span id="cb32-1275"><a href="liitteet.html#cb32-1275"></a><span class="co"># apu1_df</span></span>
<span id="cb32-1276"><a href="liitteet.html#cb32-1276"></a><span class="co"># apu1b_df</span></span>
<span id="cb32-1277"><a href="liitteet.html#cb32-1277"></a></span>
<span id="cb32-1278"><a href="liitteet.html#cb32-1278"></a></span>
<span id="cb32-1279"><a href="liitteet.html#cb32-1279"></a><span class="co"># riviprofiilit ja keskiarvorivi -  18.9.2018</span></span>
<span id="cb32-1280"><a href="liitteet.html#cb32-1280"></a>apu2_df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(apu1)</span>
<span id="cb32-1281"><a href="liitteet.html#cb32-1281"></a>apu2_df &lt;-<span class="st"> </span><span class="kw">rbind</span>(apu2_df, <span class="dt">ka_rivi =</span> <span class="kw">colSums</span>(apu2_df))</span>
<span id="cb32-1282"><a href="liitteet.html#cb32-1282"></a></span>
<span id="cb32-1283"><a href="liitteet.html#cb32-1283"></a><span class="co">#apu2_df</span></span>
<span id="cb32-1284"><a href="liitteet.html#cb32-1284"></a><span class="co">#str(apu2_df)</span></span>
<span id="cb32-1285"><a href="liitteet.html#cb32-1285"></a><span class="co">## typeof(apu2_df) # what is it?</span></span>
<span id="cb32-1286"><a href="liitteet.html#cb32-1286"></a><span class="co">## class(apu2_df) # what is it? (sorry)</span></span>
<span id="cb32-1287"><a href="liitteet.html#cb32-1287"></a><span class="co">## storage.mode(apu2_df) # what is it? (very sorry)</span></span>
<span id="cb32-1288"><a href="liitteet.html#cb32-1288"></a><span class="co">## length(apu2_df) # how long is it? What about two dimensional</span></span>
<span id="cb32-1289"><a href="liitteet.html#cb32-1289"></a><span class="co">## objects?</span></span>
<span id="cb32-1290"><a href="liitteet.html#cb32-1290"></a><span class="co"># attributes(apu2_df)</span></span>
<span id="cb32-1291"><a href="liitteet.html#cb32-1291"></a></span>
<span id="cb32-1292"><a href="liitteet.html#cb32-1292"></a><span class="co"># temp1 &lt;- cbind(apu2_df, ind = rownames(apu2_df))</span></span>
<span id="cb32-1293"><a href="liitteet.html#cb32-1293"></a><span class="co"># temp1</span></span>
<span id="cb32-1294"><a href="liitteet.html#cb32-1294"></a><span class="co">##muokataan &#39;long data&#39; - muotoon</span></span>
<span id="cb32-1295"><a href="liitteet.html#cb32-1295"></a>apu2b_df &lt;-<span class="st"> </span><span class="kw">melt</span>(<span class="kw">cbind</span>(apu2_df, <span class="dt">ind =</span> <span class="kw">rownames</span>(apu2_df)), <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&#39;ind&#39;</span>))</span>
<span id="cb32-1296"><a href="liitteet.html#cb32-1296"></a><span class="co"># str(apu2b_df)</span></span>
<span id="cb32-1297"><a href="liitteet.html#cb32-1297"></a><span class="co"># glimpse(apu2b_df)</span></span>
<span id="cb32-1298"><a href="liitteet.html#cb32-1298"></a></span>
<span id="cb32-1299"><a href="liitteet.html#cb32-1299"></a><span class="co">#</span></span>
<span id="cb32-1300"><a href="liitteet.html#cb32-1300"></a><span class="co">#ggplot(apu2b_df, aes(x = value, y = ind, fill = variable)) +</span></span>
<span id="cb32-1301"><a href="liitteet.html#cb32-1301"></a><span class="co">#       geom_bar(position = &quot;fill&quot;, stat =&quot;identity&quot;) +</span></span>
<span id="cb32-1302"><a href="liitteet.html#cb32-1302"></a><span class="co">#       #coord_flip() +</span></span>
<span id="cb32-1303"><a href="liitteet.html#cb32-1303"></a><span class="co">#        scale_x_continuous(labels = percent_format())</span></span>
<span id="cb32-1304"><a href="liitteet.html#cb32-1304"></a></span>
<span id="cb32-1305"><a href="liitteet.html#cb32-1305"></a><span class="co">#versio2 toimii (18.9.2018)</span></span>
<span id="cb32-1306"><a href="liitteet.html#cb32-1306"></a></span>
<span id="cb32-1307"><a href="liitteet.html#cb32-1307"></a>p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(apu2b_df, <span class="kw">aes</span>(<span class="dt">x =</span> ind, <span class="dt">y =</span> value, <span class="dt">fill =</span> variable)) <span class="op">+</span></span>
<span id="cb32-1308"><a href="liitteet.html#cb32-1308"></a><span class="st">       </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb32-1309"><a href="liitteet.html#cb32-1309"></a><span class="st">       </span><span class="kw">coord_flip</span>() <span class="op">+</span></span>
<span id="cb32-1310"><a href="liitteet.html#cb32-1310"></a><span class="st">        </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot; &quot;</span>,<span class="dt">labels =</span> <span class="kw">percent_format</span>())</span>
<span id="cb32-1311"><a href="liitteet.html#cb32-1311"></a>p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">&quot;Q1b&quot;</span>)</span>
<span id="cb32-1312"><a href="liitteet.html#cb32-1312"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">scale_x_discrete</span>(<span class="dt">name =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb32-1313"><a href="liitteet.html#cb32-1313"></a></span>
<span id="cb32-1314"><a href="liitteet.html#cb32-1314"></a></span>
<span id="cb32-1315"><a href="liitteet.html#cb32-1315"></a></span>
<span id="cb32-1316"><a href="liitteet.html#cb32-1316"></a><span class="co"># simpleCA1 luotu aikaisemmin profiilikuvia varten koodilohkossa EkaCA</span></span>
<span id="cb32-1317"><a href="liitteet.html#cb32-1317"></a><span class="co"># HUOM! xlab ja ylab, prosenttiosuudet ensin katsottu ja sitten kirjoitettu</span></span>
<span id="cb32-1318"><a href="liitteet.html#cb32-1318"></a><span class="co"># tässä. Vertaa scree-plot - tietoon!</span></span>
<span id="cb32-1319"><a href="liitteet.html#cb32-1319"></a></span>
<span id="cb32-1320"><a href="liitteet.html#cb32-1320"></a></span>
<span id="cb32-1321"><a href="liitteet.html#cb32-1321"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="dv">1</span>)</span>
<span id="cb32-1322"><a href="liitteet.html#cb32-1322"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;symmetric&quot;</span>, <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb32-1323"><a href="liitteet.html#cb32-1323"></a>     <span class="dt">xlab =</span> <span class="st">&quot;Dimensio 1: moderni/liberaali - perinteinen/konservatiivinen (76%)&quot;</span>,</span>
<span id="cb32-1324"><a href="liitteet.html#cb32-1324"></a>     <span class="dt">ylab =</span> <span class="st">&quot;Dimensio 2: maltillinen/epävarma - radikaali/jyrkkä/varma (15.1%)&quot;</span>,</span>
<span id="cb32-1325"><a href="liitteet.html#cb32-1325"></a>     <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta 1&quot;</span>,</span>
<span id="cb32-1326"><a href="liitteet.html#cb32-1326"></a>     <span class="dt">sub =</span> <span class="st">&quot;Maiden massat eri suuruisia (otoskoko), pisteiden koko suhteessa massaan&quot;</span>)</span>
<span id="cb32-1327"><a href="liitteet.html#cb32-1327"></a></span>
<span id="cb32-1328"><a href="liitteet.html#cb32-1328"></a><span class="co"># asymmetrinen kartta - rivit pc ja sarakkeet sc</span></span>
<span id="cb32-1329"><a href="liitteet.html#cb32-1329"></a><span class="co"># sarakkeet vektorikuvina</span></span>
<span id="cb32-1330"><a href="liitteet.html#cb32-1330"></a></span>
<span id="cb32-1331"><a href="liitteet.html#cb32-1331"></a><span class="co"># par(cex = 0.7)</span></span>
<span id="cb32-1332"><a href="liitteet.html#cb32-1332"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowprincipal&quot;</span>, </span>
<span id="cb32-1333"><a href="liitteet.html#cb32-1333"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>,<span class="ot">TRUE</span>), </span>
<span id="cb32-1334"><a href="liitteet.html#cb32-1334"></a>     <span class="dt">main =</span> <span class="st">&quot;asymmetrinen kartta 1&quot;</span></span>
<span id="cb32-1335"><a href="liitteet.html#cb32-1335"></a>    )</span>
<span id="cb32-1336"><a href="liitteet.html#cb32-1336"></a></span>
<span id="cb32-1337"><a href="liitteet.html#cb32-1337"></a></span>
<span id="cb32-1338"><a href="liitteet.html#cb32-1338"></a><span class="co"># Piirretään Suomen riviprofiilista janat sarakepisteisiin - barysentinen keskiarvo</span></span>
<span id="cb32-1339"><a href="liitteet.html#cb32-1339"></a><span class="co"># Rivipisteet pääkoordinaatteina (principal coordinates)</span></span>
<span id="cb32-1340"><a href="liitteet.html#cb32-1340"></a></span>
<span id="cb32-1341"><a href="liitteet.html#cb32-1341"></a>simpleCA1.rpc &lt;-<span class="st"> </span>simpleCA1<span class="op">$</span>rowcoord <span class="op">%*%</span><span class="st"> </span><span class="kw">diag</span>(simpleCA1<span class="op">$</span>sv)</span>
<span id="cb32-1342"><a href="liitteet.html#cb32-1342"></a></span>
<span id="cb32-1343"><a href="liitteet.html#cb32-1343"></a><span class="co"># X11()</span></span>
<span id="cb32-1344"><a href="liitteet.html#cb32-1344"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="dv">1</span>)</span>
<span id="cb32-1345"><a href="liitteet.html#cb32-1345"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowprincipal&quot;</span>, </span>
<span id="cb32-1346"><a href="liitteet.html#cb32-1346"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>,<span class="ot">FALSE</span>),</span>
<span id="cb32-1347"><a href="liitteet.html#cb32-1347"></a>     <span class="co"># main = &quot;barysentrinen periaate - asymmetrinen kartta 2&quot;,</span></span>
<span id="cb32-1348"><a href="liitteet.html#cb32-1348"></a>     <span class="dt">sub =</span> <span class="st">&quot;Suomen profiili sarakkeiden barysentrisenä keskiarvona&quot;</span>)</span>
<span id="cb32-1349"><a href="liitteet.html#cb32-1349"></a>     <span class="kw">segments</span>(simpleCA1.rpc[<span class="dv">5</span>,<span class="dv">1</span>],simpleCA1.rpc[<span class="dv">5</span>,<span class="dv">2</span>],simpleCA1<span class="op">$</span>colcoord[, <span class="dv">1</span>],</span>
<span id="cb32-1350"><a href="liitteet.html#cb32-1350"></a>         simpleCA1<span class="op">$</span>colcoord[, <span class="dv">2</span>], <span class="dt">col =</span> <span class="st">&quot;pink&quot;</span>)</span>
<span id="cb32-1351"><a href="liitteet.html#cb32-1351"></a></span>
<span id="cb32-1352"><a href="liitteet.html#cb32-1352"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/simpleCAasymmTulk2.png&#39;</span>)</span>
<span id="cb32-1353"><a href="liitteet.html#cb32-1353"></a></span>
<span id="cb32-1354"><a href="liitteet.html#cb32-1354"></a><span class="co">#par(cex = 0.6)</span></span>
<span id="cb32-1355"><a href="liitteet.html#cb32-1355"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb32-1356"><a href="liitteet.html#cb32-1356"></a>     <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;absolute&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb32-1357"><a href="liitteet.html#cb32-1357"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb32-1358"><a href="liitteet.html#cb32-1358"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb32-1359"><a href="liitteet.html#cb32-1359"></a>     <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 1&quot;</span>,</span>
<span id="cb32-1360"><a href="liitteet.html#cb32-1360"></a>     <span class="dt">sub =</span> <span class="st">&quot;sarakevektorin ja rivipisteiden värin tummuus = absoluuttinen kontribuutio&quot;</span>)</span>
<span id="cb32-1361"><a href="liitteet.html#cb32-1361"></a></span>
<span id="cb32-1362"><a href="liitteet.html#cb32-1362"></a></span>
<span id="cb32-1363"><a href="liitteet.html#cb32-1363"></a><span class="co">#par(cex = 0.7)</span></span>
<span id="cb32-1364"><a href="liitteet.html#cb32-1364"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb32-1365"><a href="liitteet.html#cb32-1365"></a>     <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;relative&quot;</span>),</span>
<span id="cb32-1366"><a href="liitteet.html#cb32-1366"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb32-1367"><a href="liitteet.html#cb32-1367"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb32-1368"><a href="liitteet.html#cb32-1368"></a>     <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 2&quot;</span>,</span>
<span id="cb32-1369"><a href="liitteet.html#cb32-1369"></a>     <span class="dt">sub =</span> <span class="st">&quot;sarakevektorin ja pisteen värin tummuus = suhteellinen kontribuutio&quot;</span>)</span>
<span id="cb32-1370"><a href="liitteet.html#cb32-1370"></a></span>
<span id="cb32-1371"><a href="liitteet.html#cb32-1371"></a></span>
<span id="cb32-1372"><a href="liitteet.html#cb32-1372"></a><span class="co"># Sama kartta - maiden massat vakiotu - simpleCA3 luotu koodilohkossa EkaCA</span></span>
<span id="cb32-1373"><a href="liitteet.html#cb32-1373"></a><span class="co"># CA:n lähtötietona riviprofiilit</span></span>
<span id="cb32-1374"><a href="liitteet.html#cb32-1374"></a></span>
<span id="cb32-1375"><a href="liitteet.html#cb32-1375"></a><span class="co">#par(cex = 0.8)</span></span>
<span id="cb32-1376"><a href="liitteet.html#cb32-1376"></a><span class="kw">plot</span>(simpleCA3, <span class="dt">map =</span> <span class="st">&quot;symmetric&quot;</span>, <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb32-1377"><a href="liitteet.html#cb32-1377"></a><span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta 2 &quot;</span>,</span>
<span id="cb32-1378"><a href="liitteet.html#cb32-1378"></a><span class="dt">sub =</span> <span class="st">&quot;Maidet massat vakioitu (riviprofiilidata)&quot;</span>)</span>
<span id="cb32-1379"><a href="liitteet.html#cb32-1379"></a></span>
<span id="cb32-1380"><a href="liitteet.html#cb32-1380"></a></span>
<span id="cb32-1381"><a href="liitteet.html#cb32-1381"></a><span class="kw">plot</span>(simpleCA3, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb32-1382"><a href="liitteet.html#cb32-1382"></a>     <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;absolute&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb32-1383"><a href="liitteet.html#cb32-1383"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb32-1384"><a href="liitteet.html#cb32-1384"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb32-1385"><a href="liitteet.html#cb32-1385"></a>     <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 3&quot;</span>,</span>
<span id="cb32-1386"><a href="liitteet.html#cb32-1386"></a>     <span class="dt">sub =</span> <span class="st">&quot;sarakevektorin ja rivipisteiden värin tummuus = absoluuttinen kontribuutio, riviprofiilidata&quot;</span>)</span>
<span id="cb32-1387"><a href="liitteet.html#cb32-1387"></a></span>
<span id="cb32-1388"><a href="liitteet.html#cb32-1388"></a><span class="co"># riviprofiilitaulukko aiheuttaa virheen PDF-tulostuksessa, JH_capaper.Rmd</span></span>
<span id="cb32-1389"><a href="liitteet.html#cb32-1389"></a><span class="co"># tiedoston voi kuitenkin renderöidä knit-napilla RStudiossa pdf-tiedostoksi.</span></span>
<span id="cb32-1390"><a href="liitteet.html#cb32-1390"></a></span>
<span id="cb32-1391"><a href="liitteet.html#cb32-1391"></a><span class="co"># Kts. edellinen koodilohko - testailua pdf-ongelman ratkaisemiseksi</span></span>
<span id="cb32-1392"><a href="liitteet.html#cb32-1392"></a><span class="co"># tallennetaan data tiedostoon, koodilohko BeDeAluedat1 passiviseksi</span></span>
<span id="cb32-1393"><a href="liitteet.html#cb32-1393"></a><span class="co"># suppoint1_tab1 &lt;- read_rds(&quot;suppoint1tab1.rds&quot;)</span></span>
<span id="cb32-1394"><a href="liitteet.html#cb32-1394"></a><span class="co"># suppoint1_tab1 # tarkistus ok</span></span>
<span id="cb32-1395"><a href="liitteet.html#cb32-1395"></a></span>
<span id="cb32-1396"><a href="liitteet.html#cb32-1396"></a>BeDealueTable &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa3, Q1b, <span class="dt">type =</span> <span class="st">&quot;row_perc&quot;</span>)</span>
<span id="cb32-1397"><a href="liitteet.html#cb32-1397"></a></span>
<span id="cb32-1398"><a href="liitteet.html#cb32-1398"></a>knitr<span class="op">::</span><span class="kw">kable</span>(BeDealueTable , <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb32-1399"><a href="liitteet.html#cb32-1399"></a>           <span class="dt">caption =</span> <span class="st">&quot;Q1b vastaukset, Saksan ja Belgian alueet&quot;</span>)</span>
<span id="cb32-1400"><a href="liitteet.html#cb32-1400"></a></span>
<span id="cb32-1401"><a href="liitteet.html#cb32-1401"></a><span class="co"># (26.10.20) TÄSSÄ EHKÄ VIRHE - PDF-renderöinti antaa virheilmoituksen?</span></span>
<span id="cb32-1402"><a href="liitteet.html#cb32-1402"></a><span class="co"># Ei todennäköistä, sillä toimii html-tulostuksessa. Kokeiltiin tämän lohkon</span></span>
<span id="cb32-1403"><a href="liitteet.html#cb32-1403"></a><span class="co"># poistamista, ei auttanut ratkaisevasti.</span></span>
<span id="cb32-1404"><a href="liitteet.html#cb32-1404"></a></span>
<span id="cb32-1405"><a href="liitteet.html#cb32-1405"></a><span class="co"># Belgian ja Saksan aluejako maa3-muuttujassa</span></span>
<span id="cb32-1406"><a href="liitteet.html#cb32-1406"></a><span class="co"># str(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb32-1407"><a href="liitteet.html#cb32-1407"></a><span class="co"># attributes(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb32-1408"><a href="liitteet.html#cb32-1408"></a></span>
<span id="cb32-1409"><a href="liitteet.html#cb32-1409"></a>suppoint1_df1 &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012esim1.dat, maa3,Q1b)</span>
<span id="cb32-1410"><a href="liitteet.html#cb32-1410"></a></span>
<span id="cb32-1411"><a href="liitteet.html#cb32-1411"></a><span class="co"># Taulukoksi jotta saadaan lisättyä Saksan ja Belgian maa-profiilit täydentäviksi</span></span>
<span id="cb32-1412"><a href="liitteet.html#cb32-1412"></a><span class="co"># pisteiksi.</span></span>
<span id="cb32-1413"><a href="liitteet.html#cb32-1413"></a></span>
<span id="cb32-1414"><a href="liitteet.html#cb32-1414"></a>suppoint1_tab1 &lt;-<span class="st"> </span><span class="kw">table</span>(suppoint1_df1<span class="op">$</span>maa3, suppoint1_df1<span class="op">$</span>Q1b)</span>
<span id="cb32-1415"><a href="liitteet.html#cb32-1415"></a></span>
<span id="cb32-1416"><a href="liitteet.html#cb32-1416"></a><span class="co"># tarkistus 1</span></span>
<span id="cb32-1417"><a href="liitteet.html#cb32-1417"></a><span class="co"># suppoint1_tab1</span></span>
<span id="cb32-1418"><a href="liitteet.html#cb32-1418"></a></span>
<span id="cb32-1419"><a href="liitteet.html#cb32-1419"></a><span class="co"># Maaprofiilit lisäpisteiksi</span></span>
<span id="cb32-1420"><a href="liitteet.html#cb32-1420"></a>suppoint2_df &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012esim1.dat, (maa <span class="op">==</span><span class="st"> &quot;BE&quot;</span> <span class="op">|</span><span class="st"> </span>maa <span class="op">==</span><span class="st"> &quot;DE&quot;</span>))</span>
<span id="cb32-1421"><a href="liitteet.html#cb32-1421"></a>suppoint2_df &lt;-<span class="st"> </span><span class="kw">select</span>(suppoint2_df, maa, Q1b)</span>
<span id="cb32-1422"><a href="liitteet.html#cb32-1422"></a><span class="co"># Poistetaan maa-faktroin tyhjät luokat (14.11.2020)</span></span>
<span id="cb32-1423"><a href="liitteet.html#cb32-1423"></a>suppoint2_df &lt;-<span class="st"> </span>suppoint2_df <span class="op">%&gt;%</span></span>
<span id="cb32-1424"><a href="liitteet.html#cb32-1424"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">maa =</span> <span class="kw">fct_drop</span>(maa)</span>
<span id="cb32-1425"><a href="liitteet.html#cb32-1425"></a>    )</span>
<span id="cb32-1426"><a href="liitteet.html#cb32-1426"></a></span>
<span id="cb32-1427"><a href="liitteet.html#cb32-1427"></a></span>
<span id="cb32-1428"><a href="liitteet.html#cb32-1428"></a><span class="co">#glimpse(suppoint2_df)</span></span>
<span id="cb32-1429"><a href="liitteet.html#cb32-1429"></a>suppoint2_tab1 &lt;-<span class="st"> </span><span class="kw">table</span>(suppoint2_df<span class="op">$</span>maa, suppoint2_df<span class="op">$</span>Q1b)</span>
<span id="cb32-1430"><a href="liitteet.html#cb32-1430"></a></span>
<span id="cb32-1431"><a href="liitteet.html#cb32-1431"></a><span class="co"># tarkistus 1</span></span>
<span id="cb32-1432"><a href="liitteet.html#cb32-1432"></a><span class="co"># suppoint2_tab1</span></span>
<span id="cb32-1433"><a href="liitteet.html#cb32-1433"></a></span>
<span id="cb32-1434"><a href="liitteet.html#cb32-1434"></a><span class="co"># Huom! tämä komento vain kerran - tai koko Rmd-tiedosto uudestaan (17.10.20)</span></span>
<span id="cb32-1435"><a href="liitteet.html#cb32-1435"></a><span class="co"># Korvattu maa-faktorin tyhjien luokkien poisolla (14.11.2020)</span></span>
<span id="cb32-1436"><a href="liitteet.html#cb32-1436"></a><span class="co"># suppoint2_tab1 &lt;- suppoint2_tab1[-c(2,4:6) ,]</span></span>
<span id="cb32-1437"><a href="liitteet.html#cb32-1437"></a><span class="co">#suppoint2_tab1 # tarkistus 2</span></span>
<span id="cb32-1438"><a href="liitteet.html#cb32-1438"></a></span>
<span id="cb32-1439"><a href="liitteet.html#cb32-1439"></a><span class="co"># lisätään rivit maa3-muuttujan taulukkoon</span></span>
<span id="cb32-1440"><a href="liitteet.html#cb32-1440"></a></span>
<span id="cb32-1441"><a href="liitteet.html#cb32-1441"></a>suppoint1_tab1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(suppoint1_tab1, suppoint2_tab1)</span>
<span id="cb32-1442"><a href="liitteet.html#cb32-1442"></a></span>
<span id="cb32-1443"><a href="liitteet.html#cb32-1443"></a><span class="co"># suppoint1_tab1 # tarkistus 3</span></span>
<span id="cb32-1444"><a href="liitteet.html#cb32-1444"></a><span class="co"># Testailua pdf-ongelman ratkaisemiseksi - tallennetaa taulukko tiedostoksi</span></span>
<span id="cb32-1445"><a href="liitteet.html#cb32-1445"></a><span class="co"># Ei ratkaisevasti auttanut (26.10.2020)</span></span>
<span id="cb32-1446"><a href="liitteet.html#cb32-1446"></a><span class="co"># write_rds(suppoint1_tab1,&quot;suppoint1tab1.rds&quot;)</span></span>
<span id="cb32-1447"><a href="liitteet.html#cb32-1447"></a></span>
<span id="cb32-1448"><a href="liitteet.html#cb32-1448"></a></span>
<span id="cb32-1449"><a href="liitteet.html#cb32-1449"></a><span class="co"># suppoint1_tab2 &lt;- read_rds(&quot;suppoint1tab1.rds&quot;) - testaus joka siirsi virheen 07-rmd-tiedostoon. Sama virheilmoitustyyppi.</span></span>
<span id="cb32-1450"><a href="liitteet.html#cb32-1450"></a></span>
<span id="cb32-1451"><a href="liitteet.html#cb32-1451"></a>suppointCA2 &lt;-<span class="st"> </span><span class="kw">ca</span>(suppoint1_tab1[,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], <span class="dt">suprow =</span> <span class="dv">10</span><span class="op">:</span><span class="dv">11</span>)</span>
<span id="cb32-1452"><a href="liitteet.html#cb32-1452"></a></span>
<span id="cb32-1453"><a href="liitteet.html#cb32-1453"></a><span class="co"># par(cex = 0.6)</span></span>
<span id="cb32-1454"><a href="liitteet.html#cb32-1454"></a><span class="kw">plot</span>(suppointCA2, <span class="dt">main =</span> <span class="st">&quot;Symmetrinen kartta 1 &quot;</span>,</span>
<span id="cb32-1455"><a href="liitteet.html#cb32-1455"></a>     <span class="co"># mass = c(TRUE, TRUE),</span></span>
<span id="cb32-1456"><a href="liitteet.html#cb32-1456"></a>     <span class="co"># contrib = c(TRUE, TRUE),</span></span>
<span id="cb32-1457"><a href="liitteet.html#cb32-1457"></a>     <span class="dt">sub =</span> <span class="st">&quot;Täydentävät pisteet DE ja BE&quot;</span> )</span>
<span id="cb32-1458"><a href="liitteet.html#cb32-1458"></a></span>
<span id="cb32-1459"><a href="liitteet.html#cb32-1459"></a></span>
<span id="cb32-1460"><a href="liitteet.html#cb32-1460"></a></span>
<span id="cb32-1461"><a href="liitteet.html#cb32-1461"></a><span class="kw">plot</span>(suppointCA2, <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 1&quot;</span>,</span>
<span id="cb32-1462"><a href="liitteet.html#cb32-1462"></a>        <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb32-1463"><a href="liitteet.html#cb32-1463"></a>        <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb32-1464"><a href="liitteet.html#cb32-1464"></a>        <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>),</span>
<span id="cb32-1465"><a href="liitteet.html#cb32-1465"></a>        <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;absolute&quot;</span>,<span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb32-1466"><a href="liitteet.html#cb32-1466"></a>        <span class="dt">sub =</span> <span class="st">&quot;Täydentävät pisteet DE ja BE&quot;</span> )</span>
<span id="cb32-1467"><a href="liitteet.html#cb32-1467"></a></span>
<span id="cb32-1468"><a href="liitteet.html#cb32-1468"></a></span>
<span id="cb32-1469"><a href="liitteet.html#cb32-1469"></a>suppointCA2</span>
<span id="cb32-1470"><a href="liitteet.html#cb32-1470"></a></span>
<span id="cb32-1471"><a href="liitteet.html#cb32-1471"></a></span>
<span id="cb32-1472"><a href="liitteet.html#cb32-1472"></a><span class="kw">summary</span>(suppointCA2)</span>
<span id="cb32-1473"><a href="liitteet.html#cb32-1473"></a></span>
<span id="cb32-1474"><a href="liitteet.html#cb32-1474"></a>suppointCA3 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maa3 <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1.dat, <span class="dt">nd =</span> <span class="dv">3</span>)</span>
<span id="cb32-1475"><a href="liitteet.html#cb32-1475"></a></span>
<span id="cb32-1476"><a href="liitteet.html#cb32-1476"></a><span class="co"># summary(suppointCA3)</span></span>
<span id="cb32-1477"><a href="liitteet.html#cb32-1477"></a><span class="co"># Error in rsc %*% diag(sv) : non-conformable arguments</span></span>
<span id="cb32-1478"><a href="liitteet.html#cb32-1478"></a><span class="co"># outo juttu, ei toimi! - TÄMÄ POISTETAAN</span></span>
<span id="cb32-1479"><a href="liitteet.html#cb32-1479"></a></span>
<span id="cb32-1480"><a href="liitteet.html#cb32-1480"></a><span class="kw">plot</span>(suppointCA3, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb32-1481"><a href="liitteet.html#cb32-1481"></a>                <span class="dt">main =</span> <span class="st">&quot;Kolmen dimension ratkaisu&quot;</span>,</span>
<span id="cb32-1482"><a href="liitteet.html#cb32-1482"></a>                <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - 1. ja 2. dimensio&quot;</span>)</span>
<span id="cb32-1483"><a href="liitteet.html#cb32-1483"></a></span>
<span id="cb32-1484"><a href="liitteet.html#cb32-1484"></a><span class="kw">plot</span>(suppointCA3, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>),</span>
<span id="cb32-1485"><a href="liitteet.html#cb32-1485"></a>                <span class="dt">main =</span> <span class="st">&quot;Kolmen dimension ratkaisu&quot;</span>,</span>
<span id="cb32-1486"><a href="liitteet.html#cb32-1486"></a>                <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - 1. ja 3. dimensio&quot;</span>)</span>
<span id="cb32-1487"><a href="liitteet.html#cb32-1487"></a></span>
<span id="cb32-1488"><a href="liitteet.html#cb32-1488"></a><span class="kw">plot</span>(suppointCA3, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>),</span>
<span id="cb32-1489"><a href="liitteet.html#cb32-1489"></a>                <span class="dt">main =</span> <span class="st">&quot;Kolmen dimension ratkaisu&quot;</span>,</span>
<span id="cb32-1490"><a href="liitteet.html#cb32-1490"></a>                <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - 2. ja 3. dimensio&quot;</span>)</span>
<span id="cb32-1491"><a href="liitteet.html#cb32-1491"></a></span>
<span id="cb32-1492"><a href="liitteet.html#cb32-1492"></a></span>
<span id="cb32-1493"><a href="liitteet.html#cb32-1493"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/3dSymMap_1.PNG&#39;</span>)</span>
<span id="cb32-1494"><a href="liitteet.html#cb32-1494"></a></span>
<span id="cb32-1495"><a href="liitteet.html#cb32-1495"></a></span>
<span id="cb32-1496"><a href="liitteet.html#cb32-1496"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/3dSymMap_2.PNG&#39;</span>)</span>
<span id="cb32-1497"><a href="liitteet.html#cb32-1497"></a></span>
<span id="cb32-1498"><a href="liitteet.html#cb32-1498"></a><span class="co"># Iän ja sukupuolen vuorovaikutusmuuttujia</span></span>
<span id="cb32-1499"><a href="liitteet.html#cb32-1499"></a><span class="co">#</span></span>
<span id="cb32-1500"><a href="liitteet.html#cb32-1500"></a><span class="co"># Uusi R-data: ISSP2012esim1b.dat2esim1b)</span></span>
<span id="cb32-1501"><a href="liitteet.html#cb32-1501"></a><span class="co">#</span></span>
<span id="cb32-1502"><a href="liitteet.html#cb32-1502"></a><span class="co"># Ikäluokat age_cat</span></span>
<span id="cb32-1503"><a href="liitteet.html#cb32-1503"></a><span class="co"># AGE 1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 and older</span></span>
<span id="cb32-1504"><a href="liitteet.html#cb32-1504"></a><span class="co">#</span></span>
<span id="cb32-1505"><a href="liitteet.html#cb32-1505"></a><span class="co"># summary(ISSP2012esim1.dat$AGE)</span></span>
<span id="cb32-1506"><a href="liitteet.html#cb32-1506"></a><span class="co"># hist(ISSP2012esim1.dat$ika)</span></span>
<span id="cb32-1507"><a href="liitteet.html#cb32-1507"></a></span>
<span id="cb32-1508"><a href="liitteet.html#cb32-1508"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1.dat,</span>
<span id="cb32-1509"><a href="liitteet.html#cb32-1509"></a>                      <span class="dt">age_cat =</span> <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">15</span><span class="op">:</span><span class="dv">25</span>, <span class="st">&quot;1&quot;</span>,</span>
<span id="cb32-1510"><a href="liitteet.html#cb32-1510"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">26</span><span class="op">:</span><span class="dv">35</span>, <span class="st">&quot;2&quot;</span>,</span>
<span id="cb32-1511"><a href="liitteet.html#cb32-1511"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">36</span><span class="op">:</span><span class="dv">45</span>, <span class="st">&quot;3&quot;</span>,</span>
<span id="cb32-1512"><a href="liitteet.html#cb32-1512"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">46</span><span class="op">:</span><span class="dv">55</span>, <span class="st">&quot;4&quot;</span>,</span>
<span id="cb32-1513"><a href="liitteet.html#cb32-1513"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">56</span><span class="op">:</span><span class="dv">65</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>))))))</span>
<span id="cb32-1514"><a href="liitteet.html#cb32-1514"></a></span>
<span id="cb32-1515"><a href="liitteet.html#cb32-1515"></a></span>
<span id="cb32-1516"><a href="liitteet.html#cb32-1516"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span>ISSP2012esim1b.dat <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb32-1517"><a href="liitteet.html#cb32-1517"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span> <span class="kw">as_factor</span>(age_cat)) <span class="co"># järjestys omituinen!(4.2.20)</span></span>
<span id="cb32-1518"><a href="liitteet.html#cb32-1518"></a></span>
<span id="cb32-1519"><a href="liitteet.html#cb32-1519"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb32-1520"><a href="liitteet.html#cb32-1520"></a><span class="co"># str(ISSP2012esim2.dat$age_cat)</span></span>
<span id="cb32-1521"><a href="liitteet.html#cb32-1521"></a><span class="co"># levels(ISSP2012esim2.dat$age_cat)</span></span>
<span id="cb32-1522"><a href="liitteet.html#cb32-1522"></a><span class="co"># ISSP2012esim2.dat$age_cat %&gt;% summary()</span></span>
<span id="cb32-1523"><a href="liitteet.html#cb32-1523"></a></span>
<span id="cb32-1524"><a href="liitteet.html#cb32-1524"></a><span class="co"># Järjestetään ikäluokat uudelleen</span></span>
<span id="cb32-1525"><a href="liitteet.html#cb32-1525"></a></span>
<span id="cb32-1526"><a href="liitteet.html#cb32-1526"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span>ISSP2012esim1b.dat <span class="op">%&gt;%</span></span>
<span id="cb32-1527"><a href="liitteet.html#cb32-1527"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span></span>
<span id="cb32-1528"><a href="liitteet.html#cb32-1528"></a>                <span class="kw">fct_relevel</span>(age_cat,</span>
<span id="cb32-1529"><a href="liitteet.html#cb32-1529"></a>                            <span class="st">&quot;1&quot;</span>,</span>
<span id="cb32-1530"><a href="liitteet.html#cb32-1530"></a>                            <span class="st">&quot;2&quot;</span>,</span>
<span id="cb32-1531"><a href="liitteet.html#cb32-1531"></a>                            <span class="st">&quot;3&quot;</span>,</span>
<span id="cb32-1532"><a href="liitteet.html#cb32-1532"></a>                            <span class="st">&quot;4&quot;</span>,</span>
<span id="cb32-1533"><a href="liitteet.html#cb32-1533"></a>                            <span class="st">&quot;5&quot;</span>,</span>
<span id="cb32-1534"><a href="liitteet.html#cb32-1534"></a>                            <span class="st">&quot;6&quot;</span>)</span>
<span id="cb32-1535"><a href="liitteet.html#cb32-1535"></a>               )</span>
<span id="cb32-1536"><a href="liitteet.html#cb32-1536"></a></span>
<span id="cb32-1537"><a href="liitteet.html#cb32-1537"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb32-1538"><a href="liitteet.html#cb32-1538"></a></span>
<span id="cb32-1539"><a href="liitteet.html#cb32-1539"></a><span class="co"># Iso taulukko, voi tarkistaa että muunnos ok.</span></span>
<span id="cb32-1540"><a href="liitteet.html#cb32-1540"></a><span class="co"># test6 %&gt;% tableX(AGE, age_cat, type = &quot;count&quot;)</span></span>
<span id="cb32-1541"><a href="liitteet.html#cb32-1541"></a><span class="co"># taulu42 &lt;- ISSP2012esim2.dat %&gt;% tableX(maa,age_cat,type = &quot;count&quot;)</span></span>
<span id="cb32-1542"><a href="liitteet.html#cb32-1542"></a><span class="co"># kable(taulu42,digits = 2, caption = &quot;Ikäluokka age_cat&quot;)</span></span>
<span id="cb32-1543"><a href="liitteet.html#cb32-1543"></a><span class="co">#</span></span>
<span id="cb32-1544"><a href="liitteet.html#cb32-1544"></a></span>
<span id="cb32-1545"><a href="liitteet.html#cb32-1545"></a><span class="co"># Taulukoita (4.2.20)</span></span>
<span id="cb32-1546"><a href="liitteet.html#cb32-1546"></a></span>
<span id="cb32-1547"><a href="liitteet.html#cb32-1547"></a><span class="co">#ISSP2012esim1b.dat %&gt;%</span></span>
<span id="cb32-1548"><a href="liitteet.html#cb32-1548"></a><span class="co">#    tableX(maa,age_cat,type = &quot;count&quot;) %&gt;%</span></span>
<span id="cb32-1549"><a href="liitteet.html#cb32-1549"></a><span class="co">#    kable(digits = 2, caption = &quot;Ikäluokka age_cat&quot;)</span></span>
<span id="cb32-1550"><a href="liitteet.html#cb32-1550"></a><span class="co">#</span></span>
<span id="cb32-1551"><a href="liitteet.html#cb32-1551"></a><span class="co">#ISSP2012esim1b.dat %&gt;%</span></span>
<span id="cb32-1552"><a href="liitteet.html#cb32-1552"></a><span class="co">#    tableX(maa,age_cat,type = &quot;row_perc&quot;) %&gt;%</span></span>
<span id="cb32-1553"><a href="liitteet.html#cb32-1553"></a><span class="co">#    kable(digits = 2, caption = &quot;age_cat: suhteelliset frekvenssit&quot;)</span></span>
<span id="cb32-1554"><a href="liitteet.html#cb32-1554"></a></span>
<span id="cb32-1555"><a href="liitteet.html#cb32-1555"></a><span class="co"># ga - ikäluokka ja sukupuoli</span></span>
<span id="cb32-1556"><a href="liitteet.html#cb32-1556"></a></span>
<span id="cb32-1557"><a href="liitteet.html#cb32-1557"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1b.dat,</span>
<span id="cb32-1558"><a href="liitteet.html#cb32-1558"></a>                        <span class="dt">ga =</span> <span class="kw">case_when</span>((age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m1&quot;</span>,</span>
<span id="cb32-1559"><a href="liitteet.html#cb32-1559"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m2&quot;</span>,</span>
<span id="cb32-1560"><a href="liitteet.html#cb32-1560"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m3&quot;</span>,</span>
<span id="cb32-1561"><a href="liitteet.html#cb32-1561"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m4&quot;</span>,</span>
<span id="cb32-1562"><a href="liitteet.html#cb32-1562"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m5&quot;</span>,</span>
<span id="cb32-1563"><a href="liitteet.html#cb32-1563"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m6&quot;</span>,</span>
<span id="cb32-1564"><a href="liitteet.html#cb32-1564"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f1&quot;</span>,</span>
<span id="cb32-1565"><a href="liitteet.html#cb32-1565"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f2&quot;</span>,</span>
<span id="cb32-1566"><a href="liitteet.html#cb32-1566"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f3&quot;</span>,</span>
<span id="cb32-1567"><a href="liitteet.html#cb32-1567"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb32-1568"><a href="liitteet.html#cb32-1568"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb32-1569"><a href="liitteet.html#cb32-1569"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f5&quot;</span>,</span>
<span id="cb32-1570"><a href="liitteet.html#cb32-1570"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f6&quot;</span>,</span>
<span id="cb32-1571"><a href="liitteet.html#cb32-1571"></a>                                       <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;missing&quot;</span></span>
<span id="cb32-1572"><a href="liitteet.html#cb32-1572"></a>                                  ))</span>
<span id="cb32-1573"><a href="liitteet.html#cb32-1573"></a></span>
<span id="cb32-1574"><a href="liitteet.html#cb32-1574"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(ga,ga2) # tarkistus</span></span>
<span id="cb32-1575"><a href="liitteet.html#cb32-1575"></a><span class="co"># muuttujien tarkistuksia 19.9.2018</span></span>
<span id="cb32-1576"><a href="liitteet.html#cb32-1576"></a><span class="co"># str(ISSP2012esim1b.dat$ga) # chr-muuttuja, mutta toimii (4.2.20)</span></span>
<span id="cb32-1577"><a href="liitteet.html#cb32-1577"></a></span>
<span id="cb32-1578"><a href="liitteet.html#cb32-1578"></a><span class="co">#Tulostetaan taulukkoina ga - muuttuja</span></span>
<span id="cb32-1579"><a href="liitteet.html#cb32-1579"></a></span>
<span id="cb32-1580"><a href="liitteet.html#cb32-1580"></a><span class="co">#ISSP2012esim1b.dat %&gt;% tableX(maa,ga,type = &quot;count&quot;) %&gt;%</span></span>
<span id="cb32-1581"><a href="liitteet.html#cb32-1581"></a><span class="co">#kable(digits = 2, caption = &quot;Ikäluokka ja sukupuoli ga&quot;)</span></span>
<span id="cb32-1582"><a href="liitteet.html#cb32-1582"></a></span>
<span id="cb32-1583"><a href="liitteet.html#cb32-1583"></a><span class="co">#ISSP2012esim1b.dat %&gt;% tableX(maa,ga,type = &quot;row_perc&quot;) %&gt;%</span></span>
<span id="cb32-1584"><a href="liitteet.html#cb32-1584"></a><span class="co">#kable(digits = 2, caption = &quot;ga: suhteelliset frekvenssit&quot;)</span></span>
<span id="cb32-1585"><a href="liitteet.html#cb32-1585"></a></span>
<span id="cb32-1586"><a href="liitteet.html#cb32-1586"></a></span>
<span id="cb32-1587"><a href="liitteet.html#cb32-1587"></a>gaTestCA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>ga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat)</span>
<span id="cb32-1588"><a href="liitteet.html#cb32-1588"></a></span>
<span id="cb32-1589"><a href="liitteet.html#cb32-1589"></a></span>
<span id="cb32-1590"><a href="liitteet.html#cb32-1590"></a><span class="co"># Maapisteiden pääkoordinaatit janojen piirtämiseen</span></span>
<span id="cb32-1591"><a href="liitteet.html#cb32-1591"></a></span>
<span id="cb32-1592"><a href="liitteet.html#cb32-1592"></a>gaTestCA1.rpc &lt;-<span class="st"> </span>gaTestCA1<span class="op">$</span>rowcoord <span class="op">%*%</span><span class="st"> </span><span class="kw">diag</span>(gaTestCA1<span class="op">$</span>sv)</span>
<span id="cb32-1593"><a href="liitteet.html#cb32-1593"></a></span>
<span id="cb32-1594"><a href="liitteet.html#cb32-1594"></a><span class="co"># par(cex = 0.6)</span></span>
<span id="cb32-1595"><a href="liitteet.html#cb32-1595"></a><span class="kw">plot</span>(gaTestCA1, <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta, m = mies, f = nainen&quot;</span>,</span>
<span id="cb32-1596"><a href="liitteet.html#cb32-1596"></a>     <span class="dt">sub =</span> <span class="st">&quot;1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 tai vanhempi &quot;</span>)</span>
<span id="cb32-1597"><a href="liitteet.html#cb32-1597"></a><span class="co"># naiset</span></span>
<span id="cb32-1598"><a href="liitteet.html#cb32-1598"></a><span class="kw">lines</span>(gaTestCA1.rpc[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">1</span>],gaTestCA1.rpc[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">2</span>])</span>
<span id="cb32-1599"><a href="liitteet.html#cb32-1599"></a><span class="co">#miehet</span></span>
<span id="cb32-1600"><a href="liitteet.html#cb32-1600"></a><span class="kw">lines</span>(gaTestCA1.rpc[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">1</span>],gaTestCA1.rpc[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">2</span>], <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb32-1601"><a href="liitteet.html#cb32-1601"></a></span>
<span id="cb32-1602"><a href="liitteet.html#cb32-1602"></a><span class="kw">summary</span>(gaTestCA1)</span>
<span id="cb32-1603"><a href="liitteet.html#cb32-1603"></a></span>
<span id="cb32-1604"><a href="liitteet.html#cb32-1604"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1b.dat,</span>
<span id="cb32-1605"><a href="liitteet.html#cb32-1605"></a>                             <span class="dt">maaga =</span> <span class="kw">paste</span>(maa, ga, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb32-1606"><a href="liitteet.html#cb32-1606"></a></span>
<span id="cb32-1607"><a href="liitteet.html#cb32-1607"></a><span class="co"># tarkistus, muunnos ok</span></span>
<span id="cb32-1608"><a href="liitteet.html#cb32-1608"></a><span class="co"># ISSP2012esim1b.dat %&gt;% tableX(maa, maaga)</span></span>
<span id="cb32-1609"><a href="liitteet.html#cb32-1609"></a><span class="co"># head(ISSP2012esim2.dat)</span></span>
<span id="cb32-1610"><a href="liitteet.html#cb32-1610"></a><span class="co"># str(ISSP2012esim2.dat)</span></span>
<span id="cb32-1611"><a href="liitteet.html#cb32-1611"></a></span>
<span id="cb32-1612"><a href="liitteet.html#cb32-1612"></a>maagaCA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maaga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat)</span>
<span id="cb32-1613"><a href="liitteet.html#cb32-1613"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.5</span>)</span>
<span id="cb32-1614"><a href="liitteet.html#cb32-1614"></a><span class="kw">plot</span>(maagaCA1, <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta 1&quot;</span>,</span>
<span id="cb32-1615"><a href="liitteet.html#cb32-1615"></a>                <span class="dt">sub =</span> <span class="st">&quot;cex=0.5&quot;</span>)</span>
<span id="cb32-1616"><a href="liitteet.html#cb32-1616"></a></span>
<span id="cb32-1617"><a href="liitteet.html#cb32-1617"></a><span class="co"># Vilkaistaan numeerisia tuloksia, kopioidaan tekstiin jos on tarpeellista</span></span>
<span id="cb32-1618"><a href="liitteet.html#cb32-1618"></a><span class="kw">summary</span>(maagaCA1)</span>
<span id="cb32-1619"><a href="liitteet.html#cb32-1619"></a></span>
<span id="cb32-1620"><a href="liitteet.html#cb32-1620"></a><span class="co"># Osajoukon CA: Tanska, Saksa ja Suomi</span></span>
<span id="cb32-1621"><a href="liitteet.html#cb32-1621"></a>maagaCA2sub2 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maaga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat,<span class="dt">subsetrow =</span> <span class="dv">25</span><span class="op">:</span><span class="dv">60</span>)</span>
<span id="cb32-1622"><a href="liitteet.html#cb32-1622"></a></span>
<span id="cb32-1623"><a href="liitteet.html#cb32-1623"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.8</span>)</span>
<span id="cb32-1624"><a href="liitteet.html#cb32-1624"></a><span class="kw">plot</span>(maagaCA2sub2, <span class="dt">main =</span> <span class="st">&quot;Q1b: Lapsi kärsii jos äiti käy töissä&quot;</span>,</span>
<span id="cb32-1625"><a href="liitteet.html#cb32-1625"></a>     <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - Tanska, Saksa ja Suomi (subset ca), cex = 0.7&quot;</span>)</span>
<span id="cb32-1626"><a href="liitteet.html#cb32-1626"></a></span>
<span id="cb32-1627"><a href="liitteet.html#cb32-1627"></a><span class="co"># ca-tulosobjekti maagaCA2sub2, DK DE FI</span></span>
<span id="cb32-1628"><a href="liitteet.html#cb32-1628"></a></span>
<span id="cb32-1629"><a href="liitteet.html#cb32-1629"></a>maagaLinesDKDEFI &lt;-<span class="st"> </span><span class="kw">cacoord</span>(maagaCA2sub2, <span class="dt">type =</span> <span class="st">&quot;symmetric&quot;</span>)</span>
<span id="cb32-1630"><a href="liitteet.html#cb32-1630"></a>maagaLinesDKDEFI &lt;-<span class="st"> </span>maagaLinesDKDEFI<span class="op">$</span>rows[ , <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</span>
<span id="cb32-1631"><a href="liitteet.html#cb32-1631"></a><span class="co"># maagaLinesDKDEFI # tarkistus</span></span>
<span id="cb32-1632"><a href="liitteet.html#cb32-1632"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb32-1633"><a href="liitteet.html#cb32-1633"></a><span class="kw">plot</span>(maagaCA2sub2,</span>
<span id="cb32-1634"><a href="liitteet.html#cb32-1634"></a>     <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - Tanska, Saksa ja Suomi (subset ca)&quot;</span>)</span>
<span id="cb32-1635"><a href="liitteet.html#cb32-1635"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="co">#DEf</span></span>
<span id="cb32-1636"><a href="liitteet.html#cb32-1636"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)  <span class="co">#DEm</span></span>
<span id="cb32-1637"><a href="liitteet.html#cb32-1637"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">13</span><span class="op">:</span><span class="dv">18</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">13</span><span class="op">:</span><span class="dv">18</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="co">#DKf</span></span>
<span id="cb32-1638"><a href="liitteet.html#cb32-1638"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">19</span><span class="op">:</span><span class="dv">24</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">19</span><span class="op">:</span><span class="dv">24</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)  <span class="co">#DKm</span></span>
<span id="cb32-1639"><a href="liitteet.html#cb32-1639"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">25</span><span class="op">:</span><span class="dv">30</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">25</span><span class="op">:</span><span class="dv">30</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="co">#FIf</span></span>
<span id="cb32-1640"><a href="liitteet.html#cb32-1640"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">31</span><span class="op">:</span><span class="dv">36</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">31</span><span class="op">:</span><span class="dv">36</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)  <span class="co">#FIm</span></span>
<span id="cb32-1641"><a href="liitteet.html#cb32-1641"></a></span>
<span id="cb32-1642"><a href="liitteet.html#cb32-1642"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb32-1643"><a href="liitteet.html#cb32-1643"></a><span class="kw">plot</span>(maagaCA2sub2, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb32-1644"><a href="liitteet.html#cb32-1644"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb32-1645"><a href="liitteet.html#cb32-1645"></a>     <span class="dt">contrib =</span><span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb32-1646"><a href="liitteet.html#cb32-1646"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb32-1647"><a href="liitteet.html#cb32-1647"></a>     <span class="dt">main =</span> <span class="st">&quot;Kontribuutiokartta: sarakkeiden(abs.) ja rivien(rel.) värisävy&quot;</span>,</span>
<span id="cb32-1648"><a href="liitteet.html#cb32-1648"></a>     <span class="dt">sub =</span> <span class="st">&quot;massat pisteiden kokoina, cex=0.06&quot;</span></span>
<span id="cb32-1649"><a href="liitteet.html#cb32-1649"></a>      )</span>
<span id="cb32-1650"><a href="liitteet.html#cb32-1650"></a><span class="co"># Tarkastetaan numeeriset tulokset</span></span>
<span id="cb32-1651"><a href="liitteet.html#cb32-1651"></a><span class="kw">summary</span>(maagaCA2sub2)</span>
<span id="cb32-1652"><a href="liitteet.html#cb32-1652"></a></span>
<span id="cb32-1653"><a href="liitteet.html#cb32-1653"></a><span class="co"># Belgia, Bulgaria ja Unkari analysoidaan tiiviisti</span></span>
<span id="cb32-1654"><a href="liitteet.html#cb32-1654"></a><span class="co"># Belgia on vähän välitapaus Bulgarian ja Unkarin ja kolmen ensimmäisen maan</span></span>
<span id="cb32-1655"><a href="liitteet.html#cb32-1655"></a><span class="co"># kanssa. Kokeiluja voi tehdä neljällä maaryhmällä, kuvan lukukelpoisuus</span></span>
<span id="cb32-1656"><a href="liitteet.html#cb32-1656"></a><span class="co"># ratkaisee.</span></span>
<span id="cb32-1657"><a href="liitteet.html#cb32-1657"></a></span>
<span id="cb32-1658"><a href="liitteet.html#cb32-1658"></a><span class="co">#BGHUsubset &lt;- c(13:24,61:72)</span></span>
<span id="cb32-1659"><a href="liitteet.html#cb32-1659"></a><span class="co">#BEDEDKFIsubset &lt;- c(1:12, 25:36, 37:48, 49:60)</span></span>
<span id="cb32-1660"><a href="liitteet.html#cb32-1660"></a><span class="co">#DEDKFIsubset &lt;- c(25:36, 37:48, 49:60)</span></span>
<span id="cb32-1661"><a href="liitteet.html#cb32-1661"></a></span>
<span id="cb32-1662"><a href="liitteet.html#cb32-1662"></a>BEBGHUsubset &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">13</span><span class="op">:</span><span class="dv">24</span>,<span class="dv">61</span><span class="op">:</span><span class="dv">72</span>)</span>
<span id="cb32-1663"><a href="liitteet.html#cb32-1663"></a>maagaCA2sub3 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maaga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat,<span class="dt">subsetrow =</span> BEBGHUsubset)</span>
<span id="cb32-1664"><a href="liitteet.html#cb32-1664"></a></span>
<span id="cb32-1665"><a href="liitteet.html#cb32-1665"></a></span>
<span id="cb32-1666"><a href="liitteet.html#cb32-1666"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb32-1667"><a href="liitteet.html#cb32-1667"></a><span class="kw">plot</span>(maagaCA2sub3, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb32-1668"><a href="liitteet.html#cb32-1668"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb32-1669"><a href="liitteet.html#cb32-1669"></a>     <span class="dt">contrib =</span><span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb32-1670"><a href="liitteet.html#cb32-1670"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb32-1671"><a href="liitteet.html#cb32-1671"></a>     <span class="dt">main =</span> <span class="st">&quot;Kontribuutiokartta: sarakkeiden(abs.) ja rivien(rel.) värisävy&quot;</span>,</span>
<span id="cb32-1672"><a href="liitteet.html#cb32-1672"></a>     <span class="dt">sub =</span> <span class="st">&quot;massat pisteiden kokoina, cex=0.06&quot;</span></span>
<span id="cb32-1673"><a href="liitteet.html#cb32-1673"></a>      )</span>
<span id="cb32-1674"><a href="liitteet.html#cb32-1674"></a></span>
<span id="cb32-1675"><a href="liitteet.html#cb32-1675"></a></span>
<span id="cb32-1676"><a href="liitteet.html#cb32-1676"></a><span class="co"># Vilkaistaa numeerisia tuloksia, kopioidaan tekstiin jos on tarpeen</span></span>
<span id="cb32-1677"><a href="liitteet.html#cb32-1677"></a><span class="co"># maagaCA2sub3</span></span>
<span id="cb32-1678"><a href="liitteet.html#cb32-1678"></a> <span class="kw">summary</span>(maagaCA2sub3)</span>
<span id="cb32-1679"><a href="liitteet.html#cb32-1679"></a></span>
<span id="cb32-1680"><a href="liitteet.html#cb32-1680"></a><span class="co"># kahden osaratkaisun kokonaisinertia</span></span>
<span id="cb32-1681"><a href="liitteet.html#cb32-1681"></a></span>
<span id="cb32-1682"><a href="liitteet.html#cb32-1682"></a><span class="co"># 0.143551 + 0.119602 = 0.263153</span></span>
<span id="cb32-1683"><a href="liitteet.html#cb32-1683"></a><span class="co"># koko datalla 0.263154</span></span>
<span id="cb32-1684"><a href="liitteet.html#cb32-1684"></a></span>
<span id="cb32-1685"><a href="liitteet.html#cb32-1685"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/stacked1.png&#39;</span>)</span>
<span id="cb32-1686"><a href="liitteet.html#cb32-1686"></a></span>
<span id="cb32-1687"><a href="liitteet.html#cb32-1687"></a><span class="co"># Data</span></span>
<span id="cb32-1688"><a href="liitteet.html#cb32-1688"></a>ISSP2012Concat1jh.dat &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012esim1b.dat, Q1b, maa,sp, age_cat)</span>
<span id="cb32-1689"><a href="liitteet.html#cb32-1689"></a></span>
<span id="cb32-1690"><a href="liitteet.html#cb32-1690"></a><span class="co"># mjca-funktiota -&gt;  Burt-matriisi</span></span>
<span id="cb32-1691"><a href="liitteet.html#cb32-1691"></a>Concat1jh.Burt &lt;-<span class="st"> </span><span class="kw">mjca</span>(ISSP2012Concat1jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>)<span class="op">$</span>Burt</span>
<span id="cb32-1692"><a href="liitteet.html#cb32-1692"></a></span>
<span id="cb32-1693"><a href="liitteet.html#cb32-1693"></a><span class="co"># Burt-matriisi symmetrinen</span></span>
<span id="cb32-1694"><a href="liitteet.html#cb32-1694"></a><span class="co">#dim(Concat1jh.Burt)</span></span>
<span id="cb32-1695"><a href="liitteet.html#cb32-1695"></a><span class="co"># 19 x 19</span></span>
<span id="cb32-1696"><a href="liitteet.html#cb32-1696"></a><span class="co">#rownames(Concat1jh.Burt)</span></span>
<span id="cb32-1697"><a href="liitteet.html#cb32-1697"></a><span class="co">#[1] &quot;Q1bS&quot;     &quot;Q1bs&quot;     &quot;Q1b?&quot;     &quot;Q1be&quot;     &quot;Q1bE&quot;     &quot;maaBE&quot;    &quot;maaBG&quot;    &quot;maaDE&quot;    &quot;maaDK&quot;</span></span>
<span id="cb32-1698"><a href="liitteet.html#cb32-1698"></a><span class="co">#[10] &quot;maaFI&quot;    &quot;maaHU&quot;    &quot;spm&quot;      &quot;spf&quot;      &quot;age_cat1&quot; &quot;age_cat2&quot; &quot;age_cat3&quot; &quot;age_cat4&quot; &quot;age_cat5&quot;</span></span>
<span id="cb32-1699"><a href="liitteet.html#cb32-1699"></a><span class="co">#[19] &quot;age_cat6&quot;</span></span>
<span id="cb32-1700"><a href="liitteet.html#cb32-1700"></a></span>
<span id="cb32-1701"><a href="liitteet.html#cb32-1701"></a><span class="co"># maat - vastaukset</span></span>
<span id="cb32-1702"><a href="liitteet.html#cb32-1702"></a>ISSP2012Concat2jh.dat &lt;-<span class="st"> </span>Concat1jh.Burt[<span class="dv">6</span><span class="op">:</span><span class="dv">11</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb32-1703"><a href="liitteet.html#cb32-1703"></a><span class="co"># ISSP2012Concat2jh.dat</span></span>
<span id="cb32-1704"><a href="liitteet.html#cb32-1704"></a><span class="co"># sukupuoli ja vastaukset</span></span>
<span id="cb32-1705"><a href="liitteet.html#cb32-1705"></a>ISSP2012Concat2jh.dat &lt;-<span class="st"> </span><span class="kw">rbind</span>(ISSP2012Concat2jh.dat, Concat1jh.Burt[<span class="dv">12</span><span class="op">:</span><span class="dv">13</span> ,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</span>
<span id="cb32-1706"><a href="liitteet.html#cb32-1706"></a><span class="co"># ISSP2012Concat2jh.dat</span></span>
<span id="cb32-1707"><a href="liitteet.html#cb32-1707"></a><span class="co"># ikäluokka ja vastaukset</span></span>
<span id="cb32-1708"><a href="liitteet.html#cb32-1708"></a>ISSP2012Concat2jh.dat &lt;-<span class="st"> </span><span class="kw">rbind</span>(ISSP2012Concat2jh.dat, Concat1jh.Burt[<span class="dv">14</span><span class="op">:</span><span class="dv">19</span> ,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</span>
<span id="cb32-1709"><a href="liitteet.html#cb32-1709"></a><span class="co"># ISSP2012Concat2jh.dat</span></span>
<span id="cb32-1710"><a href="liitteet.html#cb32-1710"></a></span>
<span id="cb32-1711"><a href="liitteet.html#cb32-1711"></a>Concat1jh.CA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(ISSP2012Concat2jh.dat)</span>
<span id="cb32-1712"><a href="liitteet.html#cb32-1712"></a></span>
<span id="cb32-1713"><a href="liitteet.html#cb32-1713"></a></span>
<span id="cb32-1714"><a href="liitteet.html#cb32-1714"></a><span class="co"># Käännetään kuva x-akselin ympäri</span></span>
<span id="cb32-1715"><a href="liitteet.html#cb32-1715"></a>Concat1jh.CA1<span class="op">$</span>rowcoord[, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="op">-</span>Concat1jh.CA1<span class="op">$</span>rowcoord[, <span class="dv">2</span>]</span>
<span id="cb32-1716"><a href="liitteet.html#cb32-1716"></a>Concat1jh.CA1<span class="op">$</span>colcoord[, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="op">-</span>Concat1jh.CA1<span class="op">$</span>colcoord[, <span class="dv">2</span>]</span>
<span id="cb32-1717"><a href="liitteet.html#cb32-1717"></a></span>
<span id="cb32-1718"><a href="liitteet.html#cb32-1718"></a><span class="co"># Siistitään muuttujien nimet</span></span>
<span id="cb32-1719"><a href="liitteet.html#cb32-1719"></a>Concat1jh.CA1<span class="op">$</span>colnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)</span>
<span id="cb32-1720"><a href="liitteet.html#cb32-1720"></a>Concat1jh.CA1<span class="op">$</span>rownames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>,</span>
<span id="cb32-1721"><a href="liitteet.html#cb32-1721"></a>                            <span class="st">&quot;a1&quot;</span>, <span class="st">&quot;a2&quot;</span>, <span class="st">&quot;a3&quot;</span>, <span class="st">&quot;a4&quot;</span>, <span class="st">&quot;a5&quot;</span>, <span class="st">&quot;a6&quot;</span>)</span>
<span id="cb32-1722"><a href="liitteet.html#cb32-1722"></a></span>
<span id="cb32-1723"><a href="liitteet.html#cb32-1723"></a></span>
<span id="cb32-1724"><a href="liitteet.html#cb32-1724"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>) <span class="co"># pisteiden kasautumien haittaa</span></span>
<span id="cb32-1725"><a href="liitteet.html#cb32-1725"></a><span class="kw">plot</span>(Concat1jh.CA1,</span>
<span id="cb32-1726"><a href="liitteet.html#cb32-1726"></a>     <span class="dt">main =</span> <span class="st">&quot;Pinottu taulukko - symmetrinen kuva1&quot;</span>,</span>
<span id="cb32-1727"><a href="liitteet.html#cb32-1727"></a>     <span class="dt">sub =</span> <span class="st">&quot;a1-a6 ikäluokat, m = miehet, f = naiset, Q1b (cex=0.6)&quot;</span></span>
<span id="cb32-1728"><a href="liitteet.html#cb32-1728"></a>     )</span>
<span id="cb32-1729"><a href="liitteet.html#cb32-1729"></a></span>
<span id="cb32-1730"><a href="liitteet.html#cb32-1730"></a><span class="kw">summary</span>(Concat1jh.CA1)</span>
<span id="cb32-1731"><a href="liitteet.html#cb32-1731"></a></span>
<span id="cb32-1732"><a href="liitteet.html#cb32-1732"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb32-1733"><a href="liitteet.html#cb32-1733"></a><span class="kw">plot</span>(Concat1jh.CA1, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb32-1734"><a href="liitteet.html#cb32-1734"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb32-1735"><a href="liitteet.html#cb32-1735"></a>     <span class="dt">contrib =</span><span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb32-1736"><a href="liitteet.html#cb32-1736"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb32-1737"><a href="liitteet.html#cb32-1737"></a>     <span class="dt">main =</span> <span class="st">&quot;Pinottu taulukko, kontribuuutiokartta (suhteellinen, absoluuttinen)&quot;</span>,</span>
<span id="cb32-1738"><a href="liitteet.html#cb32-1738"></a>     <span class="dt">sub =</span> <span class="st">&quot;a1-a6 ikäluokat, m = miehet, f = naiset, massat pisteiden koko&quot;</span></span>
<span id="cb32-1739"><a href="liitteet.html#cb32-1739"></a>     )</span>
<span id="cb32-1740"><a href="liitteet.html#cb32-1740"></a></span>
<span id="cb32-1741"><a href="liitteet.html#cb32-1741"></a><span class="co"># str(ISSP2012jh1d.dat) - luotu skripteissä G1_1_data2.Rmd ja G1_1_data_fct1.Rmd</span></span>
<span id="cb32-1742"><a href="liitteet.html#cb32-1742"></a><span class="co"># Tarkistukset näkyvät Galkussa - tässä ei tulosteta</span></span>
<span id="cb32-1743"><a href="liitteet.html#cb32-1743"></a><span class="co"># Kommentoidaan pois tarkistuksia (14.11.2020)</span></span>
<span id="cb32-1744"><a href="liitteet.html#cb32-1744"></a><span class="co">#Valitaan muuttujat joissa puuttuva tieto on koodattu muuttujan arvoksi</span></span>
<span id="cb32-1745"><a href="liitteet.html#cb32-1745"></a></span>
<span id="cb32-1746"><a href="liitteet.html#cb32-1746"></a>MCAvars1 &lt;-<span class="st">  </span><span class="kw">c</span>(<span class="st">&quot;Q1am&quot;</span>,<span class="st">&quot;Q1bm&quot;</span>, <span class="st">&quot;Q1cm&quot;</span>, <span class="st">&quot;Q1dm&quot;</span>,<span class="st">&quot;Q1em&quot;</span>,<span class="st">&quot;Q2am&quot;</span>,<span class="st">&quot;Q2bm&quot;</span>,<span class="st">&quot;edum&quot;</span>,</span>
<span id="cb32-1747"><a href="liitteet.html#cb32-1747"></a>                 <span class="st">&quot;sostam&quot;</span>, <span class="st">&quot;urbrum&quot;</span>, <span class="st">&quot;maa&quot;</span>, <span class="st">&quot;ika&quot;</span>, <span class="st">&quot;sp&quot;</span> )</span>
<span id="cb32-1748"><a href="liitteet.html#cb32-1748"></a></span>
<span id="cb32-1749"><a href="liitteet.html#cb32-1749"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">all_of</span>(MCAvars1))</span>
<span id="cb32-1750"><a href="liitteet.html#cb32-1750"></a></span>
<span id="cb32-1751"><a href="liitteet.html#cb32-1751"></a><span class="co">#dim(MCAdata1jh.dat)</span></span>
<span id="cb32-1752"><a href="liitteet.html#cb32-1752"></a><span class="co"># names(MCAdata1jh.dat)</span></span>
<span id="cb32-1753"><a href="liitteet.html#cb32-1753"></a></span>
<span id="cb32-1754"><a href="liitteet.html#cb32-1754"></a><span class="co"># luodaan ikaluokka-muuttuja ja ikäluokka-sukupuoli - muuttuja</span></span>
<span id="cb32-1755"><a href="liitteet.html#cb32-1755"></a><span class="co">#age_cat</span></span>
<span id="cb32-1756"><a href="liitteet.html#cb32-1756"></a><span class="co">#ikä 1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 and older</span></span>
<span id="cb32-1757"><a href="liitteet.html#cb32-1757"></a></span>
<span id="cb32-1758"><a href="liitteet.html#cb32-1758"></a>MCAdata1jh.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(MCAdata1jh.dat, <span class="dt">age_cat =</span> <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">15</span><span class="op">:</span><span class="dv">25</span>, <span class="st">&quot;1&quot;</span>,</span>
<span id="cb32-1759"><a href="liitteet.html#cb32-1759"></a>                                <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">26</span><span class="op">:</span><span class="dv">35</span>, <span class="st">&quot;2&quot;</span>,</span>
<span id="cb32-1760"><a href="liitteet.html#cb32-1760"></a>                                <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">36</span><span class="op">:</span><span class="dv">45</span>, <span class="st">&quot;3&quot;</span>,</span>
<span id="cb32-1761"><a href="liitteet.html#cb32-1761"></a>                                <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">46</span><span class="op">:</span><span class="dv">55</span>, <span class="st">&quot;4&quot;</span>,</span>
<span id="cb32-1762"><a href="liitteet.html#cb32-1762"></a>                                <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">56</span><span class="op">:</span><span class="dv">65</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>))))))</span>
<span id="cb32-1763"><a href="liitteet.html#cb32-1763"></a></span>
<span id="cb32-1764"><a href="liitteet.html#cb32-1764"></a><span class="co"># str(MCAdata1jh.dat$age_cat)</span></span>
<span id="cb32-1765"><a href="liitteet.html#cb32-1765"></a></span>
<span id="cb32-1766"><a href="liitteet.html#cb32-1766"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb32-1767"><a href="liitteet.html#cb32-1767"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span> <span class="kw">as_factor</span>(age_cat))</span>
<span id="cb32-1768"><a href="liitteet.html#cb32-1768"></a><span class="co">#tarkastuksia - outo järjestys</span></span>
<span id="cb32-1769"><a href="liitteet.html#cb32-1769"></a><span class="co">#levels(MCAdata1jh.dat$age_cat)</span></span>
<span id="cb32-1770"><a href="liitteet.html#cb32-1770"></a><span class="co"># str(MCAdata1jh.dat$age_cat)</span></span>
<span id="cb32-1771"><a href="liitteet.html#cb32-1771"></a></span>
<span id="cb32-1772"><a href="liitteet.html#cb32-1772"></a>MCAdata1jh.dat&lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb32-1773"><a href="liitteet.html#cb32-1773"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span> <span class="kw">fct_relevel</span>(age_cat,</span>
<span id="cb32-1774"><a href="liitteet.html#cb32-1774"></a>                                   <span class="st">&quot;1&quot;</span>,</span>
<span id="cb32-1775"><a href="liitteet.html#cb32-1775"></a>                                   <span class="st">&quot;2&quot;</span>,</span>
<span id="cb32-1776"><a href="liitteet.html#cb32-1776"></a>                                   <span class="st">&quot;3&quot;</span>,</span>
<span id="cb32-1777"><a href="liitteet.html#cb32-1777"></a>                                   <span class="st">&quot;4&quot;</span>,</span>
<span id="cb32-1778"><a href="liitteet.html#cb32-1778"></a>                                   <span class="st">&quot;5&quot;</span>,</span>
<span id="cb32-1779"><a href="liitteet.html#cb32-1779"></a>                                   <span class="st">&quot;6&quot;</span>))</span>
<span id="cb32-1780"><a href="liitteet.html#cb32-1780"></a></span>
<span id="cb32-1781"><a href="liitteet.html#cb32-1781"></a><span class="co"># Tarkistuksia(16.10.20)</span></span>
<span id="cb32-1782"><a href="liitteet.html#cb32-1782"></a></span>
<span id="cb32-1783"><a href="liitteet.html#cb32-1783"></a><span class="co">#MCAdata1jh.dat %&gt;%</span></span>
<span id="cb32-1784"><a href="liitteet.html#cb32-1784"></a><span class="co">#        tableX(maa,age_cat,type = &quot;count&quot;) #%&gt;%</span></span>
<span id="cb32-1785"><a href="liitteet.html#cb32-1785"></a><span class="co">#        #kable(digits = 2, caption = &quot;Ikäluokka age_cat&quot;)</span></span>
<span id="cb32-1786"><a href="liitteet.html#cb32-1786"></a></span>
<span id="cb32-1787"><a href="liitteet.html#cb32-1787"></a><span class="co">#MCAdata1jh.dat %&gt;%</span></span>
<span id="cb32-1788"><a href="liitteet.html#cb32-1788"></a><span class="co">#        tableX(maa,age_cat,type = &quot;row_perc&quot;) #%&gt;%</span></span>
<span id="cb32-1789"><a href="liitteet.html#cb32-1789"></a><span class="co">#        #kable(digits = 2, caption = &quot;age_cat: suhteelliset frekvenssit&quot;)</span></span>
<span id="cb32-1790"><a href="liitteet.html#cb32-1790"></a></span>
<span id="cb32-1791"><a href="liitteet.html#cb32-1791"></a></span>
<span id="cb32-1792"><a href="liitteet.html#cb32-1792"></a><span class="co"># Ikäluokka-sukupuoli - muuttuja</span></span>
<span id="cb32-1793"><a href="liitteet.html#cb32-1793"></a>MCAdata1jh.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(MCAdata1jh.dat,</span>
<span id="cb32-1794"><a href="liitteet.html#cb32-1794"></a>                             <span class="dt">ga =</span> <span class="kw">case_when</span>((age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m1&quot;</span>,</span>
<span id="cb32-1795"><a href="liitteet.html#cb32-1795"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m2&quot;</span>,</span>
<span id="cb32-1796"><a href="liitteet.html#cb32-1796"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m3&quot;</span>,</span>
<span id="cb32-1797"><a href="liitteet.html#cb32-1797"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m4&quot;</span>,</span>
<span id="cb32-1798"><a href="liitteet.html#cb32-1798"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m5&quot;</span>,</span>
<span id="cb32-1799"><a href="liitteet.html#cb32-1799"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m6&quot;</span>,</span>
<span id="cb32-1800"><a href="liitteet.html#cb32-1800"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f1&quot;</span>,</span>
<span id="cb32-1801"><a href="liitteet.html#cb32-1801"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f2&quot;</span>,</span>
<span id="cb32-1802"><a href="liitteet.html#cb32-1802"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f3&quot;</span>,</span>
<span id="cb32-1803"><a href="liitteet.html#cb32-1803"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb32-1804"><a href="liitteet.html#cb32-1804"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb32-1805"><a href="liitteet.html#cb32-1805"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f5&quot;</span>,</span>
<span id="cb32-1806"><a href="liitteet.html#cb32-1806"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f6&quot;</span>,</span>
<span id="cb32-1807"><a href="liitteet.html#cb32-1807"></a>                                <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;missing&quot;</span></span>
<span id="cb32-1808"><a href="liitteet.html#cb32-1808"></a>                                ))</span>
<span id="cb32-1809"><a href="liitteet.html#cb32-1809"></a></span>
<span id="cb32-1810"><a href="liitteet.html#cb32-1810"></a></span>
<span id="cb32-1811"><a href="liitteet.html#cb32-1811"></a><span class="co">#Sosiaalinen status: oma arvio &quot;Top-Bottom self-placement&quot;</span></span>
<span id="cb32-1812"><a href="liitteet.html#cb32-1812"></a><span class="co">#str(ISSP2012jh1d.dat$sosta)</span></span>
<span id="cb32-1813"><a href="liitteet.html#cb32-1813"></a><span class="co">#str(ISSP2012jh1d.dat$urbru)</span></span>
<span id="cb32-1814"><a href="liitteet.html#cb32-1814"></a><span class="co">#str(ISSP2012jh1d.dat$edu)</span></span>
<span id="cb32-1815"><a href="liitteet.html#cb32-1815"></a><span class="co">#Koulutustaso</span></span>
<span id="cb32-1816"><a href="liitteet.html#cb32-1816"></a><span class="co">#str(ISSP2012jh1d.dat$edu)</span></span>
<span id="cb32-1817"><a href="liitteet.html#cb32-1817"></a></span>
<span id="cb32-1818"><a href="liitteet.html#cb32-1818"></a><span class="co">#Asuipaikka</span></span>
<span id="cb32-1819"><a href="liitteet.html#cb32-1819"></a><span class="co">#str(ISSP2012jh1d.dat$urbru)</span></span>
<span id="cb32-1820"><a href="liitteet.html#cb32-1820"></a></span>
<span id="cb32-1821"><a href="liitteet.html#cb32-1821"></a><span class="co"># Muunnetaan faktorimuuttujia, mahdollisimman lyhyet tunnisteet kategorioille</span></span>
<span id="cb32-1822"><a href="liitteet.html#cb32-1822"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb32-1823"><a href="liitteet.html#cb32-1823"></a><span class="kw">mutate</span>(<span class="dt">E =</span> <span class="kw">fct_recode</span>(edum,</span>
<span id="cb32-1824"><a href="liitteet.html#cb32-1824"></a>        <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;No formal education&quot;</span>,</span>
<span id="cb32-1825"><a href="liitteet.html#cb32-1825"></a>        <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;Primary school (elementary school)&quot;</span>,</span>
<span id="cb32-1826"><a href="liitteet.html#cb32-1826"></a>        <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;Lower secondary (secondary completed does not allow entry to university: obligatory school)&quot;</span>,</span>
<span id="cb32-1827"><a href="liitteet.html#cb32-1827"></a>        <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;Upper secondary (programs that allows entry to university&quot;</span>,</span>
<span id="cb32-1828"><a href="liitteet.html#cb32-1828"></a>        <span class="st">&quot;5&quot;</span> =<span class="st"> &quot;Post secondary, non-tertiary (other upper secondary programs toward labour market or technical formation)&quot;</span>,</span>
<span id="cb32-1829"><a href="liitteet.html#cb32-1829"></a>        <span class="st">&quot;6&quot;</span> =<span class="st"> &quot;Lower level tertiary, first stage (also technical schools at a tertiary level)&quot;</span>,</span>
<span id="cb32-1830"><a href="liitteet.html#cb32-1830"></a>        <span class="st">&quot;7&quot;</span> =<span class="st"> &quot;Upper level tertiary (Master, Dr.)&quot;</span>,</span>
<span id="cb32-1831"><a href="liitteet.html#cb32-1831"></a>        <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb32-1832"><a href="liitteet.html#cb32-1832"></a>       <span class="dt">S =</span> <span class="kw">fct_recode</span>(sostam,</span>
<span id="cb32-1833"><a href="liitteet.html#cb32-1833"></a>         <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Lowest, Bottom, 01&quot;</span>,</span>
<span id="cb32-1834"><a href="liitteet.html#cb32-1834"></a>         <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;02&quot;</span>,</span>
<span id="cb32-1835"><a href="liitteet.html#cb32-1835"></a>         <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;03&quot;</span>,</span>
<span id="cb32-1836"><a href="liitteet.html#cb32-1836"></a>         <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;04&quot;</span>,</span>
<span id="cb32-1837"><a href="liitteet.html#cb32-1837"></a>         <span class="st">&quot;5&quot;</span> =<span class="st"> &quot;05&quot;</span>,</span>
<span id="cb32-1838"><a href="liitteet.html#cb32-1838"></a>         <span class="st">&quot;6&quot;</span> =<span class="st"> &quot;06&quot;</span>,</span>
<span id="cb32-1839"><a href="liitteet.html#cb32-1839"></a>         <span class="st">&quot;7&quot;</span> =<span class="st"> &quot;07&quot;</span>,</span>
<span id="cb32-1840"><a href="liitteet.html#cb32-1840"></a>         <span class="st">&quot;8&quot;</span> =<span class="st"> &quot;08&quot;</span>,</span>
<span id="cb32-1841"><a href="liitteet.html#cb32-1841"></a>         <span class="st">&quot;9&quot;</span> =<span class="st"> &quot;09&quot;</span>,</span>
<span id="cb32-1842"><a href="liitteet.html#cb32-1842"></a>         <span class="st">&quot;10&quot;</span>=<span class="st"> &quot;Highest, Top, 10&quot;</span>,</span>
<span id="cb32-1843"><a href="liitteet.html#cb32-1843"></a>         <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb32-1844"><a href="liitteet.html#cb32-1844"></a>       <span class="dt">U =</span> <span class="kw">fct_recode</span>(urbrum,</span>
<span id="cb32-1845"><a href="liitteet.html#cb32-1845"></a>        <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;A big city&quot;</span>,</span>
<span id="cb32-1846"><a href="liitteet.html#cb32-1846"></a>        <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;The suburbs or outskirts of a big city&quot;</span>,</span>
<span id="cb32-1847"><a href="liitteet.html#cb32-1847"></a>        <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;A town or a small city&quot;</span>,</span>
<span id="cb32-1848"><a href="liitteet.html#cb32-1848"></a>        <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;A country village&quot;</span>,</span>
<span id="cb32-1849"><a href="liitteet.html#cb32-1849"></a>        <span class="st">&quot;5&quot;</span> =<span class="st"> &quot;A farm or home in the country&quot;</span>,</span>
<span id="cb32-1850"><a href="liitteet.html#cb32-1850"></a>        <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>)</span>
<span id="cb32-1851"><a href="liitteet.html#cb32-1851"></a>        )</span>
<span id="cb32-1852"><a href="liitteet.html#cb32-1852"></a></span>
<span id="cb32-1853"><a href="liitteet.html#cb32-1853"></a><span class="co">#names(MCAdata1jh.dat)</span></span>
<span id="cb32-1854"><a href="liitteet.html#cb32-1854"></a><span class="co">#dim(MCAdata1jh.dat)</span></span>
<span id="cb32-1855"><a href="liitteet.html#cb32-1855"></a><span class="co">#MCAdata1jh.dat$E %&gt;% levels()</span></span>
<span id="cb32-1856"><a href="liitteet.html#cb32-1856"></a><span class="co">#MCAdata1jh.dat$S %&gt;% levels()</span></span>
<span id="cb32-1857"><a href="liitteet.html#cb32-1857"></a><span class="co">#MCAdata1jh.dat$U %&gt;% levels()</span></span>
<span id="cb32-1858"><a href="liitteet.html#cb32-1858"></a><span class="co">#MCAdata1jh.dat$age_cat %&gt;% levels()</span></span>
<span id="cb32-1859"><a href="liitteet.html#cb32-1859"></a><span class="co">#str(MCAdata1jh.dat$ga) # toimiikohan - chr-muuttuja? (16.10.20)</span></span>
<span id="cb32-1860"><a href="liitteet.html#cb32-1860"></a></span>
<span id="cb32-1861"><a href="liitteet.html#cb32-1861"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb32-1862"><a href="liitteet.html#cb32-1862"></a><span class="kw">mutate</span>(<span class="dt">gaf =</span> <span class="kw">as_factor</span>(ga))</span>
<span id="cb32-1863"><a href="liitteet.html#cb32-1863"></a></span>
<span id="cb32-1864"><a href="liitteet.html#cb32-1864"></a><span class="co">#str(MCAdata1jh.dat$gaf)</span></span>
<span id="cb32-1865"><a href="liitteet.html#cb32-1865"></a><span class="co">#levels(MCAdata1jh.dat$gaf) # järjestyksellä ei liene väliä? (16.10.20)</span></span>
<span id="cb32-1866"><a href="liitteet.html#cb32-1866"></a></span>
<span id="cb32-1867"><a href="liitteet.html#cb32-1867"></a><span class="co"># gaf ja ga: sama järjestys</span></span>
<span id="cb32-1868"><a href="liitteet.html#cb32-1868"></a></span>
<span id="cb32-1869"><a href="liitteet.html#cb32-1869"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb32-1870"><a href="liitteet.html#cb32-1870"></a><span class="st">       </span><span class="kw">mutate</span>(<span class="dt">gaf =</span> <span class="kw">fct_relevel</span>(gaf,</span>
<span id="cb32-1871"><a href="liitteet.html#cb32-1871"></a>                                 <span class="st">&quot;f1&quot;</span>,</span>
<span id="cb32-1872"><a href="liitteet.html#cb32-1872"></a>                                 <span class="st">&quot;f2&quot;</span>,</span>
<span id="cb32-1873"><a href="liitteet.html#cb32-1873"></a>                                 <span class="st">&quot;f3&quot;</span>,</span>
<span id="cb32-1874"><a href="liitteet.html#cb32-1874"></a>                                 <span class="st">&quot;f4&quot;</span>,</span>
<span id="cb32-1875"><a href="liitteet.html#cb32-1875"></a>                                 <span class="st">&quot;f5&quot;</span>,</span>
<span id="cb32-1876"><a href="liitteet.html#cb32-1876"></a>                                 <span class="st">&quot;f6&quot;</span>,</span>
<span id="cb32-1877"><a href="liitteet.html#cb32-1877"></a>                                 <span class="st">&quot;m1&quot;</span>,</span>
<span id="cb32-1878"><a href="liitteet.html#cb32-1878"></a>                                 <span class="st">&quot;m2&quot;</span>,</span>
<span id="cb32-1879"><a href="liitteet.html#cb32-1879"></a>                                 <span class="st">&quot;m3&quot;</span>,</span>
<span id="cb32-1880"><a href="liitteet.html#cb32-1880"></a>                                 <span class="st">&quot;m4&quot;</span>,</span>
<span id="cb32-1881"><a href="liitteet.html#cb32-1881"></a>                                 <span class="st">&quot;m5&quot;</span>,</span>
<span id="cb32-1882"><a href="liitteet.html#cb32-1882"></a>                                 <span class="st">&quot;m6&quot;</span>))</span>
<span id="cb32-1883"><a href="liitteet.html#cb32-1883"></a></span>
<span id="cb32-1884"><a href="liitteet.html#cb32-1884"></a><span class="co"># Lopuksi substanssimuuttutien nimet lyhyiksi</span></span>
<span id="cb32-1885"><a href="liitteet.html#cb32-1885"></a></span>
<span id="cb32-1886"><a href="liitteet.html#cb32-1886"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">a1 =</span> Q1am,</span>
<span id="cb32-1887"><a href="liitteet.html#cb32-1887"></a>                                            <span class="dt">b1 =</span> Q1bm,</span>
<span id="cb32-1888"><a href="liitteet.html#cb32-1888"></a>                                            <span class="dt">c1 =</span> Q1cm,</span>
<span id="cb32-1889"><a href="liitteet.html#cb32-1889"></a>                                            <span class="dt">d1 =</span> Q1dm,</span>
<span id="cb32-1890"><a href="liitteet.html#cb32-1890"></a>                                            <span class="dt">e1 =</span> Q1em,</span>
<span id="cb32-1891"><a href="liitteet.html#cb32-1891"></a>                                            <span class="dt">a2 =</span> Q2am,</span>
<span id="cb32-1892"><a href="liitteet.html#cb32-1892"></a>                                            <span class="dt">b2 =</span> Q2bm)</span>
<span id="cb32-1893"><a href="liitteet.html#cb32-1893"></a></span>
<span id="cb32-1894"><a href="liitteet.html#cb32-1894"></a></span>
<span id="cb32-1895"><a href="liitteet.html#cb32-1895"></a><span class="co"># TinyTeX MikTeXin tilalle, testiprojektissa toimii mutta täällä sama virheilmoitus.</span></span>
<span id="cb32-1896"><a href="liitteet.html#cb32-1896"></a><span class="co"># Kopioidaan taulukoinnit tähän, error=TRUE nin suoritus ei katkea virheeseen.</span></span>
<span id="cb32-1897"><a href="liitteet.html#cb32-1897"></a></span>
<span id="cb32-1898"><a href="liitteet.html#cb32-1898"></a></span>
<span id="cb32-1899"><a href="liitteet.html#cb32-1899"></a><span class="co">#Tarkistus</span></span>
<span id="cb32-1900"><a href="liitteet.html#cb32-1900"></a></span>
<span id="cb32-1901"><a href="liitteet.html#cb32-1901"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (a1, Q1am)</span></span>
<span id="cb32-1902"><a href="liitteet.html#cb32-1902"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (b1, Q1bm)</span></span>
<span id="cb32-1903"><a href="liitteet.html#cb32-1903"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (c1, Q1cm)</span></span>
<span id="cb32-1904"><a href="liitteet.html#cb32-1904"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (d1, Q1dm)</span></span>
<span id="cb32-1905"><a href="liitteet.html#cb32-1905"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (e1, Q1em)</span></span>
<span id="cb32-1906"><a href="liitteet.html#cb32-1906"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (a2, Q2am)</span></span>
<span id="cb32-1907"><a href="liitteet.html#cb32-1907"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (b2, Q2bm)</span></span>
<span id="cb32-1908"><a href="liitteet.html#cb32-1908"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX(gaf, ga)</span></span>
<span id="cb32-1909"><a href="liitteet.html#cb32-1909"></a></span>
<span id="cb32-1910"><a href="liitteet.html#cb32-1910"></a><span class="co"># Perustietoja - TÄSSÄ UUSI PDF-VIRHEILMOITUS 7.11.2020</span></span>
<span id="cb32-1911"><a href="liitteet.html#cb32-1911"></a><span class="co"># Ei tulosteta - kommentoidaan pois</span></span>
<span id="cb32-1912"><a href="liitteet.html#cb32-1912"></a></span>
<span id="cb32-1913"><a href="liitteet.html#cb32-1913"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,a1, type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1914"><a href="liitteet.html#cb32-1914"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,b1, type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1915"><a href="liitteet.html#cb32-1915"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,c1, type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1916"><a href="liitteet.html#cb32-1916"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,d1, type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1917"><a href="liitteet.html#cb32-1917"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,e1, type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1918"><a href="liitteet.html#cb32-1918"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,a2,type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1919"><a href="liitteet.html#cb32-1919"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,b2,type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1920"><a href="liitteet.html#cb32-1920"></a></span>
<span id="cb32-1921"><a href="liitteet.html#cb32-1921"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(gaf, ga,type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1922"><a href="liitteet.html#cb32-1922"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, age_cat,type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1923"><a href="liitteet.html#cb32-1923"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, gaf,type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1924"><a href="liitteet.html#cb32-1924"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, S, type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1925"><a href="liitteet.html#cb32-1925"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, U, type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1926"><a href="liitteet.html#cb32-1926"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, E, type = &quot;row_perc&quot;)</span></span>
<span id="cb32-1927"><a href="liitteet.html#cb32-1927"></a></span>
<span id="cb32-1928"><a href="liitteet.html#cb32-1928"></a></span>
<span id="cb32-1929"><a href="liitteet.html#cb32-1929"></a><span class="co">#Puuttuvien tietojen yleiskuva</span></span>
<span id="cb32-1930"><a href="liitteet.html#cb32-1930"></a></span>
<span id="cb32-1931"><a href="liitteet.html#cb32-1931"></a><span class="co"># Puuttuvat tiedot aineistossa - viite datan dokumentointiin jossa taulukot.</span></span>
<span id="cb32-1932"><a href="liitteet.html#cb32-1932"></a><span class="co"># Vaihtelee maittain ja muuttujittain, paljon.</span></span>
<span id="cb32-1933"><a href="liitteet.html#cb32-1933"></a></span>
<span id="cb32-1934"><a href="liitteet.html#cb32-1934"></a><span class="co"># Koko data (G1_1_data2.Rmd - skriptissä valitut muuttujat ja 25 maata)</span></span>
<span id="cb32-1935"><a href="liitteet.html#cb32-1935"></a><span class="co">#</span></span>
<span id="cb32-1936"><a href="liitteet.html#cb32-1936"></a><span class="co">#sum(!complete.cases(ISSP2012jh1d.dat)) = 9455</span></span>
<span id="cb32-1937"><a href="liitteet.html#cb32-1937"></a><span class="co">#dim(ISSP2012jh1d.dat) = 32823</span></span>
<span id="cb32-1938"><a href="liitteet.html#cb32-1938"></a><span class="co">#9455/32823 = 0.2880602</span></span>
<span id="cb32-1939"><a href="liitteet.html#cb32-1939"></a></span>
<span id="cb32-1940"><a href="liitteet.html#cb32-1940"></a><span class="co"># Puuttuvat tiedot valitussa MCA-aineistossa</span></span>
<span id="cb32-1941"><a href="liitteet.html#cb32-1941"></a></span>
<span id="cb32-1942"><a href="liitteet.html#cb32-1942"></a><span class="co">#missingMCAvars1 &lt;-  c(&quot;Q1a&quot;,&quot;Q1b&quot;, &quot;Q1c&quot;, &quot;Q1d&quot;,&quot;Q1e&quot;,&quot;Q2a&quot;,&quot;Q2b&quot;,&quot;edu&quot;,</span></span>
<span id="cb32-1943"><a href="liitteet.html#cb32-1943"></a><span class="co">#                 &quot;sosta&quot;, &quot;urbru&quot;, &quot;maa&quot;, &quot;ika&quot;, &quot;sp&quot; )</span></span>
<span id="cb32-1944"><a href="liitteet.html#cb32-1944"></a><span class="co">#missingTestMCA1.dat &lt;- ISSP2012jh1d.dat %&gt;% select(all_of(missingMCAvars1))</span></span>
<span id="cb32-1945"><a href="liitteet.html#cb32-1945"></a></span>
<span id="cb32-1946"><a href="liitteet.html#cb32-1946"></a><span class="co">#sum(!complete.cases(missingTestMCA1.dat)) = 6101</span></span>
<span id="cb32-1947"><a href="liitteet.html#cb32-1947"></a><span class="co">#dim(missingTestMCA1.dat) = 32823</span></span>
<span id="cb32-1948"><a href="liitteet.html#cb32-1948"></a><span class="co">#6101/32823 = 0.1858758 Puuttellisten havaintojen osuus.</span></span>
<span id="cb32-1949"><a href="liitteet.html#cb32-1949"></a></span>
<span id="cb32-1950"><a href="liitteet.html#cb32-1950"></a><span class="co"># Valitaan data</span></span>
<span id="cb32-1951"><a href="liitteet.html#cb32-1951"></a>mcaDat11jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(a1,b1,c1, d1, e1,a2,b2)</span>
<span id="cb32-1952"><a href="liitteet.html#cb32-1952"></a><span class="kw">dim</span>(mcaDat11jh.dat)</span>
<span id="cb32-1953"><a href="liitteet.html#cb32-1953"></a><span class="co">#glimpse(mcaDat11jh.dat)</span></span>
<span id="cb32-1954"><a href="liitteet.html#cb32-1954"></a></span>
<span id="cb32-1955"><a href="liitteet.html#cb32-1955"></a>Qmuuttujat1.mca &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb32-1956"><a href="liitteet.html#cb32-1956"></a><span class="co"># ps=&quot;&quot; muuttujan ja sen kategorian eroitinmerkki</span></span>
<span id="cb32-1957"><a href="liitteet.html#cb32-1957"></a></span>
<span id="cb32-1958"><a href="liitteet.html#cb32-1958"></a></span>
<span id="cb32-1959"><a href="liitteet.html#cb32-1959"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb32-1960"><a href="liitteet.html#cb32-1960"></a><span class="kw">plot.mjca</span>(Qmuuttujat1.mca, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb32-1961"><a href="liitteet.html#cb32-1961"></a>          <span class="dt">main =</span> <span class="st">&quot;Kysymykset Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b&quot;</span>,</span>
<span id="cb32-1962"><a href="liitteet.html#cb32-1962"></a>          <span class="dt">sub =</span> <span class="st">&quot;vastaukset S-s-?-e-E-P &quot;</span></span>
<span id="cb32-1963"><a href="liitteet.html#cb32-1963"></a>          )</span>
<span id="cb32-1964"><a href="liitteet.html#cb32-1964"></a></span>
<span id="cb32-1965"><a href="liitteet.html#cb32-1965"></a><span class="kw">par</span>(<span class="dt">cex=</span><span class="fl">0.6</span>)</span>
<span id="cb32-1966"><a href="liitteet.html#cb32-1966"></a><span class="kw">plot.mjca</span>(Qmuuttujat1.mca, <span class="dt">what =</span> <span class="kw">c</span>(<span class="st">&quot;all&quot;</span>,<span class="st">&quot;all&quot;</span>),<span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>),</span>
<span id="cb32-1967"><a href="liitteet.html#cb32-1967"></a>          <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;red&quot;</span>),</span>
<span id="cb32-1968"><a href="liitteet.html#cb32-1968"></a>           <span class="dt">main =</span> <span class="st">&quot;Kysymykset Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b&quot;</span>,</span>
<span id="cb32-1969"><a href="liitteet.html#cb32-1969"></a>          <span class="dt">sub =</span> <span class="st">&quot;vastaukset S-s-?-e-E-P, havainnot (n = 32 823) &quot;</span></span>
<span id="cb32-1970"><a href="liitteet.html#cb32-1970"></a>          )</span>
<span id="cb32-1971"><a href="liitteet.html#cb32-1971"></a></span>
<span id="cb32-1972"><a href="liitteet.html#cb32-1972"></a></span>
<span id="cb32-1973"><a href="liitteet.html#cb32-1973"></a><span class="co">#subsetcat viittaa muuttujan luokkien indeksiin</span></span>
<span id="cb32-1974"><a href="liitteet.html#cb32-1974"></a></span>
<span id="cb32-1975"><a href="liitteet.html#cb32-1975"></a>eiPvastaukset &lt;-<span class="st"> </span>(<span class="dv">1</span><span class="op">:</span><span class="dv">42</span>)[<span class="op">-</span><span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">12</span>,<span class="dv">18</span>,<span class="dv">24</span>,<span class="dv">30</span>,<span class="dv">36</span>,<span class="dv">42</span>)]</span>
<span id="cb32-1976"><a href="liitteet.html#cb32-1976"></a><span class="co"># eiPvastaukset</span></span>
<span id="cb32-1977"><a href="liitteet.html#cb32-1977"></a><span class="co">#  puuttuva tieto on kuudes kategoria kaikilla kysymyksillä</span></span>
<span id="cb32-1978"><a href="liitteet.html#cb32-1978"></a><span class="co"># 1  2  3  4  5  7  8  9 10 11 13 14 15 16 17 19 20 21 22 23 25 26 27 28 29 31</span></span>
<span id="cb32-1979"><a href="liitteet.html#cb32-1979"></a><span class="co"># 32 33 34 35 37 38 39 40 41</span></span>
<span id="cb32-1980"><a href="liitteet.html#cb32-1980"></a></span>
<span id="cb32-1981"><a href="liitteet.html#cb32-1981"></a><span class="co">#mcaDat11jh.dat[1:5,]</span></span>
<span id="cb32-1982"><a href="liitteet.html#cb32-1982"></a></span>
<span id="cb32-1983"><a href="liitteet.html#cb32-1983"></a>Qmuuttujat2.mca &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>, <span class="dt">subsetcat=</span>eiPvastaukset)</span>
<span id="cb32-1984"><a href="liitteet.html#cb32-1984"></a></span>
<span id="cb32-1985"><a href="liitteet.html#cb32-1985"></a></span>
<span id="cb32-1986"><a href="liitteet.html#cb32-1986"></a><span class="co">#subsetcat viittaa muuttujan luokkien indeksiin</span></span>
<span id="cb32-1987"><a href="liitteet.html#cb32-1987"></a></span>
<span id="cb32-1988"><a href="liitteet.html#cb32-1988"></a>eiPvastaukset &lt;-<span class="st"> </span>(<span class="dv">1</span><span class="op">:</span><span class="dv">42</span>)[<span class="op">-</span><span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">12</span>,<span class="dv">18</span>,<span class="dv">24</span>,<span class="dv">30</span>,<span class="dv">36</span>,<span class="dv">42</span>)]</span>
<span id="cb32-1989"><a href="liitteet.html#cb32-1989"></a><span class="co"># eiPvastaukset</span></span>
<span id="cb32-1990"><a href="liitteet.html#cb32-1990"></a><span class="co">#  puuttuva tieto on kuudes kategora kaikilla kysymyksillä</span></span>
<span id="cb32-1991"><a href="liitteet.html#cb32-1991"></a><span class="co"># 1  2  3  4  5  7  8  9 10 11 13 14 15 16 17 19 20 21 22 23 25 26 27 28 29 31</span></span>
<span id="cb32-1992"><a href="liitteet.html#cb32-1992"></a><span class="co"># 32 33 34 35 37 38 39 40 41</span></span>
<span id="cb32-1993"><a href="liitteet.html#cb32-1993"></a></span>
<span id="cb32-1994"><a href="liitteet.html#cb32-1994"></a><span class="co"># mcaDat11jh.dat[1:5,]</span></span>
<span id="cb32-1995"><a href="liitteet.html#cb32-1995"></a></span>
<span id="cb32-1996"><a href="liitteet.html#cb32-1996"></a>Qmuuttujat2.mca &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>, <span class="dt">subsetcat=</span>eiPvastaukset)</span>
<span id="cb32-1997"><a href="liitteet.html#cb32-1997"></a></span>
<span id="cb32-1998"><a href="liitteet.html#cb32-1998"></a><span class="kw">plot.mjca</span>(Qmuuttujat2.mca,</span>
<span id="cb32-1999"><a href="liitteet.html#cb32-1999"></a>          <span class="dt">main=</span><span class="st">&quot;Seitsemän kysymystä, viisi vastausvaihtoehtoa&quot;</span>,</span>
<span id="cb32-2000"><a href="liitteet.html#cb32-2000"></a>          <span class="dt">sub =</span> <span class="st">&quot;subset: ei puuttuvien vastausten kategorioita(*P)&quot;</span>)</span>
<span id="cb32-2001"><a href="liitteet.html#cb32-2001"></a><span class="kw">plot.mjca</span>(Qmuuttujat2.mca,</span>
<span id="cb32-2002"><a href="liitteet.html#cb32-2002"></a>          <span class="dt">what =</span> <span class="kw">c</span>(<span class="st">&quot;all&quot;</span>,<span class="st">&quot;all&quot;</span>),<span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>),</span>
<span id="cb32-2003"><a href="liitteet.html#cb32-2003"></a>          <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;red&quot;</span>),</span>
<span id="cb32-2004"><a href="liitteet.html#cb32-2004"></a>          <span class="dt">main=</span><span class="st">&quot;Seitsemän kysymystä, viisi vastausvaihtoehtoa&quot;</span>,</span>
<span id="cb32-2005"><a href="liitteet.html#cb32-2005"></a>          <span class="dt">sub =</span> <span class="st">&quot;subset: ei puuttuvien vastausten kategoriaa (*P)&quot;</span>)</span>
<span id="cb32-2006"><a href="liitteet.html#cb32-2006"></a></span>
<span id="cb32-2007"><a href="liitteet.html#cb32-2007"></a></span>
<span id="cb32-2008"><a href="liitteet.html#cb32-2008"></a><span class="kw">plot.mjca</span>(Qmuuttujat2.mca, <span class="dt">map =</span> <span class="st">&quot;rowprincipal&quot;</span>,</span>
<span id="cb32-2009"><a href="liitteet.html#cb32-2009"></a>          <span class="dt">what =</span> <span class="kw">c</span>(<span class="st">&quot;all&quot;</span>,<span class="st">&quot;all&quot;</span>),<span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>),</span>
<span id="cb32-2010"><a href="liitteet.html#cb32-2010"></a>          <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;red&quot;</span>),</span>
<span id="cb32-2011"><a href="liitteet.html#cb32-2011"></a>          <span class="dt">main=</span><span class="st">&quot;Seitsemän kysymystä, viisi vastausvaihtoehtoa - asymmetrinen kartta&quot;</span>,</span>
<span id="cb32-2012"><a href="liitteet.html#cb32-2012"></a>          <span class="dt">sub =</span> <span class="st">&quot;subset: ei puuttuvien vastausten kategoriaa (*P)&quot;</span>)</span>
<span id="cb32-2013"><a href="liitteet.html#cb32-2013"></a></span>
<span id="cb32-2014"><a href="liitteet.html#cb32-2014"></a></span>
<span id="cb32-2015"><a href="liitteet.html#cb32-2015"></a><span class="kw">summary</span>(Qmuuttujat2.mca)</span>
<span id="cb32-2016"><a href="liitteet.html#cb32-2016"></a><span class="kw">summary</span>(Qmuuttujat2.mca)</span>
<span id="cb32-2017"><a href="liitteet.html#cb32-2017"></a></span>
<span id="cb32-2018"><a href="liitteet.html#cb32-2018"></a></span>
<span id="cb32-2019"><a href="liitteet.html#cb32-2019"></a>Qmuuttujat2d3  &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>, <span class="dt">nd =</span> <span class="dv">3</span>,<span class="dt">subsetcat=</span>eiPvastaukset)</span>
<span id="cb32-2020"><a href="liitteet.html#cb32-2020"></a><span class="kw">summary</span>(Qmuuttujat2d3)</span>
<span id="cb32-2021"><a href="liitteet.html#cb32-2021"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/CAquality.png&#39;</span>)</span>
<span id="cb32-2022"><a href="liitteet.html#cb32-2022"></a></span>
<span id="cb32-2023"><a href="liitteet.html#cb32-2023"></a></span>
<span id="cb32-2024"><a href="liitteet.html#cb32-2024"></a></span>
<span id="cb32-2025"><a href="liitteet.html#cb32-2025"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/substvar_fi_Q1Q2.png&#39;</span>)</span>
<span id="cb32-2026"><a href="liitteet.html#cb32-2026"></a></span>
<span id="cb32-2027"><a href="liitteet.html#cb32-2027"></a></span>
<span id="cb32-2028"><a href="liitteet.html#cb32-2028"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/BookdownProc.png&#39;</span>)</span>
<span id="cb32-2029"><a href="liitteet.html#cb32-2029"></a></span>
<span id="cb32-2030"><a href="liitteet.html#cb32-2030"></a><span class="co"># pois out.width=&#39;50%&#39;,</span></span>
<span id="cb32-2031"><a href="liitteet.html#cb32-2031"></a></span>
<span id="cb32-2032"><a href="liitteet.html#cb32-2032"></a></span>
<span id="cb32-2033"><a href="liitteet.html#cb32-2033"></a><span class="co">#Testataan koodilohkojen listausta, näyttää toimivan mutta vaatii vielä säätämistä.</span></span>
<span id="cb32-2034"><a href="liitteet.html#cb32-2034"></a><span class="co">#Ohje löytyi [Yihui Xienin blogista](https://yihui.name/en/2018/09/code-appendix/)</span></span>
<span id="cb32-2035"><a href="liitteet.html#cb32-2035"></a><span class="co">#(luettu 26.10.2018).</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="yhteenveto.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lähteet.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["JH_capaper.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
