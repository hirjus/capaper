<!DOCTYPE html>
<html lang="fi" xml:lang="fi">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Liite 3: R - koodi | Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä</title>
  <meta name="description" content="Tutkielma korrespondenssianalyysistä graafisena data-analyysin menetelmänä." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Liite 3: R - koodi | Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Tutkielma korrespondenssianalyysistä graafisena data-analyysin menetelmänä." />
  <meta name="github-repo" content="hirjus/capaper" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Liite 3: R - koodi | Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä" />
  
  <meta name="twitter:description" content="Tutkielma korrespondenssianalyysistä graafisena data-analyysin menetelmänä." />
  

<meta name="author" content="Jussi Hirvonen" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="liite-2-tekninen-ympäristö-ja-bookdown-paketti.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Alkutoimia</a></li>
<li class="chapter" data-level="1" data-path="johdanto.html"><a href="johdanto.html"><i class="fa fa-check"></i><b>1</b> Johdanto</a><ul>
<li class="chapter" data-level="1.1" data-path="johdanto.html"><a href="johdanto.html#tutkielman-tavoite-ja-toteutus"><i class="fa fa-check"></i><b>1.1</b> Tutkielman tavoite ja toteutus</a></li>
<li class="chapter" data-level="1.2" data-path="johdanto.html"><a href="johdanto.html#korrespondenssianalyysin-historiaa"><i class="fa fa-check"></i><b>1.2</b> Korrespondenssianalyysin historiaa</a></li>
<li class="chapter" data-level="1.3" data-path="johdanto.html"><a href="johdanto.html#tutkielman-rakenne"><i class="fa fa-check"></i><b>1.3</b> Tutkielman rakenne</a></li>
<li class="chapter" data-level="1.4" data-path="johdanto.html"><a href="johdanto.html#tärkeimmät-lähteet"><i class="fa fa-check"></i><b>1.4</b> Tärkeimmät lähteet</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a><ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#aineiston-rajaaminen-maat-ja-muuttujat"><i class="fa fa-check"></i><b>2.1</b> Aineiston rajaaminen maat ja muuttujat</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html"><i class="fa fa-check"></i><b>3</b> Yksinkertainen korrespondenssianalyysi</a><ul>
<li class="chapter" data-level="3.1" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#äiti-töissä---kärsiikö-lapsi"><i class="fa fa-check"></i><b>3.1</b> Äiti töissä - kärsiikö lapsi?</a></li>
<li class="chapter" data-level="3.2" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#symmetrinen-kartta"><i class="fa fa-check"></i><b>3.2</b> Symmetrinen kartta</a></li>
<li class="chapter" data-level="3.3" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#korrespondenssianalyysin-peruskäsitteet"><i class="fa fa-check"></i><b>3.3</b> Korrespondenssianalyysin peruskäsitteet</a><ul>
<li class="chapter" data-level="3.3.1" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#asymmetrinen-kartta-ja-ideaalipisteet"><i class="fa fa-check"></i><b>3.3.1</b> Asymmetrinen kartta ja ideaalipisteet</a></li>
<li class="chapter" data-level="3.3.2" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#barysentrinen-periaate"><i class="fa fa-check"></i><b>3.3.2</b> Barysentrinen periaate</a></li>
<li class="chapter" data-level="3.3.3" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#kontribuutiot-kartalla"><i class="fa fa-check"></i><b>3.3.3</b> Kontribuutiot kartalla</a></li>
<li class="chapter" data-level="3.3.4" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#massat"><i class="fa fa-check"></i><b>3.3.4</b> Massat</a></li>
<li class="chapter" data-level="3.3.5" data-path="yksinkertainen-korrespondenssianalyysi.html"><a href="yksinkertainen-korrespondenssianalyysi.html#karttojen-erot"><i class="fa fa-check"></i><b>3.3.5</b> Karttojen erot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="täydentävät-pisteet.html"><a href="täydentävät-pisteet.html"><i class="fa fa-check"></i><b>4</b> Täydentävät pisteet</a><ul>
<li class="chapter" data-level="4.1" data-path="täydentävät-pisteet.html"><a href="täydentävät-pisteet.html#saksan-ja-belgian-alueet"><i class="fa fa-check"></i><b>4.1</b> Saksan ja Belgian alueet</a></li>
<li class="chapter" data-level="4.2" data-path="täydentävät-pisteet.html"><a href="täydentävät-pisteet.html#korrespondenssianalyysin-numeeriset-tulokset"><i class="fa fa-check"></i><b>4.2</b> Korrespondenssianalyysin numeeriset tulokset</a></li>
<li class="chapter" data-level="4.3" data-path="täydentävät-pisteet.html"><a href="täydentävät-pisteet.html#esimerkki-3d--kartasta---saksan-ja-belgian-dimensiot"><i class="fa fa-check"></i><b>4.3</b> Esimerkki 3d- kartasta - Saksan ja Belgian dimensiot</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="yhteisvaikutusmuuttujat.html"><a href="yhteisvaikutusmuuttujat.html"><i class="fa fa-check"></i><b>5</b> Yhteisvaikutusmuuttujat</a><ul>
<li class="chapter" data-level="5.1" data-path="yhteisvaikutusmuuttujat.html"><a href="yhteisvaikutusmuuttujat.html#ikä-ja-sukupuoli"><i class="fa fa-check"></i><b>5.1</b> Ikä ja sukupuoli</a></li>
<li class="chapter" data-level="5.2" data-path="yhteisvaikutusmuuttujat.html"><a href="yhteisvaikutusmuuttujat.html#ikä-sukupuoli-ja-maa"><i class="fa fa-check"></i><b>5.2</b> Ikä, sukupuoli ja maa</a></li>
<li class="chapter" data-level="5.3" data-path="yhteisvaikutusmuuttujat.html"><a href="yhteisvaikutusmuuttujat.html#stabiilisuus"><i class="fa fa-check"></i><b>5.3</b> Stabiilisuus</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="osajoukon-korrespondenssianalyysi.html"><a href="osajoukon-korrespondenssianalyysi.html"><i class="fa fa-check"></i><b>6</b> Osajoukon korrespondenssianalyysi</a></li>
<li class="chapter" data-level="7" data-path="monimuuttuja-korrespondenssianalyysi-mca.html"><a href="monimuuttuja-korrespondenssianalyysi-mca.html"><i class="fa fa-check"></i><b>7</b> Monimuuttuja-korrespondenssianalyysi (MCA)</a><ul>
<li class="chapter" data-level="7.1" data-path="monimuuttuja-korrespondenssianalyysi-mca.html"><a href="monimuuttuja-korrespondenssianalyysi-mca.html#pinotut-ja-yhdistetyt-taulukot"><i class="fa fa-check"></i><b>7.1</b> Pinotut ja yhdistetyt taulukot</a></li>
<li class="chapter" data-level="7.2" data-path="monimuuttuja-korrespondenssianalyysi-mca.html"><a href="monimuuttuja-korrespondenssianalyysi-mca.html#mca---monimuuttujakorrespondenssianalyysi"><i class="fa fa-check"></i><b>7.2</b> MCA - monimuuttujakorrespondenssianalyysi</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="yhteenveto.html"><a href="yhteenveto.html"><i class="fa fa-check"></i><b>8</b> Yhteenveto</a></li>
<li class="chapter" data-level="" data-path="lähteet.html"><a href="lähteet.html"><i class="fa fa-check"></i>Lähteet</a></li>
<li class="appendix"><span><b>Liitteet</b></span></li>
<li class="chapter" data-level="" data-path="liite-1-korrespondenssianalyysin-teoriaa.html"><a href="liite-1-korrespondenssianalyysin-teoriaa.html"><i class="fa fa-check"></i>Liite 1: Korrespondenssianalyysin teoriaa</a><ul>
<li class="chapter" data-level="" data-path="liite-1-korrespondenssianalyysin-teoriaa.html"><a href="liite-1-korrespondenssianalyysin-teoriaa.html#korrespondenssianalyysin-perusyhtälöt-ja-kaavat"><i class="fa fa-check"></i>Korrespondenssianalyysin perusyhtälöt ja kaavat</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="liite-2-tekninen-ympäristö-ja-bookdown-paketti.html"><a href="liite-2-tekninen-ympäristö-ja-bookdown-paketti.html"><i class="fa fa-check"></i>Liite 2: Tekninen ympäristö ja Bookdown-paketti</a></li>
<li class="chapter" data-level="" data-path="liite-3-r-koodi.html"><a href="liite-3-r-koodi.html"><i class="fa fa-check"></i>Liite 3: R - koodi</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="liite-3-r---koodi" class="section level1 unnumbered">
<h1>Liite 3: R - koodi</h1>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="liite-3-r-koodi.html#cb12-1"></a><span class="co"># testaukseen 7.11.2020 virheilmoituksia varten arvo TRUE</span></span>
<span id="cb12-2"><a href="liite-3-r-koodi.html#cb12-2"></a><span class="kw">options</span>(<span class="dt">tinytex.verbose =</span> <span class="ot">TRUE</span>)</span>
<span id="cb12-3"><a href="liite-3-r-koodi.html#cb12-3"></a></span>
<span id="cb12-4"><a href="liite-3-r-koodi.html#cb12-4"></a><span class="co"># 18.10.2020</span></span>
<span id="cb12-5"><a href="liite-3-r-koodi.html#cb12-5"></a><span class="kw">library</span>(rgl)</span>
<span id="cb12-6"><a href="liite-3-r-koodi.html#cb12-6"></a><span class="kw">library</span>(ca)</span>
<span id="cb12-7"><a href="liite-3-r-koodi.html#cb12-7"></a><span class="kw">library</span>(haven)</span>
<span id="cb12-8"><a href="liite-3-r-koodi.html#cb12-8"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb12-9"><a href="liite-3-r-koodi.html#cb12-9"></a><span class="kw">library</span>(knitr)</span>
<span id="cb12-10"><a href="liite-3-r-koodi.html#cb12-10"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb12-11"><a href="liite-3-r-koodi.html#cb12-11"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb12-12"><a href="liite-3-r-koodi.html#cb12-12"></a><span class="kw">library</span>(rmarkdown)</span>
<span id="cb12-13"><a href="liite-3-r-koodi.html#cb12-13"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb12-14"><a href="liite-3-r-koodi.html#cb12-14"></a><span class="kw">library</span>(furniture)</span>
<span id="cb12-15"><a href="liite-3-r-koodi.html#cb12-15"></a><span class="kw">library</span>(scales) <span class="co"># G_1_2 - kuva</span></span>
<span id="cb12-16"><a href="liite-3-r-koodi.html#cb12-16"></a><span class="kw">library</span>(reshape2)  <span class="co"># G_1_2 - kuva</span></span>
<span id="cb12-17"><a href="liite-3-r-koodi.html#cb12-17"></a><span class="kw">library</span>(printr) <span class="co">#19.5.18 taulukoiden ja matriisien tulostukseen</span></span>
<span id="cb12-18"><a href="liite-3-r-koodi.html#cb12-18"></a><span class="kw">library</span>(bookdown)</span>
<span id="cb12-19"><a href="liite-3-r-koodi.html#cb12-19"></a><span class="kw">library</span>(tinytex)</span>
<span id="cb12-20"><a href="liite-3-r-koodi.html#cb12-20"></a><span class="kw">library</span>(assertthat)</span>
<span id="cb12-21"><a href="liite-3-r-koodi.html#cb12-21"></a></span>
<span id="cb12-22"><a href="liite-3-r-koodi.html#cb12-22"></a><span class="co"># eval = FALSE 24.11.2020</span></span>
<span id="cb12-23"><a href="liite-3-r-koodi.html#cb12-23"></a><span class="co"># automatically create a bib database for R packages</span></span>
<span id="cb12-24"><a href="liite-3-r-koodi.html#cb12-24"></a>knitr<span class="op">::</span><span class="kw">write_bib</span>(<span class="kw">c</span>(</span>
<span id="cb12-25"><a href="liite-3-r-koodi.html#cb12-25"></a>  <span class="kw">.packages</span>(), <span class="st">&#39;bookdown&#39;</span>, <span class="st">&#39;knitr&#39;</span>, <span class="st">&#39;rmarkdown&#39;</span></span>
<span id="cb12-26"><a href="liite-3-r-koodi.html#cb12-26"></a>), <span class="st">&#39;packages.bib&#39;</span>)</span>
<span id="cb12-27"><a href="liite-3-r-koodi.html#cb12-27"></a></span>
<span id="cb12-28"><a href="liite-3-r-koodi.html#cb12-28"></a><span class="co"># include FALSE: ei koodia eikä tulostusta dokumenttiin - poistettava turhia</span></span>
<span id="cb12-29"><a href="liite-3-r-koodi.html#cb12-29"></a><span class="co"># välitulostuksia (18.10.2020)</span></span>
<span id="cb12-30"><a href="liite-3-r-koodi.html#cb12-30"></a><span class="co"># Aineiston rajaamisen kolme vaihetta (10.2018)</span></span>
<span id="cb12-31"><a href="liite-3-r-koodi.html#cb12-31"></a><span class="co"># </span></span>
<span id="cb12-32"><a href="liite-3-r-koodi.html#cb12-32"></a><span class="co"># TIEDOSTOJEN NIMEÄMINEN</span></span>
<span id="cb12-33"><a href="liite-3-r-koodi.html#cb12-33"></a><span class="co">#</span></span>
<span id="cb12-34"><a href="liite-3-r-koodi.html#cb12-34"></a><span class="co"># R-datatiedostot .data - tarkenteella ovat osajoukkoja koko ISSP-datasta ISSP2012.data</span></span>
<span id="cb12-35"><a href="liite-3-r-koodi.html#cb12-35"></a><span class="co"># R-datatiedostot .dat - tarkenteella: mukana alkuperäisten muuttujien muunnoksia </span></span>
<span id="cb12-36"><a href="liite-3-r-koodi.html#cb12-36"></a><span class="co"># (yleensä as_factor), alkuperäisissä muuttujissa mukana SPSS-tiedoston metadata.</span></span>
<span id="cb12-37"><a href="liite-3-r-koodi.html#cb12-37"></a><span class="co">#</span></span>
<span id="cb12-38"><a href="liite-3-r-koodi.html#cb12-38"></a><span class="co"># Luokittelumuuttujan tyyppi on datan lukemisen jälkeen yleensä merkkijono (char) </span></span>
<span id="cb12-39"><a href="liite-3-r-koodi.html#cb12-39"></a><span class="co"># ja haven_labelled. </span></span>
<span id="cb12-40"><a href="liite-3-r-koodi.html#cb12-40"></a><span class="co">#</span></span>
<span id="cb12-41"><a href="liite-3-r-koodi.html#cb12-41"></a><span class="co"># Muutetaan R-datassa ordinaali- tai  nominaaliasteikon muuttujat haven-paketin </span></span>
<span id="cb12-42"><a href="liite-3-r-koodi.html#cb12-42"></a><span class="co"># as_factor - funktiolla faktoreiksi. R:n faktorityypin muuttujille voidaan tarvittaessa </span></span>
<span id="cb12-43"><a href="liite-3-r-koodi.html#cb12-43"></a><span class="co"># määritellä järjestys, toistaiseksi niin ei tehdä (25.9.2018). </span></span>
<span id="cb12-44"><a href="liite-3-r-koodi.html#cb12-44"></a><span class="co">#</span></span>
<span id="cb12-45"><a href="liite-3-r-koodi.html#cb12-45"></a><span class="co"># Muunnetun muuttujan rinnalla säilytetään SPSS-tiedostosta luettu muuttja, metatiedot säilyvät </span></span>
<span id="cb12-46"><a href="liite-3-r-koodi.html#cb12-46"></a><span class="co"># alkuperäisessä.</span></span>
<span id="cb12-47"><a href="liite-3-r-koodi.html#cb12-47"></a><span class="co">#       </span></span>
<span id="cb12-48"><a href="liite-3-r-koodi.html#cb12-48"></a><span class="co"># R-datatiedostot joiden nimen loppuosa on muotoa *esim1.dat: käytetään analyyseissä</span></span>
<span id="cb12-49"><a href="liite-3-r-koodi.html#cb12-49"></a><span class="co">#</span></span>
<span id="cb12-50"><a href="liite-3-r-koodi.html#cb12-50"></a><span class="co"># 1. VALITAAN MAAT (25) -&gt; ISSP2012jh1a.data. Muuttujat koodilohkossa datasel_vars1</span></span>
<span id="cb12-51"><a href="liite-3-r-koodi.html#cb12-51"></a><span class="co">#</span></span>
<span id="cb12-52"><a href="liite-3-r-koodi.html#cb12-52"></a><span class="co"># kolme maa-muuttujaa datassa. V3 erottelee joidenkin maiden alueita, V4 on koko </span></span>
<span id="cb12-53"><a href="liite-3-r-koodi.html#cb12-53"></a><span class="co"># maan koodi ja C_ALPHAN on maan kaksimerkkinen tunnus.</span></span>
<span id="cb12-54"><a href="liite-3-r-koodi.html#cb12-54"></a><span class="co">#</span></span>
<span id="cb12-55"><a href="liite-3-r-koodi.html#cb12-55"></a><span class="co"># V3 - Country/ Sample ISO 3166 Code (see V4 for codes for whole nation states)</span></span>
<span id="cb12-56"><a href="liite-3-r-koodi.html#cb12-56"></a><span class="co"># V3 erot valituissa maissa</span></span>
<span id="cb12-57"><a href="liite-3-r-koodi.html#cb12-57"></a><span class="co"># 5601 BE-FLA-Belgium/ Flanders</span></span>
<span id="cb12-58"><a href="liite-3-r-koodi.html#cb12-58"></a><span class="co"># 5602 BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb12-59"><a href="liite-3-r-koodi.html#cb12-59"></a><span class="co"># 5603 BE-BRU-Belgium/ Brussels</span></span>
<span id="cb12-60"><a href="liite-3-r-koodi.html#cb12-60"></a><span class="co"># 27601 DE-W-Germany-West</span></span>
<span id="cb12-61"><a href="liite-3-r-koodi.html#cb12-61"></a><span class="co"># 27602 DE-E-Germany-East</span></span>
<span id="cb12-62"><a href="liite-3-r-koodi.html#cb12-62"></a><span class="co"># 62001 PT-Portugal 2012: first fieldwork round (main sample)</span></span>
<span id="cb12-63"><a href="liite-3-r-koodi.html#cb12-63"></a><span class="co"># 62002 PT-Portugal 2012: second fieldwork round (complementary sample)</span></span>
<span id="cb12-64"><a href="liite-3-r-koodi.html#cb12-64"></a><span class="co"># Myös tämä on erikoinen, näyttää olevan vakio kun V4 = 826:</span></span>
<span id="cb12-65"><a href="liite-3-r-koodi.html#cb12-65"></a><span class="co"># 82601 GB-GBN-Great Britain</span></span>
<span id="cb12-66"><a href="liite-3-r-koodi.html#cb12-66"></a><span class="co"># Portugalissa ainestoa täydennettiin, koska siinä oli puutteita. Jako ei siis ole oleellinen,</span></span>
<span id="cb12-67"><a href="liite-3-r-koodi.html#cb12-67"></a><span class="co"># mutta muuut ovat. Tähdellä merkityt maat valitaan johdattelevaan esimerkkiin.</span></span>
<span id="cb12-68"><a href="liite-3-r-koodi.html#cb12-68"></a><span class="co">#</span></span>
<span id="cb12-69"><a href="liite-3-r-koodi.html#cb12-69"></a><span class="co"># Maat (25)</span></span>
<span id="cb12-70"><a href="liite-3-r-koodi.html#cb12-70"></a><span class="co">#</span></span>
<span id="cb12-71"><a href="liite-3-r-koodi.html#cb12-71"></a><span class="co"># 36 AU-Australia</span></span>
<span id="cb12-72"><a href="liite-3-r-koodi.html#cb12-72"></a><span class="co"># 40 AT-Austria</span></span>
<span id="cb12-73"><a href="liite-3-r-koodi.html#cb12-73"></a><span class="co"># 56 BE-Belgium*</span></span>
<span id="cb12-74"><a href="liite-3-r-koodi.html#cb12-74"></a><span class="co"># 100 BG-Bulgaria*</span></span>
<span id="cb12-75"><a href="liite-3-r-koodi.html#cb12-75"></a><span class="co"># 124 CA-Canada</span></span>
<span id="cb12-76"><a href="liite-3-r-koodi.html#cb12-76"></a><span class="co"># 191 HR-Croatia</span></span>
<span id="cb12-77"><a href="liite-3-r-koodi.html#cb12-77"></a><span class="co"># 203 CZ-Czech Republic</span></span>
<span id="cb12-78"><a href="liite-3-r-koodi.html#cb12-78"></a><span class="co"># 208 DK-Denmark*</span></span>
<span id="cb12-79"><a href="liite-3-r-koodi.html#cb12-79"></a><span class="co"># 246 FI-Finland*</span></span>
<span id="cb12-80"><a href="liite-3-r-koodi.html#cb12-80"></a><span class="co"># 250 FR-France</span></span>
<span id="cb12-81"><a href="liite-3-r-koodi.html#cb12-81"></a><span class="co"># 276 DE-Germany*</span></span>
<span id="cb12-82"><a href="liite-3-r-koodi.html#cb12-82"></a><span class="co"># 348 HU-Hungary*</span></span>
<span id="cb12-83"><a href="liite-3-r-koodi.html#cb12-83"></a><span class="co"># 352 IS-Iceland</span></span>
<span id="cb12-84"><a href="liite-3-r-koodi.html#cb12-84"></a><span class="co"># 372 IE-Ireland</span></span>
<span id="cb12-85"><a href="liite-3-r-koodi.html#cb12-85"></a><span class="co"># 428 LV-Latvia</span></span>
<span id="cb12-86"><a href="liite-3-r-koodi.html#cb12-86"></a><span class="co"># 440 LT-Lithuania</span></span>
<span id="cb12-87"><a href="liite-3-r-koodi.html#cb12-87"></a><span class="co"># 528 NL-Netherlands</span></span>
<span id="cb12-88"><a href="liite-3-r-koodi.html#cb12-88"></a><span class="co"># 578 NO-Norway</span></span>
<span id="cb12-89"><a href="liite-3-r-koodi.html#cb12-89"></a><span class="co"># 616 PL-Poland</span></span>
<span id="cb12-90"><a href="liite-3-r-koodi.html#cb12-90"></a><span class="co"># 620 PT-Portugal</span></span>
<span id="cb12-91"><a href="liite-3-r-koodi.html#cb12-91"></a><span class="co"># 643 RU-Russia</span></span>
<span id="cb12-92"><a href="liite-3-r-koodi.html#cb12-92"></a><span class="co"># 703 SK-Slovakia</span></span>
<span id="cb12-93"><a href="liite-3-r-koodi.html#cb12-93"></a><span class="co"># 705 SI-Slovenia</span></span>
<span id="cb12-94"><a href="liite-3-r-koodi.html#cb12-94"></a><span class="co"># 752 SE-Sweden</span></span>
<span id="cb12-95"><a href="liite-3-r-koodi.html#cb12-95"></a><span class="co"># 756 CH-Switzerland</span></span>
<span id="cb12-96"><a href="liite-3-r-koodi.html#cb12-96"></a><span class="co"># 826 GB-Great Britain and/or United Kingdom - jätetään pois jotta saadaan TOPBOT </span></span>
<span id="cb12-97"><a href="liite-3-r-koodi.html#cb12-97"></a><span class="co">#                          -muuttuja mukaan (top-bottom self-placement) .(9.10.18)</span></span>
<span id="cb12-98"><a href="liite-3-r-koodi.html#cb12-98"></a><span class="co"># 840 US-United States - jätetään pois, jotta saadaan TOPBOT-muuttuja mukaan.(10.10.18)</span></span>
<span id="cb12-99"><a href="liite-3-r-koodi.html#cb12-99"></a><span class="co">#</span></span>
<span id="cb12-100"><a href="liite-3-r-koodi.html#cb12-100"></a><span class="co"># Belgian ja Saksan alueet:</span></span>
<span id="cb12-101"><a href="liite-3-r-koodi.html#cb12-101"></a><span class="co">#  V3</span></span>
<span id="cb12-102"><a href="liite-3-r-koodi.html#cb12-102"></a><span class="co">#  5601     BE-FLA-Belgium/ Flanders</span></span>
<span id="cb12-103"><a href="liite-3-r-koodi.html#cb12-103"></a><span class="co">#  5602     BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb12-104"><a href="liite-3-r-koodi.html#cb12-104"></a><span class="co">#  5603     BE-BRU-Belgium/ Brussels</span></span>
<span id="cb12-105"><a href="liite-3-r-koodi.html#cb12-105"></a><span class="co"># 27601     DE-W-Germany-West</span></span>
<span id="cb12-106"><a href="liite-3-r-koodi.html#cb12-106"></a><span class="co"># 27602     DE-E-Germany-East</span></span>
<span id="cb12-107"><a href="liite-3-r-koodi.html#cb12-107"></a><span class="co">#</span></span>
<span id="cb12-108"><a href="liite-3-r-koodi.html#cb12-108"></a><span class="co"># Unkari (348) toistaiseksi mukana, mutta joissain kysymyksissä myös Unkarilla on </span></span>
<span id="cb12-109"><a href="liite-3-r-koodi.html#cb12-109"></a><span class="co"># poikkeavia vastausvaihtoehtoja(HU_V18, HU_V19,HU_V20). Jos näitä muuttujia käytetään, </span></span>
<span id="cb12-110"><a href="liite-3-r-koodi.html#cb12-110"></a><span class="co"># Unkari on parempi jättää pois. </span></span>
<span id="cb12-111"><a href="liite-3-r-koodi.html#cb12-111"></a><span class="co"># </span></span>
<span id="cb12-112"><a href="liite-3-r-koodi.html#cb12-112"></a><span class="co">#</span></span>
<span id="cb12-113"><a href="liite-3-r-koodi.html#cb12-113"></a><span class="co"># (25.4.2018) user_na  </span></span>
<span id="cb12-114"><a href="liite-3-r-koodi.html#cb12-114"></a><span class="co"># haven-paketin read_spss - funktiolla voi r-tiedostoon lukea myös SPSS:n sallimat kolme </span></span>
<span id="cb12-115"><a href="liite-3-r-koodi.html#cb12-115"></a><span class="co"># (yleensä 7, 8, 9) tarkempaa koodia puuttuvalle tiedolle.</span></span>
<span id="cb12-116"><a href="liite-3-r-koodi.html#cb12-116"></a><span class="co"># &quot;If TRUE variables with user defined missing will be read into labelled_spss objects. </span></span>
<span id="cb12-117"><a href="liite-3-r-koodi.html#cb12-117"></a><span class="co"># If FALSE, the default, user-defined missings will be converted to NA&quot;</span></span>
<span id="cb12-118"><a href="liite-3-r-koodi.html#cb12-118"></a><span class="co"># https://www.rdocumentation.org/packages/haven/versions/1.1.0/topics/read_spss</span></span>
<span id="cb12-119"><a href="liite-3-r-koodi.html#cb12-119"></a><span class="co">#</span></span>
<span id="cb12-120"><a href="liite-3-r-koodi.html#cb12-120"></a> </span>
<span id="cb12-121"><a href="liite-3-r-koodi.html#cb12-121"></a>ISSP2012jh.data &lt;-<span class="st"> </span><span class="kw">read_spss</span>(<span class="st">&quot;data/ZA5900_v4-0-0.sav&quot;</span>) <span class="co">#luetaan alkuperäinen data R- dataksi (df).</span></span>
<span id="cb12-122"><a href="liite-3-r-koodi.html#cb12-122"></a></span>
<span id="cb12-123"><a href="liite-3-r-koodi.html#cb12-123"></a><span class="co">#str(ISSP2012jh.data)</span></span>
<span id="cb12-124"><a href="liite-3-r-koodi.html#cb12-124"></a></span>
<span id="cb12-125"><a href="liite-3-r-koodi.html#cb12-125"></a>incl_countries25 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">36</span>, <span class="dv">40</span>, <span class="dv">56</span>,<span class="dv">100</span>, <span class="dv">124</span>, <span class="dv">191</span>, <span class="dv">203</span>, <span class="dv">208</span>, <span class="dv">246</span>, <span class="dv">250</span>, <span class="dv">276</span>, <span class="dv">348</span>, <span class="dv">352</span>, </span>
<span id="cb12-126"><a href="liite-3-r-koodi.html#cb12-126"></a>                      <span class="dv">372</span>, <span class="dv">428</span>, <span class="dv">440</span>, <span class="dv">528</span>, <span class="dv">578</span>, <span class="dv">616</span>, <span class="dv">620</span>, <span class="dv">643</span>, <span class="dv">703</span>, <span class="dv">705</span>, <span class="dv">752</span>, <span class="dv">756</span>)</span>
<span id="cb12-127"><a href="liite-3-r-koodi.html#cb12-127"></a></span>
<span id="cb12-128"><a href="liite-3-r-koodi.html#cb12-128"></a><span class="co">#str(ISSP2012jh.data)</span></span>
<span id="cb12-129"><a href="liite-3-r-koodi.html#cb12-129"></a><span class="co">#str(ISSP2012jh.data) #61754 obs. of  420 variables - kaikki</span></span>
<span id="cb12-130"><a href="liite-3-r-koodi.html#cb12-130"></a></span>
<span id="cb12-131"><a href="liite-3-r-koodi.html#cb12-131"></a>ISSP2012jh1a.data &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012jh.data, V4 <span class="op">%in%</span><span class="st"> </span>incl_countries25)</span>
<span id="cb12-132"><a href="liite-3-r-koodi.html#cb12-132"></a></span>
<span id="cb12-133"><a href="liite-3-r-koodi.html#cb12-133"></a><span class="co">#head(ISSP2012jh1a.data)</span></span>
<span id="cb12-134"><a href="liite-3-r-koodi.html#cb12-134"></a><span class="co">#str(ISSP2012jh1a.data) #34271 obs. of  420 variables, Espanja ja Iso-Britannia</span></span>
<span id="cb12-135"><a href="liite-3-r-koodi.html#cb12-135"></a><span class="co">#                       pois (9.10.2018)</span></span>
<span id="cb12-136"><a href="liite-3-r-koodi.html#cb12-136"></a><span class="co"># str(ISSP2012jh1a.data) # 32969 obs. of  420 variable, Espanja Iso-Britannia, </span></span>
<span id="cb12-137"><a href="liite-3-r-koodi.html#cb12-137"></a><span class="co">#                        USA pois (10.10.2018)</span></span>
<span id="cb12-138"><a href="liite-3-r-koodi.html#cb12-138"></a><span class="co">#</span></span>
<span id="cb12-139"><a href="liite-3-r-koodi.html#cb12-139"></a><span class="co"># names() # muuttujen nimet</span></span>
<span id="cb12-140"><a href="liite-3-r-koodi.html#cb12-140"></a><span class="co"># Maakohtaiset muuttujat (kun on poikettu ISSP2012 - vastausvaihtoehdoista tms.) </span></span>
<span id="cb12-141"><a href="liite-3-r-koodi.html#cb12-141"></a><span class="co"># on aineistossa eroteltu maatunnus-etuliitteellä (esimerkiksi ES_V7).</span></span>
<span id="cb12-142"><a href="liite-3-r-koodi.html#cb12-142"></a><span class="co"># Demografisissa ja muissa taustamuuttujissa suuri osa tiedoista on kerätty maa-</span></span>
<span id="cb12-143"><a href="liite-3-r-koodi.html#cb12-143"></a><span class="co"># kohtaisilla lomakkeilla. Vertailukelpoiset muuttujat on konstruoitu niistä.</span></span>
<span id="cb12-144"><a href="liite-3-r-koodi.html#cb12-144"></a><span class="co"># Muuttujia on 420, vain osa yhteisiä kaikille maille.</span></span>
<span id="cb12-145"><a href="liite-3-r-koodi.html#cb12-145"></a></span>
<span id="cb12-146"><a href="liite-3-r-koodi.html#cb12-146"></a><span class="co"># include FALSE: ei koodia eikä tulostusta dokumenttiin - poistettava turhia</span></span>
<span id="cb12-147"><a href="liite-3-r-koodi.html#cb12-147"></a><span class="co"># välitulostuksia (18.10.2020)</span></span>
<span id="cb12-148"><a href="liite-3-r-koodi.html#cb12-148"></a><span class="co"># 2. VALITAAN MUUTTUJAT  -&gt; ISSP2012jh1b.data. Maat valittu koodilohkossa datasel_country1</span></span>
<span id="cb12-149"><a href="liite-3-r-koodi.html#cb12-149"></a><span class="co">#</span></span>
<span id="cb12-150"><a href="liite-3-r-koodi.html#cb12-150"></a><span class="co">#</span></span>
<span id="cb12-151"><a href="liite-3-r-koodi.html#cb12-151"></a><span class="co"># Muuttujat on luokiteltu dokumentissa ZA5900_overview.pdf</span></span>
<span id="cb12-152"><a href="liite-3-r-koodi.html#cb12-152"></a><span class="co"># https://zacat.gesis.org/webview/index.jsp?object=http://zacat.gesis.org/obj/fStudy/ZA5900</span></span>
<span id="cb12-153"><a href="liite-3-r-koodi.html#cb12-153"></a><span class="co"># Study Description -&gt; Other Study Description -&gt; Related Materials</span></span>
<span id="cb12-154"><a href="liite-3-r-koodi.html#cb12-154"></a><span class="co"># </span></span>
<span id="cb12-155"><a href="liite-3-r-koodi.html#cb12-155"></a><span class="co">#</span></span>
<span id="cb12-156"><a href="liite-3-r-koodi.html#cb12-156"></a></span>
<span id="cb12-157"><a href="liite-3-r-koodi.html#cb12-157"></a><span class="co"># METADATA</span></span>
<span id="cb12-158"><a href="liite-3-r-koodi.html#cb12-158"></a></span>
<span id="cb12-159"><a href="liite-3-r-koodi.html#cb12-159"></a>metavars1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;V1&quot;</span>, <span class="st">&quot;V2&quot;</span>, <span class="st">&quot;DOI&quot;</span>)</span>
<span id="cb12-160"><a href="liite-3-r-koodi.html#cb12-160"></a></span>
<span id="cb12-161"><a href="liite-3-r-koodi.html#cb12-161"></a><span class="co">#MAA - maakoodit ja maan kahden merkin tunnus</span></span>
<span id="cb12-162"><a href="liite-3-r-koodi.html#cb12-162"></a></span>
<span id="cb12-163"><a href="liite-3-r-koodi.html#cb12-163"></a>countryvars1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;V3&quot;</span>,<span class="st">&quot;V4&quot;</span>,<span class="st">&quot;C_ALPHAN&quot;</span>)</span>
<span id="cb12-164"><a href="liite-3-r-koodi.html#cb12-164"></a></span>
<span id="cb12-165"><a href="liite-3-r-koodi.html#cb12-165"></a><span class="co"># SUBSTANSSIMUUTTUJAT - Attitudes towards family and gender roles (9)</span></span>
<span id="cb12-166"><a href="liite-3-r-koodi.html#cb12-166"></a><span class="co">#</span></span>
<span id="cb12-167"><a href="liite-3-r-koodi.html#cb12-167"></a><span class="co"># Yhdeksän kysymystä (lyhennetyt versiot, englanniksi), vastausvaihtoehdot Q1-Q2</span></span>
<span id="cb12-168"><a href="liite-3-r-koodi.html#cb12-168"></a><span class="co">#</span></span>
<span id="cb12-169"><a href="liite-3-r-koodi.html#cb12-169"></a><span class="co"># 1 = täysin samaa mieltä, 2 = samaa mieltä, 3 = ei samaa eikä eri mieltä, </span></span>
<span id="cb12-170"><a href="liite-3-r-koodi.html#cb12-170"></a><span class="co"># 4 = eri mieltä, 5 = täysin eri mieltä</span></span>
<span id="cb12-171"><a href="liite-3-r-koodi.html#cb12-171"></a><span class="co"># </span></span>
<span id="cb12-172"><a href="liite-3-r-koodi.html#cb12-172"></a><span class="co"># Q1a Working mother can have warm relation with child</span></span>
<span id="cb12-173"><a href="liite-3-r-koodi.html#cb12-173"></a><span class="co"># Q1b Pre-school child suffers through working mother</span></span>
<span id="cb12-174"><a href="liite-3-r-koodi.html#cb12-174"></a><span class="co"># Q1c Family life suffers through working mother</span></span>
<span id="cb12-175"><a href="liite-3-r-koodi.html#cb12-175"></a><span class="co"># Q1d Women’s preference: home and children</span></span>
<span id="cb12-176"><a href="liite-3-r-koodi.html#cb12-176"></a><span class="co"># Q1e Being housewife is satisfying</span></span>
<span id="cb12-177"><a href="liite-3-r-koodi.html#cb12-177"></a><span class="co">#</span></span>
<span id="cb12-178"><a href="liite-3-r-koodi.html#cb12-178"></a><span class="co"># Q2a Both should contribute to household income</span></span>
<span id="cb12-179"><a href="liite-3-r-koodi.html#cb12-179"></a><span class="co"># Q2b Men’s job is earn money, women’s job household</span></span>
<span id="cb12-180"><a href="liite-3-r-koodi.html#cb12-180"></a><span class="co">#</span></span>
<span id="cb12-181"><a href="liite-3-r-koodi.html#cb12-181"></a><span class="co"># Q3a Should women work: Child under school age </span></span>
<span id="cb12-182"><a href="liite-3-r-koodi.html#cb12-182"></a><span class="co"># Q3b Should women work: Youngest kid at school</span></span>
<span id="cb12-183"><a href="liite-3-r-koodi.html#cb12-183"></a><span class="co"># 1= kokopäivätyö, 2 = osa-aikatyö, 3 = pysyä kotona, 8 = en osaa sanoa</span></span>
<span id="cb12-184"><a href="liite-3-r-koodi.html#cb12-184"></a><span class="co"># (can&#39;t choose), 9 = no answer</span></span>
<span id="cb12-185"><a href="liite-3-r-koodi.html#cb12-185"></a><span class="co">#</span></span>
<span id="cb12-186"><a href="liite-3-r-koodi.html#cb12-186"></a><span class="co"># Kysymysten Q3a ja Q3b eos-vastaus ei ole sama kuin &quot;en samaa enkä eri  mieltä&quot;</span></span>
<span id="cb12-187"><a href="liite-3-r-koodi.html#cb12-187"></a><span class="co"># (ns. neutraali # vaihtoehto), mutta kieltäytymisiä jne. (koodi 9) on aika</span></span>
<span id="cb12-188"><a href="liite-3-r-koodi.html#cb12-188"></a><span class="co"># vähän. Kolmessa # maassa ne on yhdistety: </span></span>
<span id="cb12-189"><a href="liite-3-r-koodi.html#cb12-189"></a><span class="co"># (8 Can&#39;t choose, CA:can&#39;t choose+no answer, KR:don&#39;t know+refused, NL:don&#39;t know).</span></span>
<span id="cb12-190"><a href="liite-3-r-koodi.html#cb12-190"></a><span class="co"># Kun SPSS-tiedostosta ei ole tuotu puuttuvan tiedon tarkempaa luokittelua,</span></span>
<span id="cb12-191"><a href="liite-3-r-koodi.html#cb12-191"></a><span class="co"># erottelua ei voi tehdä.</span></span>
<span id="cb12-192"><a href="liite-3-r-koodi.html#cb12-192"></a><span class="co">#</span></span>
<span id="cb12-193"><a href="liite-3-r-koodi.html#cb12-193"></a></span>
<span id="cb12-194"><a href="liite-3-r-koodi.html#cb12-194"></a>substvars1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;V5&quot;</span>,<span class="st">&quot;V6&quot;</span>,<span class="st">&quot;V7&quot;</span>,<span class="st">&quot;V8&quot;</span>,<span class="st">&quot;V9&quot;</span>,<span class="st">&quot;V10&quot;</span>,<span class="st">&quot;V11&quot;</span>,<span class="st">&quot;V12&quot;</span>,<span class="st">&quot;V13&quot;</span>) <span class="co"># 9 muuttujaa</span></span>
<span id="cb12-195"><a href="liite-3-r-koodi.html#cb12-195"></a></span>
<span id="cb12-196"><a href="liite-3-r-koodi.html#cb12-196"></a><span class="co"># Nämä yhteiset muuttujat pois (maaspesifien muuttujien lisäksi) :</span></span>
<span id="cb12-197"><a href="liite-3-r-koodi.html#cb12-197"></a><span class="co">#</span></span>
<span id="cb12-198"><a href="liite-3-r-koodi.html#cb12-198"></a><span class="co"># &quot;V14&quot;,&quot;V15&quot;,&quot;V16&quot;,  &quot;V17&quot;,&quot;V18&quot;,&quot;HU_V18&quot;,&quot;V19&quot;,&quot;HU_V19&quot;,&quot;V20&quot;,&quot;HU_V20&quot;,&quot;V21&quot;,</span></span>
<span id="cb12-199"><a href="liite-3-r-koodi.html#cb12-199"></a><span class="co"># &quot;V28&quot;,&quot;V29&quot;,&quot;V30&quot;,&quot;V31&quot;,&quot;V32&quot;,&quot;V33&quot;,# &quot;V34&quot;, &quot;V35&quot;, &quot;V36&quot;, &quot;V37&quot;, &quot;V38&quot;, &quot;V39&quot;,</span></span>
<span id="cb12-200"><a href="liite-3-r-koodi.html#cb12-200"></a><span class="co"># &quot;V40&quot;, &quot;V41&quot;, &quot;V42&quot;, &quot;V43&quot;, &quot;V44&quot;, &quot;V45&quot;, &quot;V46&quot;, &quot;V47&quot;, &quot;V48&quot;, &quot;V49&quot;, &quot;V50&quot;, </span></span>
<span id="cb12-201"><a href="liite-3-r-koodi.html#cb12-201"></a><span class="co"># &quot;V51&quot;, &quot;V52&quot;, &quot;V53&quot;, &quot;V54&quot;, &quot;V55&quot;, &quot;V56&quot;, &quot;V57&quot;, &quot;V58&quot;, &quot;V59&quot;, &quot;V60&quot;, &quot;V61&quot;, </span></span>
<span id="cb12-202"><a href="liite-3-r-koodi.html#cb12-202"></a><span class="co"># &quot;V62&quot;, &quot;V63&quot;, &quot;V64&quot;, &quot;V65&quot;, &quot;V65a&quot;,&quot;V66&quot;, &quot;V67&quot;</span></span>
<span id="cb12-203"><a href="liite-3-r-koodi.html#cb12-203"></a><span class="co">#</span></span>
<span id="cb12-204"><a href="liite-3-r-koodi.html#cb12-204"></a><span class="co">#</span></span>
<span id="cb12-205"><a href="liite-3-r-koodi.html#cb12-205"></a><span class="co"># DEMOGRAFISET JA MUUT TAUSTAMUUTTUJAT (8)</span></span>
<span id="cb12-206"><a href="liite-3-r-koodi.html#cb12-206"></a><span class="co">#</span></span>
<span id="cb12-207"><a href="liite-3-r-koodi.html#cb12-207"></a><span class="co"># AGE, SEX</span></span>
<span id="cb12-208"><a href="liite-3-r-koodi.html#cb12-208"></a><span class="co">#</span></span>
<span id="cb12-209"><a href="liite-3-r-koodi.html#cb12-209"></a><span class="co"># DEGREE - Highest completed degree of education: Categories for international</span></span>
<span id="cb12-210"><a href="liite-3-r-koodi.html#cb12-210"></a><span class="co"># comparison. Slightly re-arranged subset of ISCED-97</span></span>
<span id="cb12-211"><a href="liite-3-r-koodi.html#cb12-211"></a><span class="co">#</span></span>
<span id="cb12-212"><a href="liite-3-r-koodi.html#cb12-212"></a><span class="co"># 0 No formal education</span></span>
<span id="cb12-213"><a href="liite-3-r-koodi.html#cb12-213"></a><span class="co"># 1 Primary school (elementary school)</span></span>
<span id="cb12-214"><a href="liite-3-r-koodi.html#cb12-214"></a><span class="co"># 2 Lower secondary (secondary completed does not allow entry to university:</span></span>
<span id="cb12-215"><a href="liite-3-r-koodi.html#cb12-215"></a><span class="co">#  obligatory school)</span></span>
<span id="cb12-216"><a href="liite-3-r-koodi.html#cb12-216"></a><span class="co"># 3 Upper secondary (programs that allow entry to university or programs that</span></span>
<span id="cb12-217"><a href="liite-3-r-koodi.html#cb12-217"></a><span class="co">#  allow to entry other ISCED level 3 programs - designed to prepare students for</span></span>
<span id="cb12-218"><a href="liite-3-r-koodi.html#cb12-218"></a><span class="co">#  direct entry into the labour market)</span></span>
<span id="cb12-219"><a href="liite-3-r-koodi.html#cb12-219"></a><span class="co"># 4 Post secondary, non-tertiary (other upper secondary programs toward labour</span></span>
<span id="cb12-220"><a href="liite-3-r-koodi.html#cb12-220"></a><span class="co">#  market or technical formation)</span></span>
<span id="cb12-221"><a href="liite-3-r-koodi.html#cb12-221"></a><span class="co"># 5 Lower level tertiary, first stage (also technical schools at a tertiary level)</span></span>
<span id="cb12-222"><a href="liite-3-r-koodi.html#cb12-222"></a><span class="co"># 6 Upper level tertiary (Master, Dr.)</span></span>
<span id="cb12-223"><a href="liite-3-r-koodi.html#cb12-223"></a><span class="co"># 9 No answer, CH: don&#39;t know</span></span>
<span id="cb12-224"><a href="liite-3-r-koodi.html#cb12-224"></a><span class="co"># HUOM! R-factor - muunnoksessa koodaus on 1-7</span></span>
<span id="cb12-225"><a href="liite-3-r-koodi.html#cb12-225"></a><span class="co">#</span></span>
<span id="cb12-226"><a href="liite-3-r-koodi.html#cb12-226"></a><span class="co"># MAINSTAT - main status: Which of the following best describes your current situation?</span></span>
<span id="cb12-227"><a href="liite-3-r-koodi.html#cb12-227"></a><span class="co">#</span></span>
<span id="cb12-228"><a href="liite-3-r-koodi.html#cb12-228"></a><span class="co"># 1 In paid work</span></span>
<span id="cb12-229"><a href="liite-3-r-koodi.html#cb12-229"></a><span class="co"># 2 Unemployed and looking for a job, HR: incl never had a job</span></span>
<span id="cb12-230"><a href="liite-3-r-koodi.html#cb12-230"></a><span class="co"># 3 In education</span></span>
<span id="cb12-231"><a href="liite-3-r-koodi.html#cb12-231"></a><span class="co"># 4 Apprentice or trainee</span></span>
<span id="cb12-232"><a href="liite-3-r-koodi.html#cb12-232"></a><span class="co"># 5 Permanently sick or disabled</span></span>
<span id="cb12-233"><a href="liite-3-r-koodi.html#cb12-233"></a><span class="co"># 6 Retired</span></span>
<span id="cb12-234"><a href="liite-3-r-koodi.html#cb12-234"></a><span class="co"># 7 Domestic work</span></span>
<span id="cb12-235"><a href="liite-3-r-koodi.html#cb12-235"></a><span class="co"># 8 In compulsory military service or community service</span></span>
<span id="cb12-236"><a href="liite-3-r-koodi.html#cb12-236"></a><span class="co"># 9 Other</span></span>
<span id="cb12-237"><a href="liite-3-r-koodi.html#cb12-237"></a><span class="co"># 99 No answer</span></span>
<span id="cb12-238"><a href="liite-3-r-koodi.html#cb12-238"></a><span class="co"># Armeijassa tai yhdyskuntapalvelussa muutamia, muutamissa maissa.Kategoriassa 9 </span></span>
<span id="cb12-239"><a href="liite-3-r-koodi.html#cb12-239"></a><span class="co"># on hieman väkeä. Yhdistetään 8 ja 9. Huom! Esim Puolassa ei yhtään eläkeläistä</span></span>
<span id="cb12-240"><a href="liite-3-r-koodi.html#cb12-240"></a><span class="co"># eikä kategoriaa 9, Saksassa ei ketään kategoriassa 9.</span></span>
<span id="cb12-241"><a href="liite-3-r-koodi.html#cb12-241"></a><span class="co">#</span></span>
<span id="cb12-242"><a href="liite-3-r-koodi.html#cb12-242"></a><span class="co"># TOPBOT - Top-Bottom self-placement (10 pt scale)</span></span>
<span id="cb12-243"><a href="liite-3-r-koodi.html#cb12-243"></a><span class="co">#</span></span>
<span id="cb12-244"><a href="liite-3-r-koodi.html#cb12-244"></a><span class="co"># &quot;In our society, there are groups which tend to be towards the top and groups </span></span>
<span id="cb12-245"><a href="liite-3-r-koodi.html#cb12-245"></a><span class="co"># which tend to be towards the bottom. Below is a scale that runs</span></span>
<span id="cb12-246"><a href="liite-3-r-koodi.html#cb12-246"></a><span class="co"># from the top to the bottom. Where would you put yourself on this scale?&quot;</span></span>
<span id="cb12-247"><a href="liite-3-r-koodi.html#cb12-247"></a><span class="co"># Eri maissa hieman erilaisia kysymyksiä. </span></span>
<span id="cb12-248"><a href="liite-3-r-koodi.html#cb12-248"></a><span class="co">#</span></span>
<span id="cb12-249"><a href="liite-3-r-koodi.html#cb12-249"></a><span class="co"># HHCHILDR - How many children in household: children between [school age] and</span></span>
<span id="cb12-250"><a href="liite-3-r-koodi.html#cb12-250"></a><span class="co"># 17 years of age</span></span>
<span id="cb12-251"><a href="liite-3-r-koodi.html#cb12-251"></a><span class="co">#</span></span>
<span id="cb12-252"><a href="liite-3-r-koodi.html#cb12-252"></a><span class="co"># 0 No children</span></span>
<span id="cb12-253"><a href="liite-3-r-koodi.html#cb12-253"></a><span class="co"># 1 One child</span></span>
<span id="cb12-254"><a href="liite-3-r-koodi.html#cb12-254"></a><span class="co"># 2 2 children</span></span>
<span id="cb12-255"><a href="liite-3-r-koodi.html#cb12-255"></a><span class="co"># 21 21 children</span></span>
<span id="cb12-256"><a href="liite-3-r-koodi.html#cb12-256"></a><span class="co"># 96 NAP (Code 0 in HOMPOP)</span></span>
<span id="cb12-257"><a href="liite-3-r-koodi.html#cb12-257"></a><span class="co"># 97 Refused</span></span>
<span id="cb12-258"><a href="liite-3-r-koodi.html#cb12-258"></a><span class="co"># 99 No answer</span></span>
<span id="cb12-259"><a href="liite-3-r-koodi.html#cb12-259"></a><span class="co">#</span></span>
<span id="cb12-260"><a href="liite-3-r-koodi.html#cb12-260"></a><span class="co"># Voisi koodata dummymuuttujaksi lapsia (1) - ei lapsia (0).</span></span>
<span id="cb12-261"><a href="liite-3-r-koodi.html#cb12-261"></a><span class="co"># Ranskan datassa on erittäin iso osa puuttuvia tietoja (yli 20 %), Sama tilanne</span></span>
<span id="cb12-262"><a href="liite-3-r-koodi.html#cb12-262"></a><span class="co"># myös  muissa perheen kokoon liittyvissä kysymyksissä.  Myös Austarlialla aika</span></span>
<span id="cb12-263"><a href="liite-3-r-koodi.html#cb12-263"></a><span class="co"># paljon puuttuvia vastauksia.</span></span>
<span id="cb12-264"><a href="liite-3-r-koodi.html#cb12-264"></a><span class="co">#</span></span>
<span id="cb12-265"><a href="liite-3-r-koodi.html#cb12-265"></a><span class="co"># MARITAL - Legal partnership status </span></span>
<span id="cb12-266"><a href="liite-3-r-koodi.html#cb12-266"></a><span class="co">#</span></span>
<span id="cb12-267"><a href="liite-3-r-koodi.html#cb12-267"></a><span class="co"># What is your current legal marital status?</span></span>
<span id="cb12-268"><a href="liite-3-r-koodi.html#cb12-268"></a><span class="co"># The aim of this variable is to measure the current &#39;legal&#39; marital status &#39;. </span></span>
<span id="cb12-269"><a href="liite-3-r-koodi.html#cb12-269"></a><span class="co"># PARTLIV - muuttujassa on &#39;de facto&#39; - tilanteen tieto parisuhteesta</span></span>
<span id="cb12-270"><a href="liite-3-r-koodi.html#cb12-270"></a><span class="co">#</span></span>
<span id="cb12-271"><a href="liite-3-r-koodi.html#cb12-271"></a><span class="co"># 1 Married</span></span>
<span id="cb12-272"><a href="liite-3-r-koodi.html#cb12-272"></a><span class="co"># 2 Civil partnership</span></span>
<span id="cb12-273"><a href="liite-3-r-koodi.html#cb12-273"></a><span class="co"># 3 Separated from spouse/ civil partner (still legally married/ still legally </span></span>
<span id="cb12-274"><a href="liite-3-r-koodi.html#cb12-274"></a><span class="co">#   in a civil partnership)</span></span>
<span id="cb12-275"><a href="liite-3-r-koodi.html#cb12-275"></a><span class="co"># 4 Divorced from spouse/ legally separated from civil partner</span></span>
<span id="cb12-276"><a href="liite-3-r-koodi.html#cb12-276"></a><span class="co"># 5 Widowed/ civil partner died</span></span>
<span id="cb12-277"><a href="liite-3-r-koodi.html#cb12-277"></a><span class="co"># 6 Never married/ never in a civil partnership, single</span></span>
<span id="cb12-278"><a href="liite-3-r-koodi.html#cb12-278"></a><span class="co"># 7 Refused</span></span>
<span id="cb12-279"><a href="liite-3-r-koodi.html#cb12-279"></a><span class="co"># 8 Don&#39;t know</span></span>
<span id="cb12-280"><a href="liite-3-r-koodi.html#cb12-280"></a><span class="co"># 9 No answer</span></span>
<span id="cb12-281"><a href="liite-3-r-koodi.html#cb12-281"></a><span class="co">#</span></span>
<span id="cb12-282"><a href="liite-3-r-koodi.html#cb12-282"></a><span class="co"># URBRURAL - Place of living: urban - rural</span></span>
<span id="cb12-283"><a href="liite-3-r-koodi.html#cb12-283"></a><span class="co">#</span></span>
<span id="cb12-284"><a href="liite-3-r-koodi.html#cb12-284"></a><span class="co"># 1 A big city</span></span>
<span id="cb12-285"><a href="liite-3-r-koodi.html#cb12-285"></a><span class="co"># 2 The suburbs or outskirts of a big city</span></span>
<span id="cb12-286"><a href="liite-3-r-koodi.html#cb12-286"></a><span class="co"># 3 A town or a small city</span></span>
<span id="cb12-287"><a href="liite-3-r-koodi.html#cb12-287"></a><span class="co"># 4 A country village</span></span>
<span id="cb12-288"><a href="liite-3-r-koodi.html#cb12-288"></a><span class="co"># 5 A farm or home in the country</span></span>
<span id="cb12-289"><a href="liite-3-r-koodi.html#cb12-289"></a><span class="co"># 7 Other answer</span></span>
<span id="cb12-290"><a href="liite-3-r-koodi.html#cb12-290"></a><span class="co"># 9 No answer</span></span>
<span id="cb12-291"><a href="liite-3-r-koodi.html#cb12-291"></a><span class="co"># 1 ja 2 vaihtelevat aika paljon maittain, parempi laskea yhteen. Unkarista puuttuu </span></span>
<span id="cb12-292"><a href="liite-3-r-koodi.html#cb12-292"></a><span class="co"># jostain syystä kokonaan vaihtoehto 5.  Vaihotehdon 7 on valinnut vain 4</span></span>
<span id="cb12-293"><a href="liite-3-r-koodi.html#cb12-293"></a><span class="co"># vastaajaa Ranskasta.</span></span>
<span id="cb12-294"><a href="liite-3-r-koodi.html#cb12-294"></a><span class="co">#</span></span>
<span id="cb12-295"><a href="liite-3-r-koodi.html#cb12-295"></a></span>
<span id="cb12-296"><a href="liite-3-r-koodi.html#cb12-296"></a>bgvars1 &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="st">&quot;SEX&quot;</span>,<span class="st">&quot;AGE&quot;</span>,<span class="st">&quot;DEGREE&quot;</span>, <span class="st">&quot;MAINSTAT&quot;</span>, <span class="st">&quot;TOPBOT&quot;</span>,</span>
<span id="cb12-297"><a href="liite-3-r-koodi.html#cb12-297"></a>              <span class="st">&quot;HHCHILDR&quot;</span>, <span class="st">&quot;MARITAL&quot;</span>, <span class="st">&quot;URBRURAL&quot;</span>)</span>
<span id="cb12-298"><a href="liite-3-r-koodi.html#cb12-298"></a></span>
<span id="cb12-299"><a href="liite-3-r-koodi.html#cb12-299"></a><span class="co">#Valitaan muuttujat</span></span>
<span id="cb12-300"><a href="liite-3-r-koodi.html#cb12-300"></a></span>
<span id="cb12-301"><a href="liite-3-r-koodi.html#cb12-301"></a>jhvars1 &lt;-<span class="st"> </span><span class="kw">c</span>(metavars1,countryvars1, substvars1,bgvars1)</span>
<span id="cb12-302"><a href="liite-3-r-koodi.html#cb12-302"></a></span>
<span id="cb12-303"><a href="liite-3-r-koodi.html#cb12-303"></a><span class="co">#jhvars1</span></span>
<span id="cb12-304"><a href="liite-3-r-koodi.html#cb12-304"></a>ISSP2012jh1b.data &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012jh1a.data, <span class="kw">all_of</span>(jhvars1)) </span>
<span id="cb12-305"><a href="liite-3-r-koodi.html#cb12-305"></a></span>
<span id="cb12-306"><a href="liite-3-r-koodi.html#cb12-306"></a><span class="co"># laaja aineisto - mukana havainnot joissa puuttuvia tietoja</span></span>
<span id="cb12-307"><a href="liite-3-r-koodi.html#cb12-307"></a><span class="co"># str(ISSP2012jh1b.data) #32969 obs. of  23 variables </span></span>
<span id="cb12-308"><a href="liite-3-r-koodi.html#cb12-308"></a><span class="co"># </span></span>
<span id="cb12-309"><a href="liite-3-r-koodi.html#cb12-309"></a><span class="co"># SUBSTANSSIMUUTTUJAT</span></span>
<span id="cb12-310"><a href="liite-3-r-koodi.html#cb12-310"></a><span class="co">#</span></span>
<span id="cb12-311"><a href="liite-3-r-koodi.html#cb12-311"></a><span class="co"># $ V5      : &#39;haven_labelled&#39; num  5 1 2 2 1 NA 2 4 2 2 ...</span></span>
<span id="cb12-312"><a href="liite-3-r-koodi.html#cb12-312"></a><span class="co">#  ..- attr(*, &quot;label&quot;)= chr &quot;Q1a Working mom: warm relationship with children</span></span>
<span id="cb12-313"><a href="liite-3-r-koodi.html#cb12-313"></a><span class="co">#       as a not working mom&quot;</span></span>
<span id="cb12-314"><a href="liite-3-r-koodi.html#cb12-314"></a><span class="co">#  ..- attr(*, &quot;labels&quot;)= Named num  0 1 2 3 4 5 8 9</span></span>
<span id="cb12-315"><a href="liite-3-r-koodi.html#cb12-315"></a><span class="co">#</span></span>
<span id="cb12-316"><a href="liite-3-r-koodi.html#cb12-316"></a><span class="co"># ISSP2012jh1b.data$V5 näyttää tarkemmin rakenteen</span></span>
<span id="cb12-317"><a href="liite-3-r-koodi.html#cb12-317"></a><span class="co">#</span></span>
<span id="cb12-318"><a href="liite-3-r-koodi.html#cb12-318"></a><span class="co"># glimpse(ISSP2012jh1b.data)</span></span>
<span id="cb12-319"><a href="liite-3-r-koodi.html#cb12-319"></a></span>
<span id="cb12-320"><a href="liite-3-r-koodi.html#cb12-320"></a><span class="co"># Poistetaan havainnot, joissa ikä (AGE) tai sukupuolitieto puuttuu (5.7.2019)</span></span>
<span id="cb12-321"><a href="liite-3-r-koodi.html#cb12-321"></a></span>
<span id="cb12-322"><a href="liite-3-r-koodi.html#cb12-322"></a>ISSP2012jh1c.data &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012jh1b.data, (<span class="op">!</span><span class="kw">is.na</span>(SEX) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(AGE)))</span>
<span id="cb12-323"><a href="liite-3-r-koodi.html#cb12-323"></a></span>
<span id="cb12-324"><a href="liite-3-r-koodi.html#cb12-324"></a><span class="co"># str(ISSP2012jh1c.data) # 32823 obs. of  23 variables, 32969-32823 = 146</span></span>
<span id="cb12-325"><a href="liite-3-r-koodi.html#cb12-325"></a><span class="co"># TARKISTUS 8.6.20 dplyr 1.0.0-päivitys: havaintojen ja muuttujien määrä ok.</span></span>
<span id="cb12-326"><a href="liite-3-r-koodi.html#cb12-326"></a></span>
<span id="cb12-327"><a href="liite-3-r-koodi.html#cb12-327"></a><span class="co"># VAIHE 1 - muuttujat joissa ei ole puuttuvia tietoja</span></span>
<span id="cb12-328"><a href="liite-3-r-koodi.html#cb12-328"></a></span>
<span id="cb12-329"><a href="liite-3-r-koodi.html#cb12-329"></a><span class="co"># vaihe 1.1 haven_labelled ja chr -&gt; as_factor</span></span>
<span id="cb12-330"><a href="liite-3-r-koodi.html#cb12-330"></a></span>
<span id="cb12-331"><a href="liite-3-r-koodi.html#cb12-331"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1c.data <span class="op">%&gt;%</span></span>
<span id="cb12-332"><a href="liite-3-r-koodi.html#cb12-332"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">maa =</span> <span class="kw">as_factor</span>(C_ALPHAN), <span class="co"># ei puuttuvia, ei tyhjiä leveleitä</span></span>
<span id="cb12-333"><a href="liite-3-r-koodi.html#cb12-333"></a>           <span class="dt">maa3 =</span> <span class="kw">as_factor</span>(V3),  <span class="co"># maakoodi, jossa aluejako joillan mailla</span></span>
<span id="cb12-334"><a href="liite-3-r-koodi.html#cb12-334"></a>           <span class="dt">sp1 =</span> <span class="kw">as_factor</span>(SEX), <span class="co"># ei puuttuvia, tyhjä level &quot;no answer&quot; 999</span></span>
<span id="cb12-335"><a href="liite-3-r-koodi.html#cb12-335"></a>         )</span>
<span id="cb12-336"><a href="liite-3-r-koodi.html#cb12-336"></a></span>
<span id="cb12-337"><a href="liite-3-r-koodi.html#cb12-337"></a></span>
<span id="cb12-338"><a href="liite-3-r-koodi.html#cb12-338"></a><span class="co"># C_ALPHAN - maa - maa3 tarkistuksia</span></span>
<span id="cb12-339"><a href="liite-3-r-koodi.html#cb12-339"></a></span>
<span id="cb12-340"><a href="liite-3-r-koodi.html#cb12-340"></a><span class="co"># V3</span></span>
<span id="cb12-341"><a href="liite-3-r-koodi.html#cb12-341"></a><span class="co"># &quot;Pulma&quot; on järjestys. C_ALPHAN (&quot;chr&quot;) on aakkosjärjestyksessä, kun luodaan</span></span>
<span id="cb12-342"><a href="liite-3-r-koodi.html#cb12-342"></a><span class="co"># maa = as_factor(C_ALPHAN) järjestys muuttuu (esiintymisjärjestys datassa?)</span></span>
<span id="cb12-343"><a href="liite-3-r-koodi.html#cb12-343"></a><span class="co"># maa3 muunnetaan maakoodista (haven_labelled&#39; num), jonka</span></span>
<span id="cb12-344"><a href="liite-3-r-koodi.html#cb12-344"></a></span>
<span id="cb12-345"><a href="liite-3-r-koodi.html#cb12-345"></a><span class="co"># str(ISSP2012jh1d.dat$maa) #Country Prefix ISO 3166 Code - alphanumeric</span></span>
<span id="cb12-346"><a href="liite-3-r-koodi.html#cb12-346"></a><span class="co"># attributes(ISSP2012jh1d.dat$maa) # ei tyhiä levels-arvoja, 25 levels</span></span>
<span id="cb12-347"><a href="liite-3-r-koodi.html#cb12-347"></a><span class="co"># ISSP2012jh1d.dat$maa %&gt;% fct_unique()</span></span>
<span id="cb12-348"><a href="liite-3-r-koodi.html#cb12-348"></a><span class="co"># ISSP2012jh1d.dat$maa %&gt;% fct_count() # summary kertoo samat tiedot (20.2.20)</span></span>
<span id="cb12-349"><a href="liite-3-r-koodi.html#cb12-349"></a><span class="co"># sum(is.na(ISSP2012jh1d.dat$maa)) # ei puuttuvia tietoja</span></span>
<span id="cb12-350"><a href="liite-3-r-koodi.html#cb12-350"></a><span class="co"># ISSP2012jh1d.dat$maa %&gt;% summary() # mukana vain valitut 25 maata</span></span>
<span id="cb12-351"><a href="liite-3-r-koodi.html#cb12-351"></a></span>
<span id="cb12-352"><a href="liite-3-r-koodi.html#cb12-352"></a><span class="co"># str(ISSP2012jh1d.dat$maa3)  #&quot;Country/ Sample ISO 3166 Code</span></span>
<span id="cb12-353"><a href="liite-3-r-koodi.html#cb12-353"></a>                            <span class="co">#(see V4 for codes for whole nation states)&quot;</span></span>
<span id="cb12-354"><a href="liite-3-r-koodi.html#cb12-354"></a>                            <span class="co"># 29 levels</span></span>
<span id="cb12-355"><a href="liite-3-r-koodi.html#cb12-355"></a><span class="co"># str(ISSP2012jh1d.dat$V3)</span></span>
<span id="cb12-356"><a href="liite-3-r-koodi.html#cb12-356"></a></span>
<span id="cb12-357"><a href="liite-3-r-koodi.html#cb12-357"></a><span class="co"># attributes(ISSP2012jh1d.dat$maa3) # ei tyhiä levels-arvoja, 29 levels</span></span>
<span id="cb12-358"><a href="liite-3-r-koodi.html#cb12-358"></a><span class="co"># sum(is.na(ISSP2012jh1d.dat$maa3)) # nolla ei ole puuttuva tieto! (3.2.20)</span></span>
<span id="cb12-359"><a href="liite-3-r-koodi.html#cb12-359"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_unique()</span></span>
<span id="cb12-360"><a href="liite-3-r-koodi.html#cb12-360"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_count()</span></span>
<span id="cb12-361"><a href="liite-3-r-koodi.html#cb12-361"></a><span class="co"># Vain näissä on jaettu maan havainnot (3.2.20)</span></span>
<span id="cb12-362"><a href="liite-3-r-koodi.html#cb12-362"></a><span class="co">#</span></span>
<span id="cb12-363"><a href="liite-3-r-koodi.html#cb12-363"></a><span class="co"># [38] BE-FLA-Belgium/ Flanders</span></span>
<span id="cb12-364"><a href="liite-3-r-koodi.html#cb12-364"></a><span class="co"># [39] BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb12-365"><a href="liite-3-r-koodi.html#cb12-365"></a><span class="co"># [40] BE-BRU-Belgium/ Brussels</span></span>
<span id="cb12-366"><a href="liite-3-r-koodi.html#cb12-366"></a><span class="co"># [41] DE-W-Germany-West</span></span>
<span id="cb12-367"><a href="liite-3-r-koodi.html#cb12-367"></a><span class="co"># [42] DE-E-Germany-East</span></span>
<span id="cb12-368"><a href="liite-3-r-koodi.html#cb12-368"></a><span class="co"># [43] PT-Portugal 2012: first fieldwork round (main sample)</span></span>
<span id="cb12-369"><a href="liite-3-r-koodi.html#cb12-369"></a><span class="co"># [44] PT-Portugal 2012: second fieldwork round (complementary sample)</span></span>
<span id="cb12-370"><a href="liite-3-r-koodi.html#cb12-370"></a></span>
<span id="cb12-371"><a href="liite-3-r-koodi.html#cb12-371"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_count() #miksi ei tulosta mitään? (3.2.2020)</span></span>
<span id="cb12-372"><a href="liite-3-r-koodi.html#cb12-372"></a></span>
<span id="cb12-373"><a href="liite-3-r-koodi.html#cb12-373"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% summary()</span></span>
<span id="cb12-374"><a href="liite-3-r-koodi.html#cb12-374"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_unique()</span></span>
<span id="cb12-375"><a href="liite-3-r-koodi.html#cb12-375"></a><span class="co"># maa3: 25 maata, havaintojen määrä. Poisjätetyissä havaintoja 0.</span></span>
<span id="cb12-376"><a href="liite-3-r-koodi.html#cb12-376"></a><span class="co"># glimpse(ISSP2012jh1d.dat$maa3)</span></span>
<span id="cb12-377"><a href="liite-3-r-koodi.html#cb12-377"></a><span class="co"># head(ISSP2012jh1d.dat$maa3)</span></span>
<span id="cb12-378"><a href="liite-3-r-koodi.html#cb12-378"></a><span class="co"># length(levels(ISSP2012jh1d.dat$maa3))</span></span>
<span id="cb12-379"><a href="liite-3-r-koodi.html#cb12-379"></a></span>
<span id="cb12-380"><a href="liite-3-r-koodi.html#cb12-380"></a><span class="co"># C_ALPHAN alkuperäinen järjestys, maa aakkosjärjestyssä  (2.2.20)</span></span>
<span id="cb12-381"><a href="liite-3-r-koodi.html#cb12-381"></a><span class="co">#</span></span>
<span id="cb12-382"><a href="liite-3-r-koodi.html#cb12-382"></a><span class="co"># Huom1: Myös merkkijonomuuttujaa C_ALPHAN tarvitaan jatkossa.</span></span>
<span id="cb12-383"><a href="liite-3-r-koodi.html#cb12-383"></a><span class="co">#</span></span>
<span id="cb12-384"><a href="liite-3-r-koodi.html#cb12-384"></a><span class="co"># Huom2: kun dataa rajataan, on tarkistettava ja tarvittaessa poistettava</span></span>
<span id="cb12-385"><a href="liite-3-r-koodi.html#cb12-385"></a><span class="co"># &quot;tyhjät&quot; R-factor - muuttujan &quot;maa&quot; luokat (3.2.2020)</span></span>
<span id="cb12-386"><a href="liite-3-r-koodi.html#cb12-386"></a></span>
<span id="cb12-387"><a href="liite-3-r-koodi.html#cb12-387"></a></span>
<span id="cb12-388"><a href="liite-3-r-koodi.html#cb12-388"></a><span class="co"># vaihe 1.2 tyhjät luokat (levels) pois faktoreista</span></span>
<span id="cb12-389"><a href="liite-3-r-koodi.html#cb12-389"></a></span>
<span id="cb12-390"><a href="liite-3-r-koodi.html#cb12-390"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb12-391"><a href="liite-3-r-koodi.html#cb12-391"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">sp =</span> <span class="kw">fct_drop</span>(sp1),</span>
<span id="cb12-392"><a href="liite-3-r-koodi.html#cb12-392"></a>           <span class="dt">maa3 =</span> <span class="kw">fct_drop</span>(maa3)</span>
<span id="cb12-393"><a href="liite-3-r-koodi.html#cb12-393"></a>           )</span>
<span id="cb12-394"><a href="liite-3-r-koodi.html#cb12-394"></a></span>
<span id="cb12-395"><a href="liite-3-r-koodi.html#cb12-395"></a><span class="co">#  maa3 - tarkistuksia</span></span>
<span id="cb12-396"><a href="liite-3-r-koodi.html#cb12-396"></a></span>
<span id="cb12-397"><a href="liite-3-r-koodi.html#cb12-397"></a><span class="co"># str(ISSP2012jh1d.dat$maa3)  # 29 levels</span></span>
<span id="cb12-398"><a href="liite-3-r-koodi.html#cb12-398"></a><span class="co"># attributes(ISSP2012jh1d.dat$maa3)</span></span>
<span id="cb12-399"><a href="liite-3-r-koodi.html#cb12-399"></a><span class="co">#sum(is.na(ISSP2012jh1d.dat$maa3)) # nolla ei ole puuttuva tieto! (3.2.20)</span></span>
<span id="cb12-400"><a href="liite-3-r-koodi.html#cb12-400"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% summary()</span></span>
<span id="cb12-401"><a href="liite-3-r-koodi.html#cb12-401"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_unique()</span></span>
<span id="cb12-402"><a href="liite-3-r-koodi.html#cb12-402"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_count()</span></span>
<span id="cb12-403"><a href="liite-3-r-koodi.html#cb12-403"></a><span class="co">#</span></span>
<span id="cb12-404"><a href="liite-3-r-koodi.html#cb12-404"></a><span class="co"># str(ISSP2012jh1d.dat$C_ALPHAN)</span></span>
<span id="cb12-405"><a href="liite-3-r-koodi.html#cb12-405"></a><span class="co"># attributes(ISSP2012jh1d.dat$C_ALPHAN)</span></span>
<span id="cb12-406"><a href="liite-3-r-koodi.html#cb12-406"></a></span>
<span id="cb12-407"><a href="liite-3-r-koodi.html#cb12-407"></a><span class="co"># TESTAUKSIA</span></span>
<span id="cb12-408"><a href="liite-3-r-koodi.html#cb12-408"></a><span class="co"># </span></span>
<span id="cb12-409"><a href="liite-3-r-koodi.html#cb12-409"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(C_ALPHAN, maa)</span></span>
<span id="cb12-410"><a href="liite-3-r-koodi.html#cb12-410"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(C_ALPHAN, maa3)</span></span>
<span id="cb12-411"><a href="liite-3-r-koodi.html#cb12-411"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(maa, maa3)</span></span>
<span id="cb12-412"><a href="liite-3-r-koodi.html#cb12-412"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(V3, maa3)</span></span>
<span id="cb12-413"><a href="liite-3-r-koodi.html#cb12-413"></a></span>
<span id="cb12-414"><a href="liite-3-r-koodi.html#cb12-414"></a><span class="co"># sp, sp1, SEX - tarkistuksia</span></span>
<span id="cb12-415"><a href="liite-3-r-koodi.html#cb12-415"></a><span class="co"># </span></span>
<span id="cb12-416"><a href="liite-3-r-koodi.html#cb12-416"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_count()</span></span>
<span id="cb12-417"><a href="liite-3-r-koodi.html#cb12-417"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_count()</span></span>
<span id="cb12-418"><a href="liite-3-r-koodi.html#cb12-418"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(SEX,sp1)</span></span>
<span id="cb12-419"><a href="liite-3-r-koodi.html#cb12-419"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(SEX,sp)</span></span>
<span id="cb12-420"><a href="liite-3-r-koodi.html#cb12-420"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(sp1,sp)</span></span>
<span id="cb12-421"><a href="liite-3-r-koodi.html#cb12-421"></a></span>
<span id="cb12-422"><a href="liite-3-r-koodi.html#cb12-422"></a><span class="co"># vaihe 1.3 uudet &quot;faktorilabelit&quot;</span></span>
<span id="cb12-423"><a href="liite-3-r-koodi.html#cb12-423"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb12-424"><a href="liite-3-r-koodi.html#cb12-424"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">sp =</span></span>
<span id="cb12-425"><a href="liite-3-r-koodi.html#cb12-425"></a>          <span class="kw">fct_recode</span>(sp,</span>
<span id="cb12-426"><a href="liite-3-r-koodi.html#cb12-426"></a>            <span class="st">&quot;m&quot;</span> =<span class="st"> &quot;Male&quot;</span>,</span>
<span id="cb12-427"><a href="liite-3-r-koodi.html#cb12-427"></a>            <span class="st">&quot;f&quot;</span> =<span class="st"> &quot;Female&quot;</span>)</span>
<span id="cb12-428"><a href="liite-3-r-koodi.html#cb12-428"></a>            )</span>
<span id="cb12-429"><a href="liite-3-r-koodi.html#cb12-429"></a></span>
<span id="cb12-430"><a href="liite-3-r-koodi.html#cb12-430"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb12-431"><a href="liite-3-r-koodi.html#cb12-431"></a></span>
<span id="cb12-432"><a href="liite-3-r-koodi.html#cb12-432"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_unique()</span></span>
<span id="cb12-433"><a href="liite-3-r-koodi.html#cb12-433"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_count()</span></span>
<span id="cb12-434"><a href="liite-3-r-koodi.html#cb12-434"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% summary()</span></span>
<span id="cb12-435"><a href="liite-3-r-koodi.html#cb12-435"></a></span>
<span id="cb12-436"><a href="liite-3-r-koodi.html#cb12-436"></a><span class="co"># AGE -&gt; ika</span></span>
<span id="cb12-437"><a href="liite-3-r-koodi.html#cb12-437"></a>ISSP2012jh1d.dat<span class="op">$</span>ika &lt;-<span class="st"> </span>ISSP2012jh1d.dat<span class="op">$</span>AGE</span>
<span id="cb12-438"><a href="liite-3-r-koodi.html#cb12-438"></a></span>
<span id="cb12-439"><a href="liite-3-r-koodi.html#cb12-439"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb12-440"><a href="liite-3-r-koodi.html#cb12-440"></a><span class="kw">attributes</span>(ISSP2012jh1d.dat<span class="op">$</span>ika) <span class="co"># tyhjä level &quot;No answer&quot;</span></span>
<span id="cb12-441"><a href="liite-3-r-koodi.html#cb12-441"></a><span class="co"># str(ISSP2012jh1d.dat$ika)</span></span>
<span id="cb12-442"><a href="liite-3-r-koodi.html#cb12-442"></a>ISSP2012jh1d.dat<span class="op">$</span>ika <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>()</span>
<span id="cb12-443"><a href="liite-3-r-koodi.html#cb12-443"></a></span>
<span id="cb12-444"><a href="liite-3-r-koodi.html#cb12-444"></a>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb12-445"><a href="liite-3-r-koodi.html#cb12-445"></a><span class="kw">tableC</span>(AGE, ika,<span class="dt">cor_type =</span> <span class="st">&quot;pearson&quot;</span>, <span class="dt">na.rm =</span> <span class="ot">FALSE</span>, <span class="dt">rounding =</span> <span class="dv">5</span>,</span>
<span id="cb12-446"><a href="liite-3-r-koodi.html#cb12-446"></a>       <span class="dt">output =</span> <span class="st">&quot;text&quot;</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>, <span class="dt">caption =</span> <span class="ot">NULL</span>, <span class="dt">align =</span> <span class="ot">NULL</span>,</span>
<span id="cb12-447"><a href="liite-3-r-koodi.html#cb12-447"></a>       <span class="dt">float =</span> <span class="st">&quot;htb&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable</span>()</span>
<span id="cb12-448"><a href="liite-3-r-koodi.html#cb12-448"></a></span>
<span id="cb12-449"><a href="liite-3-r-koodi.html#cb12-449"></a><span class="co"># Ikäjakauma - ei tarvita (18.10.2020)</span></span>
<span id="cb12-450"><a href="liite-3-r-koodi.html#cb12-450"></a><span class="co">#</span></span>
<span id="cb12-451"><a href="liite-3-r-koodi.html#cb12-451"></a><span class="co"># ISSP2012jh1d.dat$ika %&gt;% hist(main = &quot;ISSP 2012: vastaajan ikä&quot;)</span></span>
<span id="cb12-452"><a href="liite-3-r-koodi.html#cb12-452"></a></span>
<span id="cb12-453"><a href="liite-3-r-koodi.html#cb12-453"></a><span class="co"># Substanssi- ja taustamuuttujat R-faktoreiksi</span></span>
<span id="cb12-454"><a href="liite-3-r-koodi.html#cb12-454"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb12-455"><a href="liite-3-r-koodi.html#cb12-455"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1a1 =</span> <span class="kw">as_factor</span>(V5), <span class="co">#labels</span></span>
<span id="cb12-456"><a href="liite-3-r-koodi.html#cb12-456"></a>            <span class="dt">Q1b1 =</span> <span class="kw">as_factor</span>(V6),</span>
<span id="cb12-457"><a href="liite-3-r-koodi.html#cb12-457"></a>            <span class="dt">Q1c1 =</span> <span class="kw">as_factor</span>(V7),</span>
<span id="cb12-458"><a href="liite-3-r-koodi.html#cb12-458"></a>            <span class="dt">Q1d1 =</span> <span class="kw">as_factor</span>(V8),</span>
<span id="cb12-459"><a href="liite-3-r-koodi.html#cb12-459"></a>            <span class="dt">Q1e1 =</span> <span class="kw">as_factor</span>(V9),</span>
<span id="cb12-460"><a href="liite-3-r-koodi.html#cb12-460"></a>            <span class="dt">Q2a1 =</span> <span class="kw">as_factor</span>(V10),</span>
<span id="cb12-461"><a href="liite-3-r-koodi.html#cb12-461"></a>            <span class="dt">Q2b1 =</span> <span class="kw">as_factor</span>(V11),</span>
<span id="cb12-462"><a href="liite-3-r-koodi.html#cb12-462"></a>            <span class="dt">Q3a1 =</span> <span class="kw">as_factor</span>(V12), <span class="co">#labels = vastQ3_labels (W,w,H)</span></span>
<span id="cb12-463"><a href="liite-3-r-koodi.html#cb12-463"></a>            <span class="dt">Q3b1 =</span> <span class="kw">as_factor</span>(V13), <span class="co">#labels = vastQ3_labels</span></span>
<span id="cb12-464"><a href="liite-3-r-koodi.html#cb12-464"></a>            <span class="dt">edu1 =</span> <span class="kw">as_factor</span>(DEGREE),</span>
<span id="cb12-465"><a href="liite-3-r-koodi.html#cb12-465"></a>            <span class="dt">msta1 =</span> <span class="kw">as_factor</span>(MAINSTAT),</span>
<span id="cb12-466"><a href="liite-3-r-koodi.html#cb12-466"></a>            <span class="dt">sosta1 =</span> <span class="kw">as_factor</span>(TOPBOT),</span>
<span id="cb12-467"><a href="liite-3-r-koodi.html#cb12-467"></a>            <span class="dt">nchild1 =</span> <span class="kw">as_factor</span>(HHCHILDR),</span>
<span id="cb12-468"><a href="liite-3-r-koodi.html#cb12-468"></a>            <span class="dt">lifsta1 =</span> <span class="kw">as_factor</span>(MARITAL),</span>
<span id="cb12-469"><a href="liite-3-r-koodi.html#cb12-469"></a>            <span class="dt">urbru1 =</span> <span class="kw">as_factor</span>(URBRURAL)</span>
<span id="cb12-470"><a href="liite-3-r-koodi.html#cb12-470"></a>           )</span>
<span id="cb12-471"><a href="liite-3-r-koodi.html#cb12-471"></a></span>
<span id="cb12-472"><a href="liite-3-r-koodi.html#cb12-472"></a><span class="co"># Muuttujat Q1a1...urbru1 ovat apumuuttujia, joissa on periaatteessa kaikki SPSS-</span></span>
<span id="cb12-473"><a href="liite-3-r-koodi.html#cb12-473"></a><span class="co"># tiedostosta siirtyvä metatieto. Poikkeus on SPSS:n kolme tarkentavaa koodia</span></span>
<span id="cb12-474"><a href="liite-3-r-koodi.html#cb12-474"></a><span class="co"># puuttuvalle tiedolle, ne saisi mukaan read_spss - parametrin avulla (user_na=TRUE)</span></span>
<span id="cb12-475"><a href="liite-3-r-koodi.html#cb12-475"></a><span class="co">#</span></span>
<span id="cb12-476"><a href="liite-3-r-koodi.html#cb12-476"></a></span>
<span id="cb12-477"><a href="liite-3-r-koodi.html#cb12-477"></a><span class="co"># Tarkistusksia</span></span>
<span id="cb12-478"><a href="liite-3-r-koodi.html#cb12-478"></a><span class="co"># ISSP2012jh1d.dat %&gt;% summary()</span></span>
<span id="cb12-479"><a href="liite-3-r-koodi.html#cb12-479"></a></span>
<span id="cb12-480"><a href="liite-3-r-koodi.html#cb12-480"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-481"><a href="liite-3-r-koodi.html#cb12-481"></a><span class="co">#    select(Q1a1, Q1b1, Q1c1,Q1d1,Q1e1, Q2a1, Q2b1, Q3a1,Q3b1) %&gt;%</span></span>
<span id="cb12-482"><a href="liite-3-r-koodi.html#cb12-482"></a><span class="co">#    summary()</span></span>
<span id="cb12-483"><a href="liite-3-r-koodi.html#cb12-483"></a><span class="co">#</span></span>
<span id="cb12-484"><a href="liite-3-r-koodi.html#cb12-484"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-485"><a href="liite-3-r-koodi.html#cb12-485"></a><span class="co">#    select(edu1,msta1, sosta1, nchild1, lifsta1, urbru1) %&gt;%</span></span>
<span id="cb12-486"><a href="liite-3-r-koodi.html#cb12-486"></a><span class="co">#    summary()</span></span>
<span id="cb12-487"><a href="liite-3-r-koodi.html#cb12-487"></a></span>
<span id="cb12-488"><a href="liite-3-r-koodi.html#cb12-488"></a></span>
<span id="cb12-489"><a href="liite-3-r-koodi.html#cb12-489"></a><span class="co"># Substanssimuuttujat - ristiintaulukoinnit riittävät (6.2.20)</span></span>
<span id="cb12-490"><a href="liite-3-r-koodi.html#cb12-490"></a></span>
<span id="cb12-491"><a href="liite-3-r-koodi.html#cb12-491"></a><span class="co"># ISSP2012jh1d.dat$Q1a1 %&gt;% fct_count()</span></span>
<span id="cb12-492"><a href="liite-3-r-koodi.html#cb12-492"></a><span class="co"># ISSP2012jh1d.dat$Q1b1 %&gt;% fct_count()</span></span>
<span id="cb12-493"><a href="liite-3-r-koodi.html#cb12-493"></a><span class="co"># ISSP2012jh1d.dat$Q1c1 %&gt;% fct_count()</span></span>
<span id="cb12-494"><a href="liite-3-r-koodi.html#cb12-494"></a><span class="co"># ISSP2012jh1d.dat$Q1d1 %&gt;% fct_count()</span></span>
<span id="cb12-495"><a href="liite-3-r-koodi.html#cb12-495"></a><span class="co"># ISSP2012jh1d.dat$Q1e1 %&gt;% fct_count()</span></span>
<span id="cb12-496"><a href="liite-3-r-koodi.html#cb12-496"></a><span class="co"># ISSP2012jh1d.dat$Q2a1 %&gt;% fct_count()</span></span>
<span id="cb12-497"><a href="liite-3-r-koodi.html#cb12-497"></a><span class="co"># ISSP2012jh1d.dat$Q2b1 %&gt;% fct_count()</span></span>
<span id="cb12-498"><a href="liite-3-r-koodi.html#cb12-498"></a><span class="co"># ISSP2012jh1d.dat$Q3a1 %&gt;% fct_count()</span></span>
<span id="cb12-499"><a href="liite-3-r-koodi.html#cb12-499"></a><span class="co">#ISSP2012jh1d.dat$Q3b1 %&gt;% fct_count()</span></span>
<span id="cb12-500"><a href="liite-3-r-koodi.html#cb12-500"></a></span>
<span id="cb12-501"><a href="liite-3-r-koodi.html#cb12-501"></a><span class="co"># Taustamuuttujat - ristiintaulukoinnit riittävät (6.2.20)</span></span>
<span id="cb12-502"><a href="liite-3-r-koodi.html#cb12-502"></a></span>
<span id="cb12-503"><a href="liite-3-r-koodi.html#cb12-503"></a><span class="co"># ISSP2012jh1d.dat$edu1 %&gt;% fct_count()</span></span>
<span id="cb12-504"><a href="liite-3-r-koodi.html#cb12-504"></a><span class="co"># ISSP2012jh1d.dat$msta1 %&gt;% fct_count()</span></span>
<span id="cb12-505"><a href="liite-3-r-koodi.html#cb12-505"></a><span class="co"># ISSP2012jh1d.dat$sosta1 %&gt;% fct_count()</span></span>
<span id="cb12-506"><a href="liite-3-r-koodi.html#cb12-506"></a><span class="co"># ISSP2012jh1d.dat$nchild1 %&gt;% fct_count()</span></span>
<span id="cb12-507"><a href="liite-3-r-koodi.html#cb12-507"></a><span class="co"># ISSP2012jh1d.dat$lifsta1 %&gt;% fct_count()</span></span>
<span id="cb12-508"><a href="liite-3-r-koodi.html#cb12-508"></a><span class="co"># ISSP2012jh1d.dat$urbru1 %&gt;% fct_count()</span></span>
<span id="cb12-509"><a href="liite-3-r-koodi.html#cb12-509"></a></span>
<span id="cb12-510"><a href="liite-3-r-koodi.html#cb12-510"></a><span class="co"># Poistetaan tyhjät luokat muuttujista</span></span>
<span id="cb12-511"><a href="liite-3-r-koodi.html#cb12-511"></a></span>
<span id="cb12-512"><a href="liite-3-r-koodi.html#cb12-512"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb12-513"><a href="liite-3-r-koodi.html#cb12-513"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1a =</span> <span class="kw">fct_drop</span>(Q1a1),</span>
<span id="cb12-514"><a href="liite-3-r-koodi.html#cb12-514"></a>           <span class="dt">Q1b =</span> <span class="kw">fct_drop</span>(Q1b1),</span>
<span id="cb12-515"><a href="liite-3-r-koodi.html#cb12-515"></a>           <span class="dt">Q1c =</span> <span class="kw">fct_drop</span>(Q1c1),</span>
<span id="cb12-516"><a href="liite-3-r-koodi.html#cb12-516"></a>           <span class="dt">Q1d =</span> <span class="kw">fct_drop</span>(Q1d1),</span>
<span id="cb12-517"><a href="liite-3-r-koodi.html#cb12-517"></a>           <span class="dt">Q1e =</span> <span class="kw">fct_drop</span>(Q1e1),</span>
<span id="cb12-518"><a href="liite-3-r-koodi.html#cb12-518"></a>           <span class="dt">Q2a =</span> <span class="kw">fct_drop</span>(Q2a1),</span>
<span id="cb12-519"><a href="liite-3-r-koodi.html#cb12-519"></a>           <span class="dt">Q2b =</span> <span class="kw">fct_drop</span>(Q2b1),</span>
<span id="cb12-520"><a href="liite-3-r-koodi.html#cb12-520"></a>           <span class="dt">Q3a =</span> <span class="kw">fct_drop</span>(Q3a1),</span>
<span id="cb12-521"><a href="liite-3-r-koodi.html#cb12-521"></a>           <span class="dt">Q3b =</span> <span class="kw">fct_drop</span>(Q3b1),</span>
<span id="cb12-522"><a href="liite-3-r-koodi.html#cb12-522"></a>           <span class="dt">edu =</span> <span class="kw">fct_drop</span>(edu1),</span>
<span id="cb12-523"><a href="liite-3-r-koodi.html#cb12-523"></a>           <span class="dt">msta =</span> <span class="kw">fct_drop</span>(msta1),</span>
<span id="cb12-524"><a href="liite-3-r-koodi.html#cb12-524"></a>           <span class="dt">sosta =</span> <span class="kw">fct_drop</span>(sosta1),</span>
<span id="cb12-525"><a href="liite-3-r-koodi.html#cb12-525"></a>           <span class="dt">nchild =</span> <span class="kw">fct_drop</span>(nchild1),</span>
<span id="cb12-526"><a href="liite-3-r-koodi.html#cb12-526"></a>           <span class="dt">lifsta =</span> <span class="kw">fct_drop</span>(lifsta1),</span>
<span id="cb12-527"><a href="liite-3-r-koodi.html#cb12-527"></a>           <span class="dt">urbru =</span> <span class="kw">fct_drop</span>(urbru1)</span>
<span id="cb12-528"><a href="liite-3-r-koodi.html#cb12-528"></a></span>
<span id="cb12-529"><a href="liite-3-r-koodi.html#cb12-529"></a>    )</span>
<span id="cb12-530"><a href="liite-3-r-koodi.html#cb12-530"></a><span class="co"># Tarkistuksia 1</span></span>
<span id="cb12-531"><a href="liite-3-r-koodi.html#cb12-531"></a></span>
<span id="cb12-532"><a href="liite-3-r-koodi.html#cb12-532"></a><span class="co"># ISSP2012jh1d.dat %&gt;% summary()</span></span>
<span id="cb12-533"><a href="liite-3-r-koodi.html#cb12-533"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-534"><a href="liite-3-r-koodi.html#cb12-534"></a><span class="co">#    select(Q1a, Q1b, Q1c, Q1d, Q1e,Q2a,Q2b,Q3a, Q3b) %&gt;%</span></span>
<span id="cb12-535"><a href="liite-3-r-koodi.html#cb12-535"></a><span class="co">#    str()</span></span>
<span id="cb12-536"><a href="liite-3-r-koodi.html#cb12-536"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-537"><a href="liite-3-r-koodi.html#cb12-537"></a><span class="co">#    select(Q1a1, Q1b1, Q1c1, Q1d1, Q1e1,Q2a1,Q2b1,Q3a1, Q3b1) %&gt;%</span></span>
<span id="cb12-538"><a href="liite-3-r-koodi.html#cb12-538"></a><span class="co">#    str()</span></span>
<span id="cb12-539"><a href="liite-3-r-koodi.html#cb12-539"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-540"><a href="liite-3-r-koodi.html#cb12-540"></a><span class="co">#    select(edu, msta, sosta, nchild,lifsta, urbru) %&gt;%</span></span>
<span id="cb12-541"><a href="liite-3-r-koodi.html#cb12-541"></a><span class="co">#    str()</span></span>
<span id="cb12-542"><a href="liite-3-r-koodi.html#cb12-542"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-543"><a href="liite-3-r-koodi.html#cb12-543"></a><span class="co">#    select(edu1, msta1, sosta1, nchild1,lifsta1, urbru1) %&gt;%</span></span>
<span id="cb12-544"><a href="liite-3-r-koodi.html#cb12-544"></a><span class="co">#    str()</span></span>
<span id="cb12-545"><a href="liite-3-r-koodi.html#cb12-545"></a></span>
<span id="cb12-546"><a href="liite-3-r-koodi.html#cb12-546"></a><span class="co"># Tarkistuksia 2 - ristiintaulukointeja</span></span>
<span id="cb12-547"><a href="liite-3-r-koodi.html#cb12-547"></a><span class="co"># Substanssimuuttujat</span></span>
<span id="cb12-548"><a href="liite-3-r-koodi.html#cb12-548"></a></span>
<span id="cb12-549"><a href="liite-3-r-koodi.html#cb12-549"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1a,Q1a1)</span></span>
<span id="cb12-550"><a href="liite-3-r-koodi.html#cb12-550"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1b,Q1b1)</span></span>
<span id="cb12-551"><a href="liite-3-r-koodi.html#cb12-551"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1c,Q1c1)</span></span>
<span id="cb12-552"><a href="liite-3-r-koodi.html#cb12-552"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1d,Q1d1)</span></span>
<span id="cb12-553"><a href="liite-3-r-koodi.html#cb12-553"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1e,Q1e1)</span></span>
<span id="cb12-554"><a href="liite-3-r-koodi.html#cb12-554"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q2a,Q2a1)</span></span>
<span id="cb12-555"><a href="liite-3-r-koodi.html#cb12-555"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q2b,Q2b1)</span></span>
<span id="cb12-556"><a href="liite-3-r-koodi.html#cb12-556"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q3a,Q3a1)</span></span>
<span id="cb12-557"><a href="liite-3-r-koodi.html#cb12-557"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q3b,Q3b1)</span></span>
<span id="cb12-558"><a href="liite-3-r-koodi.html#cb12-558"></a></span>
<span id="cb12-559"><a href="liite-3-r-koodi.html#cb12-559"></a><span class="co"># Taustamuuttujat</span></span>
<span id="cb12-560"><a href="liite-3-r-koodi.html#cb12-560"></a></span>
<span id="cb12-561"><a href="liite-3-r-koodi.html#cb12-561"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(edu,edu1)</span></span>
<span id="cb12-562"><a href="liite-3-r-koodi.html#cb12-562"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(msta,msta1)</span></span>
<span id="cb12-563"><a href="liite-3-r-koodi.html#cb12-563"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(sosta,sosta1)</span></span>
<span id="cb12-564"><a href="liite-3-r-koodi.html#cb12-564"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(nchild,nchild1)</span></span>
<span id="cb12-565"><a href="liite-3-r-koodi.html#cb12-565"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(lifsta,lifsta1)</span></span>
<span id="cb12-566"><a href="liite-3-r-koodi.html#cb12-566"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(urbru,urbru1)</span></span>
<span id="cb12-567"><a href="liite-3-r-koodi.html#cb12-567"></a></span>
<span id="cb12-568"><a href="liite-3-r-koodi.html#cb12-568"></a><span class="co"># Uusi muuttuja, jossa NA-arvot ovat mukana muuttujan uutena luokkana. Muuttujat</span></span>
<span id="cb12-569"><a href="liite-3-r-koodi.html#cb12-569"></a><span class="co"># nimetään Q1a -&gt; Q1am.</span></span>
<span id="cb12-570"><a href="liite-3-r-koodi.html#cb12-570"></a></span>
<span id="cb12-571"><a href="liite-3-r-koodi.html#cb12-571"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb12-572"><a href="liite-3-r-koodi.html#cb12-572"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1am =</span> <span class="kw">fct_explicit_na</span>(Q1a, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-573"><a href="liite-3-r-koodi.html#cb12-573"></a>           <span class="dt">Q1bm =</span> <span class="kw">fct_explicit_na</span>(Q1b, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-574"><a href="liite-3-r-koodi.html#cb12-574"></a>           <span class="dt">Q1cm =</span> <span class="kw">fct_explicit_na</span>(Q1c, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-575"><a href="liite-3-r-koodi.html#cb12-575"></a>           <span class="dt">Q1dm =</span> <span class="kw">fct_explicit_na</span>(Q1d, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-576"><a href="liite-3-r-koodi.html#cb12-576"></a>           <span class="dt">Q1em =</span> <span class="kw">fct_explicit_na</span>(Q1e, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-577"><a href="liite-3-r-koodi.html#cb12-577"></a>           <span class="dt">Q2am =</span> <span class="kw">fct_explicit_na</span>(Q2a, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-578"><a href="liite-3-r-koodi.html#cb12-578"></a>           <span class="dt">Q2bm =</span> <span class="kw">fct_explicit_na</span>(Q2b, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-579"><a href="liite-3-r-koodi.html#cb12-579"></a>           <span class="dt">Q3am =</span> <span class="kw">fct_explicit_na</span>(Q3a, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-580"><a href="liite-3-r-koodi.html#cb12-580"></a>           <span class="dt">Q3bm =</span> <span class="kw">fct_explicit_na</span>(Q3b, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-581"><a href="liite-3-r-koodi.html#cb12-581"></a>           <span class="dt">edum =</span> <span class="kw">fct_explicit_na</span>(edu, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-582"><a href="liite-3-r-koodi.html#cb12-582"></a>           <span class="dt">mstam =</span> <span class="kw">fct_explicit_na</span>(msta, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-583"><a href="liite-3-r-koodi.html#cb12-583"></a>           <span class="dt">sostam =</span> <span class="kw">fct_explicit_na</span>(sosta, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-584"><a href="liite-3-r-koodi.html#cb12-584"></a>           <span class="dt">nchildm =</span> <span class="kw">fct_explicit_na</span>(nchild, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-585"><a href="liite-3-r-koodi.html#cb12-585"></a>           <span class="dt">lifstam =</span> <span class="kw">fct_explicit_na</span>(lifsta, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-586"><a href="liite-3-r-koodi.html#cb12-586"></a>           <span class="dt">urbrum =</span> <span class="kw">fct_explicit_na</span>(urbru, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb12-587"><a href="liite-3-r-koodi.html#cb12-587"></a>           )</span>
<span id="cb12-588"><a href="liite-3-r-koodi.html#cb12-588"></a><span class="co"># Tarkistuksia 3</span></span>
<span id="cb12-589"><a href="liite-3-r-koodi.html#cb12-589"></a></span>
<span id="cb12-590"><a href="liite-3-r-koodi.html#cb12-590"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-591"><a href="liite-3-r-koodi.html#cb12-591"></a><span class="co">#    select(Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm) %&gt;%</span></span>
<span id="cb12-592"><a href="liite-3-r-koodi.html#cb12-592"></a><span class="co">#    summary()</span></span>
<span id="cb12-593"><a href="liite-3-r-koodi.html#cb12-593"></a><span class="co">#</span></span>
<span id="cb12-594"><a href="liite-3-r-koodi.html#cb12-594"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-595"><a href="liite-3-r-koodi.html#cb12-595"></a><span class="co">#    select(edum,mstam, sostam,nchildm,lifstam, urbrum) %&gt;%</span></span>
<span id="cb12-596"><a href="liite-3-r-koodi.html#cb12-596"></a><span class="co">#    summary()</span></span>
<span id="cb12-597"><a href="liite-3-r-koodi.html#cb12-597"></a><span class="co">#</span></span>
<span id="cb12-598"><a href="liite-3-r-koodi.html#cb12-598"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-599"><a href="liite-3-r-koodi.html#cb12-599"></a><span class="co">#    select(Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm) %&gt;%</span></span>
<span id="cb12-600"><a href="liite-3-r-koodi.html#cb12-600"></a><span class="co">#    str()</span></span>
<span id="cb12-601"><a href="liite-3-r-koodi.html#cb12-601"></a><span class="co">#</span></span>
<span id="cb12-602"><a href="liite-3-r-koodi.html#cb12-602"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-603"><a href="liite-3-r-koodi.html#cb12-603"></a><span class="co">#    select(edum,mstam, sostam,nchildm,lifstam, urbrum) %&gt;%</span></span>
<span id="cb12-604"><a href="liite-3-r-koodi.html#cb12-604"></a><span class="co">#    str()</span></span>
<span id="cb12-605"><a href="liite-3-r-koodi.html#cb12-605"></a></span>
<span id="cb12-606"><a href="liite-3-r-koodi.html#cb12-606"></a><span class="co"># Taustamuuttuja, puuttuva tieto mukana - ristiintaulkointeja</span></span>
<span id="cb12-607"><a href="liite-3-r-koodi.html#cb12-607"></a></span>
<span id="cb12-608"><a href="liite-3-r-koodi.html#cb12-608"></a><span class="co"># ISSP2012jh1d.dat$edum %&gt;% fct_count()</span></span>
<span id="cb12-609"><a href="liite-3-r-koodi.html#cb12-609"></a><span class="co"># ISSP2012jh1d.dat$mstam %&gt;% fct_count()</span></span>
<span id="cb12-610"><a href="liite-3-r-koodi.html#cb12-610"></a><span class="co"># ISSP2012jh1d.dat$sostam %&gt;% fct_count()</span></span>
<span id="cb12-611"><a href="liite-3-r-koodi.html#cb12-611"></a><span class="co"># ISSP2012jh1d.dat$nchildm %&gt;% fct_count()</span></span>
<span id="cb12-612"><a href="liite-3-r-koodi.html#cb12-612"></a><span class="co"># ISSP2012jh1d.dat$lifstam %&gt;% fct_count()</span></span>
<span id="cb12-613"><a href="liite-3-r-koodi.html#cb12-613"></a><span class="co"># ISSP2012jh1d.dat$urbrum %&gt;% fct_count()</span></span>
<span id="cb12-614"><a href="liite-3-r-koodi.html#cb12-614"></a></span>
<span id="cb12-615"><a href="liite-3-r-koodi.html#cb12-615"></a><span class="co"># Substanssimuuttujat, puuttuva tieto mukana  - ristiintaulkointeja</span></span>
<span id="cb12-616"><a href="liite-3-r-koodi.html#cb12-616"></a></span>
<span id="cb12-617"><a href="liite-3-r-koodi.html#cb12-617"></a><span class="co"># ISSP2012jh1d.dat$Q1am %&gt;% fct_count()</span></span>
<span id="cb12-618"><a href="liite-3-r-koodi.html#cb12-618"></a><span class="co"># ISSP2012jh1d.dat$Q1bm %&gt;% fct_count()</span></span>
<span id="cb12-619"><a href="liite-3-r-koodi.html#cb12-619"></a><span class="co"># ISSP2012jh1d.dat$Q1cm %&gt;% fct_count()</span></span>
<span id="cb12-620"><a href="liite-3-r-koodi.html#cb12-620"></a><span class="co"># ISSP2012jh1d.dat$Q1dm %&gt;% fct_count()</span></span>
<span id="cb12-621"><a href="liite-3-r-koodi.html#cb12-621"></a><span class="co"># ISSP2012jh1d.dat$Q1em %&gt;% fct_count()</span></span>
<span id="cb12-622"><a href="liite-3-r-koodi.html#cb12-622"></a><span class="co"># ISSP2012jh1d.dat$Q2am %&gt;% fct_count()</span></span>
<span id="cb12-623"><a href="liite-3-r-koodi.html#cb12-623"></a><span class="co"># ISSP2012jh1d.dat$Q2bm %&gt;% fct_count()</span></span>
<span id="cb12-624"><a href="liite-3-r-koodi.html#cb12-624"></a><span class="co"># ISSP2012jh1d.dat$Q3am %&gt;% fct_count()</span></span>
<span id="cb12-625"><a href="liite-3-r-koodi.html#cb12-625"></a><span class="co"># ISSP2012jh1d.dat$Q3bm %&gt;% fct_count()</span></span>
<span id="cb12-626"><a href="liite-3-r-koodi.html#cb12-626"></a></span>
<span id="cb12-627"><a href="liite-3-r-koodi.html#cb12-627"></a><span class="co"># Vaihe 2.4.1</span></span>
<span id="cb12-628"><a href="liite-3-r-koodi.html#cb12-628"></a></span>
<span id="cb12-629"><a href="liite-3-r-koodi.html#cb12-629"></a><span class="co"># Q1a - Q1e,Q2a, Q2b  Viisi vastausvaihtoehtoa - ei eksplisiittistä NA-tietoa(&quot;missing&quot;)</span></span>
<span id="cb12-630"><a href="liite-3-r-koodi.html#cb12-630"></a><span class="co"># Q3a - Q3b  kolme vastausvaihtoehtoa</span></span>
<span id="cb12-631"><a href="liite-3-r-koodi.html#cb12-631"></a></span>
<span id="cb12-632"><a href="liite-3-r-koodi.html#cb12-632"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb12-633"><a href="liite-3-r-koodi.html#cb12-633"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1a =</span> <span class="kw">fct_recode</span>(Q1a,</span>
<span id="cb12-634"><a href="liite-3-r-koodi.html#cb12-634"></a>                        <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-635"><a href="liite-3-r-koodi.html#cb12-635"></a>                        <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-636"><a href="liite-3-r-koodi.html#cb12-636"></a>                        <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-637"><a href="liite-3-r-koodi.html#cb12-637"></a>                        <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-638"><a href="liite-3-r-koodi.html#cb12-638"></a>                        <span class="st">&quot;E&quot;</span>=<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb12-639"><a href="liite-3-r-koodi.html#cb12-639"></a>            <span class="dt">Q1b =</span> <span class="kw">fct_recode</span>(Q1b,</span>
<span id="cb12-640"><a href="liite-3-r-koodi.html#cb12-640"></a>                      <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-641"><a href="liite-3-r-koodi.html#cb12-641"></a>                      <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-642"><a href="liite-3-r-koodi.html#cb12-642"></a>                      <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-643"><a href="liite-3-r-koodi.html#cb12-643"></a>                      <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-644"><a href="liite-3-r-koodi.html#cb12-644"></a>                      <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb12-645"><a href="liite-3-r-koodi.html#cb12-645"></a>           <span class="dt">Q1c =</span> <span class="kw">fct_recode</span>(Q1c,</span>
<span id="cb12-646"><a href="liite-3-r-koodi.html#cb12-646"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-647"><a href="liite-3-r-koodi.html#cb12-647"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-648"><a href="liite-3-r-koodi.html#cb12-648"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-649"><a href="liite-3-r-koodi.html#cb12-649"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-650"><a href="liite-3-r-koodi.html#cb12-650"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb12-651"><a href="liite-3-r-koodi.html#cb12-651"></a>           <span class="dt">Q1d =</span> <span class="kw">fct_recode</span>(Q1d,</span>
<span id="cb12-652"><a href="liite-3-r-koodi.html#cb12-652"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-653"><a href="liite-3-r-koodi.html#cb12-653"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-654"><a href="liite-3-r-koodi.html#cb12-654"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-655"><a href="liite-3-r-koodi.html#cb12-655"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-656"><a href="liite-3-r-koodi.html#cb12-656"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb12-657"><a href="liite-3-r-koodi.html#cb12-657"></a>           <span class="dt">Q1e =</span> <span class="kw">fct_recode</span>(Q1e,</span>
<span id="cb12-658"><a href="liite-3-r-koodi.html#cb12-658"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-659"><a href="liite-3-r-koodi.html#cb12-659"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-660"><a href="liite-3-r-koodi.html#cb12-660"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-661"><a href="liite-3-r-koodi.html#cb12-661"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-662"><a href="liite-3-r-koodi.html#cb12-662"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb12-663"><a href="liite-3-r-koodi.html#cb12-663"></a>          <span class="dt">Q2a =</span> <span class="kw">fct_recode</span>(Q2a,</span>
<span id="cb12-664"><a href="liite-3-r-koodi.html#cb12-664"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-665"><a href="liite-3-r-koodi.html#cb12-665"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-666"><a href="liite-3-r-koodi.html#cb12-666"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-667"><a href="liite-3-r-koodi.html#cb12-667"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-668"><a href="liite-3-r-koodi.html#cb12-668"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span> ),</span>
<span id="cb12-669"><a href="liite-3-r-koodi.html#cb12-669"></a>          <span class="dt">Q2b =</span> <span class="kw">fct_recode</span>(Q2b,</span>
<span id="cb12-670"><a href="liite-3-r-koodi.html#cb12-670"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-671"><a href="liite-3-r-koodi.html#cb12-671"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-672"><a href="liite-3-r-koodi.html#cb12-672"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-673"><a href="liite-3-r-koodi.html#cb12-673"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-674"><a href="liite-3-r-koodi.html#cb12-674"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb12-675"><a href="liite-3-r-koodi.html#cb12-675"></a>          <span class="dt">Q3a =</span> <span class="kw">fct_recode</span>(Q3a,</span>
<span id="cb12-676"><a href="liite-3-r-koodi.html#cb12-676"></a>                          <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb12-677"><a href="liite-3-r-koodi.html#cb12-677"></a>                          <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb12-678"><a href="liite-3-r-koodi.html#cb12-678"></a>                          <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span> ),</span>
<span id="cb12-679"><a href="liite-3-r-koodi.html#cb12-679"></a>          <span class="dt">Q3b =</span> <span class="kw">fct_recode</span>(Q3b,</span>
<span id="cb12-680"><a href="liite-3-r-koodi.html#cb12-680"></a>                           <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb12-681"><a href="liite-3-r-koodi.html#cb12-681"></a>                           <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb12-682"><a href="liite-3-r-koodi.html#cb12-682"></a>                           <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span> )</span>
<span id="cb12-683"><a href="liite-3-r-koodi.html#cb12-683"></a>                        )</span>
<span id="cb12-684"><a href="liite-3-r-koodi.html#cb12-684"></a></span>
<span id="cb12-685"><a href="liite-3-r-koodi.html#cb12-685"></a></span>
<span id="cb12-686"><a href="liite-3-r-koodi.html#cb12-686"></a><span class="co"># Tarkistuksia 1</span></span>
<span id="cb12-687"><a href="liite-3-r-koodi.html#cb12-687"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-688"><a href="liite-3-r-koodi.html#cb12-688"></a><span class="co">#    select(Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b, Q3a, Q3b) %&gt;%</span></span>
<span id="cb12-689"><a href="liite-3-r-koodi.html#cb12-689"></a><span class="co">#    summary()</span></span>
<span id="cb12-690"><a href="liite-3-r-koodi.html#cb12-690"></a></span>
<span id="cb12-691"><a href="liite-3-r-koodi.html#cb12-691"></a></span>
<span id="cb12-692"><a href="liite-3-r-koodi.html#cb12-692"></a><span class="co"># Vaihe 2.4.2 - muuttujassa eksplisiittinen NA-tieto</span></span>
<span id="cb12-693"><a href="liite-3-r-koodi.html#cb12-693"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb12-694"><a href="liite-3-r-koodi.html#cb12-694"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1am =</span> <span class="kw">fct_recode</span>(Q1am,</span>
<span id="cb12-695"><a href="liite-3-r-koodi.html#cb12-695"></a>                            <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-696"><a href="liite-3-r-koodi.html#cb12-696"></a>                            <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-697"><a href="liite-3-r-koodi.html#cb12-697"></a>                            <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-698"><a href="liite-3-r-koodi.html#cb12-698"></a>                            <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-699"><a href="liite-3-r-koodi.html#cb12-699"></a>                            <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb12-700"><a href="liite-3-r-koodi.html#cb12-700"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb12-701"><a href="liite-3-r-koodi.html#cb12-701"></a>           <span class="dt">Q1bm =</span> <span class="kw">fct_recode</span>(Q1bm,</span>
<span id="cb12-702"><a href="liite-3-r-koodi.html#cb12-702"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-703"><a href="liite-3-r-koodi.html#cb12-703"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-704"><a href="liite-3-r-koodi.html#cb12-704"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-705"><a href="liite-3-r-koodi.html#cb12-705"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-706"><a href="liite-3-r-koodi.html#cb12-706"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb12-707"><a href="liite-3-r-koodi.html#cb12-707"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb12-708"><a href="liite-3-r-koodi.html#cb12-708"></a>           <span class="dt">Q1cm =</span> <span class="kw">fct_recode</span>(Q1cm,</span>
<span id="cb12-709"><a href="liite-3-r-koodi.html#cb12-709"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-710"><a href="liite-3-r-koodi.html#cb12-710"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-711"><a href="liite-3-r-koodi.html#cb12-711"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-712"><a href="liite-3-r-koodi.html#cb12-712"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-713"><a href="liite-3-r-koodi.html#cb12-713"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb12-714"><a href="liite-3-r-koodi.html#cb12-714"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb12-715"><a href="liite-3-r-koodi.html#cb12-715"></a>           <span class="dt">Q1dm =</span> <span class="kw">fct_recode</span>(Q1dm,</span>
<span id="cb12-716"><a href="liite-3-r-koodi.html#cb12-716"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-717"><a href="liite-3-r-koodi.html#cb12-717"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-718"><a href="liite-3-r-koodi.html#cb12-718"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-719"><a href="liite-3-r-koodi.html#cb12-719"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-720"><a href="liite-3-r-koodi.html#cb12-720"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb12-721"><a href="liite-3-r-koodi.html#cb12-721"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb12-722"><a href="liite-3-r-koodi.html#cb12-722"></a>           <span class="dt">Q1em =</span> <span class="kw">fct_recode</span>(Q1em,</span>
<span id="cb12-723"><a href="liite-3-r-koodi.html#cb12-723"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-724"><a href="liite-3-r-koodi.html#cb12-724"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-725"><a href="liite-3-r-koodi.html#cb12-725"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-726"><a href="liite-3-r-koodi.html#cb12-726"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-727"><a href="liite-3-r-koodi.html#cb12-727"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb12-728"><a href="liite-3-r-koodi.html#cb12-728"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb12-729"><a href="liite-3-r-koodi.html#cb12-729"></a>           <span class="dt">Q2am =</span> <span class="kw">fct_recode</span>(Q2am,</span>
<span id="cb12-730"><a href="liite-3-r-koodi.html#cb12-730"></a>                            <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-731"><a href="liite-3-r-koodi.html#cb12-731"></a>                            <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-732"><a href="liite-3-r-koodi.html#cb12-732"></a>                            <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-733"><a href="liite-3-r-koodi.html#cb12-733"></a>                            <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-734"><a href="liite-3-r-koodi.html#cb12-734"></a>                            <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb12-735"><a href="liite-3-r-koodi.html#cb12-735"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb12-736"><a href="liite-3-r-koodi.html#cb12-736"></a>           <span class="dt">Q2bm =</span> <span class="kw">fct_recode</span>(Q2bm,</span>
<span id="cb12-737"><a href="liite-3-r-koodi.html#cb12-737"></a>                            <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb12-738"><a href="liite-3-r-koodi.html#cb12-738"></a>                            <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb12-739"><a href="liite-3-r-koodi.html#cb12-739"></a>                            <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb12-740"><a href="liite-3-r-koodi.html#cb12-740"></a>                            <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb12-741"><a href="liite-3-r-koodi.html#cb12-741"></a>                            <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb12-742"><a href="liite-3-r-koodi.html#cb12-742"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb12-743"><a href="liite-3-r-koodi.html#cb12-743"></a>           <span class="dt">Q3am =</span> <span class="kw">fct_recode</span>(Q3am,</span>
<span id="cb12-744"><a href="liite-3-r-koodi.html#cb12-744"></a>                            <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb12-745"><a href="liite-3-r-koodi.html#cb12-745"></a>                            <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb12-746"><a href="liite-3-r-koodi.html#cb12-746"></a>                            <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span>,</span>
<span id="cb12-747"><a href="liite-3-r-koodi.html#cb12-747"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb12-748"><a href="liite-3-r-koodi.html#cb12-748"></a>           <span class="dt">Q3bm =</span> <span class="kw">fct_recode</span>(Q3bm,</span>
<span id="cb12-749"><a href="liite-3-r-koodi.html#cb12-749"></a>                            <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb12-750"><a href="liite-3-r-koodi.html#cb12-750"></a>                            <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb12-751"><a href="liite-3-r-koodi.html#cb12-751"></a>                            <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span>,</span>
<span id="cb12-752"><a href="liite-3-r-koodi.html#cb12-752"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>)</span>
<span id="cb12-753"><a href="liite-3-r-koodi.html#cb12-753"></a>               )</span>
<span id="cb12-754"><a href="liite-3-r-koodi.html#cb12-754"></a></span>
<span id="cb12-755"><a href="liite-3-r-koodi.html#cb12-755"></a><span class="co"># Tarkistuksia 4</span></span>
<span id="cb12-756"><a href="liite-3-r-koodi.html#cb12-756"></a></span>
<span id="cb12-757"><a href="liite-3-r-koodi.html#cb12-757"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-758"><a href="liite-3-r-koodi.html#cb12-758"></a><span class="co">#    select(Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm) %&gt;%</span></span>
<span id="cb12-759"><a href="liite-3-r-koodi.html#cb12-759"></a><span class="co">#    summary()</span></span>
<span id="cb12-760"><a href="liite-3-r-koodi.html#cb12-760"></a></span>
<span id="cb12-761"><a href="liite-3-r-koodi.html#cb12-761"></a><span class="co"># Tarkistuksia 5</span></span>
<span id="cb12-762"><a href="liite-3-r-koodi.html#cb12-762"></a></span>
<span id="cb12-763"><a href="liite-3-r-koodi.html#cb12-763"></a><span class="co"># Substanssimuuttuja</span></span>
<span id="cb12-764"><a href="liite-3-r-koodi.html#cb12-764"></a></span>
<span id="cb12-765"><a href="liite-3-r-koodi.html#cb12-765"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-766"><a href="liite-3-r-koodi.html#cb12-766"></a><span class="co">#    tableX(Q1a,Q1am)</span></span>
<span id="cb12-767"><a href="liite-3-r-koodi.html#cb12-767"></a><span class="co">#</span></span>
<span id="cb12-768"><a href="liite-3-r-koodi.html#cb12-768"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-769"><a href="liite-3-r-koodi.html#cb12-769"></a><span class="co">#    tableX(Q1b,Q1bm)</span></span>
<span id="cb12-770"><a href="liite-3-r-koodi.html#cb12-770"></a><span class="co">#</span></span>
<span id="cb12-771"><a href="liite-3-r-koodi.html#cb12-771"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-772"><a href="liite-3-r-koodi.html#cb12-772"></a><span class="co">#    tableX(Q1c,Q1cm)</span></span>
<span id="cb12-773"><a href="liite-3-r-koodi.html#cb12-773"></a><span class="co">#</span></span>
<span id="cb12-774"><a href="liite-3-r-koodi.html#cb12-774"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-775"><a href="liite-3-r-koodi.html#cb12-775"></a><span class="co">#    tableX(Q1d,Q1dm)</span></span>
<span id="cb12-776"><a href="liite-3-r-koodi.html#cb12-776"></a><span class="co">#</span></span>
<span id="cb12-777"><a href="liite-3-r-koodi.html#cb12-777"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-778"><a href="liite-3-r-koodi.html#cb12-778"></a><span class="co">#    tableX(Q1e,Q1em)</span></span>
<span id="cb12-779"><a href="liite-3-r-koodi.html#cb12-779"></a><span class="co">#</span></span>
<span id="cb12-780"><a href="liite-3-r-koodi.html#cb12-780"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-781"><a href="liite-3-r-koodi.html#cb12-781"></a><span class="co">#    tableX(Q2a,Q2am)</span></span>
<span id="cb12-782"><a href="liite-3-r-koodi.html#cb12-782"></a><span class="co">#</span></span>
<span id="cb12-783"><a href="liite-3-r-koodi.html#cb12-783"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-784"><a href="liite-3-r-koodi.html#cb12-784"></a><span class="co">#    tableX(Q2b,Q2bm)</span></span>
<span id="cb12-785"><a href="liite-3-r-koodi.html#cb12-785"></a><span class="co">#</span></span>
<span id="cb12-786"><a href="liite-3-r-koodi.html#cb12-786"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-787"><a href="liite-3-r-koodi.html#cb12-787"></a><span class="co">#    tableX(Q3a,Q3am)</span></span>
<span id="cb12-788"><a href="liite-3-r-koodi.html#cb12-788"></a><span class="co">#</span></span>
<span id="cb12-789"><a href="liite-3-r-koodi.html#cb12-789"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-790"><a href="liite-3-r-koodi.html#cb12-790"></a><span class="co">#    tableX(Q3b,Q3bm)</span></span>
<span id="cb12-791"><a href="liite-3-r-koodi.html#cb12-791"></a><span class="co">#</span></span>
<span id="cb12-792"><a href="liite-3-r-koodi.html#cb12-792"></a><span class="co"># ISSP2012jh1d.dat %&gt;% </span></span>
<span id="cb12-793"><a href="liite-3-r-koodi.html#cb12-793"></a><span class="co">#    tableX(Q3am,Q3a)</span></span>
<span id="cb12-794"><a href="liite-3-r-koodi.html#cb12-794"></a><span class="co">#</span></span>
<span id="cb12-795"><a href="liite-3-r-koodi.html#cb12-795"></a><span class="co"># ISSP2012jh1d.dat$Q3a %&gt;% levels()</span></span>
<span id="cb12-796"><a href="liite-3-r-koodi.html#cb12-796"></a><span class="co"># ISSP2012jh1d.dat$Q3am %&gt;% levels()</span></span>
<span id="cb12-797"><a href="liite-3-r-koodi.html#cb12-797"></a></span>
<span id="cb12-798"><a href="liite-3-r-koodi.html#cb12-798"></a><span class="co"># Taustamuuttujat - ristiintaulukointeja</span></span>
<span id="cb12-799"><a href="liite-3-r-koodi.html#cb12-799"></a></span>
<span id="cb12-800"><a href="liite-3-r-koodi.html#cb12-800"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-801"><a href="liite-3-r-koodi.html#cb12-801"></a><span class="co">#    tableX(edu, edum)</span></span>
<span id="cb12-802"><a href="liite-3-r-koodi.html#cb12-802"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-803"><a href="liite-3-r-koodi.html#cb12-803"></a><span class="co">#    tableX(msta, mstam)</span></span>
<span id="cb12-804"><a href="liite-3-r-koodi.html#cb12-804"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-805"><a href="liite-3-r-koodi.html#cb12-805"></a><span class="co">#    tableX(sosta, sostam)</span></span>
<span id="cb12-806"><a href="liite-3-r-koodi.html#cb12-806"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-807"><a href="liite-3-r-koodi.html#cb12-807"></a><span class="co">#    tableX(nchild,nchildm)</span></span>
<span id="cb12-808"><a href="liite-3-r-koodi.html#cb12-808"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-809"><a href="liite-3-r-koodi.html#cb12-809"></a><span class="co">#    tableX(lifsta, lifstam)</span></span>
<span id="cb12-810"><a href="liite-3-r-koodi.html#cb12-810"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb12-811"><a href="liite-3-r-koodi.html#cb12-811"></a><span class="co">#    tableX(urbru, urbrum)</span></span>
<span id="cb12-812"><a href="liite-3-r-koodi.html#cb12-812"></a></span>
<span id="cb12-813"><a href="liite-3-r-koodi.html#cb12-813"></a><span class="co"># (16.9.2020) Testaus uusille muuttujille</span></span>
<span id="cb12-814"><a href="liite-3-r-koodi.html#cb12-814"></a><span class="co"># Koodilohkoissa on jo testattu taulukoimalla muuttujia. Tässä varmistetaan, että</span></span>
<span id="cb12-815"><a href="liite-3-r-koodi.html#cb12-815"></a><span class="co"># muuttujat pysyvät sellaisina millaisiksi ne on luotu.</span></span>
<span id="cb12-816"><a href="liite-3-r-koodi.html#cb12-816"></a></span>
<span id="cb12-817"><a href="liite-3-r-koodi.html#cb12-817"></a><span class="co"># ika - onpas hankala testata !</span></span>
<span id="cb12-818"><a href="liite-3-r-koodi.html#cb12-818"></a><span class="co"># Min. 1st Qu.  Median    Mean 3rd Qu.    Max.</span></span>
<span id="cb12-819"><a href="liite-3-r-koodi.html#cb12-819"></a><span class="co"># 15.00   36.00   50.00   49.52   63.00  102.00</span></span>
<span id="cb12-820"><a href="liite-3-r-koodi.html#cb12-820"></a><span class="co"># ikatest &lt;- ISSP2012jh1d.dat$ika %&gt;% summary()</span></span>
<span id="cb12-821"><a href="liite-3-r-koodi.html#cb12-821"></a><span class="co">#   ikatest &lt;- ikatest[2,]</span></span>
<span id="cb12-822"><a href="liite-3-r-koodi.html#cb12-822"></a><span class="co">#validate_that(are_equal(ikatest, c(15, 36, 50, 49.5, 63, 102)))</span></span>
<span id="cb12-823"><a href="liite-3-r-koodi.html#cb12-823"></a><span class="co">#str(ISSP2012jh1d.dat)</span></span>
<span id="cb12-824"><a href="liite-3-r-koodi.html#cb12-824"></a><span class="co">#ISSP2012jh1d.dat %&gt;% </span></span>
<span id="cb12-825"><a href="liite-3-r-koodi.html#cb12-825"></a></span>
<span id="cb12-826"><a href="liite-3-r-koodi.html#cb12-826"></a><span class="co"># substanssimuuttujat 1</span></span>
<span id="cb12-827"><a href="liite-3-r-koodi.html#cb12-827"></a><span class="co"># Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b, Q3a, Q3b (r. 423-&gt;)</span></span>
<span id="cb12-828"><a href="liite-3-r-koodi.html#cb12-828"></a></span>
<span id="cb12-829"><a href="liite-3-r-koodi.html#cb12-829"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1a)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb12-830"><a href="liite-3-r-koodi.html#cb12-830"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1a),</span>
<span id="cb12-831"><a href="liite-3-r-koodi.html#cb12-831"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb12-832"><a href="liite-3-r-koodi.html#cb12-832"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1b)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb12-833"><a href="liite-3-r-koodi.html#cb12-833"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1b),</span>
<span id="cb12-834"><a href="liite-3-r-koodi.html#cb12-834"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb12-835"><a href="liite-3-r-koodi.html#cb12-835"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1c)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb12-836"><a href="liite-3-r-koodi.html#cb12-836"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1c),</span>
<span id="cb12-837"><a href="liite-3-r-koodi.html#cb12-837"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb12-838"><a href="liite-3-r-koodi.html#cb12-838"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1d)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb12-839"><a href="liite-3-r-koodi.html#cb12-839"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1d),</span>
<span id="cb12-840"><a href="liite-3-r-koodi.html#cb12-840"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb12-841"><a href="liite-3-r-koodi.html#cb12-841"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1e)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb12-842"><a href="liite-3-r-koodi.html#cb12-842"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1e),</span>
<span id="cb12-843"><a href="liite-3-r-koodi.html#cb12-843"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb12-844"><a href="liite-3-r-koodi.html#cb12-844"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2a)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb12-845"><a href="liite-3-r-koodi.html#cb12-845"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2a),</span>
<span id="cb12-846"><a href="liite-3-r-koodi.html#cb12-846"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb12-847"><a href="liite-3-r-koodi.html#cb12-847"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2b)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb12-848"><a href="liite-3-r-koodi.html#cb12-848"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2b),</span>
<span id="cb12-849"><a href="liite-3-r-koodi.html#cb12-849"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb12-850"><a href="liite-3-r-koodi.html#cb12-850"></a></span>
<span id="cb12-851"><a href="liite-3-r-koodi.html#cb12-851"></a><span class="co"># substanssimuuttujat 2</span></span>
<span id="cb12-852"><a href="liite-3-r-koodi.html#cb12-852"></a></span>
<span id="cb12-853"><a href="liite-3-r-koodi.html#cb12-853"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3a)) <span class="op">==</span><span class="st"> </span><span class="dv">3</span>)</span>
<span id="cb12-854"><a href="liite-3-r-koodi.html#cb12-854"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3a),</span>
<span id="cb12-855"><a href="liite-3-r-koodi.html#cb12-855"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>)))</span>
<span id="cb12-856"><a href="liite-3-r-koodi.html#cb12-856"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3b)) <span class="op">==</span><span class="st"> </span><span class="dv">3</span>)</span>
<span id="cb12-857"><a href="liite-3-r-koodi.html#cb12-857"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3b),</span>
<span id="cb12-858"><a href="liite-3-r-koodi.html#cb12-858"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>)))</span>
<span id="cb12-859"><a href="liite-3-r-koodi.html#cb12-859"></a></span>
<span id="cb12-860"><a href="liite-3-r-koodi.html#cb12-860"></a></span>
<span id="cb12-861"><a href="liite-3-r-koodi.html#cb12-861"></a></span>
<span id="cb12-862"><a href="liite-3-r-koodi.html#cb12-862"></a><span class="co"># substanssimuuttujat, puuttuva tieto muuttujan arvona</span></span>
<span id="cb12-863"><a href="liite-3-r-koodi.html#cb12-863"></a><span class="co"># Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm</span></span>
<span id="cb12-864"><a href="liite-3-r-koodi.html#cb12-864"></a></span>
<span id="cb12-865"><a href="liite-3-r-koodi.html#cb12-865"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1am)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb12-866"><a href="liite-3-r-koodi.html#cb12-866"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1am),</span>
<span id="cb12-867"><a href="liite-3-r-koodi.html#cb12-867"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb12-868"><a href="liite-3-r-koodi.html#cb12-868"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1bm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb12-869"><a href="liite-3-r-koodi.html#cb12-869"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1bm),</span>
<span id="cb12-870"><a href="liite-3-r-koodi.html#cb12-870"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb12-871"><a href="liite-3-r-koodi.html#cb12-871"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1cm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb12-872"><a href="liite-3-r-koodi.html#cb12-872"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1cm),</span>
<span id="cb12-873"><a href="liite-3-r-koodi.html#cb12-873"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb12-874"><a href="liite-3-r-koodi.html#cb12-874"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1dm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb12-875"><a href="liite-3-r-koodi.html#cb12-875"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1dm),</span>
<span id="cb12-876"><a href="liite-3-r-koodi.html#cb12-876"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb12-877"><a href="liite-3-r-koodi.html#cb12-877"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1em)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb12-878"><a href="liite-3-r-koodi.html#cb12-878"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1em),</span>
<span id="cb12-879"><a href="liite-3-r-koodi.html#cb12-879"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb12-880"><a href="liite-3-r-koodi.html#cb12-880"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2am)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb12-881"><a href="liite-3-r-koodi.html#cb12-881"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2am),</span>
<span id="cb12-882"><a href="liite-3-r-koodi.html#cb12-882"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb12-883"><a href="liite-3-r-koodi.html#cb12-883"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2bm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb12-884"><a href="liite-3-r-koodi.html#cb12-884"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2bm),</span>
<span id="cb12-885"><a href="liite-3-r-koodi.html#cb12-885"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb12-886"><a href="liite-3-r-koodi.html#cb12-886"></a></span>
<span id="cb12-887"><a href="liite-3-r-koodi.html#cb12-887"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3am)) <span class="op">==</span><span class="st"> </span><span class="dv">4</span>)</span>
<span id="cb12-888"><a href="liite-3-r-koodi.html#cb12-888"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3am),</span>
<span id="cb12-889"><a href="liite-3-r-koodi.html#cb12-889"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb12-890"><a href="liite-3-r-koodi.html#cb12-890"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3bm)) <span class="op">==</span><span class="st"> </span><span class="dv">4</span>)</span>
<span id="cb12-891"><a href="liite-3-r-koodi.html#cb12-891"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3bm),</span>
<span id="cb12-892"><a href="liite-3-r-koodi.html#cb12-892"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb12-893"><a href="liite-3-r-koodi.html#cb12-893"></a></span>
<span id="cb12-894"><a href="liite-3-r-koodi.html#cb12-894"></a><span class="co"># taustamuuttujat puuttuvilla tiedoilla ja ilman</span></span>
<span id="cb12-895"><a href="liite-3-r-koodi.html#cb12-895"></a><span class="co"># testataan vain tasojen määrä, ei labeleita jotka ovat </span></span>
<span id="cb12-896"><a href="liite-3-r-koodi.html#cb12-896"></a><span class="co"># alkuperäisestä datasta.</span></span>
<span id="cb12-897"><a href="liite-3-r-koodi.html#cb12-897"></a></span>
<span id="cb12-898"><a href="liite-3-r-koodi.html#cb12-898"></a><span class="co"># edu, edum Huom! Koulutustasoluokitus alkuperäisessä</span></span>
<span id="cb12-899"><a href="liite-3-r-koodi.html#cb12-899"></a><span class="co"># datassa 0-6 (ei muodollista koulusta - korkeampi kolmas aste (maisteri, tohtori)</span></span>
<span id="cb12-900"><a href="liite-3-r-koodi.html#cb12-900"></a><span class="co"># R-faktorissa 1-7</span></span>
<span id="cb12-901"><a href="liite-3-r-koodi.html#cb12-901"></a></span>
<span id="cb12-902"><a href="liite-3-r-koodi.html#cb12-902"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>edu)) <span class="op">==</span><span class="st"> </span><span class="dv">7</span>)</span>
<span id="cb12-903"><a href="liite-3-r-koodi.html#cb12-903"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>edum)) <span class="op">==</span><span class="st"> </span><span class="dv">8</span>)</span>
<span id="cb12-904"><a href="liite-3-r-koodi.html#cb12-904"></a></span>
<span id="cb12-905"><a href="liite-3-r-koodi.html#cb12-905"></a><span class="co"># msta, mstam</span></span>
<span id="cb12-906"><a href="liite-3-r-koodi.html#cb12-906"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>msta)) <span class="op">==</span><span class="st"> </span><span class="dv">9</span>)</span>
<span id="cb12-907"><a href="liite-3-r-koodi.html#cb12-907"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>mstam)) <span class="op">==</span><span class="st"> </span><span class="dv">10</span>)</span>
<span id="cb12-908"><a href="liite-3-r-koodi.html#cb12-908"></a></span>
<span id="cb12-909"><a href="liite-3-r-koodi.html#cb12-909"></a><span class="co"># sosta, sostam</span></span>
<span id="cb12-910"><a href="liite-3-r-koodi.html#cb12-910"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>sosta)) <span class="op">==</span><span class="st"> </span><span class="dv">10</span>)</span>
<span id="cb12-911"><a href="liite-3-r-koodi.html#cb12-911"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>sostam)) <span class="op">==</span><span class="st"> </span><span class="dv">11</span>)</span>
<span id="cb12-912"><a href="liite-3-r-koodi.html#cb12-912"></a></span>
<span id="cb12-913"><a href="liite-3-r-koodi.html#cb12-913"></a><span class="co"># nchild, ncildm</span></span>
<span id="cb12-914"><a href="liite-3-r-koodi.html#cb12-914"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>nchild)) <span class="op">==</span><span class="st"> </span><span class="dv">11</span>)</span>
<span id="cb12-915"><a href="liite-3-r-koodi.html#cb12-915"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>nchildm)) <span class="op">==</span><span class="st"> </span><span class="dv">12</span>)</span>
<span id="cb12-916"><a href="liite-3-r-koodi.html#cb12-916"></a></span>
<span id="cb12-917"><a href="liite-3-r-koodi.html#cb12-917"></a><span class="co"># lifsta, lifstam</span></span>
<span id="cb12-918"><a href="liite-3-r-koodi.html#cb12-918"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>lifsta)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb12-919"><a href="liite-3-r-koodi.html#cb12-919"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>lifstam)) <span class="op">==</span><span class="st"> </span><span class="dv">7</span>)</span>
<span id="cb12-920"><a href="liite-3-r-koodi.html#cb12-920"></a></span>
<span id="cb12-921"><a href="liite-3-r-koodi.html#cb12-921"></a><span class="co"># urbru, urbrum</span></span>
<span id="cb12-922"><a href="liite-3-r-koodi.html#cb12-922"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>urbru)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb12-923"><a href="liite-3-r-koodi.html#cb12-923"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>urbrum)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb12-924"><a href="liite-3-r-koodi.html#cb12-924"></a></span>
<span id="cb12-925"><a href="liite-3-r-koodi.html#cb12-925"></a>issp_docname &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Variable Report&quot;</span>, <span class="st">&quot;Study Monitoring Report&quot;</span>,<span class="st">&quot;Basic Questionnaire&quot;</span>,</span>
<span id="cb12-926"><a href="liite-3-r-koodi.html#cb12-926"></a>                  <span class="st">&quot;Contents of ISSP 2012 module&quot;</span>, <span class="st">&quot;Questionnaire Development&quot;</span>)</span>
<span id="cb12-927"><a href="liite-3-r-koodi.html#cb12-927"></a>issp_docdesc &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Perusdokumentti, muuttujien kuvaukset ja taulukot&quot;</span>,</span>
<span id="cb12-928"><a href="liite-3-r-koodi.html#cb12-928"></a>                  <span class="st">&quot;tiedokeruun toteutus eri maissa&quot;</span>,</span>
<span id="cb12-929"><a href="liite-3-r-koodi.html#cb12-929"></a>                  <span class="st">&quot;Maittain sovellettava kyselylomake&quot;</span>, <span class="st">&quot;substanssikysymykset taulukkona&quot;</span>,</span>
<span id="cb12-930"><a href="liite-3-r-koodi.html#cb12-930"></a>                  <span class="st">&quot;kyselylomakkeen laatiminen&quot;</span>)</span>
<span id="cb12-931"><a href="liite-3-r-koodi.html#cb12-931"></a>issp_docfile &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ZA5900_cdb.pdf&quot;</span>, <span class="st">&quot;ZA5900_mr.pdf&quot;</span>, <span class="st">&quot;ZA5900_bq.pdf&quot;</span>,<span class="st">&quot;ZA5900_overview.pdf&quot;</span>,</span>
<span id="cb12-932"><a href="liite-3-r-koodi.html#cb12-932"></a>                  <span class="st">&quot;ssoar-2014-scholz_et_al-ISSP_2012_Family_and_Changing.pdf&quot;</span>)</span>
<span id="cb12-933"><a href="liite-3-r-koodi.html#cb12-933"></a></span>
<span id="cb12-934"><a href="liite-3-r-koodi.html#cb12-934"></a></span>
<span id="cb12-935"><a href="liite-3-r-koodi.html#cb12-935"></a>col_isspdocs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dokumentti&quot;</span>,<span class="st">&quot;sisältö&quot;</span>,<span class="st">&quot;tiedosto&quot;</span>)</span>
<span id="cb12-936"><a href="liite-3-r-koodi.html#cb12-936"></a></span>
<span id="cb12-937"><a href="liite-3-r-koodi.html#cb12-937"></a>ISSPdocsT.tbl &lt;-<span class="st"> </span><span class="kw">tibble</span>(issp_docname, issp_docdesc, issp_docfile)</span>
<span id="cb12-938"><a href="liite-3-r-koodi.html#cb12-938"></a><span class="kw">colnames</span>(ISSPdocsT.tbl) &lt;-<span class="st"> </span>col_isspdocs</span>
<span id="cb12-939"><a href="liite-3-r-koodi.html#cb12-939"></a></span>
<span id="cb12-940"><a href="liite-3-r-koodi.html#cb12-940"></a>knitr<span class="op">::</span><span class="kw">kable</span>(ISSPdocsT.tbl, <span class="dt">booktab =</span> <span class="ot">TRUE</span>,</span>
<span id="cb12-941"><a href="liite-3-r-koodi.html#cb12-941"></a>             <span class="dt">caption =</span> <span class="st">&#39; ISSP 2012: tärkeimmät dokumentit&#39;</span>)</span>
<span id="cb12-942"><a href="liite-3-r-koodi.html#cb12-942"></a></span>
<span id="cb12-943"><a href="liite-3-r-koodi.html#cb12-943"></a></span>
<span id="cb12-944"><a href="liite-3-r-koodi.html#cb12-944"></a><span class="co"># Muuttuja taulukkona - karkea tapa</span></span>
<span id="cb12-945"><a href="liite-3-r-koodi.html#cb12-945"></a><span class="co"># HUOM! Taulkot ovat hankalia, kun tulostus halutaan pdf- ja html- formaattiin</span></span>
<span id="cb12-946"><a href="liite-3-r-koodi.html#cb12-946"></a><span class="co"># Kysymyste pitkät versiot on siksi esitetty suomenkielisen lomakkeen kuvana.</span></span>
<span id="cb12-947"><a href="liite-3-r-koodi.html#cb12-947"></a></span>
<span id="cb12-948"><a href="liite-3-r-koodi.html#cb12-948"></a>tabVarnames &lt;-<span class="st"> </span><span class="kw">c</span>(substvars1,bgvars1) <span class="co"># muuttujanimet muuttujille</span></span>
<span id="cb12-949"><a href="liite-3-r-koodi.html#cb12-949"></a></span>
<span id="cb12-950"><a href="liite-3-r-koodi.html#cb12-950"></a><span class="co"># Kysymysten lyhyet versiot englanniksi</span></span>
<span id="cb12-951"><a href="liite-3-r-koodi.html#cb12-951"></a>tabVarDesc &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Q1a Working mother can have warm relation with child &quot;</span>,</span>
<span id="cb12-952"><a href="liite-3-r-koodi.html#cb12-952"></a>                <span class="st">&quot;Q1b Pre-school child suffers through working mother&quot;</span>,</span>
<span id="cb12-953"><a href="liite-3-r-koodi.html#cb12-953"></a>                <span class="st">&quot;Q1c Family life suffers through working mother&quot;</span>,</span>
<span id="cb12-954"><a href="liite-3-r-koodi.html#cb12-954"></a>                <span class="st">&quot;Q1d Women’s preference: home and children&quot;</span>,</span>
<span id="cb12-955"><a href="liite-3-r-koodi.html#cb12-955"></a>                <span class="st">&quot;Q1e Being housewife is satisfying&quot;</span>,</span>
<span id="cb12-956"><a href="liite-3-r-koodi.html#cb12-956"></a>                <span class="st">&quot;Q2a Both should contribute to household income&quot;</span>,</span>
<span id="cb12-957"><a href="liite-3-r-koodi.html#cb12-957"></a>                <span class="st">&quot;Q2b Men’s job is earn money, women’s job household&quot;</span>,</span>
<span id="cb12-958"><a href="liite-3-r-koodi.html#cb12-958"></a>                <span class="st">&quot;Q3a Should women work: Child under school age&quot;</span>,</span>
<span id="cb12-959"><a href="liite-3-r-koodi.html#cb12-959"></a>                <span class="st">&quot;Q3b Should women work: Youngest kid at school&quot;</span>,</span>
<span id="cb12-960"><a href="liite-3-r-koodi.html#cb12-960"></a>                <span class="st">&quot;Respondents age &quot;</span>,</span>
<span id="cb12-961"><a href="liite-3-r-koodi.html#cb12-961"></a>                <span class="st">&quot;Respondents gender&quot;</span>,</span>
<span id="cb12-962"><a href="liite-3-r-koodi.html#cb12-962"></a>                <span class="st">&quot;Highest completed degree of education: Categories for international comparison&quot;</span>,</span>
<span id="cb12-963"><a href="liite-3-r-koodi.html#cb12-963"></a>                <span class="st">&quot;Main status: work, unemployed, in education...&quot;</span>,</span>
<span id="cb12-964"><a href="liite-3-r-koodi.html#cb12-964"></a>                <span class="st">&quot;Top-Bottom self-placement (10 pt scale)&quot;</span>,</span>
<span id="cb12-965"><a href="liite-3-r-koodi.html#cb12-965"></a>                <span class="st">&quot;How many children in household: children between [school age] and 17 years of age&quot;</span>,</span>
<span id="cb12-966"><a href="liite-3-r-koodi.html#cb12-966"></a>                <span class="st">&quot;Legal partnership status: married, civil partership...&quot;</span>,</span>
<span id="cb12-967"><a href="liite-3-r-koodi.html#cb12-967"></a>                <span class="st">&quot;Place of living: urban - rural&quot;</span></span>
<span id="cb12-968"><a href="liite-3-r-koodi.html#cb12-968"></a>              )</span>
<span id="cb12-969"><a href="liite-3-r-koodi.html#cb12-969"></a><span class="co">#tabVarDesc</span></span>
<span id="cb12-970"><a href="liite-3-r-koodi.html#cb12-970"></a></span>
<span id="cb12-971"><a href="liite-3-r-koodi.html#cb12-971"></a><span class="co"># Taulukko</span></span>
<span id="cb12-972"><a href="liite-3-r-koodi.html#cb12-972"></a></span>
<span id="cb12-973"><a href="liite-3-r-koodi.html#cb12-973"></a><span class="co"># luodaan df - varoitus: data_frame() is deprecated, use tibble” (4.2.20),</span></span>
<span id="cb12-974"><a href="liite-3-r-koodi.html#cb12-974"></a><span class="co"># vaihdetaan tibbleen (21.2.20)</span></span>
<span id="cb12-975"><a href="liite-3-r-koodi.html#cb12-975"></a></span>
<span id="cb12-976"><a href="liite-3-r-koodi.html#cb12-976"></a><span class="co"># jhVarTable1.df &lt;- data_frame(tabVarnames,tabVarDesc) OLD</span></span>
<span id="cb12-977"><a href="liite-3-r-koodi.html#cb12-977"></a>jhVarTable1.tbl &lt;-<span class="st"> </span><span class="kw">tibble</span>(tabVarnames,tabVarDesc)</span>
<span id="cb12-978"><a href="liite-3-r-koodi.html#cb12-978"></a>cols_jhVarTable1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;muuttuja&quot;</span>,<span class="st">&quot;kysymyksen tunnus, lyhennetty kysymys&quot;</span>)</span>
<span id="cb12-979"><a href="liite-3-r-koodi.html#cb12-979"></a><span class="kw">colnames</span>(jhVarTable1.tbl) &lt;-<span class="st"> </span>cols_jhVarTable1</span>
<span id="cb12-980"><a href="liite-3-r-koodi.html#cb12-980"></a><span class="co">#str(jhVarTable1.tbl)</span></span>
<span id="cb12-981"><a href="liite-3-r-koodi.html#cb12-981"></a><span class="co"># Lyhyet kysymykset englanniksi</span></span>
<span id="cb12-982"><a href="liite-3-r-koodi.html#cb12-982"></a></span>
<span id="cb12-983"><a href="liite-3-r-koodi.html#cb12-983"></a>knitr<span class="op">::</span><span class="kw">kable</span>(jhVarTable1.tbl, <span class="dt">booktab =</span> <span class="ot">TRUE</span>,</span>
<span id="cb12-984"><a href="liite-3-r-koodi.html#cb12-984"></a>               <span class="dt">caption =</span> <span class="st">&quot;ISSP2012:Työelämä ja perhearvot - kysymykset&quot;</span>)</span>
<span id="cb12-985"><a href="liite-3-r-koodi.html#cb12-985"></a></span>
<span id="cb12-986"><a href="liite-3-r-koodi.html#cb12-986"></a></span>
<span id="cb12-987"><a href="liite-3-r-koodi.html#cb12-987"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/substvar_fi_Q1Q2.png&#39;</span>)</span>
<span id="cb12-988"><a href="liite-3-r-koodi.html#cb12-988"></a></span>
<span id="cb12-989"><a href="liite-3-r-koodi.html#cb12-989"></a><span class="co"># UUSI DATA 30.1.20</span></span>
<span id="cb12-990"><a href="liite-3-r-koodi.html#cb12-990"></a><span class="co">#</span></span>
<span id="cb12-991"><a href="liite-3-r-koodi.html#cb12-991"></a><span class="co"># LUETAAN DATA G1_1_data2.Rmd - tiedostossa, luodaan faktorimuuttujat</span></span>
<span id="cb12-992"><a href="liite-3-r-koodi.html#cb12-992"></a><span class="co"># G1_1_data_fct1.Rmd-tiedostossa -&gt; ISSP2012jh1d.dat (df)</span></span>
<span id="cb12-993"><a href="liite-3-r-koodi.html#cb12-993"></a><span class="co"># 23 muuttujaa (9 substanssimuuttujaa, 8 taustamuuttujaa, 3 maa-muuttujaa, 3 metadatamuuttujaa)</span></span>
<span id="cb12-994"><a href="liite-3-r-koodi.html#cb12-994"></a><span class="co"># 25 maata.</span></span>
<span id="cb12-995"><a href="liite-3-r-koodi.html#cb12-995"></a><span class="co"># Poistettu 146 havaintoa, joilla SEX tai AGE puuttuu</span></span>
<span id="cb12-996"><a href="liite-3-r-koodi.html#cb12-996"></a><span class="co"># Johdattelevassa esimerkissä kuusi maata, kaksi taustamuuttujaa ja yksi kysymys</span></span>
<span id="cb12-997"><a href="liite-3-r-koodi.html#cb12-997"></a><span class="co"># (V6/Q1b)</span></span>
<span id="cb12-998"><a href="liite-3-r-koodi.html#cb12-998"></a></span>
<span id="cb12-999"><a href="liite-3-r-koodi.html#cb12-999"></a></span>
<span id="cb12-1000"><a href="liite-3-r-koodi.html#cb12-1000"></a><span class="co"># Kuusi maata</span></span>
<span id="cb12-1001"><a href="liite-3-r-koodi.html#cb12-1001"></a></span>
<span id="cb12-1002"><a href="liite-3-r-koodi.html#cb12-1002"></a>countries_esim1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">56</span>, <span class="dv">100</span>, <span class="dv">208</span>, <span class="dv">246</span>, <span class="dv">276</span>, <span class="dv">348</span>) <span class="co">#BE,BG,DK,FI,DE,HU</span></span>
<span id="cb12-1003"><a href="liite-3-r-koodi.html#cb12-1003"></a>ISSP2012esim3.dat &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012jh1d.dat, V4 <span class="op">%in%</span><span class="st"> </span>countries_esim1)</span>
<span id="cb12-1004"><a href="liite-3-r-koodi.html#cb12-1004"></a><span class="co"># str(ISSP2012esim3.dat) - pitkä listaus pois (24.2.20)</span></span>
<span id="cb12-1005"><a href="liite-3-r-koodi.html#cb12-1005"></a></span>
<span id="cb12-1006"><a href="liite-3-r-koodi.html#cb12-1006"></a><span class="co">#neljä maamuuttujaa, kysymys Q1b, ikä ja sukupuoli</span></span>
<span id="cb12-1007"><a href="liite-3-r-koodi.html#cb12-1007"></a></span>
<span id="cb12-1008"><a href="liite-3-r-koodi.html#cb12-1008"></a>vars_esim1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;C_ALPHAN&quot;</span>, <span class="st">&quot;V3&quot;</span>, <span class="st">&quot;maa&quot;</span>,<span class="st">&quot;maa3&quot;</span>, <span class="st">&quot;Q1b&quot;</span>, <span class="st">&quot;sp&quot;</span>, <span class="st">&quot;ika&quot;</span>)</span>
<span id="cb12-1009"><a href="liite-3-r-koodi.html#cb12-1009"></a>ISSP2012esim2.dat &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012esim3.dat, <span class="kw">all_of</span>(vars_esim1))</span>
<span id="cb12-1010"><a href="liite-3-r-koodi.html#cb12-1010"></a></span>
<span id="cb12-1011"><a href="liite-3-r-koodi.html#cb12-1011"></a><span class="kw">str</span>(ISSP2012esim2.dat) <span class="co"># 8542 obs. of  7 variables, ja sama 8.6.2020</span></span>
<span id="cb12-1012"><a href="liite-3-r-koodi.html#cb12-1012"></a><span class="co"># C_ALPHAN: chr, maa: Factor w/ 25</span></span>
<span id="cb12-1013"><a href="liite-3-r-koodi.html#cb12-1013"></a></span>
<span id="cb12-1014"><a href="liite-3-r-koodi.html#cb12-1014"></a><span class="co"># Poistetaan havainnot, joilla Q1b - muuttujassa puuttuva tieto &#39;NA&#39;</span></span>
<span id="cb12-1015"><a href="liite-3-r-koodi.html#cb12-1015"></a><span class="co"># sum(is.na(ISSP2012esim2.dat$Q1b)) = 399</span></span>
<span id="cb12-1016"><a href="liite-3-r-koodi.html#cb12-1016"></a></span>
<span id="cb12-1017"><a href="liite-3-r-koodi.html#cb12-1017"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012esim2.dat, <span class="op">!</span><span class="kw">is.na</span>(Q1b))</span>
<span id="cb12-1018"><a href="liite-3-r-koodi.html#cb12-1018"></a></span>
<span id="cb12-1019"><a href="liite-3-r-koodi.html#cb12-1019"></a><span class="co">#str(ISSP2012esim1.dat) # 8143 obs. of  6 variable</span></span>
<span id="cb12-1020"><a href="liite-3-r-koodi.html#cb12-1020"></a></span>
<span id="cb12-1021"><a href="liite-3-r-koodi.html#cb12-1021"></a><span class="co"># Tarkistuksia (3.2.20)</span></span>
<span id="cb12-1022"><a href="liite-3-r-koodi.html#cb12-1022"></a><span class="co">#</span></span>
<span id="cb12-1023"><a href="liite-3-r-koodi.html#cb12-1023"></a><span class="co">#fct_count(ISSP2012esim1.dat$sp)</span></span>
<span id="cb12-1024"><a href="liite-3-r-koodi.html#cb12-1024"></a><span class="co">#fct_count(ISSP2012esim1.dat$Q1b)</span></span>
<span id="cb12-1025"><a href="liite-3-r-koodi.html#cb12-1025"></a><span class="co">#fct_count(ISSP2012esim1.dat$maa)</span></span>
<span id="cb12-1026"><a href="liite-3-r-koodi.html#cb12-1026"></a><span class="co">#fct_count(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb12-1027"><a href="liite-3-r-koodi.html#cb12-1027"></a><span class="co">#</span></span>
<span id="cb12-1028"><a href="liite-3-r-koodi.html#cb12-1028"></a><span class="co">#summary(ISSP2012esim1.dat$sp)</span></span>
<span id="cb12-1029"><a href="liite-3-r-koodi.html#cb12-1029"></a><span class="co">#sp: 3799 + 4344 = 8143</span></span>
<span id="cb12-1030"><a href="liite-3-r-koodi.html#cb12-1030"></a><span class="co">#summary(ISSP2012esim1.dat$Q1b)</span></span>
<span id="cb12-1031"><a href="liite-3-r-koodi.html#cb12-1031"></a><span class="co">#  S      s      ?     e      E</span></span>
<span id="cb12-1032"><a href="liite-3-r-koodi.html#cb12-1032"></a><span class="co"># 810 + 1935 + 1367 + 2125 + 1906 = 8143</span></span>
<span id="cb12-1033"><a href="liite-3-r-koodi.html#cb12-1033"></a><span class="co">#</span></span>
<span id="cb12-1034"><a href="liite-3-r-koodi.html#cb12-1034"></a><span class="co"># EDELLINEN DATA - havaintojen määrät samat kuin uudella datalla (31.1.20)</span></span>
<span id="cb12-1035"><a href="liite-3-r-koodi.html#cb12-1035"></a><span class="co">#</span></span>
<span id="cb12-1036"><a href="liite-3-r-koodi.html#cb12-1036"></a><span class="co"># 8557 obs. ennen kuin sexagemissing poistettiin, nyt 8542, 8557-8542 = 15</span></span>
<span id="cb12-1037"><a href="liite-3-r-koodi.html#cb12-1037"></a><span class="co">#</span></span>
<span id="cb12-1038"><a href="liite-3-r-koodi.html#cb12-1038"></a><span class="co"># Poistetaan havainnot joissa puuttuva tieto muuttujassa V6 (Q1b) n = 399</span></span>
<span id="cb12-1039"><a href="liite-3-r-koodi.html#cb12-1039"></a><span class="co"># 8542-399 = 8143</span></span>
<span id="cb12-1040"><a href="liite-3-r-koodi.html#cb12-1040"></a></span>
<span id="cb12-1041"><a href="liite-3-r-koodi.html#cb12-1041"></a><span class="co"># Tyhjät &quot;faktorilabelit&quot; on poistettava</span></span>
<span id="cb12-1042"><a href="liite-3-r-koodi.html#cb12-1042"></a></span>
<span id="cb12-1043"><a href="liite-3-r-koodi.html#cb12-1043"></a> ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb12-1044"><a href="liite-3-r-koodi.html#cb12-1044"></a><span class="st">     </span><span class="kw">mutate</span>(<span class="dt">maa =</span> <span class="kw">fct_drop</span>(maa),</span>
<span id="cb12-1045"><a href="liite-3-r-koodi.html#cb12-1045"></a>            <span class="dt">maa3 =</span> <span class="kw">fct_drop</span>(maa3)</span>
<span id="cb12-1046"><a href="liite-3-r-koodi.html#cb12-1046"></a>            )</span>
<span id="cb12-1047"><a href="liite-3-r-koodi.html#cb12-1047"></a></span>
<span id="cb12-1048"><a href="liite-3-r-koodi.html#cb12-1048"></a><span class="co">#summary(ISSP2012esim1.dat$maa)</span></span>
<span id="cb12-1049"><a href="liite-3-r-koodi.html#cb12-1049"></a><span class="co">#summary(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb12-1050"><a href="liite-3-r-koodi.html#cb12-1050"></a><span class="co">#</span></span>
<span id="cb12-1051"><a href="liite-3-r-koodi.html#cb12-1051"></a><span class="co"># str(ISSP2012esim1.dat$maa)</span></span>
<span id="cb12-1052"><a href="liite-3-r-koodi.html#cb12-1052"></a><span class="co"># attributes(ISSP2012esim1.dat$maa)</span></span>
<span id="cb12-1053"><a href="liite-3-r-koodi.html#cb12-1053"></a><span class="co">#</span></span>
<span id="cb12-1054"><a href="liite-3-r-koodi.html#cb12-1054"></a><span class="co"># str(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb12-1055"><a href="liite-3-r-koodi.html#cb12-1055"></a><span class="co"># attributes(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb12-1056"><a href="liite-3-r-koodi.html#cb12-1056"></a><span class="co">#</span></span>
<span id="cb12-1057"><a href="liite-3-r-koodi.html#cb12-1057"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa, Q1b, type = &quot;count&quot;)</span></span>
<span id="cb12-1058"><a href="liite-3-r-koodi.html#cb12-1058"></a><span class="co">#fct_count(ISSP2012esim1.dat$Q1b)</span></span>
<span id="cb12-1059"><a href="liite-3-r-koodi.html#cb12-1059"></a><span class="co"># fct_count(ISSP2012esim1.dat$sp)</span></span>
<span id="cb12-1060"><a href="liite-3-r-koodi.html#cb12-1060"></a><span class="co"># fct_unique(ISSP2012esim1.dat$maa)</span></span>
<span id="cb12-1061"><a href="liite-3-r-koodi.html#cb12-1061"></a><span class="co"># fct_count(ISSP2012esim1.dat$maa)</span></span>
<span id="cb12-1062"><a href="liite-3-r-koodi.html#cb12-1062"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa, C_ALPHAN, type = &quot;count&quot;)</span></span>
<span id="cb12-1063"><a href="liite-3-r-koodi.html#cb12-1063"></a><span class="co">#</span></span>
<span id="cb12-1064"><a href="liite-3-r-koodi.html#cb12-1064"></a><span class="co"># maa3 - siistitään &quot;faktorilabelit&quot; kaksikirjaimisiksi</span></span>
<span id="cb12-1065"><a href="liite-3-r-koodi.html#cb12-1065"></a><span class="co">#</span></span>
<span id="cb12-1066"><a href="liite-3-r-koodi.html#cb12-1066"></a><span class="co"># ISO 3166 Code V3 - maiden jaot</span></span>
<span id="cb12-1067"><a href="liite-3-r-koodi.html#cb12-1067"></a><span class="co">#  5601     BE-FLA-Belgium/ Flanders</span></span>
<span id="cb12-1068"><a href="liite-3-r-koodi.html#cb12-1068"></a><span class="co">#  5602     BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb12-1069"><a href="liite-3-r-koodi.html#cb12-1069"></a><span class="co">#  5603     BE-BRU-Belgium/ Brussels</span></span>
<span id="cb12-1070"><a href="liite-3-r-koodi.html#cb12-1070"></a><span class="co"># 27601     DE-W-Germany-West</span></span>
<span id="cb12-1071"><a href="liite-3-r-koodi.html#cb12-1071"></a><span class="co"># 27602     DE-E-Germany-East</span></span>
<span id="cb12-1072"><a href="liite-3-r-koodi.html#cb12-1072"></a><span class="co"># Tähän pitäisi päästä</span></span>
<span id="cb12-1073"><a href="liite-3-r-koodi.html#cb12-1073"></a><span class="co"># levels = c(&quot;100&quot;,&quot;208&quot;,&quot;246&quot;,&quot;348&quot;,&quot;5601&quot;,&quot;5602&quot;,&quot;5603&quot;,&quot;27601&quot;,&quot;27602&quot;),</span></span>
<span id="cb12-1074"><a href="liite-3-r-koodi.html#cb12-1074"></a><span class="co"># labels = c(&quot;BG&quot;,&quot;DK&quot;,&quot;FI&quot;,&quot;HU&quot;,&quot;bF&quot;,&quot;bW&quot;,&quot;bB&quot;,&quot;dW&quot;,&quot;dE&quot;))</span></span>
<span id="cb12-1075"><a href="liite-3-r-koodi.html#cb12-1075"></a><span class="co"># levels(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb12-1076"><a href="liite-3-r-koodi.html#cb12-1076"></a></span>
<span id="cb12-1077"><a href="liite-3-r-koodi.html#cb12-1077"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb12-1078"><a href="liite-3-r-koodi.html#cb12-1078"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">maa3 =</span></span>
<span id="cb12-1079"><a href="liite-3-r-koodi.html#cb12-1079"></a>                <span class="kw">fct_recode</span>(maa3,</span>
<span id="cb12-1080"><a href="liite-3-r-koodi.html#cb12-1080"></a>                 <span class="st">&quot;BG&quot;</span> =<span class="st"> &quot;BG-Bulgaria&quot;</span>,</span>
<span id="cb12-1081"><a href="liite-3-r-koodi.html#cb12-1081"></a>                 <span class="st">&quot;DK&quot;</span> =<span class="st"> &quot;DK-Denmark&quot;</span>,</span>
<span id="cb12-1082"><a href="liite-3-r-koodi.html#cb12-1082"></a>                 <span class="st">&quot;FI&quot;</span> =<span class="st"> &quot;FI-Finland&quot;</span>,</span>
<span id="cb12-1083"><a href="liite-3-r-koodi.html#cb12-1083"></a>                 <span class="st">&quot;HU&quot;</span> =<span class="st"> &quot;HU-Hungary&quot;</span>,</span>
<span id="cb12-1084"><a href="liite-3-r-koodi.html#cb12-1084"></a>                 <span class="st">&quot;bF&quot;</span> =<span class="st"> &quot;BE-FLA-Belgium/ Flanders&quot;</span>,</span>
<span id="cb12-1085"><a href="liite-3-r-koodi.html#cb12-1085"></a>                 <span class="st">&quot;bW&quot;</span> =<span class="st"> &quot;BE-WAL-Belgium/ Wallonia&quot;</span>,</span>
<span id="cb12-1086"><a href="liite-3-r-koodi.html#cb12-1086"></a>                 <span class="st">&quot;bB&quot;</span> =<span class="st"> &quot;BE-BRU-Belgium/ Brussels&quot;</span>,</span>
<span id="cb12-1087"><a href="liite-3-r-koodi.html#cb12-1087"></a>                 <span class="st">&quot;dW&quot;</span> =<span class="st"> &quot;DE-W-Germany-West&quot;</span>,</span>
<span id="cb12-1088"><a href="liite-3-r-koodi.html#cb12-1088"></a>                 <span class="st">&quot;dE&quot;</span> =<span class="st"> &quot;DE-E-Germany-East&quot;</span>)</span>
<span id="cb12-1089"><a href="liite-3-r-koodi.html#cb12-1089"></a>               )</span>
<span id="cb12-1090"><a href="liite-3-r-koodi.html#cb12-1090"></a><span class="co"># tarkistuksia</span></span>
<span id="cb12-1091"><a href="liite-3-r-koodi.html#cb12-1091"></a><span class="co">#levels(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb12-1092"><a href="liite-3-r-koodi.html#cb12-1092"></a><span class="co"># str(ISSP2012esim1.dat$maa3) # 9 levels</span></span>
<span id="cb12-1093"><a href="liite-3-r-koodi.html#cb12-1093"></a><span class="co">#summary(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb12-1094"><a href="liite-3-r-koodi.html#cb12-1094"></a><span class="co">#</span></span>
<span id="cb12-1095"><a href="liite-3-r-koodi.html#cb12-1095"></a><span class="co"># TÄSSÄ TOISTOA! (4.2.20)</span></span>
<span id="cb12-1096"><a href="liite-3-r-koodi.html#cb12-1096"></a><span class="co"># Muutetaan muuttujien &quot;maa&quot; ja &quot;maa3&quot; arvojen (levels) järjestys samaksi kuin</span></span>
<span id="cb12-1097"><a href="liite-3-r-koodi.html#cb12-1097"></a><span class="co"># alkuperäisen muuttujan C_ALPHAN. Helpomi verrata aikaisempiin tuloksiin.</span></span>
<span id="cb12-1098"><a href="liite-3-r-koodi.html#cb12-1098"></a></span>
<span id="cb12-1099"><a href="liite-3-r-koodi.html#cb12-1099"></a><span class="co"># &quot;alkuperäinen&quot; maa talteen</span></span>
<span id="cb12-1100"><a href="liite-3-r-koodi.html#cb12-1100"></a>ISSP2012esim1.dat<span class="op">$</span>maa2 &lt;-<span class="st"> </span>ISSP2012esim1.dat<span class="op">$</span>maa</span>
<span id="cb12-1101"><a href="liite-3-r-koodi.html#cb12-1101"></a></span>
<span id="cb12-1102"><a href="liite-3-r-koodi.html#cb12-1102"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb12-1103"><a href="liite-3-r-koodi.html#cb12-1103"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">maa =</span></span>
<span id="cb12-1104"><a href="liite-3-r-koodi.html#cb12-1104"></a>                <span class="kw">fct_relevel</span>(maa,</span>
<span id="cb12-1105"><a href="liite-3-r-koodi.html#cb12-1105"></a>                            <span class="st">&quot;BE&quot;</span>,</span>
<span id="cb12-1106"><a href="liite-3-r-koodi.html#cb12-1106"></a>                            <span class="st">&quot;BG&quot;</span>,</span>
<span id="cb12-1107"><a href="liite-3-r-koodi.html#cb12-1107"></a>                            <span class="st">&quot;DE&quot;</span>,</span>
<span id="cb12-1108"><a href="liite-3-r-koodi.html#cb12-1108"></a>                            <span class="st">&quot;DK&quot;</span>,</span>
<span id="cb12-1109"><a href="liite-3-r-koodi.html#cb12-1109"></a>                            <span class="st">&quot;FI&quot;</span>,</span>
<span id="cb12-1110"><a href="liite-3-r-koodi.html#cb12-1110"></a>                            <span class="st">&quot;HU&quot;</span>))</span>
<span id="cb12-1111"><a href="liite-3-r-koodi.html#cb12-1111"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb12-1112"><a href="liite-3-r-koodi.html#cb12-1112"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">maa3 =</span></span>
<span id="cb12-1113"><a href="liite-3-r-koodi.html#cb12-1113"></a>                <span class="kw">fct_relevel</span>(maa3,</span>
<span id="cb12-1114"><a href="liite-3-r-koodi.html#cb12-1114"></a>                        <span class="st">&quot;bF&quot;</span>,</span>
<span id="cb12-1115"><a href="liite-3-r-koodi.html#cb12-1115"></a>                        <span class="st">&quot;bW&quot;</span>,</span>
<span id="cb12-1116"><a href="liite-3-r-koodi.html#cb12-1116"></a>                        <span class="st">&quot;bB&quot;</span>,</span>
<span id="cb12-1117"><a href="liite-3-r-koodi.html#cb12-1117"></a>                        <span class="st">&quot;BG&quot;</span>,</span>
<span id="cb12-1118"><a href="liite-3-r-koodi.html#cb12-1118"></a>                        <span class="st">&quot;dW&quot;</span>,</span>
<span id="cb12-1119"><a href="liite-3-r-koodi.html#cb12-1119"></a>                        <span class="st">&quot;dE&quot;</span>,</span>
<span id="cb12-1120"><a href="liite-3-r-koodi.html#cb12-1120"></a>                        <span class="st">&quot;DK&quot;</span>,</span>
<span id="cb12-1121"><a href="liite-3-r-koodi.html#cb12-1121"></a>                        <span class="st">&quot;FI&quot;</span>,</span>
<span id="cb12-1122"><a href="liite-3-r-koodi.html#cb12-1122"></a>                        <span class="st">&quot;HU&quot;</span>))</span>
<span id="cb12-1123"><a href="liite-3-r-koodi.html#cb12-1123"></a></span>
<span id="cb12-1124"><a href="liite-3-r-koodi.html#cb12-1124"></a><span class="co"># Tarkistus</span></span>
<span id="cb12-1125"><a href="liite-3-r-koodi.html#cb12-1125"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa2,maa, type = &quot;count&quot;)</span></span>
<span id="cb12-1126"><a href="liite-3-r-koodi.html#cb12-1126"></a><span class="co"># &quot;alkuperäinen&quot; maa talteenISSP2012esim1.dat %&gt;% tableX(maa,C_ALPHAN, type = &quot;count&quot;)</span></span>
<span id="cb12-1127"><a href="liite-3-r-koodi.html#cb12-1127"></a><span class="co"># &quot;alkuperäinen&quot; maa talteenstr(ISSP2012esim1.dat)</span></span>
<span id="cb12-1128"><a href="liite-3-r-koodi.html#cb12-1128"></a></span>
<span id="cb12-1129"><a href="liite-3-r-koodi.html#cb12-1129"></a><span class="co"># Taulukoita (31.1.2020) ja tarkistuksia</span></span>
<span id="cb12-1130"><a href="liite-3-r-koodi.html#cb12-1130"></a><span class="co">#</span></span>
<span id="cb12-1131"><a href="liite-3-r-koodi.html#cb12-1131"></a><span class="co"># toinen maa-muuttuja, jossa Saksan ja Belgian jako</span></span>
<span id="cb12-1132"><a href="liite-3-r-koodi.html#cb12-1132"></a><span class="co">#  V3</span></span>
<span id="cb12-1133"><a href="liite-3-r-koodi.html#cb12-1133"></a><span class="co">#  5601     BE-FLA-Belgium/ Flanders</span></span>
<span id="cb12-1134"><a href="liite-3-r-koodi.html#cb12-1134"></a><span class="co">#  5602     BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb12-1135"><a href="liite-3-r-koodi.html#cb12-1135"></a><span class="co">#  5603     BE-BRU-Belgium/ Brussels</span></span>
<span id="cb12-1136"><a href="liite-3-r-koodi.html#cb12-1136"></a><span class="co"># 27601     DE-W-Germany-West</span></span>
<span id="cb12-1137"><a href="liite-3-r-koodi.html#cb12-1137"></a><span class="co"># 27602     DE-E-Germany-East</span></span>
<span id="cb12-1138"><a href="liite-3-r-koodi.html#cb12-1138"></a></span>
<span id="cb12-1139"><a href="liite-3-r-koodi.html#cb12-1139"></a><span class="co"># Tarkastuksia</span></span>
<span id="cb12-1140"><a href="liite-3-r-koodi.html#cb12-1140"></a></span>
<span id="cb12-1141"><a href="liite-3-r-koodi.html#cb12-1141"></a><span class="co"># assert_that ehkä tarpeeton - expect_equivalet testaa levelien</span></span>
<span id="cb12-1142"><a href="liite-3-r-koodi.html#cb12-1142"></a><span class="co"># järjestyksen ja määrän (20.2.20)</span></span>
<span id="cb12-1143"><a href="liite-3-r-koodi.html#cb12-1143"></a></span>
<span id="cb12-1144"><a href="liite-3-r-koodi.html#cb12-1144"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>sp)) <span class="op">==</span><span class="st"> </span><span class="dv">2</span>)</span>
<span id="cb12-1145"><a href="liite-3-r-koodi.html#cb12-1145"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>sp),</span>
<span id="cb12-1146"><a href="liite-3-r-koodi.html#cb12-1146"></a>                <span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>)))</span>
<span id="cb12-1147"><a href="liite-3-r-koodi.html#cb12-1147"></a></span>
<span id="cb12-1148"><a href="liite-3-r-koodi.html#cb12-1148"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb12-1149"><a href="liite-3-r-koodi.html#cb12-1149"></a></span>
<span id="cb12-1150"><a href="liite-3-r-koodi.html#cb12-1150"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa),</span>
<span id="cb12-1151"><a href="liite-3-r-koodi.html#cb12-1151"></a>                  <span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)))</span>
<span id="cb12-1152"><a href="liite-3-r-koodi.html#cb12-1152"></a></span>
<span id="cb12-1153"><a href="liite-3-r-koodi.html#cb12-1153"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa3)) <span class="op">==</span><span class="st"> </span><span class="dv">9</span>)</span>
<span id="cb12-1154"><a href="liite-3-r-koodi.html#cb12-1154"></a></span>
<span id="cb12-1155"><a href="liite-3-r-koodi.html#cb12-1155"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa3),</span>
<span id="cb12-1156"><a href="liite-3-r-koodi.html#cb12-1156"></a>                 <span class="kw">c</span>(<span class="st">&quot;bF&quot;</span>,<span class="st">&quot;bW&quot;</span>,<span class="st">&quot;bB&quot;</span>, <span class="st">&quot;BG&quot;</span>,<span class="st">&quot;dW&quot;</span>,<span class="st">&quot;dE&quot;</span>,<span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)))</span>
<span id="cb12-1157"><a href="liite-3-r-koodi.html#cb12-1157"></a></span>
<span id="cb12-1158"><a href="liite-3-r-koodi.html#cb12-1158"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>Q1b)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb12-1159"><a href="liite-3-r-koodi.html#cb12-1159"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>Q1b),</span>
<span id="cb12-1160"><a href="liite-3-r-koodi.html#cb12-1160"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb12-1161"><a href="liite-3-r-koodi.html#cb12-1161"></a></span>
<span id="cb12-1162"><a href="liite-3-r-koodi.html#cb12-1162"></a><span class="co"># testthat - paketti - pois käytöstä 16.9.20</span></span>
<span id="cb12-1163"><a href="liite-3-r-koodi.html#cb12-1163"></a><span class="co"># expect_ ei anna ok-ilmoitusta, ainoastaan virheilmoituksen? (11.4.20)</span></span>
<span id="cb12-1164"><a href="liite-3-r-koodi.html#cb12-1164"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$maa),</span></span>
<span id="cb12-1165"><a href="liite-3-r-koodi.html#cb12-1165"></a><span class="co">#                  c(&quot;BE&quot;, &quot;BG&quot;, &quot;DE&quot;, &quot;DK&quot;, &quot;FI&quot;, &quot;HU&quot;))</span></span>
<span id="cb12-1166"><a href="liite-3-r-koodi.html#cb12-1166"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$maa3),</span></span>
<span id="cb12-1167"><a href="liite-3-r-koodi.html#cb12-1167"></a><span class="co">#                  c(&quot;bF&quot;,&quot;bW&quot;,&quot;bB&quot;, &quot;BG&quot;,&quot;dW&quot;,&quot;dE&quot;,&quot;DK&quot;, &quot;FI&quot;, &quot;HU&quot;))</span></span>
<span id="cb12-1168"><a href="liite-3-r-koodi.html#cb12-1168"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$sp), c(&quot;m&quot;, &quot;f&quot;))</span></span>
<span id="cb12-1169"><a href="liite-3-r-koodi.html#cb12-1169"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$Q1b),</span></span>
<span id="cb12-1170"><a href="liite-3-r-koodi.html#cb12-1170"></a><span class="co">#                  c(&quot;S&quot;, &quot;s&quot;, &quot;?&quot;, &quot;e&quot;, &quot;E&quot;))</span></span>
<span id="cb12-1171"><a href="liite-3-r-koodi.html#cb12-1171"></a><span class="co">#</span></span>
<span id="cb12-1172"><a href="liite-3-r-koodi.html#cb12-1172"></a><span class="co"># ISSP2012esim1.dat %&gt;% tableX(maa,ika,type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1173"><a href="liite-3-r-koodi.html#cb12-1173"></a><span class="co">#</span></span>
<span id="cb12-1174"><a href="liite-3-r-koodi.html#cb12-1174"></a><span class="co"># Riviprofiilit</span></span>
<span id="cb12-1175"><a href="liite-3-r-koodi.html#cb12-1175"></a><span class="co">#</span></span>
<span id="cb12-1176"><a href="liite-3-r-koodi.html#cb12-1176"></a><span class="co"># ISSP2012esim1.dat %&gt;% tableX(maa,ika,type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1177"><a href="liite-3-r-koodi.html#cb12-1177"></a><span class="co"># ISSP2012esim1.dat %&gt;% tableX(maa,sp ,type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1178"><a href="liite-3-r-koodi.html#cb12-1178"></a><span class="co">#</span></span>
<span id="cb12-1179"><a href="liite-3-r-koodi.html#cb12-1179"></a><span class="co">#</span></span>
<span id="cb12-1180"><a href="liite-3-r-koodi.html#cb12-1180"></a><span class="co"># Kysymyksen Q1b vastaukset</span></span>
<span id="cb12-1181"><a href="liite-3-r-koodi.html#cb12-1181"></a><span class="co">#</span></span>
<span id="cb12-1182"><a href="liite-3-r-koodi.html#cb12-1182"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa,Q1b,type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1183"><a href="liite-3-r-koodi.html#cb12-1183"></a><span class="co">#</span></span>
<span id="cb12-1184"><a href="liite-3-r-koodi.html#cb12-1184"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa3,Q1b,type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1185"><a href="liite-3-r-koodi.html#cb12-1185"></a><span class="co">#</span></span>
<span id="cb12-1186"><a href="liite-3-r-koodi.html#cb12-1186"></a><span class="co"># str(ISSP2012esim1.dat) # 8143 obs. of  7 variable,</span></span>
<span id="cb12-1187"><a href="liite-3-r-koodi.html#cb12-1187"></a><span class="co"># sama kuin vanhassa Galku-koodissa.</span></span>
<span id="cb12-1188"><a href="liite-3-r-koodi.html#cb12-1188"></a><span class="co">#</span></span>
<span id="cb12-1189"><a href="liite-3-r-koodi.html#cb12-1189"></a><span class="co"># str(ISSP2012esim1.dat) # 8143 obs. of  7 variable,</span></span>
<span id="cb12-1190"><a href="liite-3-r-koodi.html#cb12-1190"></a><span class="co"># sama kuin vanhassa Galku-koodissa.</span></span>
<span id="cb12-1191"><a href="liite-3-r-koodi.html#cb12-1191"></a></span>
<span id="cb12-1192"><a href="liite-3-r-koodi.html#cb12-1192"></a>taulu2 &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa, Q1b, <span class="dt">type =</span> <span class="st">&quot;cell_perc&quot;</span>)</span>
<span id="cb12-1193"><a href="liite-3-r-koodi.html#cb12-1193"></a>knitr<span class="op">::</span><span class="kw">kable</span>(taulu2,<span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb12-1194"><a href="liite-3-r-koodi.html#cb12-1194"></a>             <span class="dt">caption =</span> <span class="st">&quot;Kysymyksen Q1b vastaukset maittain, suhteelliset frekvenssit&quot;</span>)</span>
<span id="cb12-1195"><a href="liite-3-r-koodi.html#cb12-1195"></a></span>
<span id="cb12-1196"><a href="liite-3-r-koodi.html#cb12-1196"></a>taulu3 &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa,Q1b,<span class="dt">type =</span> <span class="st">&quot;row_perc&quot;</span>)</span>
<span id="cb12-1197"><a href="liite-3-r-koodi.html#cb12-1197"></a></span>
<span id="cb12-1198"><a href="liite-3-r-koodi.html#cb12-1198"></a>knitr<span class="op">::</span><span class="kw">kable</span>(taulu3,<span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb12-1199"><a href="liite-3-r-koodi.html#cb12-1199"></a>             <span class="dt">caption =</span> <span class="st">&quot;Kysymyksen Q1b vastaukset, riviprosentit&quot;</span>)</span>
<span id="cb12-1200"><a href="liite-3-r-koodi.html#cb12-1200"></a></span>
<span id="cb12-1201"><a href="liite-3-r-koodi.html#cb12-1201"></a>taulu4 &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa,Q1b,<span class="dt">type =</span> <span class="st">&quot;col_perc&quot;</span>)</span>
<span id="cb12-1202"><a href="liite-3-r-koodi.html#cb12-1202"></a></span>
<span id="cb12-1203"><a href="liite-3-r-koodi.html#cb12-1203"></a>knitr<span class="op">::</span><span class="kw">kable</span>(taulu4,<span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb12-1204"><a href="liite-3-r-koodi.html#cb12-1204"></a>             <span class="dt">caption =</span> <span class="st">&quot;Kysymyksen Q1b vastaukset, sarakeprosentit&quot;</span>)</span>
<span id="cb12-1205"><a href="liite-3-r-koodi.html#cb12-1205"></a></span>
<span id="cb12-1206"><a href="liite-3-r-koodi.html#cb12-1206"></a><span class="co"># CA tässä, jotta saadaan rivi- ja sarakeprofiilikuvat</span></span>
<span id="cb12-1207"><a href="liite-3-r-koodi.html#cb12-1207"></a><span class="co"># Lasketaan samalla CA-ratkaisu riviprofiilitaulkolle (maille samat painot)</span></span>
<span id="cb12-1208"><a href="liite-3-r-koodi.html#cb12-1208"></a></span>
<span id="cb12-1209"><a href="liite-3-r-koodi.html#cb12-1209"></a>simpleCA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maa <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1.dat)</span>
<span id="cb12-1210"><a href="liite-3-r-koodi.html#cb12-1210"></a></span>
<span id="cb12-1211"><a href="liite-3-r-koodi.html#cb12-1211"></a><span class="co"># Maiden järjestys kääntää kuvan (1.2.20) - esimerkki on</span></span>
<span id="cb12-1212"><a href="liite-3-r-koodi.html#cb12-1212"></a><span class="co"># vähän kuriositeetti. Kartta voi tietysti &quot;flipata&quot; koordintaattien suhteen ainakin</span></span>
<span id="cb12-1213"><a href="liite-3-r-koodi.html#cb12-1213"></a><span class="co"># neljällä tavalla (? 180 astetta molempien akseleiden ympäri molempiin suuntiin?)</span></span>
<span id="cb12-1214"><a href="liite-3-r-koodi.html#cb12-1214"></a><span class="co"># (18.2.20). Tämän maa2-muuttujaa käyttävän kuvan voi jättää pois (8.4.20)</span></span>
<span id="cb12-1215"><a href="liite-3-r-koodi.html#cb12-1215"></a></span>
<span id="cb12-1216"><a href="liite-3-r-koodi.html#cb12-1216"></a><span class="co"># simpleCA2 &lt;- ca(~maa2 + Q1b,ISSP2012esim1.dat)</span></span>
<span id="cb12-1217"><a href="liite-3-r-koodi.html#cb12-1217"></a></span>
<span id="cb12-1218"><a href="liite-3-r-koodi.html#cb12-1218"></a><span class="co"># Oikeastaan maiden vertailussa pitäisi niiden massat skaalata yhtä suuriksi, tässä</span></span>
<span id="cb12-1219"><a href="liite-3-r-koodi.html#cb12-1219"></a><span class="co"># pikainen kokeilu (20.2.20)</span></span>
<span id="cb12-1220"><a href="liite-3-r-koodi.html#cb12-1220"></a><span class="co"># Riviprosentit taulukoksi, nimet sarakkeille ja riveille (ei kovin robustia...)</span></span>
<span id="cb12-1221"><a href="liite-3-r-koodi.html#cb12-1221"></a></span>
<span id="cb12-1222"><a href="liite-3-r-koodi.html#cb12-1222"></a></span>
<span id="cb12-1223"><a href="liite-3-r-koodi.html#cb12-1223"></a>johdesim1_rowproc.tab &lt;-<span class="st"> </span>simpleCA1<span class="op">$</span>N <span class="op">/</span><span class="st"> </span><span class="kw">rowSums</span>(simpleCA1<span class="op">$</span>N)</span>
<span id="cb12-1224"><a href="liite-3-r-koodi.html#cb12-1224"></a><span class="kw">colnames</span>(johdesim1_rowproc.tab) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S&quot;</span> ,<span class="st">&quot;s&quot;</span> ,<span class="st">&quot;?&quot;</span>,<span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)</span>
<span id="cb12-1225"><a href="liite-3-r-koodi.html#cb12-1225"></a><span class="kw">rownames</span>(johdesim1_rowproc.tab) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)</span>
<span id="cb12-1226"><a href="liite-3-r-koodi.html#cb12-1226"></a></span>
<span id="cb12-1227"><a href="liite-3-r-koodi.html#cb12-1227"></a><span class="co"># Miten tibblenä? Ei toimi, ei maa-muuttujaa ollenkaan</span></span>
<span id="cb12-1228"><a href="liite-3-r-koodi.html#cb12-1228"></a><span class="co"># johdesim1_rowproc.tbl &lt;- as_tibble(johdesim1_rowproc.tab)</span></span>
<span id="cb12-1229"><a href="liite-3-r-koodi.html#cb12-1229"></a><span class="co"># str(johdesim1_rowproc.tbl)</span></span>
<span id="cb12-1230"><a href="liite-3-r-koodi.html#cb12-1230"></a></span>
<span id="cb12-1231"><a href="liite-3-r-koodi.html#cb12-1231"></a><span class="co"># TARKISTUKSIA (20.2.20)</span></span>
<span id="cb12-1232"><a href="liite-3-r-koodi.html#cb12-1232"></a><span class="co"># johdesim1_rowproc.tab</span></span>
<span id="cb12-1233"><a href="liite-3-r-koodi.html#cb12-1233"></a><span class="co"># rowSums(johdesim1_rowproc.tab)</span></span>
<span id="cb12-1234"><a href="liite-3-r-koodi.html#cb12-1234"></a><span class="co"># str(johdesim1_rowproc.tab)</span></span>
<span id="cb12-1235"><a href="liite-3-r-koodi.html#cb12-1235"></a></span>
<span id="cb12-1236"><a href="liite-3-r-koodi.html#cb12-1236"></a></span>
<span id="cb12-1237"><a href="liite-3-r-koodi.html#cb12-1237"></a>simpleCA3 &lt;-<span class="st"> </span><span class="kw">ca</span>(johdesim1_rowproc.tab)</span>
<span id="cb12-1238"><a href="liite-3-r-koodi.html#cb12-1238"></a></span>
<span id="cb12-1239"><a href="liite-3-r-koodi.html#cb12-1239"></a></span>
<span id="cb12-1240"><a href="liite-3-r-koodi.html#cb12-1240"></a><span class="co"># Kartta piirretään koodilohkossa simpleCAmap1, r. 773 noin.</span></span>
<span id="cb12-1241"><a href="liite-3-r-koodi.html#cb12-1241"></a></span>
<span id="cb12-1242"><a href="liite-3-r-koodi.html#cb12-1242"></a><span class="co"># Riviprosentit tarkistusta varten</span></span>
<span id="cb12-1243"><a href="liite-3-r-koodi.html#cb12-1243"></a><span class="co">#        S  s   ?   e   E</span></span>
<span id="cb12-1244"><a href="liite-3-r-koodi.html#cb12-1244"></a><span class="co">#BE 9.49    22.40   21.76   27.42   18.93</span></span>
<span id="cb12-1245"><a href="liite-3-r-koodi.html#cb12-1245"></a><span class="co">#BG 12.81   42.89   22.26   20.63   1.41</span></span>
<span id="cb12-1246"><a href="liite-3-r-koodi.html#cb12-1246"></a><span class="co">#DE 9.63    21.88   11.55   31.39   25.55</span></span>
<span id="cb12-1247"><a href="liite-3-r-koodi.html#cb12-1247"></a><span class="co">#DK 5.04    17.15   10.95   16.71   50.14</span></span>
<span id="cb12-1248"><a href="liite-3-r-koodi.html#cb12-1248"></a><span class="co">#FI 4.23    16.94   13.42   38.11   27.30</span></span>
<span id="cb12-1249"><a href="liite-3-r-koodi.html#cb12-1249"></a><span class="co">#HU 21.97   28.89   22.57   19.06   7.52</span></span>
<span id="cb12-1250"><a href="liite-3-r-koodi.html#cb12-1250"></a><span class="co">#</span></span>
<span id="cb12-1251"><a href="liite-3-r-koodi.html#cb12-1251"></a><span class="co"># Ja datan saa leikepöydän kautta, jos on tarve pikatarkistuksiin</span></span>
<span id="cb12-1252"><a href="liite-3-r-koodi.html#cb12-1252"></a><span class="co"># read &lt;- read.table(&quot;clipboard&quot;)</span></span>
<span id="cb12-1253"><a href="liite-3-r-koodi.html#cb12-1253"></a></span>
<span id="cb12-1254"><a href="liite-3-r-koodi.html#cb12-1254"></a><span class="co">#mutkikas kuvan piirto - sarakeprofiilit vertailussa</span></span>
<span id="cb12-1255"><a href="liite-3-r-koodi.html#cb12-1255"></a><span class="co">#ggplot vaatii df-rakenteen ja &#39;long data&#39; - muotoon</span></span>
<span id="cb12-1256"><a href="liite-3-r-koodi.html#cb12-1256"></a><span class="co">##https://stackoverflow.com/questions/9563368/create-stacked-barplot</span></span>
<span id="cb12-1257"><a href="liite-3-r-koodi.html#cb12-1257"></a><span class="co"># -where-each-stack-is-scaled-to-sum-to</span></span>
<span id="cb12-1258"><a href="liite-3-r-koodi.html#cb12-1258"></a><span class="co"># Pitkä https-linkki kahdella rivillä</span></span>
<span id="cb12-1259"><a href="liite-3-r-koodi.html#cb12-1259"></a><span class="co">#</span></span>
<span id="cb12-1260"><a href="liite-3-r-koodi.html#cb12-1260"></a><span class="co"># käytetään ca - tuloksia</span></span>
<span id="cb12-1261"><a href="liite-3-r-koodi.html#cb12-1261"></a>apu1 &lt;-<span class="st"> </span>(simpleCA1<span class="op">$</span>N)</span>
<span id="cb12-1262"><a href="liite-3-r-koodi.html#cb12-1262"></a><span class="kw">colnames</span>(apu1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)</span>
<span id="cb12-1263"><a href="liite-3-r-koodi.html#cb12-1263"></a><span class="kw">rownames</span>(apu1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)</span>
<span id="cb12-1264"><a href="liite-3-r-koodi.html#cb12-1264"></a>apu1_df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(apu1)</span>
<span id="cb12-1265"><a href="liite-3-r-koodi.html#cb12-1265"></a><span class="co">#lasketan rivien reunajakauma</span></span>
<span id="cb12-1266"><a href="liite-3-r-koodi.html#cb12-1266"></a>apu1_df<span class="op">$</span>ka_sarake &lt;-<span class="st"> </span><span class="kw">rowSums</span>(apu1_df)</span>
<span id="cb12-1267"><a href="liite-3-r-koodi.html#cb12-1267"></a><span class="co">#muokataan &#39;long data&#39; - muotoon</span></span>
<span id="cb12-1268"><a href="liite-3-r-koodi.html#cb12-1268"></a>apu1b_df &lt;-<span class="st"> </span><span class="kw">melt</span>(<span class="kw">cbind</span>(apu1_df, <span class="dt">ind =</span> <span class="kw">rownames</span>(apu1_df)), <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&#39;ind&#39;</span>))</span>
<span id="cb12-1269"><a href="liite-3-r-koodi.html#cb12-1269"></a></span>
<span id="cb12-1270"><a href="liite-3-r-koodi.html#cb12-1270"></a>p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(apu1b_df, <span class="kw">aes</span>(<span class="dt">x =</span> variable, <span class="dt">y =</span> value, <span class="dt">fill =</span> ind)) <span class="op">+</span></span>
<span id="cb12-1271"><a href="liite-3-r-koodi.html#cb12-1271"></a><span class="st">         </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb12-1272"><a href="liite-3-r-koodi.html#cb12-1272"></a><span class="st">         </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot; &quot;</span>,<span class="dt">labels =</span> <span class="kw">percent_format</span>())</span>
<span id="cb12-1273"><a href="liite-3-r-koodi.html#cb12-1273"></a>p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">&quot;maa&quot;</span>)</span>
<span id="cb12-1274"><a href="liite-3-r-koodi.html#cb12-1274"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">scale_x_discrete</span>(<span class="dt">name =</span> <span class="st">&quot;Q1b - vastauskategoriat&quot;</span>)</span>
<span id="cb12-1275"><a href="liite-3-r-koodi.html#cb12-1275"></a><span class="co"># apu1_df</span></span>
<span id="cb12-1276"><a href="liite-3-r-koodi.html#cb12-1276"></a><span class="co"># apu1b_df</span></span>
<span id="cb12-1277"><a href="liite-3-r-koodi.html#cb12-1277"></a></span>
<span id="cb12-1278"><a href="liite-3-r-koodi.html#cb12-1278"></a></span>
<span id="cb12-1279"><a href="liite-3-r-koodi.html#cb12-1279"></a><span class="co"># riviprofiilit ja keskiarvorivi -  18.9.2018</span></span>
<span id="cb12-1280"><a href="liite-3-r-koodi.html#cb12-1280"></a>apu2_df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(apu1)</span>
<span id="cb12-1281"><a href="liite-3-r-koodi.html#cb12-1281"></a>apu2_df &lt;-<span class="st"> </span><span class="kw">rbind</span>(apu2_df, <span class="dt">ka_rivi =</span> <span class="kw">colSums</span>(apu2_df))</span>
<span id="cb12-1282"><a href="liite-3-r-koodi.html#cb12-1282"></a></span>
<span id="cb12-1283"><a href="liite-3-r-koodi.html#cb12-1283"></a><span class="co">#apu2_df</span></span>
<span id="cb12-1284"><a href="liite-3-r-koodi.html#cb12-1284"></a><span class="co">#str(apu2_df)</span></span>
<span id="cb12-1285"><a href="liite-3-r-koodi.html#cb12-1285"></a><span class="co">## typeof(apu2_df) # what is it?</span></span>
<span id="cb12-1286"><a href="liite-3-r-koodi.html#cb12-1286"></a><span class="co">## class(apu2_df) # what is it? (sorry)</span></span>
<span id="cb12-1287"><a href="liite-3-r-koodi.html#cb12-1287"></a><span class="co">## storage.mode(apu2_df) # what is it? (very sorry)</span></span>
<span id="cb12-1288"><a href="liite-3-r-koodi.html#cb12-1288"></a><span class="co">## length(apu2_df) # how long is it? What about two dimensional</span></span>
<span id="cb12-1289"><a href="liite-3-r-koodi.html#cb12-1289"></a><span class="co">## objects?</span></span>
<span id="cb12-1290"><a href="liite-3-r-koodi.html#cb12-1290"></a><span class="co"># attributes(apu2_df)</span></span>
<span id="cb12-1291"><a href="liite-3-r-koodi.html#cb12-1291"></a></span>
<span id="cb12-1292"><a href="liite-3-r-koodi.html#cb12-1292"></a><span class="co"># temp1 &lt;- cbind(apu2_df, ind = rownames(apu2_df))</span></span>
<span id="cb12-1293"><a href="liite-3-r-koodi.html#cb12-1293"></a><span class="co"># temp1</span></span>
<span id="cb12-1294"><a href="liite-3-r-koodi.html#cb12-1294"></a><span class="co">##muokataan &#39;long data&#39; - muotoon</span></span>
<span id="cb12-1295"><a href="liite-3-r-koodi.html#cb12-1295"></a>apu2b_df &lt;-<span class="st"> </span><span class="kw">melt</span>(<span class="kw">cbind</span>(apu2_df, <span class="dt">ind =</span> <span class="kw">rownames</span>(apu2_df)), <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&#39;ind&#39;</span>))</span>
<span id="cb12-1296"><a href="liite-3-r-koodi.html#cb12-1296"></a><span class="co"># str(apu2b_df)</span></span>
<span id="cb12-1297"><a href="liite-3-r-koodi.html#cb12-1297"></a><span class="co"># glimpse(apu2b_df)</span></span>
<span id="cb12-1298"><a href="liite-3-r-koodi.html#cb12-1298"></a></span>
<span id="cb12-1299"><a href="liite-3-r-koodi.html#cb12-1299"></a><span class="co">#</span></span>
<span id="cb12-1300"><a href="liite-3-r-koodi.html#cb12-1300"></a><span class="co">#ggplot(apu2b_df, aes(x = value, y = ind, fill = variable)) +</span></span>
<span id="cb12-1301"><a href="liite-3-r-koodi.html#cb12-1301"></a><span class="co">#       geom_bar(position = &quot;fill&quot;, stat =&quot;identity&quot;) +</span></span>
<span id="cb12-1302"><a href="liite-3-r-koodi.html#cb12-1302"></a><span class="co">#       #coord_flip() +</span></span>
<span id="cb12-1303"><a href="liite-3-r-koodi.html#cb12-1303"></a><span class="co">#        scale_x_continuous(labels = percent_format())</span></span>
<span id="cb12-1304"><a href="liite-3-r-koodi.html#cb12-1304"></a></span>
<span id="cb12-1305"><a href="liite-3-r-koodi.html#cb12-1305"></a><span class="co">#versio2 toimii (18.9.2018)</span></span>
<span id="cb12-1306"><a href="liite-3-r-koodi.html#cb12-1306"></a></span>
<span id="cb12-1307"><a href="liite-3-r-koodi.html#cb12-1307"></a>p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(apu2b_df, <span class="kw">aes</span>(<span class="dt">x =</span> ind, <span class="dt">y =</span> value, <span class="dt">fill =</span> variable)) <span class="op">+</span></span>
<span id="cb12-1308"><a href="liite-3-r-koodi.html#cb12-1308"></a><span class="st">       </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb12-1309"><a href="liite-3-r-koodi.html#cb12-1309"></a><span class="st">       </span><span class="kw">coord_flip</span>() <span class="op">+</span></span>
<span id="cb12-1310"><a href="liite-3-r-koodi.html#cb12-1310"></a><span class="st">        </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot; &quot;</span>,<span class="dt">labels =</span> <span class="kw">percent_format</span>())</span>
<span id="cb12-1311"><a href="liite-3-r-koodi.html#cb12-1311"></a>p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">&quot;Q1b&quot;</span>)</span>
<span id="cb12-1312"><a href="liite-3-r-koodi.html#cb12-1312"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">scale_x_discrete</span>(<span class="dt">name =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb12-1313"><a href="liite-3-r-koodi.html#cb12-1313"></a></span>
<span id="cb12-1314"><a href="liite-3-r-koodi.html#cb12-1314"></a></span>
<span id="cb12-1315"><a href="liite-3-r-koodi.html#cb12-1315"></a></span>
<span id="cb12-1316"><a href="liite-3-r-koodi.html#cb12-1316"></a><span class="co"># simpleCA1 luotu aikaisemmin profiilikuvia varten koodilohkossa EkaCA</span></span>
<span id="cb12-1317"><a href="liite-3-r-koodi.html#cb12-1317"></a><span class="co"># HUOM! xlab ja ylab, prosenttiosuudet ensin katsottu ja sitten kirjoitettu</span></span>
<span id="cb12-1318"><a href="liite-3-r-koodi.html#cb12-1318"></a><span class="co"># tässä. Vertaa scree-plot - tietoon!</span></span>
<span id="cb12-1319"><a href="liite-3-r-koodi.html#cb12-1319"></a></span>
<span id="cb12-1320"><a href="liite-3-r-koodi.html#cb12-1320"></a></span>
<span id="cb12-1321"><a href="liite-3-r-koodi.html#cb12-1321"></a><span class="co">#par(cex = 1)</span></span>
<span id="cb12-1322"><a href="liite-3-r-koodi.html#cb12-1322"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;symmetric&quot;</span>, <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb12-1323"><a href="liite-3-r-koodi.html#cb12-1323"></a>     <span class="dt">xlab =</span> <span class="st">&quot;Dimensio 1: moderni/liberaali - perinteinen/konservatiivinen (76%)&quot;</span>,</span>
<span id="cb12-1324"><a href="liite-3-r-koodi.html#cb12-1324"></a>     <span class="dt">ylab =</span> <span class="st">&quot;Dimensio 2: maltillinen/epävarma - radikaali/jyrkkä/varma (15.1%)&quot;</span>,</span>
<span id="cb12-1325"><a href="liite-3-r-koodi.html#cb12-1325"></a>     <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta 1&quot;</span>,</span>
<span id="cb12-1326"><a href="liite-3-r-koodi.html#cb12-1326"></a>     <span class="dt">sub =</span> <span class="st">&quot;Maiden massat eri suuruisia (otoskoko), pisteiden koko suhteessa massaan&quot;</span>)</span>
<span id="cb12-1327"><a href="liite-3-r-koodi.html#cb12-1327"></a></span>
<span id="cb12-1328"><a href="liite-3-r-koodi.html#cb12-1328"></a><span class="co"># jatkossa plot - main on kuvan tyyppi (symmetrinen, kontribuutio jne),</span></span>
<span id="cb12-1329"><a href="liite-3-r-koodi.html#cb12-1329"></a><span class="co"># koodilohkon fig.cap &quot;ylimmän tason&quot; otsikko.</span></span>
<span id="cb12-1330"><a href="liite-3-r-koodi.html#cb12-1330"></a></span>
<span id="cb12-1331"><a href="liite-3-r-koodi.html#cb12-1331"></a><span class="co"># Akseleiden tekstit (Dimensio 1....jne) asetettu käsin, ikävä kyllä myös</span></span>
<span id="cb12-1332"><a href="liite-3-r-koodi.html#cb12-1332"></a><span class="co"># selitetyn inertian osuus. CA-kartoissa tämä on niin oleellinen asia,</span></span>
<span id="cb12-1333"><a href="liite-3-r-koodi.html#cb12-1333"></a><span class="co"># että akselien nimet voi muutttaa vasta esitysgrafiikassa, ei data-analyysissä.</span></span>
<span id="cb12-1334"><a href="liite-3-r-koodi.html#cb12-1334"></a><span class="co"># Dim1 ja Dim2  kuuluvat kuviin.</span></span>
<span id="cb12-1335"><a href="liite-3-r-koodi.html#cb12-1335"></a></span>
<span id="cb12-1336"><a href="liite-3-r-koodi.html#cb12-1336"></a><span class="co"># par(cex = 1) - asetus ennen plot-komenota muuttaa valitettavasti &quot;kaiken&quot; kokoa.</span></span>
<span id="cb12-1337"><a href="liite-3-r-koodi.html#cb12-1337"></a><span class="co"># Antaa olla, kun on graafista data-analyysiä. Selkeys tärkeämpää kuin ulkoasu.</span></span>
<span id="cb12-1338"><a href="liite-3-r-koodi.html#cb12-1338"></a></span>
<span id="cb12-1339"><a href="liite-3-r-koodi.html#cb12-1339"></a></span>
<span id="cb12-1340"><a href="liite-3-r-koodi.html#cb12-1340"></a><span class="co"># asymmetrinen kartta - rivit pc ja sarakkeet sc</span></span>
<span id="cb12-1341"><a href="liite-3-r-koodi.html#cb12-1341"></a><span class="co"># sarakkeet vektorikuvina</span></span>
<span id="cb12-1342"><a href="liite-3-r-koodi.html#cb12-1342"></a></span>
<span id="cb12-1343"><a href="liite-3-r-koodi.html#cb12-1343"></a><span class="co"># par(cex = 0.7)</span></span>
<span id="cb12-1344"><a href="liite-3-r-koodi.html#cb12-1344"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowprincipal&quot;</span>,</span>
<span id="cb12-1345"><a href="liite-3-r-koodi.html#cb12-1345"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb12-1346"><a href="liite-3-r-koodi.html#cb12-1346"></a>     <span class="dt">main =</span> <span class="st">&quot;asymmetrinen kartta 1&quot;</span></span>
<span id="cb12-1347"><a href="liite-3-r-koodi.html#cb12-1347"></a>    )</span>
<span id="cb12-1348"><a href="liite-3-r-koodi.html#cb12-1348"></a></span>
<span id="cb12-1349"><a href="liite-3-r-koodi.html#cb12-1349"></a></span>
<span id="cb12-1350"><a href="liite-3-r-koodi.html#cb12-1350"></a><span class="co"># Piirretään Suomen riviprofiilista janat sarakepisteisiin - barysentinen keskiarvo</span></span>
<span id="cb12-1351"><a href="liite-3-r-koodi.html#cb12-1351"></a><span class="co"># Rivipisteet pääkoordinaatteina (principal coordinates)</span></span>
<span id="cb12-1352"><a href="liite-3-r-koodi.html#cb12-1352"></a></span>
<span id="cb12-1353"><a href="liite-3-r-koodi.html#cb12-1353"></a>simpleCA1.rpc &lt;-<span class="st"> </span>simpleCA1<span class="op">$</span>rowcoord <span class="op">%*%</span><span class="st"> </span><span class="kw">diag</span>(simpleCA1<span class="op">$</span>sv)</span>
<span id="cb12-1354"><a href="liite-3-r-koodi.html#cb12-1354"></a></span>
<span id="cb12-1355"><a href="liite-3-r-koodi.html#cb12-1355"></a><span class="co"># X11()</span></span>
<span id="cb12-1356"><a href="liite-3-r-koodi.html#cb12-1356"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="dv">1</span>)</span>
<span id="cb12-1357"><a href="liite-3-r-koodi.html#cb12-1357"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowprincipal&quot;</span>,</span>
<span id="cb12-1358"><a href="liite-3-r-koodi.html#cb12-1358"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>,<span class="ot">FALSE</span>),</span>
<span id="cb12-1359"><a href="liite-3-r-koodi.html#cb12-1359"></a>     <span class="co"># main = &quot;barysentrinen periaate - asymmetrinen kartta 2&quot;,</span></span>
<span id="cb12-1360"><a href="liite-3-r-koodi.html#cb12-1360"></a>     <span class="dt">sub =</span> <span class="st">&quot;Suomen profiili sarakkeiden barysentrisenä keskiarvona&quot;</span>)</span>
<span id="cb12-1361"><a href="liite-3-r-koodi.html#cb12-1361"></a>     <span class="kw">segments</span>(simpleCA1.rpc[<span class="dv">5</span>,<span class="dv">1</span>],simpleCA1.rpc[<span class="dv">5</span>,<span class="dv">2</span>],simpleCA1<span class="op">$</span>colcoord[, <span class="dv">1</span>],</span>
<span id="cb12-1362"><a href="liite-3-r-koodi.html#cb12-1362"></a>         simpleCA1<span class="op">$</span>colcoord[, <span class="dv">2</span>], <span class="dt">col =</span> <span class="st">&quot;pink&quot;</span>)</span>
<span id="cb12-1363"><a href="liite-3-r-koodi.html#cb12-1363"></a></span>
<span id="cb12-1364"><a href="liite-3-r-koodi.html#cb12-1364"></a></span>
<span id="cb12-1365"><a href="liite-3-r-koodi.html#cb12-1365"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/simpleCAasymmTulk2.png&#39;</span>)</span>
<span id="cb12-1366"><a href="liite-3-r-koodi.html#cb12-1366"></a></span>
<span id="cb12-1367"><a href="liite-3-r-koodi.html#cb12-1367"></a><span class="co">#par(cex = 0.6)</span></span>
<span id="cb12-1368"><a href="liite-3-r-koodi.html#cb12-1368"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb12-1369"><a href="liite-3-r-koodi.html#cb12-1369"></a>     <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;absolute&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb12-1370"><a href="liite-3-r-koodi.html#cb12-1370"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb12-1371"><a href="liite-3-r-koodi.html#cb12-1371"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb12-1372"><a href="liite-3-r-koodi.html#cb12-1372"></a>     <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 1 - pisteen koko suhteessa massaan&quot;</span>,</span>
<span id="cb12-1373"><a href="liite-3-r-koodi.html#cb12-1373"></a>     <span class="dt">sub =</span> <span class="st">&quot;sarakevektorin ja rivipisteiden värin tummuus = absoluuttinen kontribuutio&quot;</span>)</span>
<span id="cb12-1374"><a href="liite-3-r-koodi.html#cb12-1374"></a></span>
<span id="cb12-1375"><a href="liite-3-r-koodi.html#cb12-1375"></a></span>
<span id="cb12-1376"><a href="liite-3-r-koodi.html#cb12-1376"></a><span class="co">#par(cex = 0.7)</span></span>
<span id="cb12-1377"><a href="liite-3-r-koodi.html#cb12-1377"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb12-1378"><a href="liite-3-r-koodi.html#cb12-1378"></a>     <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;relative&quot;</span>),</span>
<span id="cb12-1379"><a href="liite-3-r-koodi.html#cb12-1379"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb12-1380"><a href="liite-3-r-koodi.html#cb12-1380"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb12-1381"><a href="liite-3-r-koodi.html#cb12-1381"></a>     <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 2 - pisteen koko suhteessa massaan&quot;</span>,</span>
<span id="cb12-1382"><a href="liite-3-r-koodi.html#cb12-1382"></a>     <span class="dt">sub =</span> <span class="st">&quot;sarakevektorin ja pisteen värin tummuus = suhteellinen kontribuutio&quot;</span>)</span>
<span id="cb12-1383"><a href="liite-3-r-koodi.html#cb12-1383"></a></span>
<span id="cb12-1384"><a href="liite-3-r-koodi.html#cb12-1384"></a></span>
<span id="cb12-1385"><a href="liite-3-r-koodi.html#cb12-1385"></a><span class="co"># Sama kartta - maiden massat vakiotu - simpleCA3 luotu koodilohkossa EkaCA</span></span>
<span id="cb12-1386"><a href="liite-3-r-koodi.html#cb12-1386"></a><span class="co"># CA:n lähtötietona riviprofiilit</span></span>
<span id="cb12-1387"><a href="liite-3-r-koodi.html#cb12-1387"></a></span>
<span id="cb12-1388"><a href="liite-3-r-koodi.html#cb12-1388"></a><span class="co">#par(cex = 0.8)</span></span>
<span id="cb12-1389"><a href="liite-3-r-koodi.html#cb12-1389"></a><span class="kw">plot</span>(simpleCA3, <span class="dt">map =</span> <span class="st">&quot;symmetric&quot;</span>, <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb12-1390"><a href="liite-3-r-koodi.html#cb12-1390"></a><span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta 2 &quot;</span>,</span>
<span id="cb12-1391"><a href="liite-3-r-koodi.html#cb12-1391"></a><span class="dt">sub =</span> <span class="st">&quot;Maidet massat vakioitu (riviprofiilidata)&quot;</span>)</span>
<span id="cb12-1392"><a href="liite-3-r-koodi.html#cb12-1392"></a></span>
<span id="cb12-1393"><a href="liite-3-r-koodi.html#cb12-1393"></a></span>
<span id="cb12-1394"><a href="liite-3-r-koodi.html#cb12-1394"></a><span class="kw">plot</span>(simpleCA3, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb12-1395"><a href="liite-3-r-koodi.html#cb12-1395"></a>     <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;absolute&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb12-1396"><a href="liite-3-r-koodi.html#cb12-1396"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb12-1397"><a href="liite-3-r-koodi.html#cb12-1397"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb12-1398"><a href="liite-3-r-koodi.html#cb12-1398"></a>     <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 3&quot;</span>,</span>
<span id="cb12-1399"><a href="liite-3-r-koodi.html#cb12-1399"></a>     <span class="dt">sub =</span> <span class="st">&quot;sarakevektorin ja rivipisteiden värin tummuus = absoluuttinen kontribuutio, riviprofiilidata&quot;</span>)</span>
<span id="cb12-1400"><a href="liite-3-r-koodi.html#cb12-1400"></a></span>
<span id="cb12-1401"><a href="liite-3-r-koodi.html#cb12-1401"></a><span class="co"># riviprofiilitaulukko aiheuttaa virheen PDF-tulostuksessa, JH_capaper.Rmd</span></span>
<span id="cb12-1402"><a href="liite-3-r-koodi.html#cb12-1402"></a><span class="co"># tiedoston voi kuitenkin renderöidä knit-napilla RStudiossa pdf-tiedostoksi.</span></span>
<span id="cb12-1403"><a href="liite-3-r-koodi.html#cb12-1403"></a></span>
<span id="cb12-1404"><a href="liite-3-r-koodi.html#cb12-1404"></a></span>
<span id="cb12-1405"><a href="liite-3-r-koodi.html#cb12-1405"></a>BeDealueTable &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa3, Q1b, <span class="dt">type =</span> <span class="st">&quot;row_perc&quot;</span>)</span>
<span id="cb12-1406"><a href="liite-3-r-koodi.html#cb12-1406"></a></span>
<span id="cb12-1407"><a href="liite-3-r-koodi.html#cb12-1407"></a>knitr<span class="op">::</span><span class="kw">kable</span>(BeDealueTable , <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb12-1408"><a href="liite-3-r-koodi.html#cb12-1408"></a>           <span class="dt">caption =</span> <span class="st">&quot;Q1b vastaukset, Saksan ja Belgian alueet&quot;</span>)</span>
<span id="cb12-1409"><a href="liite-3-r-koodi.html#cb12-1409"></a></span>
<span id="cb12-1410"><a href="liite-3-r-koodi.html#cb12-1410"></a></span>
<span id="cb12-1411"><a href="liite-3-r-koodi.html#cb12-1411"></a><span class="co"># Belgian ja Saksan aluejako maa3-muuttujassa</span></span>
<span id="cb12-1412"><a href="liite-3-r-koodi.html#cb12-1412"></a><span class="co"># str(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb12-1413"><a href="liite-3-r-koodi.html#cb12-1413"></a><span class="co"># attributes(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb12-1414"><a href="liite-3-r-koodi.html#cb12-1414"></a></span>
<span id="cb12-1415"><a href="liite-3-r-koodi.html#cb12-1415"></a>suppoint1_df1 &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012esim1.dat, maa3,Q1b)</span>
<span id="cb12-1416"><a href="liite-3-r-koodi.html#cb12-1416"></a></span>
<span id="cb12-1417"><a href="liite-3-r-koodi.html#cb12-1417"></a><span class="co"># Taulukoksi jotta saadaan lisättyä Saksan ja Belgian maa-profiilit täydentäviksi</span></span>
<span id="cb12-1418"><a href="liite-3-r-koodi.html#cb12-1418"></a><span class="co"># pisteiksi.</span></span>
<span id="cb12-1419"><a href="liite-3-r-koodi.html#cb12-1419"></a></span>
<span id="cb12-1420"><a href="liite-3-r-koodi.html#cb12-1420"></a>suppoint1_tab1 &lt;-<span class="st"> </span><span class="kw">table</span>(suppoint1_df1<span class="op">$</span>maa3, suppoint1_df1<span class="op">$</span>Q1b)</span>
<span id="cb12-1421"><a href="liite-3-r-koodi.html#cb12-1421"></a></span>
<span id="cb12-1422"><a href="liite-3-r-koodi.html#cb12-1422"></a><span class="co"># tarkistus 1</span></span>
<span id="cb12-1423"><a href="liite-3-r-koodi.html#cb12-1423"></a><span class="co"># suppoint1_tab1</span></span>
<span id="cb12-1424"><a href="liite-3-r-koodi.html#cb12-1424"></a></span>
<span id="cb12-1425"><a href="liite-3-r-koodi.html#cb12-1425"></a><span class="co"># Maaprofiilit lisäpisteiksi</span></span>
<span id="cb12-1426"><a href="liite-3-r-koodi.html#cb12-1426"></a>suppoint2_df &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012esim1.dat, (maa <span class="op">==</span><span class="st"> &quot;BE&quot;</span> <span class="op">|</span><span class="st"> </span>maa <span class="op">==</span><span class="st"> &quot;DE&quot;</span>))</span>
<span id="cb12-1427"><a href="liite-3-r-koodi.html#cb12-1427"></a>suppoint2_df &lt;-<span class="st"> </span><span class="kw">select</span>(suppoint2_df, maa, Q1b)</span>
<span id="cb12-1428"><a href="liite-3-r-koodi.html#cb12-1428"></a><span class="co"># Poistetaan maa-faktroin tyhjät luokat (14.11.2020)</span></span>
<span id="cb12-1429"><a href="liite-3-r-koodi.html#cb12-1429"></a>suppoint2_df &lt;-<span class="st"> </span>suppoint2_df <span class="op">%&gt;%</span></span>
<span id="cb12-1430"><a href="liite-3-r-koodi.html#cb12-1430"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">maa =</span> <span class="kw">fct_drop</span>(maa)</span>
<span id="cb12-1431"><a href="liite-3-r-koodi.html#cb12-1431"></a>    )</span>
<span id="cb12-1432"><a href="liite-3-r-koodi.html#cb12-1432"></a></span>
<span id="cb12-1433"><a href="liite-3-r-koodi.html#cb12-1433"></a></span>
<span id="cb12-1434"><a href="liite-3-r-koodi.html#cb12-1434"></a><span class="co">#glimpse(suppoint2_df)</span></span>
<span id="cb12-1435"><a href="liite-3-r-koodi.html#cb12-1435"></a>suppoint2_tab1 &lt;-<span class="st"> </span><span class="kw">table</span>(suppoint2_df<span class="op">$</span>maa, suppoint2_df<span class="op">$</span>Q1b)</span>
<span id="cb12-1436"><a href="liite-3-r-koodi.html#cb12-1436"></a></span>
<span id="cb12-1437"><a href="liite-3-r-koodi.html#cb12-1437"></a><span class="co"># tarkistus 1</span></span>
<span id="cb12-1438"><a href="liite-3-r-koodi.html#cb12-1438"></a><span class="co"># suppoint2_tab1</span></span>
<span id="cb12-1439"><a href="liite-3-r-koodi.html#cb12-1439"></a></span>
<span id="cb12-1440"><a href="liite-3-r-koodi.html#cb12-1440"></a><span class="co"># lisätään rivit maa3-muuttujan taulukkoon</span></span>
<span id="cb12-1441"><a href="liite-3-r-koodi.html#cb12-1441"></a></span>
<span id="cb12-1442"><a href="liite-3-r-koodi.html#cb12-1442"></a>suppoint1_tab1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(suppoint1_tab1, suppoint2_tab1)</span>
<span id="cb12-1443"><a href="liite-3-r-koodi.html#cb12-1443"></a></span>
<span id="cb12-1444"><a href="liite-3-r-koodi.html#cb12-1444"></a><span class="co"># suppoint1_tab1 </span></span>
<span id="cb12-1445"><a href="liite-3-r-koodi.html#cb12-1445"></a></span>
<span id="cb12-1446"><a href="liite-3-r-koodi.html#cb12-1446"></a><span class="co"># suppoint1_tab2 &lt;- read_rds(&quot;suppoint1tab1.rds&quot;) - testaus joka siirsi virheen 07-rmd-tiedostoon. Sama virheilmoitustyyppi.</span></span>
<span id="cb12-1447"><a href="liite-3-r-koodi.html#cb12-1447"></a></span>
<span id="cb12-1448"><a href="liite-3-r-koodi.html#cb12-1448"></a>suppointCA2 &lt;-<span class="st"> </span><span class="kw">ca</span>(suppoint1_tab1[,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], <span class="dt">suprow =</span> <span class="dv">10</span><span class="op">:</span><span class="dv">11</span>)</span>
<span id="cb12-1449"><a href="liite-3-r-koodi.html#cb12-1449"></a></span>
<span id="cb12-1450"><a href="liite-3-r-koodi.html#cb12-1450"></a><span class="co"># Sama kartta ilman täydentäviä pisteitä</span></span>
<span id="cb12-1451"><a href="liite-3-r-koodi.html#cb12-1451"></a></span>
<span id="cb12-1452"><a href="liite-3-r-koodi.html#cb12-1452"></a>suppointCA2b &lt;-<span class="st"> </span><span class="kw">ca</span>(suppoint1_tab1[<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</span>
<span id="cb12-1453"><a href="liite-3-r-koodi.html#cb12-1453"></a></span>
<span id="cb12-1454"><a href="liite-3-r-koodi.html#cb12-1454"></a><span class="co"># par(cex = 0.6)</span></span>
<span id="cb12-1455"><a href="liite-3-r-koodi.html#cb12-1455"></a><span class="kw">plot</span>(suppointCA2, <span class="dt">main =</span> <span class="st">&quot;Symmetrinen kartta 1 &quot;</span>,</span>
<span id="cb12-1456"><a href="liite-3-r-koodi.html#cb12-1456"></a>     <span class="co"># mass = c(TRUE, TRUE),</span></span>
<span id="cb12-1457"><a href="liite-3-r-koodi.html#cb12-1457"></a>     <span class="co"># contrib = c(TRUE, FALSE),</span></span>
<span id="cb12-1458"><a href="liite-3-r-koodi.html#cb12-1458"></a>     <span class="dt">sub =</span> <span class="st">&quot;Täydentävät pisteet DE ja BE&quot;</span> )</span>
<span id="cb12-1459"><a href="liite-3-r-koodi.html#cb12-1459"></a></span>
<span id="cb12-1460"><a href="liite-3-r-koodi.html#cb12-1460"></a></span>
<span id="cb12-1461"><a href="liite-3-r-koodi.html#cb12-1461"></a></span>
<span id="cb12-1462"><a href="liite-3-r-koodi.html#cb12-1462"></a><span class="kw">plot</span>(suppointCA2b, <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 1 - absoluuttiset kontribuutiot&quot;</span>,</span>
<span id="cb12-1463"><a href="liite-3-r-koodi.html#cb12-1463"></a>        <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb12-1464"><a href="liite-3-r-koodi.html#cb12-1464"></a>        <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb12-1465"><a href="liite-3-r-koodi.html#cb12-1465"></a>        <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb12-1466"><a href="liite-3-r-koodi.html#cb12-1466"></a>        <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;absolute&quot;</span>,<span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb12-1467"><a href="liite-3-r-koodi.html#cb12-1467"></a>        <span class="dt">sub =</span> <span class="st">&quot;Massat: pisteiden ja symbolien koko &quot;</span> )</span>
<span id="cb12-1468"><a href="liite-3-r-koodi.html#cb12-1468"></a></span>
<span id="cb12-1469"><a href="liite-3-r-koodi.html#cb12-1469"></a></span>
<span id="cb12-1470"><a href="liite-3-r-koodi.html#cb12-1470"></a><span class="kw">print</span>(suppointCA2)</span>
<span id="cb12-1471"><a href="liite-3-r-koodi.html#cb12-1471"></a></span>
<span id="cb12-1472"><a href="liite-3-r-koodi.html#cb12-1472"></a></span>
<span id="cb12-1473"><a href="liite-3-r-koodi.html#cb12-1473"></a><span class="kw">summary</span>(suppointCA2)</span>
<span id="cb12-1474"><a href="liite-3-r-koodi.html#cb12-1474"></a></span>
<span id="cb12-1475"><a href="liite-3-r-koodi.html#cb12-1475"></a>suppointCA3 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maa3 <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1.dat, <span class="dt">nd =</span> <span class="dv">3</span>)</span>
<span id="cb12-1476"><a href="liite-3-r-koodi.html#cb12-1476"></a></span>
<span id="cb12-1477"><a href="liite-3-r-koodi.html#cb12-1477"></a><span class="co"># summary(suppointCA3)</span></span>
<span id="cb12-1478"><a href="liite-3-r-koodi.html#cb12-1478"></a><span class="co"># Error in rsc %*% diag(sv) : non-conformable arguments</span></span>
<span id="cb12-1479"><a href="liite-3-r-koodi.html#cb12-1479"></a><span class="co"># outo juttu, ei toimi! - TÄMÄ POISTETAAN</span></span>
<span id="cb12-1480"><a href="liite-3-r-koodi.html#cb12-1480"></a></span>
<span id="cb12-1481"><a href="liite-3-r-koodi.html#cb12-1481"></a><span class="kw">plot</span>(suppointCA3, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb12-1482"><a href="liite-3-r-koodi.html#cb12-1482"></a>                <span class="dt">main =</span> <span class="st">&quot;Kolmen dimension ratkaisu&quot;</span>,</span>
<span id="cb12-1483"><a href="liite-3-r-koodi.html#cb12-1483"></a>                <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - 1. ja 2. dimensio&quot;</span>)</span>
<span id="cb12-1484"><a href="liite-3-r-koodi.html#cb12-1484"></a></span>
<span id="cb12-1485"><a href="liite-3-r-koodi.html#cb12-1485"></a><span class="kw">plot</span>(suppointCA3, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>),</span>
<span id="cb12-1486"><a href="liite-3-r-koodi.html#cb12-1486"></a>                <span class="dt">main =</span> <span class="st">&quot;Kolmen dimension ratkaisu 1&quot;</span>,</span>
<span id="cb12-1487"><a href="liite-3-r-koodi.html#cb12-1487"></a>                <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - 1. ja 3. dimensio&quot;</span>)</span>
<span id="cb12-1488"><a href="liite-3-r-koodi.html#cb12-1488"></a></span>
<span id="cb12-1489"><a href="liite-3-r-koodi.html#cb12-1489"></a><span class="kw">plot</span>(suppointCA3, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>),</span>
<span id="cb12-1490"><a href="liite-3-r-koodi.html#cb12-1490"></a>                <span class="dt">main =</span> <span class="st">&quot;Kolmen dimension ratkaisu 2&quot;</span>,</span>
<span id="cb12-1491"><a href="liite-3-r-koodi.html#cb12-1491"></a>                <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - 2. ja 3. dimensio&quot;</span>)</span>
<span id="cb12-1492"><a href="liite-3-r-koodi.html#cb12-1492"></a></span>
<span id="cb12-1493"><a href="liite-3-r-koodi.html#cb12-1493"></a></span>
<span id="cb12-1494"><a href="liite-3-r-koodi.html#cb12-1494"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/3dSymMap_1.PNG&#39;</span>)</span>
<span id="cb12-1495"><a href="liite-3-r-koodi.html#cb12-1495"></a></span>
<span id="cb12-1496"><a href="liite-3-r-koodi.html#cb12-1496"></a></span>
<span id="cb12-1497"><a href="liite-3-r-koodi.html#cb12-1497"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/3dSymMap_2.PNG&#39;</span>)</span>
<span id="cb12-1498"><a href="liite-3-r-koodi.html#cb12-1498"></a></span>
<span id="cb12-1499"><a href="liite-3-r-koodi.html#cb12-1499"></a><span class="co"># Iän ja sukupuolen vuorovaikutusmuuttujia</span></span>
<span id="cb12-1500"><a href="liite-3-r-koodi.html#cb12-1500"></a><span class="co">#</span></span>
<span id="cb12-1501"><a href="liite-3-r-koodi.html#cb12-1501"></a><span class="co"># Uusi R-data: ISSP2012esim1b.dat2esim1b)</span></span>
<span id="cb12-1502"><a href="liite-3-r-koodi.html#cb12-1502"></a><span class="co">#</span></span>
<span id="cb12-1503"><a href="liite-3-r-koodi.html#cb12-1503"></a><span class="co"># Ikäluokat age_cat</span></span>
<span id="cb12-1504"><a href="liite-3-r-koodi.html#cb12-1504"></a><span class="co"># AGE 1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 and older</span></span>
<span id="cb12-1505"><a href="liite-3-r-koodi.html#cb12-1505"></a><span class="co">#</span></span>
<span id="cb12-1506"><a href="liite-3-r-koodi.html#cb12-1506"></a><span class="co"># summary(ISSP2012esim1.dat$AGE)</span></span>
<span id="cb12-1507"><a href="liite-3-r-koodi.html#cb12-1507"></a><span class="co"># hist(ISSP2012esim1.dat$ika)</span></span>
<span id="cb12-1508"><a href="liite-3-r-koodi.html#cb12-1508"></a></span>
<span id="cb12-1509"><a href="liite-3-r-koodi.html#cb12-1509"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1.dat,</span>
<span id="cb12-1510"><a href="liite-3-r-koodi.html#cb12-1510"></a>                      <span class="dt">age_cat =</span> <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">15</span><span class="op">:</span><span class="dv">25</span>, <span class="st">&quot;1&quot;</span>,</span>
<span id="cb12-1511"><a href="liite-3-r-koodi.html#cb12-1511"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">26</span><span class="op">:</span><span class="dv">35</span>, <span class="st">&quot;2&quot;</span>,</span>
<span id="cb12-1512"><a href="liite-3-r-koodi.html#cb12-1512"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">36</span><span class="op">:</span><span class="dv">45</span>, <span class="st">&quot;3&quot;</span>,</span>
<span id="cb12-1513"><a href="liite-3-r-koodi.html#cb12-1513"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">46</span><span class="op">:</span><span class="dv">55</span>, <span class="st">&quot;4&quot;</span>,</span>
<span id="cb12-1514"><a href="liite-3-r-koodi.html#cb12-1514"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">56</span><span class="op">:</span><span class="dv">65</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>))))))</span>
<span id="cb12-1515"><a href="liite-3-r-koodi.html#cb12-1515"></a></span>
<span id="cb12-1516"><a href="liite-3-r-koodi.html#cb12-1516"></a></span>
<span id="cb12-1517"><a href="liite-3-r-koodi.html#cb12-1517"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span>ISSP2012esim1b.dat <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb12-1518"><a href="liite-3-r-koodi.html#cb12-1518"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span> <span class="kw">as_factor</span>(age_cat)) <span class="co"># järjestys omituinen!(4.2.20)</span></span>
<span id="cb12-1519"><a href="liite-3-r-koodi.html#cb12-1519"></a></span>
<span id="cb12-1520"><a href="liite-3-r-koodi.html#cb12-1520"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb12-1521"><a href="liite-3-r-koodi.html#cb12-1521"></a><span class="co"># str(ISSP2012esim2.dat$age_cat)</span></span>
<span id="cb12-1522"><a href="liite-3-r-koodi.html#cb12-1522"></a><span class="co"># levels(ISSP2012esim2.dat$age_cat)</span></span>
<span id="cb12-1523"><a href="liite-3-r-koodi.html#cb12-1523"></a><span class="co"># ISSP2012esim2.dat$age_cat %&gt;% summary()</span></span>
<span id="cb12-1524"><a href="liite-3-r-koodi.html#cb12-1524"></a></span>
<span id="cb12-1525"><a href="liite-3-r-koodi.html#cb12-1525"></a><span class="co"># Järjestetään ikäluokat uudelleen</span></span>
<span id="cb12-1526"><a href="liite-3-r-koodi.html#cb12-1526"></a></span>
<span id="cb12-1527"><a href="liite-3-r-koodi.html#cb12-1527"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span>ISSP2012esim1b.dat <span class="op">%&gt;%</span></span>
<span id="cb12-1528"><a href="liite-3-r-koodi.html#cb12-1528"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span></span>
<span id="cb12-1529"><a href="liite-3-r-koodi.html#cb12-1529"></a>                <span class="kw">fct_relevel</span>(age_cat,</span>
<span id="cb12-1530"><a href="liite-3-r-koodi.html#cb12-1530"></a>                            <span class="st">&quot;1&quot;</span>,</span>
<span id="cb12-1531"><a href="liite-3-r-koodi.html#cb12-1531"></a>                            <span class="st">&quot;2&quot;</span>,</span>
<span id="cb12-1532"><a href="liite-3-r-koodi.html#cb12-1532"></a>                            <span class="st">&quot;3&quot;</span>,</span>
<span id="cb12-1533"><a href="liite-3-r-koodi.html#cb12-1533"></a>                            <span class="st">&quot;4&quot;</span>,</span>
<span id="cb12-1534"><a href="liite-3-r-koodi.html#cb12-1534"></a>                            <span class="st">&quot;5&quot;</span>,</span>
<span id="cb12-1535"><a href="liite-3-r-koodi.html#cb12-1535"></a>                            <span class="st">&quot;6&quot;</span>)</span>
<span id="cb12-1536"><a href="liite-3-r-koodi.html#cb12-1536"></a>               )</span>
<span id="cb12-1537"><a href="liite-3-r-koodi.html#cb12-1537"></a></span>
<span id="cb12-1538"><a href="liite-3-r-koodi.html#cb12-1538"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb12-1539"><a href="liite-3-r-koodi.html#cb12-1539"></a></span>
<span id="cb12-1540"><a href="liite-3-r-koodi.html#cb12-1540"></a><span class="co"># Iso taulukko, voi tarkistaa että muunnos ok.</span></span>
<span id="cb12-1541"><a href="liite-3-r-koodi.html#cb12-1541"></a><span class="co"># test6 %&gt;% tableX(AGE, age_cat, type = &quot;count&quot;)</span></span>
<span id="cb12-1542"><a href="liite-3-r-koodi.html#cb12-1542"></a><span class="co"># taulu42 &lt;- ISSP2012esim2.dat %&gt;% tableX(maa,age_cat,type = &quot;count&quot;)</span></span>
<span id="cb12-1543"><a href="liite-3-r-koodi.html#cb12-1543"></a><span class="co"># kable(taulu42,digits = 2, caption = &quot;Ikäluokka age_cat&quot;)</span></span>
<span id="cb12-1544"><a href="liite-3-r-koodi.html#cb12-1544"></a><span class="co">#</span></span>
<span id="cb12-1545"><a href="liite-3-r-koodi.html#cb12-1545"></a></span>
<span id="cb12-1546"><a href="liite-3-r-koodi.html#cb12-1546"></a><span class="co"># Taulukoita (4.2.20)</span></span>
<span id="cb12-1547"><a href="liite-3-r-koodi.html#cb12-1547"></a></span>
<span id="cb12-1548"><a href="liite-3-r-koodi.html#cb12-1548"></a><span class="co">#ISSP2012esim1b.dat %&gt;%</span></span>
<span id="cb12-1549"><a href="liite-3-r-koodi.html#cb12-1549"></a><span class="co">#    tableX(maa,age_cat,type = &quot;count&quot;) %&gt;%</span></span>
<span id="cb12-1550"><a href="liite-3-r-koodi.html#cb12-1550"></a><span class="co">#    kable(digits = 2, caption = &quot;Ikäluokka age_cat&quot;)</span></span>
<span id="cb12-1551"><a href="liite-3-r-koodi.html#cb12-1551"></a><span class="co">#</span></span>
<span id="cb12-1552"><a href="liite-3-r-koodi.html#cb12-1552"></a><span class="co">#ISSP2012esim1b.dat %&gt;%</span></span>
<span id="cb12-1553"><a href="liite-3-r-koodi.html#cb12-1553"></a><span class="co">#    tableX(maa,age_cat,type = &quot;row_perc&quot;) %&gt;%</span></span>
<span id="cb12-1554"><a href="liite-3-r-koodi.html#cb12-1554"></a><span class="co">#    kable(digits = 2, caption = &quot;age_cat: suhteelliset frekvenssit&quot;)</span></span>
<span id="cb12-1555"><a href="liite-3-r-koodi.html#cb12-1555"></a></span>
<span id="cb12-1556"><a href="liite-3-r-koodi.html#cb12-1556"></a><span class="co"># ga - ikäluokka ja sukupuoli</span></span>
<span id="cb12-1557"><a href="liite-3-r-koodi.html#cb12-1557"></a></span>
<span id="cb12-1558"><a href="liite-3-r-koodi.html#cb12-1558"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1b.dat,</span>
<span id="cb12-1559"><a href="liite-3-r-koodi.html#cb12-1559"></a>                        <span class="dt">ga =</span> <span class="kw">case_when</span>((age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m1&quot;</span>,</span>
<span id="cb12-1560"><a href="liite-3-r-koodi.html#cb12-1560"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m2&quot;</span>,</span>
<span id="cb12-1561"><a href="liite-3-r-koodi.html#cb12-1561"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m3&quot;</span>,</span>
<span id="cb12-1562"><a href="liite-3-r-koodi.html#cb12-1562"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m4&quot;</span>,</span>
<span id="cb12-1563"><a href="liite-3-r-koodi.html#cb12-1563"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m5&quot;</span>,</span>
<span id="cb12-1564"><a href="liite-3-r-koodi.html#cb12-1564"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m6&quot;</span>,</span>
<span id="cb12-1565"><a href="liite-3-r-koodi.html#cb12-1565"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f1&quot;</span>,</span>
<span id="cb12-1566"><a href="liite-3-r-koodi.html#cb12-1566"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f2&quot;</span>,</span>
<span id="cb12-1567"><a href="liite-3-r-koodi.html#cb12-1567"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f3&quot;</span>,</span>
<span id="cb12-1568"><a href="liite-3-r-koodi.html#cb12-1568"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb12-1569"><a href="liite-3-r-koodi.html#cb12-1569"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb12-1570"><a href="liite-3-r-koodi.html#cb12-1570"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f5&quot;</span>,</span>
<span id="cb12-1571"><a href="liite-3-r-koodi.html#cb12-1571"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f6&quot;</span>,</span>
<span id="cb12-1572"><a href="liite-3-r-koodi.html#cb12-1572"></a>                                       <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;missing&quot;</span></span>
<span id="cb12-1573"><a href="liite-3-r-koodi.html#cb12-1573"></a>                                  ))</span>
<span id="cb12-1574"><a href="liite-3-r-koodi.html#cb12-1574"></a></span>
<span id="cb12-1575"><a href="liite-3-r-koodi.html#cb12-1575"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(ga,ga2) # tarkistus</span></span>
<span id="cb12-1576"><a href="liite-3-r-koodi.html#cb12-1576"></a><span class="co"># muuttujien tarkistuksia 19.9.2018</span></span>
<span id="cb12-1577"><a href="liite-3-r-koodi.html#cb12-1577"></a><span class="co"># str(ISSP2012esim1b.dat$ga) # chr-muuttuja, mutta toimii (4.2.20)</span></span>
<span id="cb12-1578"><a href="liite-3-r-koodi.html#cb12-1578"></a></span>
<span id="cb12-1579"><a href="liite-3-r-koodi.html#cb12-1579"></a><span class="co">#Tulostetaan taulukkoina ga - muuttuja</span></span>
<span id="cb12-1580"><a href="liite-3-r-koodi.html#cb12-1580"></a></span>
<span id="cb12-1581"><a href="liite-3-r-koodi.html#cb12-1581"></a><span class="co">#ISSP2012esim1b.dat %&gt;% tableX(maa,ga,type = &quot;count&quot;) %&gt;%</span></span>
<span id="cb12-1582"><a href="liite-3-r-koodi.html#cb12-1582"></a><span class="co">#kable(digits = 2, caption = &quot;Ikäluokka ja sukupuoli ga&quot;)</span></span>
<span id="cb12-1583"><a href="liite-3-r-koodi.html#cb12-1583"></a></span>
<span id="cb12-1584"><a href="liite-3-r-koodi.html#cb12-1584"></a><span class="co">#ISSP2012esim1b.dat %&gt;% tableX(maa,ga,type = &quot;row_perc&quot;) %&gt;%</span></span>
<span id="cb12-1585"><a href="liite-3-r-koodi.html#cb12-1585"></a><span class="co">#kable(digits = 2, caption = &quot;ga: suhteelliset frekvenssit&quot;)</span></span>
<span id="cb12-1586"><a href="liite-3-r-koodi.html#cb12-1586"></a></span>
<span id="cb12-1587"><a href="liite-3-r-koodi.html#cb12-1587"></a></span>
<span id="cb12-1588"><a href="liite-3-r-koodi.html#cb12-1588"></a>gaTestCA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>ga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat)</span>
<span id="cb12-1589"><a href="liite-3-r-koodi.html#cb12-1589"></a></span>
<span id="cb12-1590"><a href="liite-3-r-koodi.html#cb12-1590"></a></span>
<span id="cb12-1591"><a href="liite-3-r-koodi.html#cb12-1591"></a><span class="co"># Maapisteiden pääkoordinaatit janojen piirtämiseen</span></span>
<span id="cb12-1592"><a href="liite-3-r-koodi.html#cb12-1592"></a></span>
<span id="cb12-1593"><a href="liite-3-r-koodi.html#cb12-1593"></a>gaTestCA1.rpc &lt;-<span class="st"> </span>gaTestCA1<span class="op">$</span>rowcoord <span class="op">%*%</span><span class="st"> </span><span class="kw">diag</span>(gaTestCA1<span class="op">$</span>sv)</span>
<span id="cb12-1594"><a href="liite-3-r-koodi.html#cb12-1594"></a></span>
<span id="cb12-1595"><a href="liite-3-r-koodi.html#cb12-1595"></a><span class="co"># par(cex = 0.6)</span></span>
<span id="cb12-1596"><a href="liite-3-r-koodi.html#cb12-1596"></a><span class="kw">plot</span>(gaTestCA1, <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta, m = mies, f = nainen&quot;</span>,</span>
<span id="cb12-1597"><a href="liite-3-r-koodi.html#cb12-1597"></a>     <span class="dt">sub =</span> <span class="st">&quot;1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 tai vanhempi &quot;</span>)</span>
<span id="cb12-1598"><a href="liite-3-r-koodi.html#cb12-1598"></a><span class="co"># naiset</span></span>
<span id="cb12-1599"><a href="liite-3-r-koodi.html#cb12-1599"></a><span class="kw">lines</span>(gaTestCA1.rpc[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">1</span>],gaTestCA1.rpc[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">2</span>])</span>
<span id="cb12-1600"><a href="liite-3-r-koodi.html#cb12-1600"></a><span class="co">#miehet</span></span>
<span id="cb12-1601"><a href="liite-3-r-koodi.html#cb12-1601"></a><span class="kw">lines</span>(gaTestCA1.rpc[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">1</span>],gaTestCA1.rpc[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">2</span>], <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb12-1602"><a href="liite-3-r-koodi.html#cb12-1602"></a></span>
<span id="cb12-1603"><a href="liite-3-r-koodi.html#cb12-1603"></a></span>
<span id="cb12-1604"><a href="liite-3-r-koodi.html#cb12-1604"></a></span>
<span id="cb12-1605"><a href="liite-3-r-koodi.html#cb12-1605"></a><span class="kw">summary</span>(gaTestCA1)</span>
<span id="cb12-1606"><a href="liite-3-r-koodi.html#cb12-1606"></a></span>
<span id="cb12-1607"><a href="liite-3-r-koodi.html#cb12-1607"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1b.dat,</span>
<span id="cb12-1608"><a href="liite-3-r-koodi.html#cb12-1608"></a>                             <span class="dt">maaga =</span> <span class="kw">paste</span>(maa, ga, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb12-1609"><a href="liite-3-r-koodi.html#cb12-1609"></a></span>
<span id="cb12-1610"><a href="liite-3-r-koodi.html#cb12-1610"></a><span class="co"># tarkistus, muunnos ok</span></span>
<span id="cb12-1611"><a href="liite-3-r-koodi.html#cb12-1611"></a><span class="co"># ISSP2012esim1b.dat %&gt;% tableX(maa, maaga)</span></span>
<span id="cb12-1612"><a href="liite-3-r-koodi.html#cb12-1612"></a><span class="co"># head(ISSP2012esim2.dat)</span></span>
<span id="cb12-1613"><a href="liite-3-r-koodi.html#cb12-1613"></a><span class="co"># str(ISSP2012esim2.dat)</span></span>
<span id="cb12-1614"><a href="liite-3-r-koodi.html#cb12-1614"></a></span>
<span id="cb12-1615"><a href="liite-3-r-koodi.html#cb12-1615"></a></span>
<span id="cb12-1616"><a href="liite-3-r-koodi.html#cb12-1616"></a>maagaCA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maaga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat)</span>
<span id="cb12-1617"><a href="liite-3-r-koodi.html#cb12-1617"></a></span>
<span id="cb12-1618"><a href="liite-3-r-koodi.html#cb12-1618"></a></span>
<span id="cb12-1619"><a href="liite-3-r-koodi.html#cb12-1619"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.5</span>)</span>
<span id="cb12-1620"><a href="liite-3-r-koodi.html#cb12-1620"></a><span class="kw">plot</span>(maagaCA1, <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta 1&quot;</span>,</span>
<span id="cb12-1621"><a href="liite-3-r-koodi.html#cb12-1621"></a>                <span class="dt">sub =</span> <span class="st">&quot;cex=0.5&quot;</span>)</span>
<span id="cb12-1622"><a href="liite-3-r-koodi.html#cb12-1622"></a></span>
<span id="cb12-1623"><a href="liite-3-r-koodi.html#cb12-1623"></a></span>
<span id="cb12-1624"><a href="liite-3-r-koodi.html#cb12-1624"></a><span class="co"># Vilkaistaan numeerisia tuloksia, kopioidaan tekstiin jos on tarpeellista</span></span>
<span id="cb12-1625"><a href="liite-3-r-koodi.html#cb12-1625"></a></span>
<span id="cb12-1626"><a href="liite-3-r-koodi.html#cb12-1626"></a><span class="co"># print(maagaCA1)</span></span>
<span id="cb12-1627"><a href="liite-3-r-koodi.html#cb12-1627"></a></span>
<span id="cb12-1628"><a href="liite-3-r-koodi.html#cb12-1628"></a><span class="kw">summary</span>(maagaCA1)</span>
<span id="cb12-1629"><a href="liite-3-r-koodi.html#cb12-1629"></a></span>
<span id="cb12-1630"><a href="liite-3-r-koodi.html#cb12-1630"></a></span>
<span id="cb12-1631"><a href="liite-3-r-koodi.html#cb12-1631"></a><span class="co"># Osajoukon CA: Tanska, Saksa ja Suomi</span></span>
<span id="cb12-1632"><a href="liite-3-r-koodi.html#cb12-1632"></a>maagaCA2sub2 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maaga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat,<span class="dt">subsetrow =</span> <span class="dv">25</span><span class="op">:</span><span class="dv">60</span>)</span>
<span id="cb12-1633"><a href="liite-3-r-koodi.html#cb12-1633"></a></span>
<span id="cb12-1634"><a href="liite-3-r-koodi.html#cb12-1634"></a></span>
<span id="cb12-1635"><a href="liite-3-r-koodi.html#cb12-1635"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.8</span>)</span>
<span id="cb12-1636"><a href="liite-3-r-koodi.html#cb12-1636"></a><span class="kw">plot</span>(maagaCA2sub2, <span class="dt">main =</span> <span class="st">&quot;Q1b: Lapsi kärsii jos äiti käy töissä&quot;</span>,</span>
<span id="cb12-1637"><a href="liite-3-r-koodi.html#cb12-1637"></a>     <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - osajoukko Tanska, Saksa ja Suomi)&quot;</span></span>
<span id="cb12-1638"><a href="liite-3-r-koodi.html#cb12-1638"></a>   )</span>
<span id="cb12-1639"><a href="liite-3-r-koodi.html#cb12-1639"></a></span>
<span id="cb12-1640"><a href="liite-3-r-koodi.html#cb12-1640"></a></span>
<span id="cb12-1641"><a href="liite-3-r-koodi.html#cb12-1641"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb12-1642"><a href="liite-3-r-koodi.html#cb12-1642"></a><span class="kw">plot</span>(maagaCA2sub2, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb12-1643"><a href="liite-3-r-koodi.html#cb12-1643"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb12-1644"><a href="liite-3-r-koodi.html#cb12-1644"></a>     <span class="dt">contrib =</span><span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb12-1645"><a href="liite-3-r-koodi.html#cb12-1645"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb12-1646"><a href="liite-3-r-koodi.html#cb12-1646"></a>     <span class="dt">main =</span> <span class="st">&quot;Kontribuutiokartta: sarakkeiden(abs.) ja rivien(rel.) värisävy&quot;</span>,</span>
<span id="cb12-1647"><a href="liite-3-r-koodi.html#cb12-1647"></a>     <span class="dt">sub =</span> <span class="st">&quot;massat pisteiden kokoina, cex=0.06&quot;</span></span>
<span id="cb12-1648"><a href="liite-3-r-koodi.html#cb12-1648"></a>      )</span>
<span id="cb12-1649"><a href="liite-3-r-koodi.html#cb12-1649"></a></span>
<span id="cb12-1650"><a href="liite-3-r-koodi.html#cb12-1650"></a><span class="co"># ca-tulosobjekti maagaCA2sub2, DK DE FI</span></span>
<span id="cb12-1651"><a href="liite-3-r-koodi.html#cb12-1651"></a></span>
<span id="cb12-1652"><a href="liite-3-r-koodi.html#cb12-1652"></a>maagaLinesDKDEFI &lt;-<span class="st"> </span><span class="kw">cacoord</span>(maagaCA2sub2, <span class="dt">type =</span> <span class="st">&quot;symmetric&quot;</span>)</span>
<span id="cb12-1653"><a href="liite-3-r-koodi.html#cb12-1653"></a>maagaLinesDKDEFI &lt;-<span class="st"> </span>maagaLinesDKDEFI<span class="op">$</span>rows[ , <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</span>
<span id="cb12-1654"><a href="liite-3-r-koodi.html#cb12-1654"></a><span class="co"># maagaLinesDKDEFI # tarkistus</span></span>
<span id="cb12-1655"><a href="liite-3-r-koodi.html#cb12-1655"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb12-1656"><a href="liite-3-r-koodi.html#cb12-1656"></a><span class="kw">plot</span>(maagaCA2sub2,</span>
<span id="cb12-1657"><a href="liite-3-r-koodi.html#cb12-1657"></a>     <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - Tanska, Saksa ja Suomi (subset ca)&quot;</span>)</span>
<span id="cb12-1658"><a href="liite-3-r-koodi.html#cb12-1658"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="co">#DEf</span></span>
<span id="cb12-1659"><a href="liite-3-r-koodi.html#cb12-1659"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)  <span class="co">#DEm</span></span>
<span id="cb12-1660"><a href="liite-3-r-koodi.html#cb12-1660"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">13</span><span class="op">:</span><span class="dv">18</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">13</span><span class="op">:</span><span class="dv">18</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="co">#DKf</span></span>
<span id="cb12-1661"><a href="liite-3-r-koodi.html#cb12-1661"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">19</span><span class="op">:</span><span class="dv">24</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">19</span><span class="op">:</span><span class="dv">24</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)  <span class="co">#DKm</span></span>
<span id="cb12-1662"><a href="liite-3-r-koodi.html#cb12-1662"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">25</span><span class="op">:</span><span class="dv">30</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">25</span><span class="op">:</span><span class="dv">30</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="co">#FIf</span></span>
<span id="cb12-1663"><a href="liite-3-r-koodi.html#cb12-1663"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">31</span><span class="op">:</span><span class="dv">36</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">31</span><span class="op">:</span><span class="dv">36</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)  <span class="co">#FIm</span></span>
<span id="cb12-1664"><a href="liite-3-r-koodi.html#cb12-1664"></a></span>
<span id="cb12-1665"><a href="liite-3-r-koodi.html#cb12-1665"></a></span>
<span id="cb12-1666"><a href="liite-3-r-koodi.html#cb12-1666"></a><span class="co"># Tarkastetaan numeeriset tulokset</span></span>
<span id="cb12-1667"><a href="liite-3-r-koodi.html#cb12-1667"></a><span class="kw">summary</span>(maagaCA2sub2)</span>
<span id="cb12-1668"><a href="liite-3-r-koodi.html#cb12-1668"></a></span>
<span id="cb12-1669"><a href="liite-3-r-koodi.html#cb12-1669"></a><span class="co"># Jos suhteeelinen inertia kaikilla rivelillä sama</span></span>
<span id="cb12-1670"><a href="liite-3-r-koodi.html#cb12-1670"></a><span class="co"># 1000/36 = 28</span></span>
<span id="cb12-1671"><a href="liite-3-r-koodi.html#cb12-1671"></a></span>
<span id="cb12-1672"><a href="liite-3-r-koodi.html#cb12-1672"></a></span>
<span id="cb12-1673"><a href="liite-3-r-koodi.html#cb12-1673"></a><span class="co"># Belgia, Bulgaria ja Unkari analysoidaan tiiviisti</span></span>
<span id="cb12-1674"><a href="liite-3-r-koodi.html#cb12-1674"></a><span class="co"># Belgia on vähän välitapaus Bulgarian ja Unkarin ja kolmen ensimmäisen maan</span></span>
<span id="cb12-1675"><a href="liite-3-r-koodi.html#cb12-1675"></a><span class="co"># kanssa. Kokeiluja voi tehdä neljällä maaryhmällä, kuvan lukukelpoisuus</span></span>
<span id="cb12-1676"><a href="liite-3-r-koodi.html#cb12-1676"></a><span class="co"># ratkaisee.</span></span>
<span id="cb12-1677"><a href="liite-3-r-koodi.html#cb12-1677"></a></span>
<span id="cb12-1678"><a href="liite-3-r-koodi.html#cb12-1678"></a><span class="co">#BGHUsubset &lt;- c(13:24,61:72)</span></span>
<span id="cb12-1679"><a href="liite-3-r-koodi.html#cb12-1679"></a><span class="co">#BEDEDKFIsubset &lt;- c(1:12, 25:36, 37:48, 49:60)</span></span>
<span id="cb12-1680"><a href="liite-3-r-koodi.html#cb12-1680"></a><span class="co">#DEDKFIsubset &lt;- c(25:36, 37:48, 49:60)</span></span>
<span id="cb12-1681"><a href="liite-3-r-koodi.html#cb12-1681"></a></span>
<span id="cb12-1682"><a href="liite-3-r-koodi.html#cb12-1682"></a>BEBGHUsubset &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">13</span><span class="op">:</span><span class="dv">24</span>,<span class="dv">61</span><span class="op">:</span><span class="dv">72</span>)</span>
<span id="cb12-1683"><a href="liite-3-r-koodi.html#cb12-1683"></a>maagaCA2sub3 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maaga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat,<span class="dt">subsetrow =</span> BEBGHUsubset)</span>
<span id="cb12-1684"><a href="liite-3-r-koodi.html#cb12-1684"></a></span>
<span id="cb12-1685"><a href="liite-3-r-koodi.html#cb12-1685"></a></span>
<span id="cb12-1686"><a href="liite-3-r-koodi.html#cb12-1686"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb12-1687"><a href="liite-3-r-koodi.html#cb12-1687"></a><span class="kw">plot</span>(maagaCA2sub3, </span>
<span id="cb12-1688"><a href="liite-3-r-koodi.html#cb12-1688"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb12-1689"><a href="liite-3-r-koodi.html#cb12-1689"></a>     <span class="dt">contrib =</span><span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb12-1690"><a href="liite-3-r-koodi.html#cb12-1690"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">FALSE</span>),</span>
<span id="cb12-1691"><a href="liite-3-r-koodi.html#cb12-1691"></a>     <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta: sarakkeiden ja rivien suhteelliset kontribuutiot värisävynä &quot;</span>,</span>
<span id="cb12-1692"><a href="liite-3-r-koodi.html#cb12-1692"></a>     <span class="dt">sub =</span> <span class="st">&quot;massat pisteiden kokoina, cex=0.06&quot;</span></span>
<span id="cb12-1693"><a href="liite-3-r-koodi.html#cb12-1693"></a>      )</span>
<span id="cb12-1694"><a href="liite-3-r-koodi.html#cb12-1694"></a></span>
<span id="cb12-1695"><a href="liite-3-r-koodi.html#cb12-1695"></a></span>
<span id="cb12-1696"><a href="liite-3-r-koodi.html#cb12-1696"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb12-1697"><a href="liite-3-r-koodi.html#cb12-1697"></a><span class="kw">plot</span>(maagaCA2sub3, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb12-1698"><a href="liite-3-r-koodi.html#cb12-1698"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb12-1699"><a href="liite-3-r-koodi.html#cb12-1699"></a>     <span class="dt">contrib =</span><span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb12-1700"><a href="liite-3-r-koodi.html#cb12-1700"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb12-1701"><a href="liite-3-r-koodi.html#cb12-1701"></a>     <span class="dt">main =</span> <span class="st">&quot;Kontribuutiokartta: sarakkeiden(abs.) ja rivien(abs.) värisävy&quot;</span>,</span>
<span id="cb12-1702"><a href="liite-3-r-koodi.html#cb12-1702"></a>     <span class="dt">sub =</span> <span class="st">&quot;massat pisteiden kokoina, cex=0.06&quot;</span></span>
<span id="cb12-1703"><a href="liite-3-r-koodi.html#cb12-1703"></a>      )</span>
<span id="cb12-1704"><a href="liite-3-r-koodi.html#cb12-1704"></a></span>
<span id="cb12-1705"><a href="liite-3-r-koodi.html#cb12-1705"></a></span>
<span id="cb12-1706"><a href="liite-3-r-koodi.html#cb12-1706"></a><span class="co"># Vilkaistaa numeerisia tuloksia, kopioidaan tekstiin jos on tarpeen</span></span>
<span id="cb12-1707"><a href="liite-3-r-koodi.html#cb12-1707"></a><span class="co"># maagaCA2sub3</span></span>
<span id="cb12-1708"><a href="liite-3-r-koodi.html#cb12-1708"></a> <span class="kw">summary</span>(maagaCA2sub3)</span>
<span id="cb12-1709"><a href="liite-3-r-koodi.html#cb12-1709"></a></span>
<span id="cb12-1710"><a href="liite-3-r-koodi.html#cb12-1710"></a><span class="co"># kahden osaratkaisun kokonaisinertia</span></span>
<span id="cb12-1711"><a href="liite-3-r-koodi.html#cb12-1711"></a></span>
<span id="cb12-1712"><a href="liite-3-r-koodi.html#cb12-1712"></a><span class="co"># 0.143551 + 0.119602 = 0.263153</span></span>
<span id="cb12-1713"><a href="liite-3-r-koodi.html#cb12-1713"></a><span class="co"># koko datalla 0.263154</span></span>
<span id="cb12-1714"><a href="liite-3-r-koodi.html#cb12-1714"></a></span>
<span id="cb12-1715"><a href="liite-3-r-koodi.html#cb12-1715"></a></span>
<span id="cb12-1716"><a href="liite-3-r-koodi.html#cb12-1716"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/stacked1.png&#39;</span>)</span>
<span id="cb12-1717"><a href="liite-3-r-koodi.html#cb12-1717"></a></span>
<span id="cb12-1718"><a href="liite-3-r-koodi.html#cb12-1718"></a></span>
<span id="cb12-1719"><a href="liite-3-r-koodi.html#cb12-1719"></a><span class="co"># Data</span></span>
<span id="cb12-1720"><a href="liite-3-r-koodi.html#cb12-1720"></a>ISSP2012Concat1jh.dat &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012esim1b.dat, Q1b, maa,sp, age_cat)</span>
<span id="cb12-1721"><a href="liite-3-r-koodi.html#cb12-1721"></a></span>
<span id="cb12-1722"><a href="liite-3-r-koodi.html#cb12-1722"></a><span class="co"># mjca-funktiota -&gt;  Burt-matriisi</span></span>
<span id="cb12-1723"><a href="liite-3-r-koodi.html#cb12-1723"></a>Concat1jh.Burt &lt;-<span class="st"> </span><span class="kw">mjca</span>(ISSP2012Concat1jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>)<span class="op">$</span>Burt</span>
<span id="cb12-1724"><a href="liite-3-r-koodi.html#cb12-1724"></a></span>
<span id="cb12-1725"><a href="liite-3-r-koodi.html#cb12-1725"></a><span class="co"># Burt-matriisi symmetrinen</span></span>
<span id="cb12-1726"><a href="liite-3-r-koodi.html#cb12-1726"></a><span class="co">#dim(Concat1jh.Burt)</span></span>
<span id="cb12-1727"><a href="liite-3-r-koodi.html#cb12-1727"></a><span class="co"># 19 x 19</span></span>
<span id="cb12-1728"><a href="liite-3-r-koodi.html#cb12-1728"></a><span class="co">#rownames(Concat1jh.Burt)</span></span>
<span id="cb12-1729"><a href="liite-3-r-koodi.html#cb12-1729"></a><span class="co">#[1] &quot;Q1bS&quot;     &quot;Q1bs&quot;     &quot;Q1b?&quot;     &quot;Q1be&quot;     &quot;Q1bE&quot;     &quot;maaBE&quot;    &quot;maaBG&quot;    &quot;maaDE&quot;    &quot;maaDK&quot;</span></span>
<span id="cb12-1730"><a href="liite-3-r-koodi.html#cb12-1730"></a><span class="co">#[10] &quot;maaFI&quot;    &quot;maaHU&quot;    &quot;spm&quot;      &quot;spf&quot;      &quot;age_cat1&quot; &quot;age_cat2&quot; &quot;age_cat3&quot; &quot;age_cat4&quot; &quot;age_cat5&quot;</span></span>
<span id="cb12-1731"><a href="liite-3-r-koodi.html#cb12-1731"></a><span class="co">#[19] &quot;age_cat6&quot;</span></span>
<span id="cb12-1732"><a href="liite-3-r-koodi.html#cb12-1732"></a></span>
<span id="cb12-1733"><a href="liite-3-r-koodi.html#cb12-1733"></a><span class="co"># maat - vastaukset</span></span>
<span id="cb12-1734"><a href="liite-3-r-koodi.html#cb12-1734"></a>ISSP2012Concat2jh.dat &lt;-<span class="st"> </span>Concat1jh.Burt[<span class="dv">6</span><span class="op">:</span><span class="dv">11</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb12-1735"><a href="liite-3-r-koodi.html#cb12-1735"></a><span class="co"># ISSP2012Concat2jh.dat</span></span>
<span id="cb12-1736"><a href="liite-3-r-koodi.html#cb12-1736"></a><span class="co"># sukupuoli ja vastaukset</span></span>
<span id="cb12-1737"><a href="liite-3-r-koodi.html#cb12-1737"></a>ISSP2012Concat2jh.dat &lt;-<span class="st"> </span><span class="kw">rbind</span>(ISSP2012Concat2jh.dat, Concat1jh.Burt[<span class="dv">12</span><span class="op">:</span><span class="dv">13</span> ,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</span>
<span id="cb12-1738"><a href="liite-3-r-koodi.html#cb12-1738"></a><span class="co"># ISSP2012Concat2jh.dat</span></span>
<span id="cb12-1739"><a href="liite-3-r-koodi.html#cb12-1739"></a><span class="co"># ikäluokka ja vastaukset</span></span>
<span id="cb12-1740"><a href="liite-3-r-koodi.html#cb12-1740"></a>ISSP2012Concat2jh.dat &lt;-<span class="st"> </span><span class="kw">rbind</span>(ISSP2012Concat2jh.dat, Concat1jh.Burt[<span class="dv">14</span><span class="op">:</span><span class="dv">19</span> ,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</span>
<span id="cb12-1741"><a href="liite-3-r-koodi.html#cb12-1741"></a><span class="co"># ISSP2012Concat2jh.dat</span></span>
<span id="cb12-1742"><a href="liite-3-r-koodi.html#cb12-1742"></a></span>
<span id="cb12-1743"><a href="liite-3-r-koodi.html#cb12-1743"></a>Concat1jh.CA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(ISSP2012Concat2jh.dat)</span>
<span id="cb12-1744"><a href="liite-3-r-koodi.html#cb12-1744"></a></span>
<span id="cb12-1745"><a href="liite-3-r-koodi.html#cb12-1745"></a></span>
<span id="cb12-1746"><a href="liite-3-r-koodi.html#cb12-1746"></a><span class="co"># Käännetään kuva x-akselin ympäri</span></span>
<span id="cb12-1747"><a href="liite-3-r-koodi.html#cb12-1747"></a>Concat1jh.CA1<span class="op">$</span>rowcoord[, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="op">-</span>Concat1jh.CA1<span class="op">$</span>rowcoord[, <span class="dv">2</span>]</span>
<span id="cb12-1748"><a href="liite-3-r-koodi.html#cb12-1748"></a>Concat1jh.CA1<span class="op">$</span>colcoord[, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="op">-</span>Concat1jh.CA1<span class="op">$</span>colcoord[, <span class="dv">2</span>]</span>
<span id="cb12-1749"><a href="liite-3-r-koodi.html#cb12-1749"></a></span>
<span id="cb12-1750"><a href="liite-3-r-koodi.html#cb12-1750"></a><span class="co"># Siistitään muuttujien nimet</span></span>
<span id="cb12-1751"><a href="liite-3-r-koodi.html#cb12-1751"></a>Concat1jh.CA1<span class="op">$</span>colnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)</span>
<span id="cb12-1752"><a href="liite-3-r-koodi.html#cb12-1752"></a>Concat1jh.CA1<span class="op">$</span>rownames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>,</span>
<span id="cb12-1753"><a href="liite-3-r-koodi.html#cb12-1753"></a>                            <span class="st">&quot;a1&quot;</span>, <span class="st">&quot;a2&quot;</span>, <span class="st">&quot;a3&quot;</span>, <span class="st">&quot;a4&quot;</span>, <span class="st">&quot;a5&quot;</span>, <span class="st">&quot;a6&quot;</span>)</span>
<span id="cb12-1754"><a href="liite-3-r-koodi.html#cb12-1754"></a></span>
<span id="cb12-1755"><a href="liite-3-r-koodi.html#cb12-1755"></a></span>
<span id="cb12-1756"><a href="liite-3-r-koodi.html#cb12-1756"></a><span class="co"># pisteiden kasautumien haittaa haittaa tulkintaa</span></span>
<span id="cb12-1757"><a href="liite-3-r-koodi.html#cb12-1757"></a></span>
<span id="cb12-1758"><a href="liite-3-r-koodi.html#cb12-1758"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>) </span>
<span id="cb12-1759"><a href="liite-3-r-koodi.html#cb12-1759"></a><span class="kw">plot</span>(Concat1jh.CA1,</span>
<span id="cb12-1760"><a href="liite-3-r-koodi.html#cb12-1760"></a>     <span class="dt">main =</span> <span class="st">&quot;Pinottu taulukko - symmetrinen kartta&quot;</span>,</span>
<span id="cb12-1761"><a href="liite-3-r-koodi.html#cb12-1761"></a>     <span class="dt">sub =</span> <span class="st">&quot;ikäluokat a1-a6, m = miehet, f = naiset&quot;</span></span>
<span id="cb12-1762"><a href="liite-3-r-koodi.html#cb12-1762"></a>     )</span>
<span id="cb12-1763"><a href="liite-3-r-koodi.html#cb12-1763"></a></span>
<span id="cb12-1764"><a href="liite-3-r-koodi.html#cb12-1764"></a></span>
<span id="cb12-1765"><a href="liite-3-r-koodi.html#cb12-1765"></a><span class="kw">summary</span>(Concat1jh.CA1)</span>
<span id="cb12-1766"><a href="liite-3-r-koodi.html#cb12-1766"></a></span>
<span id="cb12-1767"><a href="liite-3-r-koodi.html#cb12-1767"></a><span class="co"># 14 riviä, inertiakontribuution keskiarvo</span></span>
<span id="cb12-1768"><a href="liite-3-r-koodi.html#cb12-1768"></a><span class="co"># 1000/14 = 71 </span></span>
<span id="cb12-1769"><a href="liite-3-r-koodi.html#cb12-1769"></a></span>
<span id="cb12-1770"><a href="liite-3-r-koodi.html#cb12-1770"></a></span>
<span id="cb12-1771"><a href="liite-3-r-koodi.html#cb12-1771"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb12-1772"><a href="liite-3-r-koodi.html#cb12-1772"></a><span class="kw">plot</span>(Concat1jh.CA1, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb12-1773"><a href="liite-3-r-koodi.html#cb12-1773"></a>     <span class="co">#mass = c(TRUE, TRUE) ei oikein erotu kuvassa</span></span>
<span id="cb12-1774"><a href="liite-3-r-koodi.html#cb12-1774"></a>     <span class="dt">contrib =</span><span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb12-1775"><a href="liite-3-r-koodi.html#cb12-1775"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb12-1776"><a href="liite-3-r-koodi.html#cb12-1776"></a>     <span class="dt">main =</span> <span class="st">&quot;Pinottu taulukko, kontribuutiokartta&quot;</span>,</span>
<span id="cb12-1777"><a href="liite-3-r-koodi.html#cb12-1777"></a>     <span class="dt">sub =</span>  <span class="st">&quot;    sarakkeet absoluuttinen kontribuutio, rivit suhteellinen,</span></span>
<span id="cb12-1778"><a href="liite-3-r-koodi.html#cb12-1778"></a><span class="st">     taustamuuttujat a1-a6 ikäluokat, m = miehet, f = naiset&quot;</span></span>
<span id="cb12-1779"><a href="liite-3-r-koodi.html#cb12-1779"></a>     )</span>
<span id="cb12-1780"><a href="liite-3-r-koodi.html#cb12-1780"></a></span>
<span id="cb12-1781"><a href="liite-3-r-koodi.html#cb12-1781"></a><span class="co"># Tätä dataa ei käytetä - pelkät kysymykset</span></span>
<span id="cb12-1782"><a href="liite-3-r-koodi.html#cb12-1782"></a><span class="co"># str(ISSP2012jh1d.dat) - luotu skripteissä G1_1_data2.Rmd ja G1_1_data_fct1.Rmd</span></span>
<span id="cb12-1783"><a href="liite-3-r-koodi.html#cb12-1783"></a><span class="co"># Tarkistukset näkyvät Galkussa - tässä ei tulosteta</span></span>
<span id="cb12-1784"><a href="liite-3-r-koodi.html#cb12-1784"></a><span class="co"># Kommentoidaan pois tarkistuksia (14.11.2020)</span></span>
<span id="cb12-1785"><a href="liite-3-r-koodi.html#cb12-1785"></a><span class="co">#Valitaan muuttujat joissa puuttuva tieto on koodattu muuttujan arvoksi</span></span>
<span id="cb12-1786"><a href="liite-3-r-koodi.html#cb12-1786"></a></span>
<span id="cb12-1787"><a href="liite-3-r-koodi.html#cb12-1787"></a>MCAvars1 &lt;-<span class="st">  </span><span class="kw">c</span>(<span class="st">&quot;Q1am&quot;</span>,<span class="st">&quot;Q1bm&quot;</span>, <span class="st">&quot;Q1cm&quot;</span>, <span class="st">&quot;Q1dm&quot;</span>,<span class="st">&quot;Q1em&quot;</span>,<span class="st">&quot;Q2am&quot;</span>,<span class="st">&quot;Q2bm&quot;</span>,<span class="st">&quot;edum&quot;</span>,</span>
<span id="cb12-1788"><a href="liite-3-r-koodi.html#cb12-1788"></a>                 <span class="st">&quot;sostam&quot;</span>, <span class="st">&quot;urbrum&quot;</span>, <span class="st">&quot;maa&quot;</span>, <span class="st">&quot;ika&quot;</span>, <span class="st">&quot;sp&quot;</span> )</span>
<span id="cb12-1789"><a href="liite-3-r-koodi.html#cb12-1789"></a></span>
<span id="cb12-1790"><a href="liite-3-r-koodi.html#cb12-1790"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">all_of</span>(MCAvars1))</span>
<span id="cb12-1791"><a href="liite-3-r-koodi.html#cb12-1791"></a></span>
<span id="cb12-1792"><a href="liite-3-r-koodi.html#cb12-1792"></a><span class="co">#dim(MCAdata1jh.dat)</span></span>
<span id="cb12-1793"><a href="liite-3-r-koodi.html#cb12-1793"></a><span class="co"># names(MCAdata1jh.dat)</span></span>
<span id="cb12-1794"><a href="liite-3-r-koodi.html#cb12-1794"></a></span>
<span id="cb12-1795"><a href="liite-3-r-koodi.html#cb12-1795"></a><span class="co"># luodaan ikaluokka-muuttuja ja ikäluokka-sukupuoli - muuttuja</span></span>
<span id="cb12-1796"><a href="liite-3-r-koodi.html#cb12-1796"></a><span class="co">#age_cat</span></span>
<span id="cb12-1797"><a href="liite-3-r-koodi.html#cb12-1797"></a><span class="co">#ikä 1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 and older</span></span>
<span id="cb12-1798"><a href="liite-3-r-koodi.html#cb12-1798"></a></span>
<span id="cb12-1799"><a href="liite-3-r-koodi.html#cb12-1799"></a>MCAdata1jh.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(MCAdata1jh.dat, <span class="dt">age_cat =</span> <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">15</span><span class="op">:</span><span class="dv">25</span>, <span class="st">&quot;1&quot;</span>,</span>
<span id="cb12-1800"><a href="liite-3-r-koodi.html#cb12-1800"></a>                                <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">26</span><span class="op">:</span><span class="dv">35</span>, <span class="st">&quot;2&quot;</span>,</span>
<span id="cb12-1801"><a href="liite-3-r-koodi.html#cb12-1801"></a>                                <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">36</span><span class="op">:</span><span class="dv">45</span>, <span class="st">&quot;3&quot;</span>,</span>
<span id="cb12-1802"><a href="liite-3-r-koodi.html#cb12-1802"></a>                                <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">46</span><span class="op">:</span><span class="dv">55</span>, <span class="st">&quot;4&quot;</span>,</span>
<span id="cb12-1803"><a href="liite-3-r-koodi.html#cb12-1803"></a>                                <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">56</span><span class="op">:</span><span class="dv">65</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>))))))</span>
<span id="cb12-1804"><a href="liite-3-r-koodi.html#cb12-1804"></a></span>
<span id="cb12-1805"><a href="liite-3-r-koodi.html#cb12-1805"></a><span class="co"># str(MCAdata1jh.dat$age_cat)</span></span>
<span id="cb12-1806"><a href="liite-3-r-koodi.html#cb12-1806"></a></span>
<span id="cb12-1807"><a href="liite-3-r-koodi.html#cb12-1807"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb12-1808"><a href="liite-3-r-koodi.html#cb12-1808"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span> <span class="kw">as_factor</span>(age_cat))</span>
<span id="cb12-1809"><a href="liite-3-r-koodi.html#cb12-1809"></a><span class="co">#tarkastuksia - outo järjestys</span></span>
<span id="cb12-1810"><a href="liite-3-r-koodi.html#cb12-1810"></a><span class="co">#levels(MCAdata1jh.dat$age_cat)</span></span>
<span id="cb12-1811"><a href="liite-3-r-koodi.html#cb12-1811"></a><span class="co"># str(MCAdata1jh.dat$age_cat)</span></span>
<span id="cb12-1812"><a href="liite-3-r-koodi.html#cb12-1812"></a></span>
<span id="cb12-1813"><a href="liite-3-r-koodi.html#cb12-1813"></a>MCAdata1jh.dat&lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb12-1814"><a href="liite-3-r-koodi.html#cb12-1814"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span> <span class="kw">fct_relevel</span>(age_cat,</span>
<span id="cb12-1815"><a href="liite-3-r-koodi.html#cb12-1815"></a>                                   <span class="st">&quot;1&quot;</span>,</span>
<span id="cb12-1816"><a href="liite-3-r-koodi.html#cb12-1816"></a>                                   <span class="st">&quot;2&quot;</span>,</span>
<span id="cb12-1817"><a href="liite-3-r-koodi.html#cb12-1817"></a>                                   <span class="st">&quot;3&quot;</span>,</span>
<span id="cb12-1818"><a href="liite-3-r-koodi.html#cb12-1818"></a>                                   <span class="st">&quot;4&quot;</span>,</span>
<span id="cb12-1819"><a href="liite-3-r-koodi.html#cb12-1819"></a>                                   <span class="st">&quot;5&quot;</span>,</span>
<span id="cb12-1820"><a href="liite-3-r-koodi.html#cb12-1820"></a>                                   <span class="st">&quot;6&quot;</span>))</span>
<span id="cb12-1821"><a href="liite-3-r-koodi.html#cb12-1821"></a></span>
<span id="cb12-1822"><a href="liite-3-r-koodi.html#cb12-1822"></a><span class="co"># Tarkistuksia(16.10.20)</span></span>
<span id="cb12-1823"><a href="liite-3-r-koodi.html#cb12-1823"></a></span>
<span id="cb12-1824"><a href="liite-3-r-koodi.html#cb12-1824"></a><span class="co">#MCAdata1jh.dat %&gt;%</span></span>
<span id="cb12-1825"><a href="liite-3-r-koodi.html#cb12-1825"></a><span class="co">#        tableX(maa,age_cat,type = &quot;count&quot;) #%&gt;%</span></span>
<span id="cb12-1826"><a href="liite-3-r-koodi.html#cb12-1826"></a><span class="co">#        #kable(digits = 2, caption = &quot;Ikäluokka age_cat&quot;)</span></span>
<span id="cb12-1827"><a href="liite-3-r-koodi.html#cb12-1827"></a></span>
<span id="cb12-1828"><a href="liite-3-r-koodi.html#cb12-1828"></a><span class="co">#MCAdata1jh.dat %&gt;%</span></span>
<span id="cb12-1829"><a href="liite-3-r-koodi.html#cb12-1829"></a><span class="co">#        tableX(maa,age_cat,type = &quot;row_perc&quot;) #%&gt;%</span></span>
<span id="cb12-1830"><a href="liite-3-r-koodi.html#cb12-1830"></a><span class="co">#        #kable(digits = 2, caption = &quot;age_cat: suhteelliset frekvenssit&quot;)</span></span>
<span id="cb12-1831"><a href="liite-3-r-koodi.html#cb12-1831"></a></span>
<span id="cb12-1832"><a href="liite-3-r-koodi.html#cb12-1832"></a></span>
<span id="cb12-1833"><a href="liite-3-r-koodi.html#cb12-1833"></a><span class="co"># Ikäluokka-sukupuoli - muuttuja</span></span>
<span id="cb12-1834"><a href="liite-3-r-koodi.html#cb12-1834"></a>MCAdata1jh.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(MCAdata1jh.dat,</span>
<span id="cb12-1835"><a href="liite-3-r-koodi.html#cb12-1835"></a>                             <span class="dt">ga =</span> <span class="kw">case_when</span>((age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m1&quot;</span>,</span>
<span id="cb12-1836"><a href="liite-3-r-koodi.html#cb12-1836"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m2&quot;</span>,</span>
<span id="cb12-1837"><a href="liite-3-r-koodi.html#cb12-1837"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m3&quot;</span>,</span>
<span id="cb12-1838"><a href="liite-3-r-koodi.html#cb12-1838"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m4&quot;</span>,</span>
<span id="cb12-1839"><a href="liite-3-r-koodi.html#cb12-1839"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m5&quot;</span>,</span>
<span id="cb12-1840"><a href="liite-3-r-koodi.html#cb12-1840"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m6&quot;</span>,</span>
<span id="cb12-1841"><a href="liite-3-r-koodi.html#cb12-1841"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f1&quot;</span>,</span>
<span id="cb12-1842"><a href="liite-3-r-koodi.html#cb12-1842"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f2&quot;</span>,</span>
<span id="cb12-1843"><a href="liite-3-r-koodi.html#cb12-1843"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f3&quot;</span>,</span>
<span id="cb12-1844"><a href="liite-3-r-koodi.html#cb12-1844"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb12-1845"><a href="liite-3-r-koodi.html#cb12-1845"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb12-1846"><a href="liite-3-r-koodi.html#cb12-1846"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f5&quot;</span>,</span>
<span id="cb12-1847"><a href="liite-3-r-koodi.html#cb12-1847"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f6&quot;</span>,</span>
<span id="cb12-1848"><a href="liite-3-r-koodi.html#cb12-1848"></a>                                <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;missing&quot;</span></span>
<span id="cb12-1849"><a href="liite-3-r-koodi.html#cb12-1849"></a>                                ))</span>
<span id="cb12-1850"><a href="liite-3-r-koodi.html#cb12-1850"></a></span>
<span id="cb12-1851"><a href="liite-3-r-koodi.html#cb12-1851"></a></span>
<span id="cb12-1852"><a href="liite-3-r-koodi.html#cb12-1852"></a><span class="co">#Sosiaalinen status: oma arvio &quot;Top-Bottom self-placement&quot;</span></span>
<span id="cb12-1853"><a href="liite-3-r-koodi.html#cb12-1853"></a><span class="co">#str(ISSP2012jh1d.dat$sosta)</span></span>
<span id="cb12-1854"><a href="liite-3-r-koodi.html#cb12-1854"></a><span class="co">#str(ISSP2012jh1d.dat$urbru)</span></span>
<span id="cb12-1855"><a href="liite-3-r-koodi.html#cb12-1855"></a><span class="co">#str(ISSP2012jh1d.dat$edu)</span></span>
<span id="cb12-1856"><a href="liite-3-r-koodi.html#cb12-1856"></a><span class="co">#Koulutustaso</span></span>
<span id="cb12-1857"><a href="liite-3-r-koodi.html#cb12-1857"></a><span class="co">#str(ISSP2012jh1d.dat$edu)</span></span>
<span id="cb12-1858"><a href="liite-3-r-koodi.html#cb12-1858"></a></span>
<span id="cb12-1859"><a href="liite-3-r-koodi.html#cb12-1859"></a><span class="co">#Asuipaikka</span></span>
<span id="cb12-1860"><a href="liite-3-r-koodi.html#cb12-1860"></a><span class="co">#str(ISSP2012jh1d.dat$urbru)</span></span>
<span id="cb12-1861"><a href="liite-3-r-koodi.html#cb12-1861"></a></span>
<span id="cb12-1862"><a href="liite-3-r-koodi.html#cb12-1862"></a><span class="co"># Muunnetaan faktorimuuttujia, mahdollisimman lyhyet tunnisteet kategorioille</span></span>
<span id="cb12-1863"><a href="liite-3-r-koodi.html#cb12-1863"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb12-1864"><a href="liite-3-r-koodi.html#cb12-1864"></a><span class="kw">mutate</span>(<span class="dt">E =</span> <span class="kw">fct_recode</span>(edum,</span>
<span id="cb12-1865"><a href="liite-3-r-koodi.html#cb12-1865"></a>        <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;No formal education&quot;</span>,</span>
<span id="cb12-1866"><a href="liite-3-r-koodi.html#cb12-1866"></a>        <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;Primary school (elementary school)&quot;</span>,</span>
<span id="cb12-1867"><a href="liite-3-r-koodi.html#cb12-1867"></a>        <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;Lower secondary (secondary completed does not allow entry to university: obligatory school)&quot;</span>,</span>
<span id="cb12-1868"><a href="liite-3-r-koodi.html#cb12-1868"></a>        <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;Upper secondary (programs that allows entry to university&quot;</span>,</span>
<span id="cb12-1869"><a href="liite-3-r-koodi.html#cb12-1869"></a>        <span class="st">&quot;5&quot;</span> =<span class="st"> &quot;Post secondary, non-tertiary (other upper secondary programs toward labour market or technical formation)&quot;</span>,</span>
<span id="cb12-1870"><a href="liite-3-r-koodi.html#cb12-1870"></a>        <span class="st">&quot;6&quot;</span> =<span class="st"> &quot;Lower level tertiary, first stage (also technical schools at a tertiary level)&quot;</span>,</span>
<span id="cb12-1871"><a href="liite-3-r-koodi.html#cb12-1871"></a>        <span class="st">&quot;7&quot;</span> =<span class="st"> &quot;Upper level tertiary (Master, Dr.)&quot;</span>,</span>
<span id="cb12-1872"><a href="liite-3-r-koodi.html#cb12-1872"></a>        <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb12-1873"><a href="liite-3-r-koodi.html#cb12-1873"></a>       <span class="dt">S =</span> <span class="kw">fct_recode</span>(sostam,</span>
<span id="cb12-1874"><a href="liite-3-r-koodi.html#cb12-1874"></a>         <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Lowest, Bottom, 01&quot;</span>,</span>
<span id="cb12-1875"><a href="liite-3-r-koodi.html#cb12-1875"></a>         <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;02&quot;</span>,</span>
<span id="cb12-1876"><a href="liite-3-r-koodi.html#cb12-1876"></a>         <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;03&quot;</span>,</span>
<span id="cb12-1877"><a href="liite-3-r-koodi.html#cb12-1877"></a>         <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;04&quot;</span>,</span>
<span id="cb12-1878"><a href="liite-3-r-koodi.html#cb12-1878"></a>         <span class="st">&quot;5&quot;</span> =<span class="st"> &quot;05&quot;</span>,</span>
<span id="cb12-1879"><a href="liite-3-r-koodi.html#cb12-1879"></a>         <span class="st">&quot;6&quot;</span> =<span class="st"> &quot;06&quot;</span>,</span>
<span id="cb12-1880"><a href="liite-3-r-koodi.html#cb12-1880"></a>         <span class="st">&quot;7&quot;</span> =<span class="st"> &quot;07&quot;</span>,</span>
<span id="cb12-1881"><a href="liite-3-r-koodi.html#cb12-1881"></a>         <span class="st">&quot;8&quot;</span> =<span class="st"> &quot;08&quot;</span>,</span>
<span id="cb12-1882"><a href="liite-3-r-koodi.html#cb12-1882"></a>         <span class="st">&quot;9&quot;</span> =<span class="st"> &quot;09&quot;</span>,</span>
<span id="cb12-1883"><a href="liite-3-r-koodi.html#cb12-1883"></a>         <span class="st">&quot;10&quot;</span>=<span class="st"> &quot;Highest, Top, 10&quot;</span>,</span>
<span id="cb12-1884"><a href="liite-3-r-koodi.html#cb12-1884"></a>         <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb12-1885"><a href="liite-3-r-koodi.html#cb12-1885"></a>       <span class="dt">U =</span> <span class="kw">fct_recode</span>(urbrum,</span>
<span id="cb12-1886"><a href="liite-3-r-koodi.html#cb12-1886"></a>        <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;A big city&quot;</span>,</span>
<span id="cb12-1887"><a href="liite-3-r-koodi.html#cb12-1887"></a>        <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;The suburbs or outskirts of a big city&quot;</span>,</span>
<span id="cb12-1888"><a href="liite-3-r-koodi.html#cb12-1888"></a>        <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;A town or a small city&quot;</span>,</span>
<span id="cb12-1889"><a href="liite-3-r-koodi.html#cb12-1889"></a>        <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;A country village&quot;</span>,</span>
<span id="cb12-1890"><a href="liite-3-r-koodi.html#cb12-1890"></a>        <span class="st">&quot;5&quot;</span> =<span class="st"> &quot;A farm or home in the country&quot;</span>,</span>
<span id="cb12-1891"><a href="liite-3-r-koodi.html#cb12-1891"></a>        <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>)</span>
<span id="cb12-1892"><a href="liite-3-r-koodi.html#cb12-1892"></a>        )</span>
<span id="cb12-1893"><a href="liite-3-r-koodi.html#cb12-1893"></a></span>
<span id="cb12-1894"><a href="liite-3-r-koodi.html#cb12-1894"></a><span class="co">#names(MCAdata1jh.dat)</span></span>
<span id="cb12-1895"><a href="liite-3-r-koodi.html#cb12-1895"></a><span class="co">#dim(MCAdata1jh.dat)</span></span>
<span id="cb12-1896"><a href="liite-3-r-koodi.html#cb12-1896"></a><span class="co">#MCAdata1jh.dat$E %&gt;% levels()</span></span>
<span id="cb12-1897"><a href="liite-3-r-koodi.html#cb12-1897"></a><span class="co">#MCAdata1jh.dat$S %&gt;% levels()</span></span>
<span id="cb12-1898"><a href="liite-3-r-koodi.html#cb12-1898"></a><span class="co">#MCAdata1jh.dat$U %&gt;% levels()</span></span>
<span id="cb12-1899"><a href="liite-3-r-koodi.html#cb12-1899"></a><span class="co">#MCAdata1jh.dat$age_cat %&gt;% levels()</span></span>
<span id="cb12-1900"><a href="liite-3-r-koodi.html#cb12-1900"></a><span class="co">#str(MCAdata1jh.dat$ga) # toimiikohan - chr-muuttuja? (16.10.20)</span></span>
<span id="cb12-1901"><a href="liite-3-r-koodi.html#cb12-1901"></a></span>
<span id="cb12-1902"><a href="liite-3-r-koodi.html#cb12-1902"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb12-1903"><a href="liite-3-r-koodi.html#cb12-1903"></a><span class="kw">mutate</span>(<span class="dt">gaf =</span> <span class="kw">as_factor</span>(ga))</span>
<span id="cb12-1904"><a href="liite-3-r-koodi.html#cb12-1904"></a></span>
<span id="cb12-1905"><a href="liite-3-r-koodi.html#cb12-1905"></a><span class="co">#str(MCAdata1jh.dat$gaf)</span></span>
<span id="cb12-1906"><a href="liite-3-r-koodi.html#cb12-1906"></a><span class="co">#levels(MCAdata1jh.dat$gaf) # järjestyksellä ei liene väliä? (16.10.20)</span></span>
<span id="cb12-1907"><a href="liite-3-r-koodi.html#cb12-1907"></a></span>
<span id="cb12-1908"><a href="liite-3-r-koodi.html#cb12-1908"></a><span class="co"># gaf ja ga: sama järjestys</span></span>
<span id="cb12-1909"><a href="liite-3-r-koodi.html#cb12-1909"></a></span>
<span id="cb12-1910"><a href="liite-3-r-koodi.html#cb12-1910"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb12-1911"><a href="liite-3-r-koodi.html#cb12-1911"></a><span class="st">       </span><span class="kw">mutate</span>(<span class="dt">gaf =</span> <span class="kw">fct_relevel</span>(gaf,</span>
<span id="cb12-1912"><a href="liite-3-r-koodi.html#cb12-1912"></a>                                 <span class="st">&quot;f1&quot;</span>,</span>
<span id="cb12-1913"><a href="liite-3-r-koodi.html#cb12-1913"></a>                                 <span class="st">&quot;f2&quot;</span>,</span>
<span id="cb12-1914"><a href="liite-3-r-koodi.html#cb12-1914"></a>                                 <span class="st">&quot;f3&quot;</span>,</span>
<span id="cb12-1915"><a href="liite-3-r-koodi.html#cb12-1915"></a>                                 <span class="st">&quot;f4&quot;</span>,</span>
<span id="cb12-1916"><a href="liite-3-r-koodi.html#cb12-1916"></a>                                 <span class="st">&quot;f5&quot;</span>,</span>
<span id="cb12-1917"><a href="liite-3-r-koodi.html#cb12-1917"></a>                                 <span class="st">&quot;f6&quot;</span>,</span>
<span id="cb12-1918"><a href="liite-3-r-koodi.html#cb12-1918"></a>                                 <span class="st">&quot;m1&quot;</span>,</span>
<span id="cb12-1919"><a href="liite-3-r-koodi.html#cb12-1919"></a>                                 <span class="st">&quot;m2&quot;</span>,</span>
<span id="cb12-1920"><a href="liite-3-r-koodi.html#cb12-1920"></a>                                 <span class="st">&quot;m3&quot;</span>,</span>
<span id="cb12-1921"><a href="liite-3-r-koodi.html#cb12-1921"></a>                                 <span class="st">&quot;m4&quot;</span>,</span>
<span id="cb12-1922"><a href="liite-3-r-koodi.html#cb12-1922"></a>                                 <span class="st">&quot;m5&quot;</span>,</span>
<span id="cb12-1923"><a href="liite-3-r-koodi.html#cb12-1923"></a>                                 <span class="st">&quot;m6&quot;</span>))</span>
<span id="cb12-1924"><a href="liite-3-r-koodi.html#cb12-1924"></a></span>
<span id="cb12-1925"><a href="liite-3-r-koodi.html#cb12-1925"></a><span class="co"># Lopuksi substanssimuuttutien nimet lyhyiksi</span></span>
<span id="cb12-1926"><a href="liite-3-r-koodi.html#cb12-1926"></a></span>
<span id="cb12-1927"><a href="liite-3-r-koodi.html#cb12-1927"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">a1 =</span> Q1am,</span>
<span id="cb12-1928"><a href="liite-3-r-koodi.html#cb12-1928"></a>                                            <span class="dt">b1 =</span> Q1bm,</span>
<span id="cb12-1929"><a href="liite-3-r-koodi.html#cb12-1929"></a>                                            <span class="dt">c1 =</span> Q1cm,</span>
<span id="cb12-1930"><a href="liite-3-r-koodi.html#cb12-1930"></a>                                            <span class="dt">d1 =</span> Q1dm,</span>
<span id="cb12-1931"><a href="liite-3-r-koodi.html#cb12-1931"></a>                                            <span class="dt">e1 =</span> Q1em,</span>
<span id="cb12-1932"><a href="liite-3-r-koodi.html#cb12-1932"></a>                                            <span class="dt">a2 =</span> Q2am,</span>
<span id="cb12-1933"><a href="liite-3-r-koodi.html#cb12-1933"></a>                                            <span class="dt">b2 =</span> Q2bm)</span>
<span id="cb12-1934"><a href="liite-3-r-koodi.html#cb12-1934"></a></span>
<span id="cb12-1935"><a href="liite-3-r-koodi.html#cb12-1935"></a></span>
<span id="cb12-1936"><a href="liite-3-r-koodi.html#cb12-1936"></a></span>
<span id="cb12-1937"><a href="liite-3-r-koodi.html#cb12-1937"></a><span class="co"># Tarkistustuksia datalle</span></span>
<span id="cb12-1938"><a href="liite-3-r-koodi.html#cb12-1938"></a></span>
<span id="cb12-1939"><a href="liite-3-r-koodi.html#cb12-1939"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (a1, Q1am)</span></span>
<span id="cb12-1940"><a href="liite-3-r-koodi.html#cb12-1940"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (b1, Q1bm)</span></span>
<span id="cb12-1941"><a href="liite-3-r-koodi.html#cb12-1941"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (c1, Q1cm)</span></span>
<span id="cb12-1942"><a href="liite-3-r-koodi.html#cb12-1942"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (d1, Q1dm)</span></span>
<span id="cb12-1943"><a href="liite-3-r-koodi.html#cb12-1943"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (e1, Q1em)</span></span>
<span id="cb12-1944"><a href="liite-3-r-koodi.html#cb12-1944"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (a2, Q2am)</span></span>
<span id="cb12-1945"><a href="liite-3-r-koodi.html#cb12-1945"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (b2, Q2bm)</span></span>
<span id="cb12-1946"><a href="liite-3-r-koodi.html#cb12-1946"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX(gaf, ga)</span></span>
<span id="cb12-1947"><a href="liite-3-r-koodi.html#cb12-1947"></a></span>
<span id="cb12-1948"><a href="liite-3-r-koodi.html#cb12-1948"></a><span class="co"># Perustietoja - TÄSSÄ UUSI PDF-VIRHEILMOITUS 7.11.2020</span></span>
<span id="cb12-1949"><a href="liite-3-r-koodi.html#cb12-1949"></a><span class="co"># Ei tulosteta - kommentoidaan pois</span></span>
<span id="cb12-1950"><a href="liite-3-r-koodi.html#cb12-1950"></a></span>
<span id="cb12-1951"><a href="liite-3-r-koodi.html#cb12-1951"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,a1, type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1952"><a href="liite-3-r-koodi.html#cb12-1952"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,b1, type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1953"><a href="liite-3-r-koodi.html#cb12-1953"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,c1, type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1954"><a href="liite-3-r-koodi.html#cb12-1954"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,d1, type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1955"><a href="liite-3-r-koodi.html#cb12-1955"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,e1, type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1956"><a href="liite-3-r-koodi.html#cb12-1956"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,a2,type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1957"><a href="liite-3-r-koodi.html#cb12-1957"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,b2,type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1958"><a href="liite-3-r-koodi.html#cb12-1958"></a></span>
<span id="cb12-1959"><a href="liite-3-r-koodi.html#cb12-1959"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(gaf, ga,type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1960"><a href="liite-3-r-koodi.html#cb12-1960"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, age_cat,type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1961"><a href="liite-3-r-koodi.html#cb12-1961"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, gaf,type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1962"><a href="liite-3-r-koodi.html#cb12-1962"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, S, type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1963"><a href="liite-3-r-koodi.html#cb12-1963"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, U, type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1964"><a href="liite-3-r-koodi.html#cb12-1964"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, E, type = &quot;row_perc&quot;)</span></span>
<span id="cb12-1965"><a href="liite-3-r-koodi.html#cb12-1965"></a></span>
<span id="cb12-1966"><a href="liite-3-r-koodi.html#cb12-1966"></a></span>
<span id="cb12-1967"><a href="liite-3-r-koodi.html#cb12-1967"></a><span class="co">#Puuttuvien tietojen yleiskuva</span></span>
<span id="cb12-1968"><a href="liite-3-r-koodi.html#cb12-1968"></a></span>
<span id="cb12-1969"><a href="liite-3-r-koodi.html#cb12-1969"></a><span class="co"># Puuttuvat tiedot aineistossa - viite datan dokumentointiin jossa taulukot.</span></span>
<span id="cb12-1970"><a href="liite-3-r-koodi.html#cb12-1970"></a><span class="co"># Vaihtelee maittain ja muuttujittain, paljon.</span></span>
<span id="cb12-1971"><a href="liite-3-r-koodi.html#cb12-1971"></a></span>
<span id="cb12-1972"><a href="liite-3-r-koodi.html#cb12-1972"></a><span class="co"># Koko data (G1_1_data2.Rmd - skriptissä valitut muuttujat ja 25 maata)</span></span>
<span id="cb12-1973"><a href="liite-3-r-koodi.html#cb12-1973"></a><span class="co">#</span></span>
<span id="cb12-1974"><a href="liite-3-r-koodi.html#cb12-1974"></a><span class="co">#sum(!complete.cases(ISSP2012jh1d.dat)) = 9455</span></span>
<span id="cb12-1975"><a href="liite-3-r-koodi.html#cb12-1975"></a><span class="co">#dim(ISSP2012jh1d.dat) = 32823</span></span>
<span id="cb12-1976"><a href="liite-3-r-koodi.html#cb12-1976"></a><span class="co">#9455/32823 = 0.2880602</span></span>
<span id="cb12-1977"><a href="liite-3-r-koodi.html#cb12-1977"></a></span>
<span id="cb12-1978"><a href="liite-3-r-koodi.html#cb12-1978"></a><span class="co"># Puuttuvat tiedot valitussa MCA-aineistossa</span></span>
<span id="cb12-1979"><a href="liite-3-r-koodi.html#cb12-1979"></a></span>
<span id="cb12-1980"><a href="liite-3-r-koodi.html#cb12-1980"></a><span class="co">#missingMCAvars1 &lt;-  c(&quot;Q1a&quot;,&quot;Q1b&quot;, &quot;Q1c&quot;, &quot;Q1d&quot;,&quot;Q1e&quot;,&quot;Q2a&quot;,&quot;Q2b&quot;,&quot;edu&quot;,</span></span>
<span id="cb12-1981"><a href="liite-3-r-koodi.html#cb12-1981"></a><span class="co">#                 &quot;sosta&quot;, &quot;urbru&quot;, &quot;maa&quot;, &quot;ika&quot;, &quot;sp&quot; )</span></span>
<span id="cb12-1982"><a href="liite-3-r-koodi.html#cb12-1982"></a><span class="co">#missingTestMCA1.dat &lt;- ISSP2012jh1d.dat %&gt;% select(all_of(missingMCAvars1))</span></span>
<span id="cb12-1983"><a href="liite-3-r-koodi.html#cb12-1983"></a></span>
<span id="cb12-1984"><a href="liite-3-r-koodi.html#cb12-1984"></a><span class="co">#sum(!complete.cases(missingTestMCA1.dat)) = 6101</span></span>
<span id="cb12-1985"><a href="liite-3-r-koodi.html#cb12-1985"></a><span class="co">#dim(missingTestMCA1.dat) = 32823</span></span>
<span id="cb12-1986"><a href="liite-3-r-koodi.html#cb12-1986"></a><span class="co">#6101/32823 = 0.1858758 Puuttellisten havaintojen osuus.</span></span>
<span id="cb12-1987"><a href="liite-3-r-koodi.html#cb12-1987"></a></span>
<span id="cb12-1988"><a href="liite-3-r-koodi.html#cb12-1988"></a><span class="co">#Pelkät kysymykset</span></span>
<span id="cb12-1989"><a href="liite-3-r-koodi.html#cb12-1989"></a></span>
<span id="cb12-1990"><a href="liite-3-r-koodi.html#cb12-1990"></a><span class="co">#missingMCAvars2 &lt;- c(&quot;Q1a&quot;,&quot;Q1b&quot;, &quot;Q1c&quot;, &quot;Q1d&quot;,&quot;Q1e&quot;,&quot;Q2a&quot;,&quot;Q2b&quot;)</span></span>
<span id="cb12-1991"><a href="liite-3-r-koodi.html#cb12-1991"></a><span class="co">#missingTestMCA2.dat &lt;- ISSP2012jh1d.dat %&gt;% select(all_of(missingMCAvars2))</span></span>
<span id="cb12-1992"><a href="liite-3-r-koodi.html#cb12-1992"></a><span class="co">#sum(!complete.cases(missingTestMCA2.dat))</span></span>
<span id="cb12-1993"><a href="liite-3-r-koodi.html#cb12-1993"></a><span class="co"># puuttuvia tietoja 4554</span></span>
<span id="cb12-1994"><a href="liite-3-r-koodi.html#cb12-1994"></a><span class="co"># 4553/32823 = 0.1387137</span></span>
<span id="cb12-1995"><a href="liite-3-r-koodi.html#cb12-1995"></a></span>
<span id="cb12-1996"><a href="liite-3-r-koodi.html#cb12-1996"></a></span>
<span id="cb12-1997"><a href="liite-3-r-koodi.html#cb12-1997"></a><span class="co"># Valitaan data</span></span>
<span id="cb12-1998"><a href="liite-3-r-koodi.html#cb12-1998"></a></span>
<span id="cb12-1999"><a href="liite-3-r-koodi.html#cb12-1999"></a>mcaDat11jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(a1,b1,c1, d1, e1,a2,b2)</span>
<span id="cb12-2000"><a href="liite-3-r-koodi.html#cb12-2000"></a><span class="co"># dim(mcaDat11jh.dat)</span></span>
<span id="cb12-2001"><a href="liite-3-r-koodi.html#cb12-2001"></a></span>
<span id="cb12-2002"><a href="liite-3-r-koodi.html#cb12-2002"></a><span class="co">#glimpse(mcaDat11jh.dat)</span></span>
<span id="cb12-2003"><a href="liite-3-r-koodi.html#cb12-2003"></a></span>
<span id="cb12-2004"><a href="liite-3-r-koodi.html#cb12-2004"></a>Qmuuttujat1.mca &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb12-2005"><a href="liite-3-r-koodi.html#cb12-2005"></a></span>
<span id="cb12-2006"><a href="liite-3-r-koodi.html#cb12-2006"></a><span class="co"># ps=&quot;&quot; muuttujan ja sen kategorian eroitinmerkki</span></span>
<span id="cb12-2007"><a href="liite-3-r-koodi.html#cb12-2007"></a></span>
<span id="cb12-2008"><a href="liite-3-r-koodi.html#cb12-2008"></a></span>
<span id="cb12-2009"><a href="liite-3-r-koodi.html#cb12-2009"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb12-2010"><a href="liite-3-r-koodi.html#cb12-2010"></a><span class="kw">plot.mjca</span>(Qmuuttujat1.mca, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb12-2011"><a href="liite-3-r-koodi.html#cb12-2011"></a>          <span class="dt">main =</span> <span class="st">&quot;Symmetrinen kartta&quot;</span>,</span>
<span id="cb12-2012"><a href="liite-3-r-koodi.html#cb12-2012"></a>          <span class="dt">sub =</span> <span class="st">&quot;Kysymykset Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b, vastaukset S-s-?-e-E-P &quot;</span></span>
<span id="cb12-2013"><a href="liite-3-r-koodi.html#cb12-2013"></a>          )</span>
<span id="cb12-2014"><a href="liite-3-r-koodi.html#cb12-2014"></a></span>
<span id="cb12-2015"><a href="liite-3-r-koodi.html#cb12-2015"></a></span>
<span id="cb12-2016"><a href="liite-3-r-koodi.html#cb12-2016"></a></span>
<span id="cb12-2017"><a href="liite-3-r-koodi.html#cb12-2017"></a><span class="kw">par</span>(<span class="dt">cex=</span><span class="fl">0.6</span>)</span>
<span id="cb12-2018"><a href="liite-3-r-koodi.html#cb12-2018"></a><span class="kw">plot.mjca</span>(Qmuuttujat1.mca, <span class="dt">what =</span> <span class="kw">c</span>(<span class="st">&quot;all&quot;</span>,<span class="st">&quot;all&quot;</span>),<span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>),</span>
<span id="cb12-2019"><a href="liite-3-r-koodi.html#cb12-2019"></a>          <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;red&quot;</span>),</span>
<span id="cb12-2020"><a href="liite-3-r-koodi.html#cb12-2020"></a>           <span class="dt">main =</span> <span class="st">&quot;Symmetrinen kartta&quot;</span>,</span>
<span id="cb12-2021"><a href="liite-3-r-koodi.html#cb12-2021"></a>          <span class="dt">sub =</span> <span class="st">&quot;Kysymykset Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b,vastaukset S-s-?-e-E-P, havainnot (n = 32 823)&quot;</span></span>
<span id="cb12-2022"><a href="liite-3-r-koodi.html#cb12-2022"></a>          )</span>
<span id="cb12-2023"><a href="liite-3-r-koodi.html#cb12-2023"></a></span>
<span id="cb12-2024"><a href="liite-3-r-koodi.html#cb12-2024"></a></span>
<span id="cb12-2025"><a href="liite-3-r-koodi.html#cb12-2025"></a></span>
<span id="cb12-2026"><a href="liite-3-r-koodi.html#cb12-2026"></a><span class="co">#subsetcat viittaa muuttujan luokkien indeksiin</span></span>
<span id="cb12-2027"><a href="liite-3-r-koodi.html#cb12-2027"></a></span>
<span id="cb12-2028"><a href="liite-3-r-koodi.html#cb12-2028"></a>eiPvastaukset &lt;-<span class="st"> </span>(<span class="dv">1</span><span class="op">:</span><span class="dv">42</span>)[<span class="op">-</span><span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">12</span>,<span class="dv">18</span>,<span class="dv">24</span>,<span class="dv">30</span>,<span class="dv">36</span>,<span class="dv">42</span>)]</span>
<span id="cb12-2029"><a href="liite-3-r-koodi.html#cb12-2029"></a><span class="co"># eiPvastaukset</span></span>
<span id="cb12-2030"><a href="liite-3-r-koodi.html#cb12-2030"></a><span class="co">#  puuttuva tieto on kuudes kategoria kaikilla kysymyksillä</span></span>
<span id="cb12-2031"><a href="liite-3-r-koodi.html#cb12-2031"></a><span class="co"># 1  2  3  4  5  7  8  9 10 11 13 14 15 16 17 19 20 21 22 23 25 26 27 28 29 31</span></span>
<span id="cb12-2032"><a href="liite-3-r-koodi.html#cb12-2032"></a><span class="co"># 32 33 34 35 37 38 39 40 41</span></span>
<span id="cb12-2033"><a href="liite-3-r-koodi.html#cb12-2033"></a></span>
<span id="cb12-2034"><a href="liite-3-r-koodi.html#cb12-2034"></a><span class="co">#mcaDat11jh.dat[1:5,]</span></span>
<span id="cb12-2035"><a href="liite-3-r-koodi.html#cb12-2035"></a></span>
<span id="cb12-2036"><a href="liite-3-r-koodi.html#cb12-2036"></a>Qmuuttujat2.mca &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>, <span class="dt">subsetcat=</span>eiPvastaukset)</span>
<span id="cb12-2037"><a href="liite-3-r-koodi.html#cb12-2037"></a></span>
<span id="cb12-2038"><a href="liite-3-r-koodi.html#cb12-2038"></a></span>
<span id="cb12-2039"><a href="liite-3-r-koodi.html#cb12-2039"></a></span>
<span id="cb12-2040"><a href="liite-3-r-koodi.html#cb12-2040"></a><span class="co"># subsetcat viittaa muuttujan luokkien indeksiin</span></span>
<span id="cb12-2041"><a href="liite-3-r-koodi.html#cb12-2041"></a></span>
<span id="cb12-2042"><a href="liite-3-r-koodi.html#cb12-2042"></a>eiPvastaukset &lt;-<span class="st"> </span>(<span class="dv">1</span><span class="op">:</span><span class="dv">42</span>)[<span class="op">-</span><span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">12</span>,<span class="dv">18</span>,<span class="dv">24</span>,<span class="dv">30</span>,<span class="dv">36</span>,<span class="dv">42</span>)]</span>
<span id="cb12-2043"><a href="liite-3-r-koodi.html#cb12-2043"></a></span>
<span id="cb12-2044"><a href="liite-3-r-koodi.html#cb12-2044"></a><span class="co"># eiPvastaukset</span></span>
<span id="cb12-2045"><a href="liite-3-r-koodi.html#cb12-2045"></a><span class="co">#  puuttuva tieto on kuudes kategora kaikilla kysymyksillä</span></span>
<span id="cb12-2046"><a href="liite-3-r-koodi.html#cb12-2046"></a><span class="co"># 1  2  3  4  5  7  8  9 10 11 13 14 15 16 17 19 20 21 22 23 25 26 27 28 29 31</span></span>
<span id="cb12-2047"><a href="liite-3-r-koodi.html#cb12-2047"></a><span class="co"># 32 33 34 35 37 38 39 40 41</span></span>
<span id="cb12-2048"><a href="liite-3-r-koodi.html#cb12-2048"></a></span>
<span id="cb12-2049"><a href="liite-3-r-koodi.html#cb12-2049"></a><span class="co"># mcaDat11jh.dat[1:5,]</span></span>
<span id="cb12-2050"><a href="liite-3-r-koodi.html#cb12-2050"></a></span>
<span id="cb12-2051"><a href="liite-3-r-koodi.html#cb12-2051"></a>Qmuuttujat2.mca &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>, <span class="dt">subsetcat=</span>eiPvastaukset)</span>
<span id="cb12-2052"><a href="liite-3-r-koodi.html#cb12-2052"></a></span>
<span id="cb12-2053"><a href="liite-3-r-koodi.html#cb12-2053"></a><span class="co"># Kontribuutiokartta on tarpeeksi selkeä, muutujien tunnukset erottuvat.</span></span>
<span id="cb12-2054"><a href="liite-3-r-koodi.html#cb12-2054"></a><span class="co"># Jätetään tämä kuva pois (25.11.20)</span></span>
<span id="cb12-2055"><a href="liite-3-r-koodi.html#cb12-2055"></a><span class="co">#</span></span>
<span id="cb12-2056"><a href="liite-3-r-koodi.html#cb12-2056"></a><span class="co">#plot.mjca(Qmuuttujat2.mca,</span></span>
<span id="cb12-2057"><a href="liite-3-r-koodi.html#cb12-2057"></a><span class="co">#          main=&quot;Seitsemän kysymystä, viisi vastausvaihtoehtoa&quot;,</span></span>
<span id="cb12-2058"><a href="liite-3-r-koodi.html#cb12-2058"></a><span class="co">#          sub = &quot;subset: ei puuttuvien vastausten kategorioita(*P)&quot;)</span></span>
<span id="cb12-2059"><a href="liite-3-r-koodi.html#cb12-2059"></a></span>
<span id="cb12-2060"><a href="liite-3-r-koodi.html#cb12-2060"></a></span>
<span id="cb12-2061"><a href="liite-3-r-koodi.html#cb12-2061"></a><span class="co"># jätettään symmetrinen kartta pois, asymmetrinen on parempi (25.11.20)</span></span>
<span id="cb12-2062"><a href="liite-3-r-koodi.html#cb12-2062"></a></span>
<span id="cb12-2063"><a href="liite-3-r-koodi.html#cb12-2063"></a><span class="kw">plot.mjca</span>(Qmuuttujat2.mca,</span>
<span id="cb12-2064"><a href="liite-3-r-koodi.html#cb12-2064"></a>          <span class="dt">what =</span> <span class="kw">c</span>(<span class="st">&quot;all&quot;</span>,<span class="st">&quot;all&quot;</span>),<span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>),</span>
<span id="cb12-2065"><a href="liite-3-r-koodi.html#cb12-2065"></a>          <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;red&quot;</span>),</span>
<span id="cb12-2066"><a href="liite-3-r-koodi.html#cb12-2066"></a>          <span class="dt">main=</span><span class="st">&quot;Seitsemän kysymystä, viisi vastausvaihtoehtoa&quot;</span>,</span>
<span id="cb12-2067"><a href="liite-3-r-koodi.html#cb12-2067"></a>          <span class="dt">sub =</span> <span class="st">&quot;subset: ei puuttuvien vastausten kategoriaa (*P)&quot;</span>)</span>
<span id="cb12-2068"><a href="liite-3-r-koodi.html#cb12-2068"></a></span>
<span id="cb12-2069"><a href="liite-3-r-koodi.html#cb12-2069"></a></span>
<span id="cb12-2070"><a href="liite-3-r-koodi.html#cb12-2070"></a></span>
<span id="cb12-2071"><a href="liite-3-r-koodi.html#cb12-2071"></a><span class="kw">plot.mjca</span>(Qmuuttujat2.mca, <span class="dt">map =</span> <span class="st">&quot;rowprincipal&quot;</span>,</span>
<span id="cb12-2072"><a href="liite-3-r-koodi.html#cb12-2072"></a>          <span class="dt">what =</span> <span class="kw">c</span>(<span class="st">&quot;all&quot;</span>,<span class="st">&quot;all&quot;</span>),<span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>),</span>
<span id="cb12-2073"><a href="liite-3-r-koodi.html#cb12-2073"></a>          <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;red&quot;</span>),</span>
<span id="cb12-2074"><a href="liite-3-r-koodi.html#cb12-2074"></a>          <span class="dt">main=</span><span class="st">&quot;Asymmetrinen kartta - osajoukko: ei puuttuvia vastauksia&quot;</span>,</span>
<span id="cb12-2075"><a href="liite-3-r-koodi.html#cb12-2075"></a>          <span class="dt">sub =</span> <span class="st">&quot;Kysymykset Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b, vastaukset S-s-?-e-E-P&quot;</span>)</span>
<span id="cb12-2076"><a href="liite-3-r-koodi.html#cb12-2076"></a></span>
<span id="cb12-2077"><a href="liite-3-r-koodi.html#cb12-2077"></a></span>
<span id="cb12-2078"><a href="liite-3-r-koodi.html#cb12-2078"></a></span>
<span id="cb12-2079"><a href="liite-3-r-koodi.html#cb12-2079"></a><span class="co"># pois 25.11.2020</span></span>
<span id="cb12-2080"><a href="liite-3-r-koodi.html#cb12-2080"></a><span class="kw">summary</span>(Qmuuttujat2.mca)</span>
<span id="cb12-2081"><a href="liite-3-r-koodi.html#cb12-2081"></a></span>
<span id="cb12-2082"><a href="liite-3-r-koodi.html#cb12-2082"></a><span class="co"># Pois 25.11.2020</span></span>
<span id="cb12-2083"><a href="liite-3-r-koodi.html#cb12-2083"></a>Qmuuttujat2d3  &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>, <span class="dt">nd =</span> <span class="dv">3</span>,<span class="dt">subsetcat=</span>eiPvastaukset)</span>
<span id="cb12-2084"><a href="liite-3-r-koodi.html#cb12-2084"></a><span class="kw">summary</span>(Qmuuttujat2d3)</span>
<span id="cb12-2085"><a href="liite-3-r-koodi.html#cb12-2085"></a></span>
<span id="cb12-2086"><a href="liite-3-r-koodi.html#cb12-2086"></a></span>
<span id="cb12-2087"><a href="liite-3-r-koodi.html#cb12-2087"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/CAquality.png&#39;</span>)</span>
<span id="cb12-2088"><a href="liite-3-r-koodi.html#cb12-2088"></a></span>
<span id="cb12-2089"><a href="liite-3-r-koodi.html#cb12-2089"></a></span>
<span id="cb12-2090"><a href="liite-3-r-koodi.html#cb12-2090"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/BookdownProc.png&#39;</span>)</span>
<span id="cb12-2091"><a href="liite-3-r-koodi.html#cb12-2091"></a></span>
<span id="cb12-2092"><a href="liite-3-r-koodi.html#cb12-2092"></a><span class="co"># pois out.width=&#39;50%&#39;,</span></span>
<span id="cb12-2093"><a href="liite-3-r-koodi.html#cb12-2093"></a></span>
<span id="cb12-2094"><a href="liite-3-r-koodi.html#cb12-2094"></a></span>
<span id="cb12-2095"><a href="liite-3-r-koodi.html#cb12-2095"></a><span class="kw">sessionInfo</span>()</span>
<span id="cb12-2096"><a href="liite-3-r-koodi.html#cb12-2096"></a></span>
<span id="cb12-2097"><a href="liite-3-r-koodi.html#cb12-2097"></a></span>
<span id="cb12-2098"><a href="liite-3-r-koodi.html#cb12-2098"></a><span class="co"># echo = FALSE toistaiseksi.</span></span>
<span id="cb12-2099"><a href="liite-3-r-koodi.html#cb12-2099"></a><span class="co">#Testataan koodilohkojen listausta, näyttää toimivan mutta vaatii vielä säätämistä.</span></span>
<span id="cb12-2100"><a href="liite-3-r-koodi.html#cb12-2100"></a><span class="co">#Ohje löytyi [Yihui Xienin blogista](https://yihui.name/en/2018/09/code-appendix/)</span></span>
<span id="cb12-2101"><a href="liite-3-r-koodi.html#cb12-2101"></a><span class="co">#(luettu 26.10.2018).</span></span></code></pre></div>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="liite-2-tekninen-ympäristö-ja-bookdown-paketti.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["JH_capaper.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
