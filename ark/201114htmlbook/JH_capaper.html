<!DOCTYPE html>
<html lang="fi" xml:lang="fi">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä" />
<meta property="og:type" content="book" />


<meta property="og:description" content="Tutkielma korrespondenssianalyysistä graafisena data-analyysin menetelmänä." />
<meta name="github-repo" content="hirjus/capaper" />

<meta name="author" content="Jussi Hirvonen" />


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="Tutkielma korrespondenssianalyysistä graafisena data-analyysin menetelmänä.">

<title>Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/navigation-1.1/codefolding.js"></script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="#alkutoimia">Alkutoimia</a></li>
<li class="has-sub"><a href="#johdanto"><span class="toc-section-number">1</span> Johdanto</a><ul>
<li><a href="#tutkielman-tavoite"><span class="toc-section-number">1.1</span> Tutkielman tavoite</a></li>
<li><a href="#tärkeimmät-lähteet-ja-ohjelmistot"><span class="toc-section-number">1.2</span> Tärkeimmät lähteet ja ohjelmistot</a></li>
<li><a href="#korrespondenssianalyysin-historiaa"><span class="toc-section-number">1.3</span> Korrespondenssianalyysin historiaa</a></li>
</ul></li>
<li class="has-sub"><a href="#data"><span class="toc-section-number">2</span> Data</a><ul>
<li><a href="#aineiston-rajaaminen-maat-ja-muuttujat"><span class="toc-section-number">2.1</span> Aineiston rajaaminen maat ja muuttujat</a></li>
</ul></li>
<li class="has-sub"><a href="#yksinkertainen-korrespondenssianalyysi"><span class="toc-section-number">3</span> Yksinkertainen korrespondenssianalyysi</a><ul>
<li><a href="#äiti-töissä--kärsiikö-lapsi"><span class="toc-section-number">3.1</span> Äiti töissä -kärsiikö lapsi?</a></li>
<li><a href="#ca---esimerkki"><span class="toc-section-number">3.2</span> CA - esimerkki</a></li>
<li class="has-sub"><a href="#korrespondenssianalyysin-peruskäsitteet"><span class="toc-section-number">3.3</span> Korrespondenssianalyysin peruskäsitteet</a><ul>
<li><a href="#asymmetrinen-kartta-ja-ideaalipisteet"><span class="toc-section-number">3.3.1</span> Asymmetrinen kartta ja ideaalipisteet</a></li>
</ul></li>
<li><a href="#kontribuutiot-kartalla"><span class="toc-section-number">3.4</span> Kontribuutiot kartalla</a></li>
<li><a href="#massat"><span class="toc-section-number">3.5</span> Massat</a></li>
<li><a href="#karttojen-erot"><span class="toc-section-number">3.6</span> Karttojen erot</a></li>
</ul></li>
<li class="has-sub"><a href="#täydentävät-pisteet"><span class="toc-section-number">4</span> Täydentävät pisteet</a><ul>
<li><a href="#täydentävät-pisteet-1"><span class="toc-section-number">4.1</span> Täydentävät pisteet</a></li>
<li class="has-sub"><a href="#saksan-ja-belgian-alueet"><span class="toc-section-number">4.2</span> Saksan ja Belgian alueet</a><ul>
<li><a href="#symmetrinen-kartta"><span class="toc-section-number">4.2.1</span> Symmetrinen kartta</a></li>
</ul></li>
<li><a href="#can-numeeriset-tulokset"><span class="toc-section-number">4.3</span> CA:n numeeriset tulokset</a></li>
<li><a href="#esimerkki-3d--kartasta---saksan-ja-belgian-dimensiot"><span class="toc-section-number">4.4</span> Esimerkki 3d- kartasta - Saksan ja Belgian dimensiot</a></li>
</ul></li>
<li class="has-sub"><a href="#yhteisvaikutusmuuttujat"><span class="toc-section-number">5</span> Yhteisvaikutusmuuttujat</a><ul>
<li><a href="#ikä-ja-sukupuoli"><span class="toc-section-number">5.1</span> Ikä ja sukupuoli</a></li>
<li><a href="#ikä-sukupuoli-ja-maa"><span class="toc-section-number">5.2</span> Ikä, sukupuoli ja maa</a></li>
</ul></li>
<li><a href="#osajoukon-korrespondenssianalyysi"><span class="toc-section-number">6</span> Osajoukon korrespondenssianalyysi</a></li>
<li class="has-sub"><a href="#monimuuttuja-korrespondenssianalyysi-mca"><span class="toc-section-number">7</span> Monimuuttuja-korrespondenssianalyysi (MCA)</a><ul>
<li><a href="#pinotut-ja-yhdistetyt-taulukot-stacked-and-concatenated-tables"><span class="toc-section-number">7.1</span> Pinotut ja yhdistetyt taulukot (stacked and concatenated tables)</a></li>
<li><a href="#matched-matrices"><span class="toc-section-number">7.2</span> Matched matrices</a></li>
<li><a href="#mca---monimuuttujakorrespondenssianalyysi"><span class="toc-section-number">7.3</span> MCA - monimuuttujakorrespondenssianalyysi</a></li>
</ul></li>
<li><a href="#yhteenveto"><span class="toc-section-number">8</span> Yhteenveto</a></li>
<li class="has-sub"><a href="#liitteet">Liitteet</a><ul>
<li class="has-sub"><a href="#liite-1-korrespondenssianalyysin-teoriaa">Liite 1: Korrespondenssianalyysin teoriaa</a><ul>
<li><a href="#korrespondenssianalyysin-perusyhtälöt-ja-kaavat">Korrespondenssianalyysin perusyhtälöt ja kaavat</a></li>
<li><a href="#matriisit-ja-niiden-havainnollistaminen">Matriisit ja niiden havainnollistaminen</a></li>
</ul></li>
<li><a href="#liite-2-suomenkielinen-lomake-esimerkki">Liite 2: Suomenkielinen lomake (esimerkki)</a></li>
<li><a href="#liite-3-tekninen-ympäristö-ja-bookdown-paketti">Liite 3: Tekninen ympäristö ja Bookdown-paketti</a></li>
<li><a href="#liite-4-r---koodi">Liite 4: R - koodi</a></li>
</ul></li>
<li><a href="#lähteet">Lähteet</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="header">
<h1 class="title">Korrespondenssianalyysi - graafinen ja geometrinen data-analyysin menetelmä</h1>
<h4 class="author"><em>Jussi Hirvonen</em></h4>
<h4 class="date"><em>Versio 0.6, tulostettu 2020-11-14</em></h4>
</div>
<div id="alkutoimia" class="section level1 unnumbered">
<h1>Alkutoimia</h1>
<p><strong>PDF-tulostus oikuttelee Saksan ja Belgian aluejako-datan tai profiilitaulukon
luonnissa - toistaiseksi vain html-tuloste (24.10.2020)</strong></p>
<p>27.10.20 Vertailin testi-bookdownin ja capaperin asetuksia.
Poistin YAML-headerista viimeisen rivin “toc-depth: 2”. Onko eri latex-engine?
Poistin ongelmia aiheuttavan taulukon (Saksan ja Belgian aluejako).
Eivät auttaneet pdf-tulostuksen ongelmaan.</p>
<p>Dokumettiin kuuluvat Rmd-tiedostot luetellaan eksplisiittisesti
_bookdown.yml-tiedostossa.</p>
<p>RefWorksistä eksportattu bib-tiedosto kannattaa avata ensin (Atomilla),
ja korjailla skandit jos niissä on vikaa.</p>
<p>Koodi näkyy Galkun tulosteessa (<a href="https://hirjus.github.io/Galku" class="uri">https://hirjus.github.io/Galku</a>), jossa on myös
pitkiä listauksia muunnosten tarkistuksista ja kuvia eri versioina.</p>
<p>Koodi kopiodaan Galkusta, kommentoidaan pois tarkistuksia ja muita välitulostuksia.
Koodin ydinasiat koitetaan pitää samana kuin Galkussa, isommat muuutoksen ensin siellä
ja sitten tähän projektiin.</p>
<p>Raportti yhtenä html-tiedostona (<a href="https://hirjus.github.io/capaper/JH_capaper.html" class="uri">https://hirjus.github.io/capaper/JH_capaper.html</a>).</p>
<p><strong>12.11.20</strong>
Raportissa on hieman liian pitkiä ca:n numeeristen tulosten listauksia, poistetaan tai
lyhennetään rajusti poimimalla oleellisia rivejä. Periaatteessa vain yksi (Saksan ja Belgian jako)
jää, siinä kerrotaan miten tuloksia luetaan.</p>
<p>Gitbook-tulosteessa ei saa koodia “piilotettua”, asetus “code_folding: hide” vaatii
teeman (theme). _output.yml - tiedostoon lisätty html_book - formaatti, siinä
voi tarvittaessa käyttää piilotusta.</p>
<p>Versiointi: 0.0n aloittelua, 0.n jäsentely koko paperille, 1.n.n valmiimpaa tekstiä.</p>

</div>
<div id="johdanto" class="section level1">
<h1><span class="header-section-number">Luku 1</span> Johdanto</h1>
<p><strong>edit</strong> Kirjoitetaan disposition pohjalta, keräillään kaikki yleiset
ca-luonnehdinnat yhteen paikkaan eli johdantoon.</p>
<p><strong>johdannon ydinsisältö</strong></p>
<p><strong>1</strong>. CA:n periaatteet voi esitellä yksinkertaisen kahden luokittelumuuttujan
taulukon analyysin avulla. Kun taulukko on pieni, on helppo vertailla CA:n
karttoja dataan. Yksinkertainen kahden luokittelumuuttujan
korrespondenssianalyysi antaa graafisen analyysin “…perussäännöt
tulkinnalle. Kaikki muut korrespondenssianalyysin muodot ovat saman algoritmin
soveltamista toisen tyyppiisiin datamatriiseihin, ja tulkintaa sovelletaan vastaavasti”.(<span class="citation">(Greenacre ja Hastie <a href="#ref-RefWorks:doc:5a857a44e4b0ed2d44664d84" role="doc-biblioref">1987</a>)</span> s. 437). Tämä Greenacren ja Hastien artikkelissaan
esittämä periaate helpottaa huomattavasti juuri graafisen data-analyysin
eli korrespondenssianalyysin karttojen tulkinnan perussääntöjen oivaltamista. Juuri kartat,
samassa kuvassa esitettävät havainnot ja muuttujat ovat CA:n tärkein menetelmä, mutta ei
aivan helppo.</p>
<p><strong>2</strong>. CA on kuitenkin vahvimmillaan isojen ja monimutkaisten aineistojen analyysissä.
Siksi ns. monimuuttujakorrespondenssianalyysin lyhyessä esittelyssä aineistoa
laajennetaan, sillä “on erittäin vaikeaa osoittaa kotiakvaarioissa, että verkko on
tehokas”(<span class="citation">(Roux ja Rouanet <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d75" role="doc-biblioref">2004</a>)</span>, s.15).</p>
<div id="tutkielman-tavoite" class="section level2">
<h2><span class="header-section-number">1.1</span> Tutkielman tavoite</h2>
<p><strong>k</strong> Tässä kerrotaan, miksi tämä työ on kirjoitettu. Esitellään menetelmä
käyttämällä oikeaa dataa. Täsmällisempi esitys sirotellaan esimerkkiaineiston
analyysin tulosten esittelyn lomaan. Pitäisikö tässä tuoda esille ns. “ranskalaisen
koulukunnan” matemaattisen perusteiden korostus, ja data-analyysin filosofia?
Ehkä ei, koska sen pohdinta ei ole pääasia. Se tietysti mainitaan, ja asiaa pohditaan.</p>
<p><strong>ks</strong> Esitellään korrespondenssianalyysin käsitteet ja graafisen analyysin
periaatteet.</p>
<p><strong>k</strong> -mitä ca on?
- dimensioiden vähentäminen ja visualisointi</p>
<ul>
<li><p>mihin dataan se soveltuu: kahden luokittemuuttujan taulukon lukumäärädata (count data)
tai suhdeasteikon muuttujia samassa mittayksikössä (esim. euroissa).</p></li>
<li><p>määrittele graafinen, deskriptiivinen, eksploratiivinen data-analyysi</p></li>
<li><p>yksinkertainen ca, useamman muuttujan ca</p></li>
</ul>
<p><strong>zxy</strong> Miksi eksporatiivinen (määrittele!) ja deskriptiivinen (määrittele!)
menetelmä on esitettävä “in vivo”, toiminnassa? Oppikirjoissa (viitteitä)
erityisesti MG on havainnolistanut CA:n matemaattista ja geometristä taustaa
synteettisillä aineistoilla. Turha kopioida tähän. Menetelmän ydin on
yksinkertaisen graafisen esityksen – kartan – avulla tulkita monimutkaisen
empiirisen aineiston muuttujien riippuvuuksia. Yhteyksiä ei tiivistetä
todennäköisyyspäättelyn kriteereillä tilastolliseen malliin, vaan deskripriivisen
analyysin hengessä esitellään koko aineisto. Mallin sijaan vähennetään ulottuvuuksia,
ja siinä menetetään informaatiota. Tavoitteena on säilyttää yleensä kaksiulotteisessa
kuvassa mahdollisimman suuri osa alkuperäisen datan vaihtelusta. Eksploratiivinen
data-analyysi on vuoropuhelua aineiston kanssa. Analyysiä tarkennetaan, rajataan
ja muokataan, kun aineisto paljastaa jotain kiinnostavaa tai yllättävää. Tästä
saa jonkinlaisen aasinsillan matriisiyhtälöiden puolustukseksi.
Saksan ja Belgian datan jakaminen on hyvä esimerkki, on “osattava tarttua”
menetelmän tulosmatriiseihin.</p>
<p><strong>k</strong> esitystavan perustelu</p>
<ul>
<li>kenelle kirjoitettu? Menetelmästä kiinnostuneelle tilastotieteen ja data-analyysin
perusteet tuntevalle. R-ohjelmisto ei ole rajoitus, SPSS ja SAS sopivat
(SPSS - MG:llä kriittinen huomio “loose ends - paperissa” tai CAip-teorialiitteessä).</li>
</ul>
</div>
<div id="tärkeimmät-lähteet-ja-ohjelmistot" class="section level2">
<h2><span class="header-section-number">1.2</span> Tärkeimmät lähteet ja ohjelmistot</h2>
<p>Michael Greenacre luennoi lyhyen kurssin korrespondenssianalyysistä Helsingin
yliopistossa keväällä 2017<span class="citation">(M. Greenacre <a href="#ref-RefWorks:doc:5b6ef091e4b0984fd9b8c0ca" role="doc-biblioref">2017</a>)</span>. Luennot ja
laskuharjoitukset perehdyttivät minut ensimmäistä kertaa tähän menetelmään, ja
kurssin materiaaleihin olen usein palannut.
Michael Greenacren kärsivällisesti kirjoitettu “Correrspondence Analysis in
Practice” (jatkossa “CAiP”) <span class="citation">(M. J. Greenacre <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d78" role="doc-biblioref">2017</a>)</span> ja sen
aikasemmat versiot ovat tehneet menetelmää laajasti tunnetuksi.“Biplots in Practice”
(jatkossa “Biplots”) <span class="citation">(Greenacre <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d7c" role="doc-biblioref">2010</a>)</span> esittää menetelman
osana yleisempää kaksoiskuvien ideaa.</p>
<p>Ranskalaisen lähestymistan perusoppikirja<span class="citation">(Roux ja Rouanet <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d75" role="doc-biblioref">2004</a>)</span> (GDA-kirja?)
esittelee menetelmän matemaattiset perusteet.
Lyhyt historiallinen katsaus ja menetelmä soveltamisen perusajatusten esittely
valaisevat ranskaa taitamattomalle data-analyysin koulukunnan ideoita.
Kirjoittajat esittelevät perusteellisesti joitain empiirisiä tutkimuksia, ja
lyhyt mutta naseva matriisilaskennan kritiikki on hyvä panna merkille.</p>
<p><strong>edit</strong> Hyvin lyhyesti, lause tai pari. On oma liite tekneisestä ympäristöstä.</p>
<p><strong>zxy</strong> R, ca-paketti. löytyy myös muita paketteja.
Rmarkdown<span class="citation">(Yihui Xie <a href="#ref-RefWorks:doc:5b6b346fe4b0c619b11b8a3e" role="doc-biblioref">2018</a>)</span>, ja
bookdown (<span class="citation">(Xie <a href="#ref-RefWorks:doc:5b6b36dde4b09b7ec442bf8b" role="doc-biblioref">2016</a>)</span> ja toinen viite <span class="citation">(Xie <a href="#ref-R-bookdown" role="doc-biblioref">2020</a>)</span>).
Mikäs tuo jälkimmäinen on? PDF-lähdeluettelossa ei ole url-osoitteita.</p>
<p><strong>k</strong> Helposti toistettavan tutkimukset periaatteet</p>
<ol style="list-style-type: decimal">
<li>Datastan perusmuunnokset ja muuttujatyypit tehdään kun data luetaan
R-ohjelmistoon.</li>
<li>Koodi selkeää ja dokumentoitua. Tärkeä lähde <span class="citation">(McNamara ja Horton <a href="#ref-RefWorks:doc:5c3759c2e4b0085b307c82b5" role="doc-biblioref">2018</a>)</span></li>
<li>R, LaTeX, pandoc - versiot dokumentoidaan</li>
</ol>
<p>Tarkemmin liittessä.</p>
</div>
<div id="korrespondenssianalyysin-historiaa" class="section level2">
<h2><span class="header-section-number">1.3</span> Korrespondenssianalyysin historiaa</h2>
<p><strong>k1</strong> Tiivis esitys lähteineen. Historian voi aloittaa jo pari vuosikymmentä
vallineesta tilanteesta. CA on yksi deskriptiivinen (ei-tn-teoriaan perustuvaa
päättelyä) menetelmä muiden joukossa, eristyneisyys murtui hitaasti 80-luvun aikana.</p>
<p><strong>k2</strong> Historialla on vain historiallista merkitystä. Kiinnostava juttu, mutta
aika laaja ja lavea.</p>
<p><strong>k3</strong> Peruskäsitys monessa lähteessä (vihreä kirja, GDA-kirja jne.): synty ja
kukoistus Ranskassa, loistava eristys (splendid isolation), pikku hiljaa hyväksyntä.</p>
<p>Syiksi esitetään kaksoismuuria: abstrakti matemaattinen (“bourbakilainen”) perusta
ja esitystapa ja kieli.</p>
<p><strong>k4</strong> Mitä historiasta on hyvä tietää.
1. Matemaattinen perusta on “tosi”, mutta onko menetelmän soveltaminen riippuvainen
siitä? Ei ole ollut.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Ristiriita data-analyyttisen/kuvailevan jne. lähestymistavan ja tilastollisen
mallintamisen välillä - on läsnä edelleen mutta turha korostaa. Myös tilastollisen
mallintamisen ja päättelyn sisällä on kiistoja, erilaisia näkemysiä ja kuiluja.</p></li>
<li><p>“Esoteerinen tieteenfilosofia”? Kiinnostava aihe, ehkä. Murgtag-sitaatti.</p></li>
</ol>

</div>
</div>
<div id="data" class="section level1">
<h1><span class="header-section-number">Luku 2</span> Data</h1>
<p>Käytän tutkielmassa International Social Survey - projektin (ISSP) vuoden 2012
kyselytutkimusta “Perhe , työ ja sukupuoliroolit”(International Social Survey
Programme: Family and Changing Gender Roles IV). Tutkielman tärkeimmissä lähteissä
(esim. CAiP, Biplots) tutkimuksen aikaisemmat versiot ovat esimerkkiaineistona,
samoin Greenacren luennoilla 2017.</p>
<p>Länsi-Saksan ja USA:n tutkimuslaitosten yhteistyö vakiintui ISSP-organisaatioksi
1984 (<a href="http://www.issp.org" class="uri">http://www.issp.org</a>). Vuonna 2015 neljän perustajajäsenen joukko oli kasvanut 49 maahan.
Vertailevan tutkimuksen aineistoja on kerätty monista teemoista, perhearvoista
ja naisten työmarkkina-asemasta neljä kertaa (1988, 1994,2002,2012).
USA:n edustajana mukana ollut Tom W. Smith näkee aineistojen arvon juuri
kansainvälisessä vertailevassa tutkimuksessa. Järjestön julkaisuluettelossa oli
2012 yli 5200, ja viime vuosina yli 400 vuodessa lisää.
<span class="citation">(Smith <a href="#ref-RefWorks:doc:5c0543a5e4b077eba1dc3cd8" role="doc-biblioref">2015</a>)</span>.</p>
<p>Saksalainen GESIS-tutkimuslaitos ylläpitää data-arkistoa, josta suurin osa
datasta ja dokumentaatiosta on vapaasti saatavissa
(<a href="https://www.gesis.org/en/issp/home" class="uri">https://www.gesis.org/en/issp/home</a>). Suomessa tutkimuksen data ja dokumentaatio
löytyvät Tampereen yliopiston Aila-tietoarkistosta
(<a href="https://services.fsd.uta.fi/catalogue/FSD2820?tab=summary&amp;study_language=fi" class="uri">https://services.fsd.uta.fi/catalogue/FSD2820?tab=summary&amp;study_language=fi</a>).</p>
<p>GESIS-instituutin ”datakatalogista” löytää kätevästi kaiken dokumentaation,
mutta edes saksalaiset eivät voi estää www-sivustojen innokaita uudistajia.
Kaikki linkit lähdeluettelossa vievät vain GESIS-arkistosivulle,
josta löytää pitkän listan pdf-dokumentteja. Taulukossa @Ref(tab:ISSPdocsTable)
on neljän tärkeimmän dokumentin tiedostonimi.</p>
<table>
<caption><span id="tab:ISSPdocsTable">Taulukko 2.1: </span> ISSP 2012: tärkeimmät dokumentit</caption>
<colgroup>
<col width="21%" />
<col width="36%" />
<col width="42%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">dokumentti</th>
<th align="left">sisältö</th>
<th align="left">tiedosto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Variable Report</td>
<td align="left">Perusdokumentti, muuttujien kuvaukset ja taulukot</td>
<td align="left">ZA5900_cdb.pdf</td>
</tr>
<tr class="even">
<td align="left">Study Monitoring Report</td>
<td align="left">tiedokeruun toteutus eri maissa</td>
<td align="left">ZA5900_mr.pdf</td>
</tr>
<tr class="odd">
<td align="left">Basic Questionnaire</td>
<td align="left">Maittain sovellettava kyselylomake</td>
<td align="left">ZA5900_bq.pdf</td>
</tr>
<tr class="even">
<td align="left">Contents of ISSP 2012 module</td>
<td align="left">substanssikysymykset taulukkona</td>
<td align="left">ZA5900_overview.pdf</td>
</tr>
<tr class="odd">
<td align="left">Questionnaire Development</td>
<td align="left">kyselylomakkeen laatiminen</td>
<td align="left">ssoar-2014-scholz_et_al-ISSP_2012_Family_and_Changing.pdf</td>
</tr>
</tbody>
</table>
<p>Tutkimuksen viitetieto, linkki vie dokumenttiluetteloon koska hanke on päättynyt.
Kaksi versiota, käytetään ensimmäistä <span class="citation">((2016) <a href="#ref-RefWorks:doc:5b6c7b0de4b0fd36f5bb4c2a" role="doc-biblioref">2016</a>)</span> .</p>
<p>Data ja dokumentaatio (ml. käyttöehdot) löytyvät GESIS-instituutin
datakatalogista (<a href="https://zacat.gesis.org" class="uri">https://zacat.gesis.org</a>)<span class="citation">(ISSP <a href="#ref-RefWorks:doc:5b6c7f6ce4b0e4e15164ab1a" role="doc-biblioref">2016</a>)</span>.</p>
<p>Tätä kirjoittaessa (10.11.2020) tutkimuksen aineisto löytyy osoitteesta
[<a href="https://zacat.gesis.org/webview/index.jsp?object=http://zacat.gesis.org/obj/fStudy/ZA5900" class="uri">https://zacat.gesis.org/webview/index.jsp?object=http://zacat.gesis.org/obj/fStudy/ZA5900</a>].
Datakatalogista löytää tällä hetkellä (10.11.2020) dokumetit ja datan helpoiten.</p>
<p>Koodikirjan (“Variable report”) <span class="citation">(GESIS <a href="#ref-RefWorks:doc:5bb9041be4b06677e5e61f83" role="doc-biblioref">2016</a>)</span> selostaa
tarkasti tietosisällön. Tutkimuksen seurantaraportti (“Study Monitoring Report”)
<span class="citation">(Gendall ja Randow <a href="#ref-RefWorks:doc:5c053d69e4b0191a580d6451" role="doc-biblioref">2016</a>)</span> kertoo miten tutkimus käytännössä
toteutettiin. Kyselylomake <span class="citation">(”ISSP 2012 - Family and Changing Gender Roles IV Basic Questinnaire&lt;br&gt;” <a href="#ref-RefWorks:doc:5bb9044fe4b0dfeb95352229" role="doc-biblioref">2011</a>)</span> ja
suomenkielinen versio <span class="citation">(Tilastokeskus <a href="#ref-RefWorks:doc:5bb90a0ae4b018435936a488" role="doc-biblioref">2012</a>)</span> ja myös kaikki muut
kieliversiot voivat olla hyödyllisiä. Tiedonkeruun tarkoitus ja kyselyn
suunnitelun ideat kerrotaan omassa raportissa <span class="citation">(Scholz ym. <a href="#ref-RefWorks:doc:5f9439fde4b04741789a2187" role="doc-biblioref">2014</a>)</span>.</p>
<div id="aineiston-rajaaminen-maat-ja-muuttujat" class="section level2">
<h2><span class="header-section-number">2.1</span> Aineiston rajaaminen maat ja muuttujat</h2>
<p>Olen valinnut laajasta aineistosta 25 maata ja joukon muuttujia. Maat on valittu
niin, että ne ovat suhteellisen samankaltaisia ja valitut muuttujat ovat niissä
samanlaisia. Kysymyksissä on jonkin verran pieniä eroja, mutta joissain
tapauksissa ero on merkittävä. Esimerkiksi Espanja on jostain syystä jättänyt
tässä käytetyistä muuttujista ns. neutraalin (”en samaa enkä eri mieltä”)
vastausvaihtoehdon pois, joten Espanja jää pois.</p>
<p>Substanssimuuttujat ovat yksi ”kysymyspatteri”, jolla luodataan asenteita
naisten roolista työmarkkinoilla. Aiheen pysyvää ajankohtaisuutta kuvaa hyvin
The Economist - lehden artikkeli Saksojen yhdistymisen 30-vuotispäivänä
(3.10.2020, “A report…reveals the interplay between policy and attitudes that
influences the decision to work.”).
Artikkeli on maksumuurin takana mutta tutkimus on vapaasti
luettavissa (DIW Weekly Report 38 / 2020, S. 403-410)
(<a href="https://www.diw.de/de/diw_01.c.799302.de/publikationen/weekly_reports/2020_38_1/mothers_in_eastern_and_western_germany__employment_rates_and_attitudes_are_converging__full-time_employment_is_not.html" class="uri">https://www.diw.de/de/diw_01.c.799302.de/publikationen/weekly_reports/2020_38_1/mothers_in_eastern_and_western_germany__employment_rates_and_attitudes_are_converging__full-time_employment_is_not.html</a>)</p>
<p>Taulukon <a href="#tab:vartable1">2.2</a> kysymysten lyhyet versiot ovat datassa mukana.
Sarakkeessa “muuttuja” on alkuperäisen aineiston muuttujanimi,
kysymyksen tunnus on valittuun dataan luotu muuttujanimi. Vertailu muihin samalla
aineistoilla tehtyihin tutkimuksiin on helpompaa.</p>
<table>
<caption><span id="tab:vartable1">Taulukko 2.2: </span>ISSP2012:Työelämä ja perhearvot - kysymykset</caption>
<colgroup>
<col width="9%" />
<col width="90%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">muuttuja</th>
<th align="left">kysymyksen tunnus, lyhennetty kysymys</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">V5</td>
<td align="left">Q1a Working mother can have warm relation with child</td>
</tr>
<tr class="even">
<td align="left">V6</td>
<td align="left">Q1b Pre-school child suffers through working mother</td>
</tr>
<tr class="odd">
<td align="left">V7</td>
<td align="left">Q1c Family life suffers through working mother</td>
</tr>
<tr class="even">
<td align="left">V8</td>
<td align="left">Q1d Women’s preference: home and children</td>
</tr>
<tr class="odd">
<td align="left">V9</td>
<td align="left">Q1e Being housewife is satisfying</td>
</tr>
<tr class="even">
<td align="left">V10</td>
<td align="left">Q2a Both should contribute to household income</td>
</tr>
<tr class="odd">
<td align="left">V11</td>
<td align="left">Q2b Men’s job is earn money, women’s job household</td>
</tr>
<tr class="even">
<td align="left">V12</td>
<td align="left">Q3a Should women work: Child under school age</td>
</tr>
<tr class="odd">
<td align="left">V13</td>
<td align="left">Q3b Should women work: Youngest kid at school</td>
</tr>
<tr class="even">
<td align="left">SEX</td>
<td align="left">Respondents age</td>
</tr>
<tr class="odd">
<td align="left">AGE</td>
<td align="left">Respondents gender</td>
</tr>
<tr class="even">
<td align="left">DEGREE</td>
<td align="left">Highest completed degree of education: Categories for international comparison</td>
</tr>
<tr class="odd">
<td align="left">MAINSTAT</td>
<td align="left">Main status: work, unemployed, in education…</td>
</tr>
<tr class="even">
<td align="left">TOPBOT</td>
<td align="left">Top-Bottom self-placement (10 pt scale)</td>
</tr>
<tr class="odd">
<td align="left">HHCHILDR</td>
<td align="left">How many children in household: children between [school age] and 17 years of age</td>
</tr>
<tr class="even">
<td align="left">MARITAL</td>
<td align="left">Legal partnership status: married, civil partership…</td>
</tr>
<tr class="odd">
<td align="left">URBRURAL</td>
<td align="left">Place of living: urban - rural</td>
</tr>
</tbody>
</table>
<p><strong>k</strong> Kyselylomakkeilla kysymykset olivat hieman pidempiä, kuvassa <a href="#fig:suom-kys">2.1</a> osa suomenkielistä lomaketta.</p>
<div class="figure" style="text-align: center"><span id="fig:suom-kys"></span>
<img src="img/substvar_fi_Q1Q2.png" alt="Suomenkielinen lomake" width="50%" />
<p class="caption">
Kuva 2.1: Suomenkielinen lomake
</p>
</div>
<p>Valituista taustamuuttujista monet on kerätty haastattelulla.
Tiedonkeruu, otantamenetelmät ja yksikkövastauskadon huomioiminen on tehty joka
maassa omalla tavallaan. Aineistoissa on mukana painot joilla tulokset voidaan
korottaa perusjoukon tasolle, mutta kansainvälisiä vertailupainoja ei syystä tai
toisesta ole. Taustamuuttujat kuten koulutustaso on harmonisoitu
vertailukelpoisiksi.</p>
<p>Tutkimuksen kohdeperusjoukko on 18-vuotiaat tai sitä vanhemmat,
poikkeuksina Suomi (15 - 74 vuotiaat), Islanti, Japani, Etelä-Afrikka ja Venezuela.</p>
<p>Jos ohitetaan pienet erot kysymyksissä ja vastausvaihtoehdoissa jäljelle jää
erävastauskato, kyselytutkimusten ominaisuus. Jostain syystä joihinkin kysymyksiin
ei vastata. Esimerkiksi Ranskassa yli 20 prosenttia kieltäytyi vastaamasta lasten
(HHCHILDR) lukumäärää kysyttäessä, ja aika moni myös muissa perherakenteeseen
liittyvissä kysymyksissä. Tässä tutkielmassa monimuuttujakorrespondenssianalyysiä
käytetään tämän ongelman tai datan ominaisuuden analyysiin.</p>
<p>Poistin aineistosta havainnot, joissa tieto iästä tai sukupuolesta puuttuu
(32969-32823 = 146 havaintoa).</p>
<p>Aineiston luokittelu- ja järjestysasteikon muuttujat muunnetaan R-ohjelmiston
factor-tietotyypiksi. Teen muunnokset useammassa vaiheessa heti kun data on
luettu SPSS-tiedosta. Käsittelyssä koitan noudattaa helposti toistettavan
tutkimuksen periaatteita (McNamara ja Horton <span class="citation">(McNamara ja Horton <a href="#ref-RefWorks:doc:5c3759c2e4b0085b307c82b5" role="doc-biblioref">2018</a>)</span> ),
koodi ei saisi olla kovin virhealtista (”haurasta”) ja tarkistuksia tehdään
paljon. Data-analyysin ja ehkä erityisesti korrespondenssianalyysin idea on
kuitenkin operoida matriiseilla, lisätä ja poistaa rivejä ja sarakkeita ja
rakennella mutkikkaampia matriiseja yksinkertaisemmista.
Analyysivaiheessa koodi muuttuu hauraammaksi.</p>
<p><strong>Aineisto ja korrespondenssianalyysi</strong></p>
<p>Michael Greenacre on käyttänyt aineistoa eri vuosilta luentomateriaaleissa kuten
Helsingissä 2017<span class="citation">(M. Greenacre <a href="#ref-RefWorks:doc:5b6ef091e4b0984fd9b8c0ca" role="doc-biblioref">2017</a>)</span> ja ainakin kahdessa
oppikirjassaan(<span class="citation">(Greenacre <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d7c" role="doc-biblioref">2010</a>)</span>,
<span class="citation">(M. J. Greenacre <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d78" role="doc-biblioref">2017</a>)</span>).
ISSP - aineisto vuodelta 1989 on käytetty myös neljän “singuaariarvohajoitelmaan
perustuvan menetelmän” vertailuun<span class="citation">(Greenacre <a href="#ref-RefWorks:doc:5b6f159ce4b0bc0f31734b76" role="doc-biblioref">2003</a>)</span>. Blasius
ja Thiessen (<span class="citation">(Blasius ja Thiessen <a href="#ref-RefWorks:doc:5b15542ee4b0e2616bc42dca" role="doc-biblioref">2006</a>)</span>) arvioivat aineiston laatua
ja ja maiden vertailtavuutta vuoden 1994 aineistolla.</p>
<p>Substanssitutkimusta en käsittele, näiden esimerkkien lisäksi ISSP:n ja
GESIS-instituutin www-palveluista löytyy paljon muitankin.</p>
<p>Sukupuoliroolien (gender roles) ja niihin liittyvien asenteiden vertailevaa
kansainvälistä (cross-cultural) tutkimusta on tehty paljon. Tutkimusongelman
sisällöllisten ja teoreettisen kysymysten nykytilaa kuvaa tuore artikkeli
<span class="citation">(Walter <a href="#ref-RefWorks:doc:5bd08fb6e4b05c5447c9a9f9" role="doc-biblioref">2018</a>)</span>.</p>
<p>Toisessa esimerkissä <span class="citation">(Ferragina ja Seeleib-Kaiser <a href="#ref-RefWorks:doc:5bd0a663e4b0c91dcf7c4be9" role="doc-biblioref">2015</a>)</span> tutkitaan ensin 18
OECD-maan perhepolitiikan muutoksia kolmen viime vuosikymmenen ajalta. Näkökulma on
työllisyyspolitiikka ja menetelmänä monimuuttuja-korrespondenssianalyysi (MCA).
Havaituille kehityssuunnille etsitään toisessa vaiheessa selityksiä. Aineistona
on viisi kansainväliseen vertailuun soveltuvaa aineistoa, yhtenä niistä ISSP:n
data kolmelta kierrokselta (1988,1994,2002).</p>

</div>
</div>
<div id="yksinkertainen-korrespondenssianalyysi" class="section level1">
<h1><span class="header-section-number">Luku 3</span> Yksinkertainen korrespondenssianalyysi</h1>
<p><strong>k1</strong> Korrespondenssianalyysin geometriset periaatteet ja kuvien tulkinnan
oleelliset asiat voi esittää yksinkertaisen korrespondenssianalyysin avulla
(MG ja Hastie). Tässä jaksossa aineistoksi valitaan yksi subsatanssimuuttuja ja
kuusi maata. Taustamuuttujia ovat vastaajan ikä ja sukupuoli ja maa. Aineistosta jätettiin
pois kaikki havainnot joissa vastaustieto puuttui. Taustamuuttujissa puuttuvia
tietoja ei ole.</p>
<p><strong>k2</strong> Yksinkertainen korrespondenssianalyysi on yhden taulukon analyysiä.
Peruskäsitteet ja niiden yhteys dataan on helpompi hahmottaa pienessä aineistosssa,
aina voi katsoa koko dataaa.</p>
<div id="äiti-töissä--kärsiikö-lapsi" class="section level2">
<h2><span class="header-section-number">3.1</span> Äiti töissä -kärsiikö lapsi?</h2>
<p><strong>k1</strong>“Alle kouluikäinen lapsi todennäköisesti kärsii, jos hänen äitinsä käy työssä”.</p>
<p>ISSP-tutkimuksissa kaksi kysymystä, joissa sana “äiti”, MG havainnut vastausten
jakaumat poikkeaviksi (<strong>#V ?</strong>).</p>
<p><strong>k</strong> Kolme taulukkoa: frekvenssitaulukko, riviprosentit ja sarakeprosentit</p>
<table>
<caption><span id="tab:simpeCA-frekTa1">Taulukko 3.1: </span>Kysymyksen Q1b vastaukset maittain, suhteelliset frekvenssit</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">S</th>
<th align="left">s</th>
<th align="left">?</th>
<th align="left">e</th>
<th align="left">E</th>
<th align="left">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">BE</td>
<td align="left">2.35</td>
<td align="left">5.54</td>
<td align="left">5.38</td>
<td align="left">6.78</td>
<td align="left">4.68</td>
<td align="left">24.72</td>
</tr>
<tr class="even">
<td align="left">BG</td>
<td align="left">1.45</td>
<td align="left">4.85</td>
<td align="left">2.52</td>
<td align="left">2.33</td>
<td align="left">0.16</td>
<td align="left">11.31</td>
</tr>
<tr class="odd">
<td align="left">DE</td>
<td align="left">2.03</td>
<td align="left">4.61</td>
<td align="left">2.43</td>
<td align="left">6.61</td>
<td align="left">5.38</td>
<td align="left">21.05</td>
</tr>
<tr class="even">
<td align="left">DK</td>
<td align="left">0.86</td>
<td align="left">2.92</td>
<td align="left">1.87</td>
<td align="left">2.85</td>
<td align="left">8.55</td>
<td align="left">17.05</td>
</tr>
<tr class="odd">
<td align="left">FI</td>
<td align="left">0.58</td>
<td align="left">2.31</td>
<td align="left">1.83</td>
<td align="left">5.19</td>
<td align="left">3.72</td>
<td align="left">13.63</td>
</tr>
<tr class="even">
<td align="left">HU</td>
<td align="left">2.69</td>
<td align="left">3.54</td>
<td align="left">2.76</td>
<td align="left">2.33</td>
<td align="left">0.92</td>
<td align="left">12.24</td>
</tr>
<tr class="odd">
<td align="left">Total</td>
<td align="left">9.95</td>
<td align="left">23.76</td>
<td align="left">16.79</td>
<td align="left">26.10</td>
<td align="left">23.41</td>
<td align="left">100.00</td>
</tr>
</tbody>
</table>
<table>
<caption><span id="tab:simpeCA-rprosTa1">Taulukko 3.2: </span>Kysymyksen Q1b vastaukset, riviprosentit</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">S</th>
<th align="left">s</th>
<th align="left">?</th>
<th align="left">e</th>
<th align="left">E</th>
<th align="left">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">BE</td>
<td align="left">9.49</td>
<td align="left">22.40</td>
<td align="left">21.76</td>
<td align="left">27.42</td>
<td align="left">18.93</td>
<td align="left">100.00</td>
</tr>
<tr class="even">
<td align="left">BG</td>
<td align="left">12.81</td>
<td align="left">42.89</td>
<td align="left">22.26</td>
<td align="left">20.63</td>
<td align="left">1.41</td>
<td align="left">100.00</td>
</tr>
<tr class="odd">
<td align="left">DE</td>
<td align="left">9.63</td>
<td align="left">21.88</td>
<td align="left">11.55</td>
<td align="left">31.39</td>
<td align="left">25.55</td>
<td align="left">100.00</td>
</tr>
<tr class="even">
<td align="left">DK</td>
<td align="left">5.04</td>
<td align="left">17.15</td>
<td align="left">10.95</td>
<td align="left">16.71</td>
<td align="left">50.14</td>
<td align="left">100.00</td>
</tr>
<tr class="odd">
<td align="left">FI</td>
<td align="left">4.23</td>
<td align="left">16.94</td>
<td align="left">13.42</td>
<td align="left">38.11</td>
<td align="left">27.30</td>
<td align="left">100.00</td>
</tr>
<tr class="even">
<td align="left">HU</td>
<td align="left">21.97</td>
<td align="left">28.89</td>
<td align="left">22.57</td>
<td align="left">19.06</td>
<td align="left">7.52</td>
<td align="left">100.00</td>
</tr>
<tr class="odd">
<td align="left">All</td>
<td align="left">9.95</td>
<td align="left">23.76</td>
<td align="left">16.79</td>
<td align="left">26.10</td>
<td align="left">23.41</td>
<td align="left">100.00</td>
</tr>
</tbody>
</table>
<table>
<caption><span id="tab:simpeCA-cprosTa1">Taulukko 3.3: </span>Kysymyksen Q1b vastaukset, sarakeprosentit</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">S</th>
<th align="left">s</th>
<th align="left">?</th>
<th align="left">e</th>
<th align="left">E</th>
<th align="left">All</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">BE</td>
<td align="left">23.58</td>
<td align="left">23.31</td>
<td align="left">32.04</td>
<td align="left">25.98</td>
<td align="left">19.99</td>
<td align="left">24.72</td>
</tr>
<tr class="even">
<td align="left">BG</td>
<td align="left">14.57</td>
<td align="left">20.41</td>
<td align="left">15.00</td>
<td align="left">8.94</td>
<td align="left">0.68</td>
<td align="left">11.31</td>
</tr>
<tr class="odd">
<td align="left">DE</td>
<td align="left">20.37</td>
<td align="left">19.38</td>
<td align="left">14.48</td>
<td align="left">25.32</td>
<td align="left">22.98</td>
<td align="left">21.05</td>
</tr>
<tr class="even">
<td align="left">DK</td>
<td align="left">8.64</td>
<td align="left">12.30</td>
<td align="left">11.12</td>
<td align="left">10.92</td>
<td align="left">36.52</td>
<td align="left">17.05</td>
</tr>
<tr class="odd">
<td align="left">FI</td>
<td align="left">5.80</td>
<td align="left">9.72</td>
<td align="left">10.90</td>
<td align="left">19.91</td>
<td align="left">15.90</td>
<td align="left">13.63</td>
</tr>
<tr class="even">
<td align="left">HU</td>
<td align="left">27.04</td>
<td align="left">14.88</td>
<td align="left">16.46</td>
<td align="left">8.94</td>
<td align="left">3.93</td>
<td align="left">12.24</td>
</tr>
<tr class="odd">
<td align="left">Total</td>
<td align="left">100.00</td>
<td align="left">100.00</td>
<td align="left">100.00</td>
<td align="left">100.00</td>
<td align="left">100.00</td>
<td align="left">100.00</td>
</tr>
</tbody>
</table>
<p><strong>k</strong> <strong>Taulkoista</strong></p>
<p>Frekvenssitaulukossa havaintojen lukumäärät on jaettu kokonaislukumäärällä
(8143).</p>
<p>Frekvenssitaulukko <a href="#tab:simpeCA-frekTa1">3.1</a> kertoo vastausten jakauman maiden
ja vastausvaihtoehtojen mukaan luokiteltuina.</p>
<p>Muuttujien luonne on usein erilainen. Tähän aineistoon sopii riviprosenttientaulukko,
vertaillaan vastausten jakaumia maiden välillä.Taulukon sarakkeet ovat muuttujia
ja rivit havaintoja. Sarakeprosentit antavat toisen näkökulmaan samaan dataan.</p>
<p>Tavoitteena on korrespondenssianalyysin kartta, jossa rivi- ja
sarakepisteet on esitetty samassa kuvassa. Sarakeprosenttien taulukossa on esitetty
sarakkeiden suhteelliset jakaumat.</p>
<p>Näitä suhteellisia rivejä ja sarakkeita kutsutaan korrespondenssianalyysissä
profiileiksi.</p>
<p>Frekvenssitaulukon reunajakaumat eli rivi- ja sarakesummat jaettuna havaintojen
lukumäärällä ovat profiilien massoja.</p>
<p><strong>k</strong> Rivit on saatu alkuperäisestä aineistosta osajoukkojen summina. MG:n
terminologialla “samples”.</p>
<p>Rivi- ja sarakeprofiileja verrataan niiden keskiarvoprofiiliin. Seuraavat kaksi
kuvaa näyttävät miten eri profiilit poikkeavat keskiarvostaan.</p>
<div class="figure"><span id="fig:g1-2kuva1"></span>
<img src="JH_capaper_files/figure-html/g1-2kuva1-1.png" alt="Q1b:Sarakeprofiilit ja keskiarvoprofiili" width="672" />
<p class="caption">
Kuva 3.1: Q1b:Sarakeprofiilit ja keskiarvoprofiili
</p>
</div>
<div class="figure"><span id="fig:g1-2kuva2"></span>
<img src="JH_capaper_files/figure-html/g1-2kuva2-1.png" alt="Q1b: riviprofiilit ja keskiarvorivi" width="672" />
<p class="caption">
Kuva 3.2: Q1b: riviprofiilit ja keskiarvorivi
</p>
</div>
<p><strong>edit</strong> Tässä esitellään ovelasti CA:n tripletin kaksi jäsentä, massat ja profiilit.
khii2-etäisyys on kolmas. Triplettiin liittyy “kvartetti”,
josta tässä esitellään inertia.</p>
<p>Mikä on rivien (havaintojen) ja sarakkeiden (muuttujien) yhteys?</p>
<p>Kahden luokittelumuuttujan riippuvuutta voidaan testata <span class="math inline">\(\chi^{2}\)</span> - testillä.
Riippumattomuushypoteesin mukainen odotettu solufrekvenssi on taulukon
<a href="#tab:simpeCA-frekTa1">3.1</a> reunajakaumien alkioiden tulo.</p>
<p>Testisuure saadaan laskemalla yhten jokaisen solun havaittujen ja odotetettujen
frekvenssien erotukset muodossa</p>
<p><span class="math display" id="eq:khii21">\[\begin{equation}
  \chi^{2} = \frac{(havaittu - odotettu)^2} {odotettu}
    \tag{3.1}
\end{equation}\]</span></p>
<p>Tämä voidaan esittää ca:han sopivammalla tavalla parilla muunnoksella, jolloin
saamme riveittäin vastaavat termit rivisummalla painotettuna:</p>
<p><span class="math display" id="eq:khii22">\[\begin{equation}
  rivisumma \times \frac{(havaittu \: riviprofiili - odotettu \: riviprofiili)^2} {odotettu \: riviprofiili}
    \tag{3.2}
\end{equation}\]</span></p>
<p>Kun jaamme nämä tekijät havaintojen kokonaismäärällä <span class="math inline">\(n\)</span>, rivisumma muuntuu
rivin massaksi, ja niiden summa muotoon <span class="math inline">\(\frac{\chi^{2}}{n}\)</span>.</p>
<p><span class="math display" id="eq:inert1">\[\begin{equation}
 \frac{\chi^{2}}{n} = \phi^{2}
  \tag{3.3}
 \end{equation}\]</span></p>
<p>Huomaa jakajassa n, ei n-1. Tässä ei tn-päättelyä!</p>
<p>Tunnusluku <span class="math inline">\(\phi^{2}\)</span> on korrespondenssianalyysissä kokonaisinertia (total
inertia). Se kuvaa, kuinka paljon varianssia taulukossa on ja on riippumaton
havaintojen lukumäärästä. Tilastotieteessä tunnusluvulla on useita vaihtoehtoisia
nimiä (esim. mean square contingency coefficient), ja sen neliöjuurta kutsutaan
<span class="math inline">\(\phi\)</span> - kertoimeksi.</p>
<p>Tässä siirrytään kahden luokittelumuuttujan taulukosta suhteellisten frekvenssien
taulukkoon. Kaavojen <a href="#eq:khii21">(3.1)</a> ja <a href="#eq:khii22">(3.2)</a> yhteyden pitäisi olla
selkeä.</p>
<p>Frekvenssitaulukossa (jossa kaikki taulukon luvut on jaettu havaintojen
lukumäärällä N riviprofiilien 1 ja 3 (euklidinen) etäisyys on</p>
<p><span class="math display" id="eq:euclid1">\[\begin{equation}
 \sqrt{(p_{11} - p_{31})^2 + (p_{12} - p_{32})^2 + (p_{13} - _{33})^2+ (p_{14} - _{34})^2+ (p_{15} - _{35})^2}
 \tag{3.4}
 \end{equation}\]</span></p>
<p>Rivien <span class="math inline">\(\chi^{2}\)</span> - etäisyys on painotettu euklidinen etäisyys, jossa painoina
ovat riviprofiilin odotetut arvot. Ne ovat riippumattomuushypoteesin mukaisesti
riviprofiilien keskiarvoprofiilin vastaavat alkioit <span class="math inline">\(r_{i}\)</span> .</p>
<p><span class="math display" id="eq:euclid2">\[\begin{equation}
 \sqrt{\frac{(p_{11} - p_{31})^2} { r_{1}} + \dots + \frac{(p_{15} - p_{35})^2} {r_{5}}}
 \tag{3.5}
\end{equation}\]</span></p>
<p>Inertia voidaa esittää rivien ja keskiarvorivin (sentroidin) <span class="math inline">\(\chi^{2}\)</span> -etäisyyksien
neliöiden painotettuna summana, jossa painoina ovat rivien massat <span class="math inline">\(m_{i}\)</span> ja
summa lasketaan yli rivien <span class="math inline">\({i}\)</span>.</p>
<p><span class="math display" id="eq:inert2">\[\begin{equation}
 \phi^{2} = \sum_{i} (massa \: m_{i}) \times (profiilin \: i \: \chi^{2} - etaisyys \: sentroidista)^{2}
 \tag{3.6}
\end{equation}\]</span></p>
<p><strong>edit</strong> Tässä esitystavassa viite on CAiP, teorialiitteessä tarkemmin. Tarkoitus on esittää
yksinkertaisesti taulukon datan analyysin käsitteet ja CA:n peruskäsitteet profiili,
massa ja <span class="math inline">\(\chi^{2}\)</span> - etäisyys</p>
<p><strong>k</strong> ca-ratkaisu: rivi- ja sarekepilvien dimensio on sarakkeiden tai rivien
lukumäärä vähennettynä yhdellä, pienempi kahdesta vaihtoehdosta. Tämä seuraa
yksikertaisesti rivi- ja sarakeprofiilien suhteellisuudesta, niiden summat ovat 1.</p>
<p><strong>k</strong> Etsitään kaksiulotteinen ratkaisu (taso), joka minimoi pisteiden
khii2-etäisyyksien poikkeamien summan eli on mahdollisimman lähellä pisteitä.</p>
<p><strong>K</strong> rivi- ja sarakeongelma ratkaisu johtaa saamaan lopputulokseen. Tämä
duaalisuus on korrespondenssianalyysin perusominaisuuksia.</p>
</div>
<div id="ca---esimerkki" class="section level2">
<h2><span class="header-section-number">3.2</span> CA - esimerkki</h2>
<div class="figure" style="text-align: center"><span id="fig:simpleCA1map1"></span>
<img src="JH_capaper_files/figure-html/simpleCA1map1-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="90%" />
<p class="caption">
Kuva 3.3: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
<p><strong>edit1</strong> jatkossa plot - main on kuvan tyyppi (symmetrinen, kontribuutio jne),
koodilohkon fig.cap “ylimmän tason” otsikko.</p>
<p><strong>edit2</strong> Akseleiden tekstit (Dimensio 1….jne) asetettu käsin, ikävä kyllä myös
selitetyn inertian osuus. CA-kartoissa tämä on niin oleellinen asia, että akselien nimet voi muutttaa
vasta esitysgrafiikassa, ei data-analyysissä. Dim1 ja Dim2 kuuluvat kuviin.</p>
<p><strong>edit3</strong> par(cex = 1) ennen plot-komenota muuttaa valitettavasti “kaiken” kokoa.
Antaa olla, kun on graafista data-analyysiä. Selkeys tärkeämpää kuin ulkoasu.</p>
<p><strong>k</strong> Kartan tulkinta</p>
<p><strong>k</strong> Prosentit - kuinka paljon kokonaisinertiasta saadaan kuvattua (“selitettyä”) kahdessa
ulottuvuudessa? Miten se jakautuu ensimmäiselle ja toiselle akselille?</p>
<p><strong>k</strong> Dimenisoiden tulkinta sarakepisteiden avulla: mitä on oikealla ja vasemmalla?
Kaukana on kaukana, mutta lähellä voi olla täydessä sarake- tai riviavaruudessa
kaukana. Siksi tulkinta kontrastien avulla - mikä piste on suhteellisesti kauimpana?</p>
<p><strong>k</strong> Rivipisteiden tulkinta kartalla - järjestys vasemmalta oikealle ja alhaalta
ylös. Pisteiden etäisyydet toisistaan.</p>
<p><strong>k</strong> Origo on aineiston keskipiste, “riippumattomuushypoteesi” (kts. teorialiite).</p>
<p><strong>k</strong> Sarakepisteiden erot ja rivipisteiden erot ovat suhteellisia, approksimoivat
khii2-etäisyyksiä.</p>
<p><strong>k</strong> Rivi- ja sarakepisteiden etäisyyksillä ei suoraan mitään tulkintaa!</p>
<p><strong>k</strong> Lista: mitä muuta, johon palataan seuraavassa luvussa?</p>
<ul>
<li>kuinka hyvin pisteet on esitetty tasossa?</li>
<li>esim. x-akseli kuvaa (“nappaa”) 76% kokonaisinertiasta. Pisteiden
inertiakontribuutiot</li>
</ul>
</div>
<div id="korrespondenssianalyysin-peruskäsitteet" class="section level2">
<h2><span class="header-section-number">3.3</span> Korrespondenssianalyysin peruskäsitteet</h2>
<p>huom: riippumattomuushypoteesin oletukset eivät välttämättä ole voimassa
kaikissa aineistoissa. Khii2-etäisyysmittaa käytetään silti, sen perustelu on
paljon yleisempi,</p>
<p><strong>ks</strong> Mitä käsitteitä tässä esitellään? Viittaukset teorialiitteeseen, ja
tulkinnan hankaluudet (MG “loose ends” - paperi) käsitellään siellä.</p>
<p><strong>edit</strong> Sulava kuvaus tulkinnasta, painotus kuvien tulkinnassa. CA:n numeeriset
tulokset vasta seuraavassa luvussa. Tässä “mitä kuvasta näkee”, ei muuta (paitsi
varoitukset - mitä ei näe). Idea koko ajan taulukon sarakkeiden ja riveien yhteyksien
visualisointi.</p>
<p><strong>edit</strong> Tärkeää selkeä kuvaus pääkoordinaattien ja standardikoordinaattien
suhteesta. Tarkemmin teorialiitteessä, tässä heuristisesti jotta kuvia osaa tulkita.</p>
<div id="asymmetrinen-kartta-ja-ideaalipisteet" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Asymmetrinen kartta ja ideaalipisteet</h3>
<div class="figure" style="text-align: center"><span id="fig:G1-3asymm2"></span>
<img src="JH_capaper_files/figure-html/G1-3asymm2-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="90%" />
<p class="caption">
Kuva 3.4: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
<p><strong>Barysentrinen periaate</strong></p>
<strong>edit</strong> kuva ei ehkä tarpeen? Tehdään vähän pienempi (out.width = 70%, muuten 90%).
<div class="figure" style="text-align: center"><span id="fig:G1-3asymm3"></span>
<img src="JH_capaper_files/figure-html/G1-3asymm3-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="70%" />
<p class="caption">
Kuva 3.5: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
<p><strong>edit</strong> Perustelu kuvalle: barysentrinen periaate on kuvien tulkinnassa ydinasioita.</p>
<p><strong>Akseleiden tulkinta</strong> tai tulkinnan varmistaminen akseli kerrallaan. Ortogonaaliset
projektion piirretty käsin, havainnollistetaan periaatetta.</p>
<p><img src="img/simpleCAasymmTulk2.png" width="90%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="kontribuutiot-kartalla" class="section level2">
<h2><span class="header-section-number">3.4</span> Kontribuutiot kartalla</h2>
<p>Kaksi kuvaa, joissa pisteiden massat on kuvattu pisteiden koolla (ei juuri eroa
huomaa) ja rivi- ja sarekepisteiden kontribuutiot värisävyllä. Mitä tummempi sitä
suurempi kontribuutio. Absoluuttiset ja suhteelliset kontribuutiot.</p>
<p><strong>edit</strong> Pitäisikö kuvissa olla aina toinen absolute, toinen relative? Selvitetään
teorialiittessä?</p>
<p>Toinen kuva riittää, tässä esitellään kartta jossa on eniten informaatiota.</p>
<p><strong>Absoluuttiset kontribuutiot</strong> Oletuspistekoko ok, mutta html- ja pdf-tulostus
on erilainen!</p>
<div class="figure" style="text-align: center"><span id="fig:G1-3asymmContrib1"></span>
<img src="JH_capaper_files/figure-html/G1-3asymmContrib1-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="90%" />
<p class="caption">
Kuva 3.6: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
<p>Rivi- ja sarakesymbolien koko on suhteessa pisteen massaan, mutta eroja ei tässä
kovin selkeästi näe.Suhteellisen värisävyn erot näyttävät absoluuttisten
kontribuutioiden erot selkeästi.</p>
<p><strong>Suhteelliset kontribuutiot</strong></p>
<div class="figure" style="text-align: center"><span id="fig:G1-3asymmContrib2"></span>
<img src="JH_capaper_files/figure-html/G1-3asymmContrib2-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="90%" />
<p class="caption">
Kuva 3.7: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
</div>
<div id="massat" class="section level2">
<h2><span class="header-section-number">3.5</span> Massat</h2>
<p><strong>edit3</strong> Onko vakioitujen massojen kartta liian aikaisin? Tämä ei ole pääasia, vaan selvennys.
Miksi tässä? Perusteltava, miksi en vakioi massoja maille, sukupuolille jne. (a)
perusteltua kun tarkempi tutkimusongelma, esim. erottelut maiden ja sukupuolten
välillä. Varianssianalyysin tapaan varianssin hajoittaminen ryhmisen sisäiseen ja
ryhmien väliseen. Kts. teorialiitteestä esim. ABBA. (b) CA “perusmuodossa”, massa
on yksi kolmesta tärkeimmästä käsitteestä. (c) on aika työlästä!</p>
<p><strong>edit4</strong> Galkussa verrattu molempien painotusten khii2-etäisyyksiä, jos tarpeen
niin teoria-liitteeseen.</p>
<div class="figure" style="text-align: center"><span id="fig:simpleCA3map1"></span>
<img src="JH_capaper_files/figure-html/simpleCA3map1-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="90%" />
<p class="caption">
Kuva 3.8: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
Ei kovin isoja eroja, tässä datassa. Vilkaistaan myös absoluuttisia kontribuutioita.
<div class="figure" style="text-align: center"><span id="fig:simpleCA3map2"></span>
<img src="JH_capaper_files/figure-html/simpleCA3map2-1.png" alt="Q1b: lapsi kärsii jos äiti on töissä" width="90%" />
<p class="caption">
Kuva 3.9: Q1b: lapsi kärsii jos äiti on töissä
</p>
</div>
</div>
<div id="karttojen-erot" class="section level2">
<h2><span class="header-section-number">3.6</span> Karttojen erot</h2>
<p>Yksinkertaisen korrespondenssianalyysin peruskuva on symmetrinen kartta. Ehkä
yllättäen sen “tulkinta on edelleen menetelmän kaikkein kiistanalaisin aspekti.”
<span class="citation">(M. J. Greenacre <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d78" role="doc-biblioref">2017</a>)</span> (s.295),<span class="citation">(M. Greenacre <a href="#ref-RefWorks:doc:5c768b09e4b02df9431e950a" role="doc-biblioref">2006</a>)</span>.
vrt. myös, Johdanto, SPSS - kritiikki.</p>
<p><strong>k</strong> Miksi symmetrinen kartta on paras oletus?</p>

</div>
</div>
<div id="täydentävät-pisteet" class="section level1">
<h1><span class="header-section-number">Luku 4</span> Täydentävät pisteet</h1>
<p><strong>edit</strong> Edellisssä luvussa selitetty barysentrinen keskiarvopiste;
teorialiitteessä hieman laveammin.</p>
<p><strong>edit</strong> CA:n joustava käyttö vaatii matriisioperaatioita, ja muuta datan rakenteen
muokkausta (rivien lisääminen input-dataan jne.).</p>
<p>Tekstistä oma dokkari, eri käyttötapaukset lyhyesti. Edellisen luvun asymmetrisen
kartan avulla perustellaan, miten pisteitä voidaaan lisätä.</p>
<div id="täydentävät-pisteet-1" class="section level2">
<h2><span class="header-section-number">4.1</span> Täydentävät pisteet</h2>
<p><strong>edit</strong> Tiivisti tärkeimmät käyttötapaukset. CA:n peruskäsitteet ja numeeriset
tulokset selitetty edellä.</p>
<p><strong>ks</strong> Passiiviset pisteet ja niiden käyttötarkoitukset</p>
</div>
<div id="saksan-ja-belgian-alueet" class="section level2">
<h2><span class="header-section-number">4.2</span> Saksan ja Belgian alueet</h2>
<p><strong>Data ja taulukko aluejaosta</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># riviprofiilitaulukko aiheuttaa virheen PDF-tulostuksessa, JH_capaper.Rmd</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co"># tiedoston voi kuitenkin renderöidä knit-napilla RStudiossa pdf-tiedostoksi.</span></span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># Kts. edellinen koodilohko - testailua pdf-ongelman ratkaisemiseksi</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co"># tallennetaan data tiedostoon, koodilohko BeDeAluedat1 passiviseksi</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># suppoint1_tab1 &lt;- read_rds(&quot;suppoint1tab1.rds&quot;)</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># suppoint1_tab1 # tarkistus ok</span></span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a>BeDealueTable &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa3, Q1b, <span class="dt">type =</span> <span class="st">&quot;row_perc&quot;</span>)</span>
<span id="cb1-10"><a href="#cb1-10"></a></span>
<span id="cb1-11"><a href="#cb1-11"></a>knitr<span class="op">::</span><span class="kw">kable</span>(BeDealueTable , <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb1-12"><a href="#cb1-12"></a>           <span class="dt">caption =</span> <span class="st">&quot;Q1b vastaukset, Saksan ja Belgian alueet&quot;</span>)</span></code></pre></div>
<table>
<caption><span id="tab:BeDealueTable1">Taulukko 4.1: </span>Q1b vastaukset, Saksan ja Belgian alueet</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">S</th>
<th align="left">s</th>
<th align="left">?</th>
<th align="left">e</th>
<th align="left">E</th>
<th align="left">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">bF</td>
<td align="left">5.04</td>
<td align="left">23.81</td>
<td align="left">25.89</td>
<td align="left">30.83</td>
<td align="left">14.43</td>
<td align="left">100.00</td>
</tr>
<tr class="even">
<td align="left">bW</td>
<td align="left">10.82</td>
<td align="left">21.02</td>
<td align="left">18.57</td>
<td align="left">24.08</td>
<td align="left">25.51</td>
<td align="left">100.00</td>
</tr>
<tr class="odd">
<td align="left">bB</td>
<td align="left">17.03</td>
<td align="left">20.94</td>
<td align="left">16.63</td>
<td align="left">23.87</td>
<td align="left">21.53</td>
<td align="left">100.00</td>
</tr>
<tr class="even">
<td align="left">BG</td>
<td align="left">12.81</td>
<td align="left">42.89</td>
<td align="left">22.26</td>
<td align="left">20.63</td>
<td align="left">1.41</td>
<td align="left">100.00</td>
</tr>
<tr class="odd">
<td align="left">dW</td>
<td align="left">11.40</td>
<td align="left">26.82</td>
<td align="left">11.83</td>
<td align="left">32.13</td>
<td align="left">17.82</td>
<td align="left">100.00</td>
</tr>
<tr class="even">
<td align="left">dE</td>
<td align="left">5.85</td>
<td align="left">11.33</td>
<td align="left">10.97</td>
<td align="left">29.80</td>
<td align="left">42.05</td>
<td align="left">100.00</td>
</tr>
<tr class="odd">
<td align="left">DK</td>
<td align="left">5.04</td>
<td align="left">17.15</td>
<td align="left">10.95</td>
<td align="left">16.71</td>
<td align="left">50.14</td>
<td align="left">100.00</td>
</tr>
<tr class="even">
<td align="left">FI</td>
<td align="left">4.23</td>
<td align="left">16.94</td>
<td align="left">13.42</td>
<td align="left">38.11</td>
<td align="left">27.30</td>
<td align="left">100.00</td>
</tr>
<tr class="odd">
<td align="left">HU</td>
<td align="left">21.97</td>
<td align="left">28.89</td>
<td align="left">22.57</td>
<td align="left">19.06</td>
<td align="left">7.52</td>
<td align="left">100.00</td>
</tr>
<tr class="even">
<td align="left">All</td>
<td align="left">9.95</td>
<td align="left">23.76</td>
<td align="left">16.79</td>
<td align="left">26.10</td>
<td align="left">23.41</td>
<td align="left">100.00</td>
</tr>
</tbody>
</table>
<p>Taulukko, Saksan ja Belgian alueet ja maaprofiilit.</p>
<p><strong>edit</strong> Riviprofiilitaulukko, kuvataan alueiden eroja. CA-analyysi kuitenkin koko
aineiston frekfvenssitaululla, jossa rivien massat eivät ole samat.</p>
<div id="symmetrinen-kartta" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Symmetrinen kartta</h3>
<div class="figure" style="text-align: center"><span id="fig:suppointCA2map1"></span>
<img src="JH_capaper_files/figure-html/suppointCA2map1-1.png" alt="Q1b: Saksan ja  Belgian aluejako " width="90%" />
<p class="caption">
Kuva 4.1: Q1b: Saksan ja Belgian aluejako
</p>
</div>
<p><strong>k</strong> Maapisteet alueiden barysentrinen keskiarvo. Tulkinta.</p>
<div class="figure" style="text-align: center"><span id="fig:suppointCA2map2"></span>
<img src="JH_capaper_files/figure-html/suppointCA2map2-1.png" alt="Q1b: Saksan ja  Belgian aluejako " width="90%" />
<p class="caption">
Kuva 4.2: Q1b: Saksan ja Belgian aluejako
</p>
</div>
<p><strong>k</strong> Kontribuutiokartta, kontribuutio värisävyinä ja massat pisteiden kokona.
Yleiskuvaan riittävä, ei kovin selkeä yksityiskohdissa. Motivaatio seuraavalle
jaksolle.Skaalataan asymmetrisen kuvan sarakevektoreita (jotka standardikoordinaateissa)
hieman lähemmäs origoa.</p>
<p><strong>k</strong> Kaukana on kaukana, mutta lähellä voi olla myös kaukana.</p>
</div>
</div>
<div id="can-numeeriset-tulokset" class="section level2">
<h2><span class="header-section-number">4.3</span> CA:n numeeriset tulokset</h2>
<p><strong>edit</strong> Teorialiitteessä selitetään tarkemmin numeeristen tulosten tausta, tässä
apuneuvo (a) kuvan tulkinnan varmistamiseen ja (b) approksimaation laadun
tarkistamiseen.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>suppointCA2</span></code></pre></div>
<pre><code>## 
##  Principal inertias (eigenvalues):
##            1        2        3        4       
## Value      0.154101 0.032489 0.014294 0.008944
## Percentage 73.44%   15.48%   6.81%    4.26%   
## 
## 
##  Rows:
##                bF        bW       bB       BG        dW        dE        DK
## Mass     0.124279  0.060174 0.062753 0.113103  0.143313  0.067174  0.170453
## ChiDist  0.341469  0.096258 0.239034 0.630991  0.219094  0.505720  0.634063
## Inertia  0.014491  0.000558 0.003586 0.045032  0.006879  0.017180  0.068528
## Dim. 1   0.400065 -0.090631 0.216912 1.502458  0.254323 -1.262007 -1.506022
## Dim. 2  -1.254042  0.267998 0.789358 0.236498 -0.451124 -0.226595  1.121468
##                FI       HU    BE (*)    DE (*)
## Mass     0.136313 0.122436        NA        NA
## ChiDist  0.347733 0.550404  0.157974  0.175013
## Inertia  0.016483 0.037091        NA        NA
## Dim. 1  -0.525222 1.215462  0.234127 -0.229593
## Dim. 2  -1.500986 1.280342 -0.364834 -0.379468
## 
## 
##  Columns:
##                S        s         ?         e         E
## Mass    0.099472 0.237627  0.167874  0.260960  0.234066
## ChiDist 0.592824 0.354761  0.332288  0.280549  0.672594
## Inertia 0.034959 0.029907  0.018536  0.020540  0.105887
## Dim. 1  1.073310 0.787257  0.649789 -0.029859 -1.688108
## Dim. 2  1.835133 0.290929 -0.119934 -1.451548  0.629110</code></pre>
<p><strong>k</strong> Lyhyt selostus - nämä aika selkeitä</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">summary</span>(suppointCA2)</span></code></pre></div>
<pre><code>## 
## Principal inertias (eigenvalues):
## 
##  dim    value      %   cum%   scree plot               
##  1      0.154101  73.4  73.4  ******************       
##  2      0.032489  15.5  88.9  ****                     
##  3      0.014294   6.8  95.7  **                       
##  4      0.008944   4.3 100.0  *                        
##         -------- -----                                 
##  Total: 0.209828 100.0                                 
## 
## 
## Rows:
##       name   mass  qlt  inr    k=1 cor  ctr    k=2 cor  ctr  
## 1  |    bF |  124  650   69 |  157 212   20 | -226 438  195 |
## 2  |    bW |   60  388    3 |  -36 137    0 |   48 252    4 |
## 3  |    bB |   63  481   17 |   85 127    3 |  142 354   39 |
## 4  |    BG |  113  878  215 |  590 874  255 |   43   5    6 |
## 5  |    dW |  143  345   33 |  100 208    9 |  -81 138   29 |
## 6  |    dE |   67  966   82 | -495 960  107 |  -41   7    3 |
## 7  |    DK |  170  971  327 | -591 869  387 |  202 102  214 |
## 8  |    FI |  136  957   79 | -206 352   38 | -271 605  307 |
## 9  |    HU |  122  927  177 |  477 751  181 |  231 176  201 |
## 10 | (*)BE | &lt;NA&gt;  512 &lt;NA&gt; |   92 338 &lt;NA&gt; |  -66 173 &lt;NA&gt; |
## 11 | (*)DE | &lt;NA&gt;  418 &lt;NA&gt; |  -90 265 &lt;NA&gt; |  -68 153 &lt;NA&gt; |
## 
## Columns:
##     name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1 |    S |   99  816  167 |  421 505 115 |  331 311 335 |
## 2 |    s |  238  781  143 |  309 759 147 |   52  22  20 |
## 3 |      |  168  594   88 |  255 589  71 |  -22   4   2 |
## 4 |    e |  261  871   98 |  -12   2   0 | -262 870 550 |
## 5 |    E |  234  999  505 | -663 971 667 |  113  28  93 |</code></pre>
<p><strong>k</strong> Tulosteen käsitteiden esittely - tavoite kuvan laadun varmistus, akselien
tulkinnan tarkistus. Tarkemmin teorialiitteessä. Tästä pitäisi nähdä, miksi seuraavat
kartat ovat sellaisia kuin ovat.</p>
</div>
<div id="esimerkki-3d--kartasta---saksan-ja-belgian-dimensiot" class="section level2">
<h2><span class="header-section-number">4.4</span> Esimerkki 3d- kartasta - Saksan ja Belgian dimensiot</h2>
<p><strong>k</strong> Ei kovin hyviä kuvia, mutta periaate on tärkeä. Kartta on approksimaatio,
pitää päättää milloin se on tarpeeksi hyvä. Tai mille pisteille hyvä, mille huonompi.</p>
<p><strong>edit 26.10.2020</strong> summary-funktio ei toimi, kun dimensioita CA-ratkaisussa kolme.
Numeeriset tulokset voisi laskea “käsityönä”. Kehno kvalitetti 2d-ratkaisussa saa
kuvissa selityksen.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>suppointCA3 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maa3 <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1.dat, <span class="dt">nd =</span> <span class="dv">3</span>)</span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co"># summary(suppointCA3)</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co"># Error in rsc %*% diag(sv) : non-conformable arguments</span></span></code></pre></div>
<strong>Kolme karttaa</strong>
<div class="figure" style="text-align: center"><span id="fig:suppointCA3map1"></span>
<img src="JH_capaper_files/figure-html/suppointCA3map1-1.png" alt="Q1b: Saksan ja  Belgian aluejako " width="90%" />
<p class="caption">
Kuva 4.3: Q1b: Saksan ja Belgian aluejako
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:suppointCA3map2"></span>
<img src="JH_capaper_files/figure-html/suppointCA3map2-1.png" alt="Q1b: Saksan ja  Belgian aluejako " width="90%" />
<p class="caption">
Kuva 4.4: Q1b: Saksan ja Belgian aluejako
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:suppointCA3map3"></span>
<img src="JH_capaper_files/figure-html/suppointCA3map3-1.png" alt="Q1b: Saksan ja  Belgian aluejako " width="90%" />
<p class="caption">
Kuva 4.5: Q1b: Saksan ja Belgian aluejako
</p>
</div>
<p><strong>k</strong> Tulkinta.</p>
<p><strong>k</strong> kokeilu 3d-grafiikalla - toinen riittää</p>
<p><img src="img/3dSymMap_1.PNG" width="398" /><img src="img/3dSymMap_2.PNG" width="445" /></p>

</div>
</div>
<div id="yhteisvaikutusmuuttujat" class="section level1">
<h1><span class="header-section-number">Luku 5</span> Yhteisvaikutusmuuttujat</h1>
<p><strong>ks</strong> “Interactive coding”</p>
<p><strong>edit</strong> Yksinkertaisin tapa ottaa muita muuttujia mukaan analyysiin.</p>
<p><strong>k</strong> Kaksi yhteisvaikutusmuuttujaan (MG “interactive coding”), sukupuoli ja
ikäluokka/kohortti ja tämän muuttujan yhdistäminen maa-muuttujaan.</p>
<p><strong>k</strong> Poikkileikkausaineistossa vastaajaan ikä kuvaa sekä ikää että mitä erilaisimipia
sukupolvivaikutuksia. Ei voi oikein erottaa toisistaan. Vastaajat ovat elämänsä eri
vaiheissa kohdanneet lukuisia rajuja muutoksia toisen maailmansodan jälkeen. Nähtiin
jo edellisessä jaksossa!</p>
<p>Poikkileikkausaineistossa vastaajan ikä kertoo ikäluokan (kohortin), vastaajat ovat
kokeen esim. kaksi mullistusten vuotta elämänsä eri vaiheissa. Kaksin nuorinta ikäluokka
on ollut 1990 alle 14-vuotiaita ja vanhin ikäluokka yli 44-vuotiaita. Finannsikriisin
vuonna 2008 toiseksi nuorin ikäluokka on ollut 22-31 vuotiaita, ja kaksi vanhinta
yli 51-vuotiaita.</p>
<div id="ikä-ja-sukupuoli" class="section level2">
<h2><span class="header-section-number">5.1</span> Ikä ja sukupuoli</h2>
<p><strong>edit</strong> Lyhyesti tämä, aineisto aggregoitu ikä- ja sukupuoliryhmiin.
<strong>edit</strong> Voi myös lisätä täydentävinä pisteinä “peruskarttaan”, ei tehdä.</p>
<p>Ikäluokat ovat (1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 tai vanhempi).
Vuorovaikutusmuuttuja ga koodataan f1,…, f6 ja m1,…,m6. Muuttujien nimet
kannattaa pitää mahdollisimman lyhyinä.</p>
<p>Ikäjäkauma painottuu kaikissa maissa jonkinverran vanhempiin ikäluokkiin.
Nuorempien ikäluokkien osuus on (alle 26-vuotiaat ja alle 26-35 - vuotiaat)
varsinkin Bulgariassa (BG) ja Unkarissa (HU) pieni.</p>
<p><strong>k</strong> Ikä- ja sukupuoliryhmät yli kaikkien maiden; profiilit keskiarvoja. Ei kovin
pätevää analyysiä, yleiskuva muuttujasta.</p>
<div class="figure" style="text-align: center"><span id="fig:gaCA1map"></span>
<img src="JH_capaper_files/figure-html/gaCA1map-1.png" alt="Q1b: ikäluokka ja sukupuoli" width="90%" />
<p class="caption">
Kuva 5.1: Q1b: ikäluokka ja sukupuoli
</p>
</div>
<pre><code>## 
## Principal inertias (eigenvalues):
## 
##  dim    value      %   cum%   scree plot               
##  1      0.037448  87.0  87.0  **********************   
##  2      0.003977   9.2  96.2  **                       
##  3      0.001041   2.4  98.6  *                        
##  4      0.000590   1.4 100.0                           
##         -------- -----                                 
##  Total: 0.043055 100.0                                 
## 
## 
## Rows:
##      name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1  |   f1 |   60  990   36 | -125 614  25 |  -98 376 145 |
## 2  |   f2 |   83  997  163 | -289 983 185 |   35  14  25 |
## 3  |   f3 |   91  984   47 | -146 958  52 |   24  26  13 |
## 4  |   f4 |  101 1000   97 | -186 836  93 |   82 164 172 |
## 5  |   f5 |   98  879    4 |  -35 658   3 |   20 221  10 |
## 6  |   f6 |  100  951  176 |  256 866 175 |   80  85 162 |
## 7  |   m1 |   57  659   32 |   42  72   3 | -120 587 205 |
## 8  |   m2 |   66  977   57 | -187 946  62 |  -34  30  19 |
## 9  |   m3 |   78  457    5 |  -31 318   2 |  -20 139   8 |
## 10 |   m4 |   89  674   14 |   58 482   8 |  -37 192  30 |
## 11 |   m5 |   89  988   90 |  189 818  85 |  -86 170 166 |
## 12 |   m6 |   89  978  277 |  360 963 307 |   45  15  45 |
## 
## Columns:
##     name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1 |    S |   99  915  128 |  196 695 102 |  110 220 304 |
## 2 |    s |  238  969  304 |  230 961 336 |   21   8  27 |
## 3 |      |  168  777   46 |   62 330  17 |  -73 447 223 |
## 4 |    e |  261  897   58 |  -68 473  32 |  -64 424 268 |
## 5 |    E |  234  997  464 | -286 962 513 |   55  35 177 |</code></pre>
<p><strong>k</strong> Kommentteja Galkusta:
Aika yksiuloitteinen (87 prosenttia ensimmäisellä dimensiolla!). Data on
“as it is”, ei ole vakioitu ga-luokkien kokoja (massat max(f4 101), min (m1 57)).</p>
<p>Miten pitäisi tulkita “oikealle kaatunut U - muoto” miehillä ja naisilla?
Järjestys ei toimi, S s-sarakkeen vasemmalla puolella. Miehet konservatiivisempia,
mutta maltillisempia? Nuorin ikäluokka on poikkeava. Epävarmoja tai maltillisesti
e, sitten loikka vasemmalle ja sieltä konservatiiviseen suuntaa oikealle. Naisilla
poikkeama f3 - f4. VAnhimmat ikäluokat tiukemmin konservatiivisa (f6, m6). Jos
vertaa sukupuolten eroja samassa ikäluokassa, on aika samanlainen (miehet
konservatiivisia, naiset liberaaleja). Naisista vain vanhin ikäluokka oikealla,
miehistä nuorin ja kolme vanhinta.</p>
<p>Tulkinnassa muistettava, että ikäluokat yli maiden. Voi verrata sekä
edellisiin maa-vertailuihin että maan, ikäluokan ja sukupuolen yhteisvaikutusmuuttujan
tuloksiin. MG tutkailee eri kysymyksellä tätä samaa asiaa, ja havaitsee että
(a) maiden erot suuria ja sukupuolten pieniä (b) naiset liberaalimpia kuin miehet.
** Viite?**</p>
<p>Numeeriset tulokset: nuorimpien miesten (qlt 659) ja erityisesti
keski-ikäisten miestén m3 (qlt 457) pisteet huonosti esitetty kartalla. Tulkitaan
myös cor ja ctr, riveille ja sarakkeille.</p>
</div>
<div id="ikä-sukupuoli-ja-maa" class="section level2">
<h2><span class="header-section-number">5.2</span> Ikä, sukupuoli ja maa</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1b.dat,</span>
<span id="cb8-2"><a href="#cb8-2"></a>                             <span class="dt">maaga =</span> <span class="kw">paste</span>(maa, ga, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co"># tarkistus, muunnos ok</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co"># ISSP2012esim1b.dat %&gt;% tableX(maa, maaga)</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co"># head(ISSP2012esim2.dat)</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co"># str(ISSP2012esim2.dat)</span></span></code></pre></div>
<p><strong>edit</strong> Yksi vaikeaselkoinen kartta täynnä pisteitä, tihrustellaan.</p>
<div class="figure" style="text-align: center"><span id="fig:maagaCA1map1"></span>
<img src="JH_capaper_files/figure-html/maagaCA1map1-1.png" alt="Q1b: ikäluokka ja sukupuoli maittain" width="90%" />
<p class="caption">
Kuva 5.2: Q1b: ikäluokka ja sukupuoli maittain
</p>
</div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Vilkaistaan numeerisia tuloksia, kopioidaan tekstiin jos on tarpeellista</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="kw">summary</span>(maagaCA1)</span></code></pre></div>
<pre><code>## 
## Principal inertias (eigenvalues):
## 
##  dim    value      %   cum%   scree plot               
##  1      0.184895  70.3  70.3  ******************       
##  2      0.038751  14.7  85.0  ****                     
##  3      0.024006   9.1  94.1  **                       
##  4      0.015502   5.9 100.0  *                        
##         -------- -----                                 
##  Total: 0.263154 100.0                                 
## 
## 
## Rows:
##      name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1  | BEf1 |   14  678    9 |  -83  43   1 | -320 635  38 |
## 2  | BEf2 |   24  914   11 | -278 650  10 | -177 264  20 |
## 3  | BEf3 |   21  320    3 |  -62  96   0 |  -95 224   5 |
## 4  | BEf4 |   24  164    3 |  -50  92   0 |  -44  71   1 |
## 5  | BEf5 |   23  332    5 |  133 304   2 |  -40  28   1 |
## 6  | BEf6 |   23  832   17 |  371 710  17 |  153 121  14 |
## 7  | BEm1 |   11  429    9 |  284 367   5 | -117  62   4 |
## 8  | BEm2 |   17  372    5 | -113 169   1 | -125 203   7 |
## 9  | BEm3 |   20  108    1 |   17  29   0 |  -29  79   0 |
## 10 | BEm4 |   22  966    5 |  225 812   6 |  -98 154   5 |
## 11 | BEm5 |   22  728    8 |  255 686   8 |  -63  42   2 |
## 12 | BEm6 |   26  788   15 |  348 788  17 |   -5   0   0 |
## 13 | BGf1 |    5  531   11 |  547 531   8 |   -9   0   0 |
## 14 | BGf2 |    8  860   14 |  640 853  17 |   59   7   1 |
## 15 | BGf3 |   12  815   21 |  617 804  24 |   75  12   2 |
## 16 | BGf4 |   10  932   12 |  519 927  15 |  -39   5   0 |
## 17 | BGf5 |   14  880   23 |  609 870  28 |   66  10   2 |
## 18 | BGf6 |   18  921   32 |  627 846  39 |  186  74  16 |
## 19 | BGm1 |    5  940    7 |  596 878   9 |  159  62   3 |
## 20 | BGm2 |    6  830    9 |  557 788  11 | -130  43   3 |
## 21 | BGm3 |    8  709   19 |  655 698  19 |   83  11   1 |
## 22 | BGm4 |    8  771   11 |  540 754  12 |  -81  17   1 |
## 23 | BGm5 |   10  979   11 |  524 977  15 |   21   2   0 |
## 24 | BGm6 |    9  692   27 |  701 647  24 |  184  45   8 |
## 25 | DEf1 |   13  425    3 |  -41  29   0 | -149 395   7 |
## 26 | DEf2 |   15  938   10 | -415 919  14 |  -60  19   1 |
## 27 | DEf3 |   19  846   13 | -333 582  11 | -224 264  24 |
## 28 | DEf4 |   23  985   13 | -390 982  19 |  -18   2   0 |
## 29 | DEf5 |   17  839    7 | -297 772   8 |  -87  67   3 |
## 30 | DEf6 |   23  116    8 |  -56  32   0 |   90  84   5 |
## 31 | DEm1 |   13  912    4 |  124 180   1 | -250 732  20 |
## 32 | DEm2 |   13  766    4 |   38  16   0 | -259 749  22 |
## 33 | DEm3 |   15  737    4 |  -64  63   0 | -210 674  17 |
## 34 | DEm4 |   21  137    5 |   -1   0   0 |  -89 137   4 |
## 35 | DEm5 |   19  603    5 |   76  75   1 | -202 529  20 |
## 36 | DEm6 |   22  849   12 |  244 427   7 |  242 422  34 |
## 37 | DKf1 |   10  991   15 | -567 839  18 |  241 152  15 |
## 38 | DKf2 |   14  991   49 | -888 831  58 |  389 160  53 |
## 39 | DKf3 |   17  963   53 | -816 793  60 |  377 170  61 |
## 40 | DKf4 |   18  977   57 | -826 820  66 |  362 157  61 |
## 41 | DKf5 |   16  998   38 | -753 894  48 |  258 105  27 |
## 42 | DKf6 |   12  808    9 | -340 579   8 |  214 229  14 |
## 43 | DKm1 |   15  981    7 | -329 898   9 |  100  83   4 |
## 44 | DKm2 |   13  989   43 | -895 900  55 |  282  89  26 |
## 45 | DKm3 |   13  982   28 | -728 950  38 |  134  32   6 |
## 46 | DKm4 |   15  941   19 | -534 855  24 |  170  86  11 |
## 47 | DKm5 |   13  643    9 | -281 435   6 |  194 208  13 |
## 48 | DKm6 |   15  355    5 |   89  85   1 |  158 270   9 |
## 49 | FIf1 |   12  980   11 | -417 693  11 | -269 287  21 |
## 50 | FIf2 |   12  927   26 | -730 907  34 | -110  21   4 |
## 51 | FIf3 |   12  984   13 | -423 590  11 | -346 394  36 |
## 52 | FIf4 |   14  991   14 | -398 644  12 | -292 347  32 |
## 53 | FIf5 |   17  952    8 | -240 502   5 | -227 450  23 |
## 54 | FIf6 |   11  835    7 |  151 134   1 | -347 701  35 |
## 55 | FIm1 |    7  787    5 | -115  78   1 | -347 710  22 |
## 56 | FIm2 |    9  977   14 | -598 832  17 | -250 146  14 |
## 57 | FIm3 |    9  998    6 | -345 629   6 | -265 369  16 |
## 58 | FIm4 |   13  837    6 |   19   3   0 | -316 834  33 |
## 59 | FIm5 |   12  734    7 |  220 289   3 | -273 446  23 |
## 60 | FIm6 |    9  911    6 |  336 637   6 | -220 274  12 |
## 61 | HUf1 |    7  723    9 |  499 698   9 |   93  25   1 |
## 62 | HUf2 |   11  689   11 |  438 685  11 |  -35   4   0 |
## 63 | HUf3 |   12  808   18 |  484 586  15 |  298 222  27 |
## 64 | HUf4 |   11  768   18 |  491 564  15 |  296 204  25 |
## 65 | HUf5 |   12  850   13 |  474 753  14 |  170  97   9 |
## 66 | HUf6 |   13  671   34 |  637 581  28 |  251  90  21 |
## 67 | HUm1 |    6  935    5 |  426 766   6 |  201 170   6 |
## 68 | HUm2 |    9  381   11 |  344 381   6 |   -2   0   0 |
## 69 | HUm3 |   13  957   12 |  441 803  13 |  193 154  12 |
## 70 | HUm4 |   10  999   10 |  468 830  12 |  211 169  11 |
## 71 | HUm5 |   13  942   12 |  472 891  15 |  113  51   4 |
## 72 | HUm6 |    8  726   15 |  517 529  11 |  315 197  20 |
## 
## Columns:
##     name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1 |    S |   99  653  155 |  450 492 109 |  258 162 171 |
## 2 |    s |  238  741  174 |  364 687 170 |  102  54  63 |
## 3 |      |  168  535   96 |  284 534  73 |  -11   1   1 |
## 4 |    e |  261  941  103 |  -45  20   3 | -310 921 646 |
## 5 |    E |  234 1000  471 | -714 962 645 |  141  37 119 |</code></pre>
<p><strong>k</strong> Stabiilius - teorialiitteessä laajemmin mutta tässä lyhyt vilkaisu.
Taulukko alkaa harveta, edellä kerrottiin että aineisto painottuu kaikissa maissa
vanhempiin ikäluokkiin.</p>
<p><strong>yksinkertainen tarkistus?</strong> Löytyykö riviproviileja joilla pieni massa ja suuri
kontribuutio? Ei löydy (Galkussa tuloksia), mutta jo kuvan tukkoisuus vaatii luokkien yhdistelyä. Aika työlästä!</p>

</div>
</div>
<div id="osajoukon-korrespondenssianalyysi" class="section level1">
<h1><span class="header-section-number">Luku 6</span> Osajoukon korrespondenssianalyysi</h1>
<p><strong>k</strong> Osajoukon korrespondenssianalyysin tarve: kuvat menevät tukkoon. Kun muuttujia
on paljon kartat ovat täynnä pisteitä ja niitä on vaikea lukea. Usein myös havaitaan,
että ratkaisun päädimensiot kertovat ylllätyksettömän ilmeisen tarinan, ja
kiinnostavammat yhteydet ovat piilossa ylemmissä dimensioissa (MG ja Pardo, “Vihreä
kirja” ss. 198).</p>
<p><strong>k</strong> Teoreettinen idea: inertian dekomoponointi (taas). Lasketaan ensin
ca-ratkaisu ja rajataan aineisto. Yksinkertainen toteuttaa. Massat ja reunajakaumat
säilyvä, ja siksi aineiston (“pilven”) kokonaisinertia voidaan jakaa osiin
osajoukkojen inertiaksi. Uusia yhteyksiä näkyviin, tarkempi kuva datasta.</p>
<p>Kuvan tukkoisuuteen voi toki vaikuttaa muillakin keinoilla. Muuttujien arvoja voi
yhdistellä, kuvasta voi jättää pois pisteitä joiden kontribuutio on pieni tai kuvaa
voi yksinkertaisesti suurentaa analyysivaiheessa näytöllä.</p>
<p>Kuva-aluetta voi myös rajata johonkin osaan kuvaa. Kaikki pisteet ovat kuitenkin
mukana määräämässä ratkaisun geometriaa.</p>
<p>Rivejä tai sarakkeita voi myös muuttaa passiivisiksi, mutta silloin ei saavuteta
käytännöllistä inertian dekomponointi-ominaisuutta. MCA-jaksossa osajoukon
analysointi on pääasia ja mahdollisia vaihtoehtoja käsitellään hieman lisää.</p>
<p>Lähteet MG ja Prado (2006)<span class="citation">(M. Greenacre ja Pardo <a href="#ref-RefWorks:doc:5a857a44e4b0ed2d44664d87" role="doc-biblioref">2006</a>)</span>,
“vihreä kirja” <span class="citation">(M. Greenacre ja Blasius <a href="#ref-RefWorks:doc:5ab76b43e4b003f4468d1f07" role="doc-biblioref">2006</a>)</span>,
CAiP <span class="citation">(M. J. Greenacre <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d78" role="doc-biblioref">2017</a>)</span>.</p>
<p><strong>k</strong> Simple CA subset</p>
<p><strong>k1</strong> Täydentävät pisteet voi ottaa mukaan jos ne eivät ole rajatusta “pilvestä”.
Esim. rivien osajoukon analyysiin voi ottaa sarakepisteitä täydeäntvinä pisteinä
normaalisti. Osajoukon profiilit muuttuvat, niiden summa ei enään ole yksi,
barysentristä ominaisuutta ei voi suoraan käyttää täydentävien rivipisteiden
koordinaattien laskemiseen.</p>
<div class="figure" style="text-align: center"><span id="fig:maagaCA2sub2map1"></span>
<img src="JH_capaper_files/figure-html/maagaCA2sub2map1-1.png" alt="Ikä, sukupuoli ja maa:Tanska-Saksa-Suomi" width="90%" />
<p class="caption">
Kuva 6.1: Ikä, sukupuoli ja maa:Tanska-Saksa-Suomi
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:maagaCA2sub2map2"></span>
<img src="JH_capaper_files/figure-html/maagaCA2sub2map2-1.png" alt="Ikä, sukupuoli ja maa:Tanska-Saksa-Suomi" width="90%" />
<p class="caption">
Kuva 6.2: Ikä, sukupuoli ja maa:Tanska-Saksa-Suomi
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:maagaCA2sub2map3"></span>
<img src="JH_capaper_files/figure-html/maagaCA2sub2map3-1.png" alt="Ikä, sukupuoli ja maa:Tanska-Saksa-Suomi" width="90%" />
<p class="caption">
Kuva 6.3: Ikä, sukupuoli ja maa:Tanska-Saksa-Suomi
</p>
</div>
<pre><code>## 
## Principal inertias (eigenvalues):
## 
##  dim    value      %   cum%   scree plot               
##  1      0.107090  74.6  74.6  *******************      
##  2      0.024985  17.4  92.0  ****                     
##  3      0.006594   4.6  96.6  *                        
##  4      0.004882   3.4 100.0  *                        
##         -------- -----                                 
##  Total: 0.143551 100.0                                 
## 
## 
## Rows:
##      name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1  | DEf1 |   13  467    5 |  -12   3   0 | -162 464  13 |
## 2  | DEf2 |   15  930   19 | -387 799  21 | -157 131  14 |
## 3  | DEf3 |   19  919   25 | -271 385  13 | -318 533  76 |
## 4  | DEf4 |   23  993   25 | -376 913  30 | -111  80  11 |
## 5  | DEf5 |   17  893   13 | -271 641  11 | -169 252  19 |
## 6  | DEf6 |   23   48   15 |  -64  42   1 |   24   6   1 |
## 7  | DEm1 |   13  827    8 |  172 345   3 | -203 482  21 |
## 8  | DEm2 |   13  855    8 |   93  96   1 | -260 759  34 |
## 9  | DEm3 |   15  874    7 |  -13   3   0 | -238 871  34 |
## 10 | DEm4 |   21  285    8 |   25  11   0 | -126 274  13 |
## 11 | DEm5 |   19  684   10 |  116 174   2 | -198 510  30 |
## 12 | DEm6 |   22  750   22 |  190 260   8 |  261 490  61 |
## 13 | DKf1 |   10  979   27 | -603 949  35 |  107  30   5 |
## 14 | DKf2 |   14  996   89 | -955 960 115 |  184  36  18 |
## 15 | DKf3 |   17  985   98 | -885 933 122 |  210  53  29 |
## 16 | DKf4 |   18  983  104 | -889 950 132 |  165  33  20 |
## 17 | DKf5 |   16 1000   69 | -792 988  92 |   86  12   5 |
## 18 | DKf6 |   12  834   17 | -386 745  17 |  133  89   9 |
## 19 | DKm1 |   15  978   13 | -342 971  17 |   30   7   1 |
## 20 | DKm2 |   13  997   79 | -938 988 104 |   90   9   4 |
## 21 | DKm3 |   13  989   52 | -743 989  69 |  -14   0   0 |
## 22 | DKm4 |   15  962   36 | -563 952  45 |   57  10   2 |
## 23 | DKm5 |   13  682   16 | -314 543  12 |  159 139  13 |
## 24 | DKm6 |   15  291    9 |   45  22   0 |  158 269  15 |
## 25 | FIf1 |   12  951   20 | -346 478  13 | -345 474  55 |
## 26 | FIf2 |   12  941   48 | -680 788  50 | -300 153  42 |
## 27 | FIf3 |   12  952   24 | -335 370  12 | -420 582  82 |
## 28 | FIf4 |   14  999   25 | -323 426  14 | -375 573  82 |
## 29 | FIf5 |   17  982   14 | -185 299   6 | -280 683  55 |
## 30 | FIf6 |   11  704   13 |  217 274   5 | -271 430  33 |
## 31 | FIm1 |    7  624    8 |  -40  10   0 | -323 614  30 |
## 32 | FIm2 |    9  984   26 | -525 640  22 | -385 344  52 |
## 33 | FIm3 |    9  990   12 | -279 412   6 | -331 578  38 |
## 34 | FIm4 |   13  944   11 |   90  67   1 | -324 877  54 |
## 35 | FIm5 |   12  722   14 |  267 426   8 | -222 295  23 |
## 36 | FIm6 |    9  911   11 |  373 785  12 | -150 126   8 |
## 
## Columns:
##     name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1 |    S |   99  731  107 |  276 493  71 |  192 238 147 |
## 2 |    s |  238  832  114 |  218 688 105 |  100 144  94 |
## 3 |      |  168  647   88 |  208 576  68 |   73  70  35 |
## 4 |    e |  261  992  135 |   85  96  17 | -258 896 697 |
## 5 |    E |  234 1000  556 | -582 992 739 |   53   8  27 |</code></pre>
<p><strong>Tulkintaa</strong></p>
<p>Kolmen maan osajoukon ratkaisussa 2. dimensiolla (maltillinen liberaali?) on
inertiasta 17 prosenttia, edellä ollut paljon yksiulotteisempia ratkaisuja. Huono kvaliteetti
on DEf1 (467) ja DEf6 (48!), DEm4 (285). Tanskan havainnoista vanhimmat miehet
(DKm6,291) ovat kaikkein huonoimmin esitettyjä ratkaisussa, ja hieman nuoremmatkin
(DKm5, 682). Suomen aineistossa vain nuoret miehet (FIm1, 624) on esitetty kartalla
huonosti. Kaksi dimensiot selittävät osajoukon kokonaishajonnasta 92%, mutta muutaman
ryhmän hajonta on muissa dimensioissa. Saksan naisten iäkkäin ikäluokka (DEf6)
ja keski-ikäisen miehet (DEm4) vain näyttävät olevan lähekkäin origon tuntumassa,
samoin muutama muu huonosti tasoon sijoitettu piste.</p>
<p>Huonosti kuvatuista pisteistä ei kuva ei siis kerro oikeastaan mitään muuta.</p>
<p>Sarakkeet on esitetty kohtalaisen hyvin, ja symmetrisessä kartassa tärkeimmälle
dimensioille projisodut sarakepisteet ovat odotetussa järjestyksessä.</p>
<p>Kontribuutiokartasta nähdään, että tärkein kontrasti on tiukan erimielisyyden (E)
ja kaikkien muiden vastausvaihtoehtojen välillä. Epävarmojen tai maltillisten (e)
kontrasti hallitsee toista dimensiota, erityisesti S- ja s- kategorioiden kanssa.
Samalla kuvasta näkee (ja numeerisist tuloksista voi vahvistaa), että S-piste on
on lähempänä (kulma on pienempi) pystyakselia. Kontribuutio on suurempi (147 vs.
71 x-akselille). Toisaalta x-akseli selittää selvästi suurimman osan kaikkien muiden
sarakepisteiden inertiasta, ja y-akseli taas lähes täysin e-pisteen inertian.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Belgia, Bulgaria ja Unkari analysoidaan tiiviisti</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="co"># Belgia on vähän välitapaus Bulgarian ja Unkarin ja kolmen ensimmäisen maan</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="co"># kanssa. Kokeiluja voi tehdä neljällä maaryhmällä, kuvan lukukelpoisuus</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co"># ratkaisee.</span></span>
<span id="cb12-5"><a href="#cb12-5"></a></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="co">#BGHUsubset &lt;- c(13:24,61:72)</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co">#BEDEDKFIsubset &lt;- c(1:12, 25:36, 37:48, 49:60)</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co">#DEDKFIsubset &lt;- c(25:36, 37:48, 49:60)</span></span>
<span id="cb12-9"><a href="#cb12-9"></a></span>
<span id="cb12-10"><a href="#cb12-10"></a>BEBGHUsubset &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">13</span><span class="op">:</span><span class="dv">24</span>,<span class="dv">61</span><span class="op">:</span><span class="dv">72</span>)</span>
<span id="cb12-11"><a href="#cb12-11"></a>maagaCA2sub3 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maaga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat,<span class="dt">subsetrow =</span> BEBGHUsubset)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:maagaCA2sub3map1"></span>
<img src="JH_capaper_files/figure-html/maagaCA2sub3map1-1.png" alt="Ikä, sukupuoli ja maa: Belgia-Bulgaria - Unkari" width="90%" />
<p class="caption">
Kuva 6.4: Ikä, sukupuoli ja maa: Belgia-Bulgaria - Unkari
</p>
</div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># Vilkaistaa numeerisia tuloksia, kopioidaan tekstiin jos on tarpeen</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="co"># maagaCA2sub3</span></span>
<span id="cb13-3"><a href="#cb13-3"></a> <span class="kw">summary</span>(maagaCA2sub3)</span></code></pre></div>
<pre><code>## 
## Principal inertias (eigenvalues):
## 
##  dim    value      %   cum%   scree plot               
##  1      0.086111  72.0  72.0  ******************       
##  2      0.018841  15.8  87.8  ****                     
##  3      0.011172   9.3  97.1  **                       
##  4      0.003477   2.9 100.0  *                        
##         -------- -----                                 
##  Total: 0.119602 100.0                                 
## 
## 
## Rows:
##      name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1  | BEf1 |   14  152   19 | -156 152   4 |    2   0   0 |
## 2  | BEf2 |   24  826   24 | -313 824  28 |   13   1   0 |
## 3  | BEf3 |   21  623    7 |  -90 201   2 |  130 422  19 |
## 4  | BEf4 |   24  556    6 |  -65 155   1 |  105 401  14 |
## 5  | BEf5 |   23  355   11 |  115 227   3 |   86 128   9 |
## 6  | BEf6 |   23  810   37 |  396 810  41 |   10   0   0 |
## 7  | BEm1 |   11  288   21 |  246 274   8 |   55  14   2 |
## 8  | BEm2 |   17  333   11 | -144 271   4 |   68  61   4 |
## 9  | BEm3 |   20  531    2 |    6   4   0 |   75 528   6 |
## 10 | BEm4 |   22  620   11 |  197 618  10 |   -8   1   0 |
## 11 | BEm5 |   22  917   18 |  243 620  15 | -168 297  33 |
## 12 | BEm6 |   26  977   33 |  347 782  36 | -173 195  41 |
## 13 | BGf1 |    5  979   23 |  557 549  18 | -492 430  63 |
## 14 | BGf2 |    8  974   32 |  649 875  38 | -219  99  20 |
## 15 | BGf3 |   12 1000   46 |  633 844  54 | -271 155  45 |
## 16 | BGf4 |   10  847   25 |  496 847  30 |    7   0   0 |
## 17 | BGf5 |   14  961   50 |  618 894  62 | -168  66  21 |
## 18 | BGf6 |   18  939   71 |  658 931  92 |  -60   8   4 |
## 19 | BGm1 |    5  999   15 |  608 912  19 |  188  87   9 |
## 20 | BGm2 |    6  892   21 |  526 703  20 | -273 189  25 |
## 21 | BGm3 |    8  994   41 |  677 746  43 | -390 247  64 |
## 22 | BGm4 |    8  669   25 |  508 666  23 |  -34   3   0 |
## 23 | BGm5 |   10  949   24 |  516 947  32 |  -22   2   0 |
## 24 | BGm6 |    9  978   58 |  748 737  60 | -428 241  89 |
## 25 | HUf1 |    7  888   20 |  493 681  19 |  271 207  26 |
## 26 | HUf2 |   11  762   25 |  406 589  20 |  220 173  27 |
## 27 | HUf3 |   12  916   39 |  525 688  37 |  301 227  56 |
## 28 | HUf4 |   11  970   40 |  528 651  36 |  370 319  81 |
## 29 | HUf5 |   12  985   29 |  490 802  32 |  234 183  34 |
## 30 | HUf6 |   13  933   75 |  655 614  64 |  472 319 151 |
## 31 | HUm1 |    6  948   12 |  455 871  14 |  135  77   6 |
## 32 | HUm2 |    9  902   24 |  312 313  10 |  428 589  90 |
## 33 | HUm3 |   13  945   26 |  477 938  33 |  -41   7   1 |
## 34 | HUm4 |   10  965   22 |  503 960  29 |   36   5   1 |
## 35 | HUm5 |   13  993   26 |  478 916  33 |  139  77  13 |
## 36 | HUm6 |    8  839   33 |  560 622  29 |  331 217  46 |
## 
## Columns:
##     name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1 |    S |   99  944  214 |  351 479 142 |  346 465 630 |
## 2 |    s |  238  942  247 |  297 711 244 | -169 231 362 |
## 3 |      |  168  435  107 |  180 426  63 |   26   9   6 |
## 4 |    e |  261  640   65 | -138 639  57 |   -4   0   0 |
## 5 |    E |  234  966  368 | -426 965 494 |   10   1   1 |</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># kahden osaratkaisun kokonaisinertia</span></span>
<span id="cb15-2"><a href="#cb15-2"></a></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co"># 0.143551 + 0.119602 = 0.263153</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="co"># koko datalla 0.263154</span></span></code></pre></div>
<p>Kahden osajoukon inertioiden summa on sama kuin koko aineiston, Selitysasteet
kuitenkin nousevat, mutta vielä oleellisempaa on kahden aika erilaisen ryhmän havaitseminen. Belgian jotkun pisteet: huono kvaliteetti (BEf1, BEf5,BEm1, BEm2). Bulgaria ja Unkari hyvin esitetty. Belgia on pulmallinen tapaus, omissa dimensioissaan.</p>

</div>
<div id="monimuuttuja-korrespondenssianalyysi-mca" class="section level1">
<h1><span class="header-section-number">Luku 7</span> Monimuuttuja-korrespondenssianalyysi (MCA)</h1>
<p><strong>k</strong> MG:n jäsentely CA:n tutkimusasetelmista (within - between), kokoaan myös
edeltävät analyysit “saman katon alle”.</p>
<p><strong>k</strong> Idea: taulukoiden yhdistely “supertaulukoksi” tai matriisiksi, analysoidaan kahden muuttujan
ristiintaulukoinnin laajennuksena useita kahden muuttujan ristiintaulukointeja.</p>
<p><strong>k</strong> MCA stacked&amp;concat - analyysin erikoistapauksena.</p>
<p><strong>k</strong> CA SVD:tä soveltavana ratkaisualgoritmina, jolle “syötetään” sopiva matriisi. Benzecri: löydettettävä vain
matriisi joka dekomponoidaan.</p>
<p><strong>k1</strong> kahden muuttujuajoukon väliset yhteydet</p>
<p><strong>k2</strong> yhden muuttujajoukon muuttujien väliset yhteydet</p>
<p><strong>k3</strong> wrt samples ja wrt variables</p>
<p><strong>k4</strong> Yksinkertaisesta monimutkaisempaan
0. Täydentävät pisteet tulkinnan apuna, yleistyökaluna (“jack of all trades but
master of none”) esitelty ensimmäisenä. Tärkeä lisä kaikissa analyyseissä.</p>
<ol style="list-style-type: decimal">
<li><p>yhteisvaikutusmuuttujat <strong>K4-1</strong>
-max kolmen muuttujan yhtesivaikutusmuuttuja - taulukko harsoontuu</p></li>
<li><p>Yksi “selitettävä” muuttuja, useampi “selittävä” <strong>K4-2"</strong></p></li>
</ol>
<ul>
<li>pinotut taulukot (käytännössä matriisit, helpompi pinota R:ssä, Burtin taulun käyttö)</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Taulukoiden yhdistäminen yleisemmin <strong>K4-3</strong></li>
</ol>
<ul>
<li>monta “selittäjää” ja “selitettävää”: taulukoita päällekkäin ja rinnakkain, lohkomatriisi</li>
<li>ABBA: voidaan esim. jakaa taulukko (viite) osatauluiksi</li>
<li>tästä hieman tarkemmin teorialiitteessä;symmetriset taulut (esim. vastaukset
eri vuosina, isän ja pojan ammatti), matched matrices</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>MCA <strong>K4-4</strong></li>
</ol>
<p><strong>K-n</strong></p>
<p><strong>tulkinnan tärkeimmät periaatteet</strong></p>
<ul>
<li>kaikki erot suhteellisia eroja</li>
<li>ca-ratkaisu approksimaatio; voi olla hyvä, mutta myös huono
-CA on hajonnan (intertian) dekomponoinnin menetelmä.</li>
<li>Toiset (esim. MG,“ranskalaiset”) painottavat graafista menetelmää ja kuvien oikeaa tulkintaa),
voi ymmärtää myös moniulotteisenä skaalauksena (MDS: etsi skaalaus, joka maksimoi
korrelaation) tai moniulotteisena varianssianalyysinä (ANOVA)</li>
<li>tulkinnan tarkennus molemmissa alaluvuissa</li>
</ul>
<p>**edit* Tässä jaksossa korostuu data-analyyin eksplotatiivinen luonne, datan kaivelu
ja näkökulmien muuntelu. Missä dimensiossa yhteydet ja riippuvuudet piileksivät?
Kartta on tässä mielessä kartta(vaikka hieman outo), osoittaa yhdessä numeeristen
tulosten kanssa suuntaa.</p>
<div id="pinotut-ja-yhdistetyt-taulukot-stacked-and-concatenated-tables" class="section level2">
<h2><span class="header-section-number">7.1</span> Pinotut ja yhdistetyt taulukot (stacked and concatenated tables)</h2>
<p>Pinotut taulut: perusidea</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/stacked1.png&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:stackedimg1"></span>
<img src="img/stacked1.png" alt="Pinotut ja yhdistetyt taulut - periaate" width="50%" />
<p class="caption">
Kuva 7.1: Pinotut ja yhdistetyt taulut - periaate
</p>
</div>
<p>Lisättiin kuva</p>
<p>Kun yhdistty taulu rakennetaan matriiseista, karttojen muuttujanimiä joudutaan
siistimään. Kuvat voivat myös herkästi kääntyä akselien ympäri, ne kannataa
kääntää vertailun helpottamiseksi samanlaisiksi kuin muut.</p>
<div class="figure" style="text-align: center"><span id="fig:concat1map1"></span>
<img src="JH_capaper_files/figure-html/concat1map1-1.png" alt="Q1b: Lapsi kärsii jos äiti käy työssä" width="90%" />
<p class="caption">
Kuva 7.2: Q1b: Lapsi kärsii jos äiti käy työssä
</p>
</div>
<p><strong>Kartan tulkinta; miten eroaa yhteisvaikutusmuuttujan analyysistä?</strong></p>
<p>Perustulkinta akseleille ei muutu, eikä maapisteiden sijoittuminenkaan.</p>
<p>Mikä on maapisteiden ja kahden selittävän (eksogeenisen) muuttujan pisteiden yhteys sarakepisteisiin?</p>
<p>Koko aineiston kartassa ikäluokkapisteet ja sukupuolipisteet ovat pakkautuneet maapisteitä tiiviimmin origon ympärille. Ikäluokkapisteiden (koko aineiston keskiarvot) selvä kontrasti on vanhimman (a6)ja toiseksi nuorimman välillä 1. dimenision suuntaan.</p>
<p>Ikäluokkapisteet ovat koko aineiston keskiarvopisteitä, niiden sijantia voi tulkita pistejoukko kerrallaan kuten maapisteidenkin. Mitään yhteisvaikutuksia ei analysoida eksplisiittisesti. Karttaa voi verrata sukupuoli-ikäluokka yhteisvaikutusmuuttujan analyysin aiemmin. Naispiste on tiukassa nipussa ikäluokkien a3 ja a4 kanssa aivan origon vasemmalla puolella. Miesten keskiarvopiste on hieman origosta oikealle, yhdessä ikäluokan a5 kanssa.</p>
<p>Taustamuuttujat: numeeristen tulosten tarkastelua</p>
<p>Lisäpisteet on hyvin esitetty, niiden etäisyyksiä voi luotettavasti arvioida kuvasta. Poikkeus on nuorin ikäluokka (a1, qlt = 501). Inertian osuudet (inr) ovat yhtä vaatimattomia kuin Belgian (28) ja Saksan (29), (m =20, f = 17, a2 = 40, a6 = 83), samoin kontribuutiot akseleiden inertiaan. 1. dimension kontribuutio (ctr) on suuri (&gt;800) kaikilla paitsi nuorimmalla ikäryhmällä (a1) jolla 2. dimension selittää lähes puolet sen inertiasta (470).</p>
<p>Vilkaistaan taas numeerisa tuloksia, varmistetaan tulkinta. Tämän voi poistaa
lopullisesta versiosta.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">summary</span>(Concat1jh.CA1)</span></code></pre></div>
<pre><code>## 
## Principal inertias (eigenvalues):
## 
##  dim    value      %   cum%   scree plot               
##  1      0.056877  77.2  77.2  *******************      
##  2      0.010116  13.7  91.0  ***                      
##  3      0.003923   5.3  96.3  *                        
##  4      0.002711   3.7 100.0  *                        
##         -------- -----                                 
##  Total: 0.073628 100.0                                 
## 
## 
## Rows:
##      name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1  |   BE |   82  498   28 |   86 295  11 |  -71 203  41 |
## 2  |   BG |   38  907  204 |  599 901 238 |   52   7  10 |
## 3  |   DE |   70  498   29 |  -95 298  11 |  -78 200  43 |
## 4  |   DK |   57  990  310 | -573 816 328 |  265 175 394 |
## 5  |   FI |   45  987   75 | -225 419  40 | -262 568 309 |
## 6  |   HU |   41  856  168 |  486 778 169 |  153  78  95 |
## 7  |    m |  156  910   20 |   91 873  22 |  -19  37   5 |
## 8  |    f |  178  910   17 |  -79 873  20 |   16  37   5 |
## 9  |   a1 |   39  501    8 |  -22  31   0 |  -84 470  27 |
## 10 |   a2 |   50  958   40 | -236 939  49 |  -34  19   6 |
## 11 |   a3 |   56  958    7 |  -94 958   9 |   -1   0   0 |
## 12 |   a4 |   63  841    6 |  -74 841   6 |   -1   0   0 |
## 13 |   a5 |   62  868    5 |   71 801   6 |  -21  67   3 |
## 14 |   a6 |   63  957   83 |  288 852  92 |  101 104  63 |
## 
## Columns:
##     name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1 |    S |   99  786  147 |  268 661 126 |  117 125 134 |
## 2 |    s |  238  843  172 |  205 787 175 |   55  56  70 |
## 3 |      |  168  640   80 |  150 639  66 |   -6   1   1 |
## 4 |    e |  261  970   97 |  -35  44   6 | -160 926 657 |
## 5 |    E |  234 1000  504 | -390 962 628 |   77  38 138 |</code></pre>
<p><strong>edit</strong> Galkussa myös subsetCA-kartta, josta Unkari ja Bulgaria on jätetty pois.
Ei mitään oleellista lisätietoa, joten ei esitetä tässä. Ensimmäisen dimension
osuus interitasta laskee ja toisen kasvaa. Kartan selkeys ei parane.</p>
<div class="figure" style="text-align: center"><span id="fig:concat1map2"></span>
<img src="JH_capaper_files/figure-html/concat1map2-1.png" alt="Q1b: Lapsi kärsii jos äiti käy työssä" width="90%" />
<p class="caption">
Kuva 7.3: Q1b: Lapsi kärsii jos äiti käy työssä
</p>
</div>
<p>Sarekkeista E-sarake (täysin eri mieltä) määrittää akseleita vahvasti, kontrastina
kaksi konservatiivista vastausta (S ja s) ja myös neutraali vaihtoehto (e).
Numeerista tuloksista nähdään, että ikäluokat vaikuttavat juuri ensimmäiseen tärkeimpään dimensioon.</p>
<p>Belgian ja Saksan pisteet on esitetty kartassa huonosti, samoin nuorin ikäluokka.
Muiden pisteiden sijaintia voidaan arvioida myös sarakkeiden ja rivipisteiden
välillä. Ikäluokkien kontrasti on selvä toiseksi nuorimman (a2) ja vanhimman (a6)
välillä.</p>
<p><strong>edit</strong> Ikäluokkapisteet asymmetrisessä kontribuutiokartassa sarakkeiden keskiarvona,
samoin maapisteet. Esimerkiksi vanhimmassa ikäluokassa on suhteellisesti paljon
vastauksia samaa mieltä olevia ja neutraaleja ja vähän erimielisiä.</p>
<p>Hyvin yksinkertainen esimerkki.</p>
<p><strong>edit</strong> Mutta tässä esimerkkiaineisto, jossa ei puuttuvia tietoja. Ne olisivatkin
aika pulmallisia, varianssin dekomponointi ei onnistu jos reunajakaumat ovat
alitauluissa erilaisia.</p>
</div>
<div id="matched-matrices" class="section level2">
<h2><span class="header-section-number">7.2</span> Matched matrices</h2>
<p><strong>k</strong> lyhyesti matriisien yhdistelystä hyvin yleisenä analyysin menetelmänä.
Voidaan tarkastella luonteeltaan erilaisten muuttujaryhmien tai muuttujien
yhteyksiä kuten edellisessä esimerkissä.</p>
<p><strong>Huom! (16.10.20</strong> Jos ja kun ei tehdä analyysiä, ei tarvitse omaa jaksoa.
Kannattaa mainita, ehkävain teoriajaksossa? Idea: matriisien yhdistämisellä
saadaan ote monenlaiseen tutkimusongelmaan. Benzecri: data-analyysissä on vain
löydettävä oikea matriisi joka diagonalisoidaan.</p>
<p>Ref:CAip ss. 177 <span class="citation">(M. J. Greenacre <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d78" role="doc-biblioref">2017</a>)</span>, HY2017_MCA, Greenacre JAS 2013
(sovellus ISSP 1989,4 kysymystä ‘pitäisikö äidin olla kotona’, 8 maata), tässä
artikkelissa “SVD-based methods”,joista yksi CA (muut biplots, PCA, compositional data/log ratios).
<span class="citation">(Greenacre <a href="#ref-RefWorks:doc:5b6f159ce4b0bc0f31734b76" role="doc-biblioref">2003</a>)</span></p>
<p><strong>ABBA</strong>“We consider the joint analysis of two matched matrices which have common
rows and columns, for example multivariate data observed at two time points or split
according to a dichotomous variable. Methods of interest include principal components
analysis for interval-scaled data, correspondence analysis for frequency data, log-ratio
analysis of compositional data and linear biplots in general, all of which depend on the
singular value decomposition. A simple result in matrix algebra shows that by setting up
two matched matrices in a particular block format, matrix sum and difference components
can be analysed using a single application of the singular value decomposition algorithm.
The methodology is applied to data from the International Social Survey Program
comparing male and female attitudes on working wives across eight countries. The resulting
biplots optimally display the overall cross-cultural differences as well as the male–female
differences. The case of more than two matched matrices is also discussed.”</p>
<p>Edellisen menetelmän variantti, jossa ryhmien väliset ja sisäiset erot saadaan
esiin. Inertian jakaminen.</p>
<p>Samanlaisten rivien ja sarakkeiden kaksi samankokoista taulua, esimerkiksi
sukupuolivaikutusten arviointi. Alkuperäinen taulukko jaetaan kahdeksi tauluksi
sukupuolen mukaan. Matriisien yhdistäminen (concatenation) riveittäin tai
sarakkeittain ei näytä optimaalisesti mm - matriisien eroja.</p>
<p>Ryhmien välisen ja ryhmien sisäinen inertian erottaminen, <strong>ABBA</strong>
on yksi ratkaisu (ABBA matrix, teknisesti block circular matrix).</p>
<p>Luokittelu voi olla myös kahden indikaattorimuuttujan avulla jako neljään
taulukkoon (esim. miehet vs. naiset länsieuroopassa verratuna samaan asetelmaan
itä-Euroopassa). Samaa ideaa laajennetaan.</p>
<p>Esimerkkinä “Attitudes to women working in 2012”.</p>
</div>
<div id="mca---monimuuttujakorrespondenssianalyysi" class="section level2">
<h2><span class="header-section-number">7.3</span> MCA - monimuuttujakorrespondenssianalyysi</h2>
<p><strong>k</strong> Terminologiasta: monta muuttujaa on jo ollut käytössä. MCA on monimuuttujamenetelmä
samassa mielessä kuin faktorianalyysi. Analysoidaan usean statukseltaan samanlaisen
muuttujan välisiä suhteita, ja myös niiden yhteyksiä tutkimusongelman kannalta
“eksogeenisiin” taustamuuttujiin tai “selittäjiin”. Surveytutkimuksen kyselylomakkeen
kysymyspatterit luotaavat tietoa joistain taustalla olevista asenteista.</p>
<p><strong>edit</strong> yksi kappale, jossa tutkimusasetelmaa verrataan tilastollisten mallien
asetelmaan? Jako “selittäjiin” ja selitettävään, moniyhtälömallit?
Faktorianalyysi tässä selkein vertailukohde</p>
<p><strong>k</strong> Matemaattisesti kaikki muuttuu paljon mutkikkaammaksi, ja yksinkertaisen
perustapauksen selkeät tulkinnat eivät toimi. Tärkeä asia: CA:n skaalausominaisuudet ja
visuaalinen tulkinta pätevät edelleen.</p>
<p><strong>edit</strong> Teorialiitteessä tästä enemmän, ranskalaiset hieman eri mieltä
<strong>Viitteitä</strong></p>
<p>MG ja MG&amp;Prado ovat tutkineet ISSP-datalla tätä ongelmaa.
Biplots In practice - kirja <span class="citation">(Greenacre <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d7c" role="doc-biblioref">2010</a>)</span>, ss.142-
“dimensions of middleness”. Mg ja Prado artikkelissaan
<span class="citation">(M. Greenacre ja Pardo <a href="#ref-RefWorks:doc:5a857a44e4b0ed2d44664d87" role="doc-biblioref">2006</a>)</span> ja samasta teemasta laajentaen
kokoomateoksessa <span class="citation">(M. Greenacre ja Blasius <a href="#ref-RefWorks:doc:5ab76b43e4b003f4468d1f07" role="doc-biblioref">2006</a>)</span>, ss. 197-217.
Aineistona jälkimmäisessä tutkimuksessa on sama kysymyssarja kuin tässä 1994
datasta. Kysymyksissä on jonkin verran eroja. Ensimmäisessä artikkelissa he kommentoivat vertaisarvioitsijoiden ehdotuksia. Kuvia voisi selkiyttää esittämällä vain osan
pisteistä sarjassa karttoja, mutta ratkaisu perustuisi siinäkin koko dataan ja
sitä nimenomaan ei haluta. Toinen ehdotus on yhdistää ne vastausvaihtoehdot jotka
eivät ole tutkimuksen kohteena yhdeksi yhdistetyksi kategoriaksi. Tällöin osajoukon
korrespondenssianalyysin kätevä inertia dekomponointi osajoukille ei toimisi. Ratkaisu
ei toimi ollenkaan yleisimmissä osajoukoissa.</p>
<p><strong>k</strong> Data</p>
<p>Taustamuuttujien taulukoissa on yllättävän isoja eroja, jotkut taulukoiden luokat
ovat nollia tai hyvin vähän havaintoja. Luokkia pitäisi ehkä yhdistellä,jo pelkästään
“kuvaroskan” takia. Ei tehdä.</p>
<p><strong>k</strong> Puuttuvat havainnot, muutama numero vain mitä “listwise delete” saa aikaan.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co">#Puuttuvien tietojen yleiskuva</span></span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="co"># Puuttuvat tiedot aineistossa - viite datan dokumentointiin jossa taulukot.</span></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="co"># Vaihtelee maittain ja muuttujittain, paljon.</span></span>
<span id="cb19-5"><a href="#cb19-5"></a></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="co"># Koko data (G1_1_data2.Rmd - skriptissä valitut muuttujat ja 25 maata)</span></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="co">#</span></span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="co">#sum(!complete.cases(ISSP2012jh1d.dat)) = 9455</span></span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="co">#dim(ISSP2012jh1d.dat) = 32823</span></span>
<span id="cb19-10"><a href="#cb19-10"></a><span class="co">#9455/32823 = 0.2880602</span></span>
<span id="cb19-11"><a href="#cb19-11"></a></span>
<span id="cb19-12"><a href="#cb19-12"></a><span class="co"># Puuttuvat tiedot valitussa MCA-aineistossa</span></span>
<span id="cb19-13"><a href="#cb19-13"></a></span>
<span id="cb19-14"><a href="#cb19-14"></a><span class="co">#missingMCAvars1 &lt;-  c(&quot;Q1a&quot;,&quot;Q1b&quot;, &quot;Q1c&quot;, &quot;Q1d&quot;,&quot;Q1e&quot;,&quot;Q2a&quot;,&quot;Q2b&quot;,&quot;edu&quot;,</span></span>
<span id="cb19-15"><a href="#cb19-15"></a><span class="co">#                 &quot;sosta&quot;, &quot;urbru&quot;, &quot;maa&quot;, &quot;ika&quot;, &quot;sp&quot; )</span></span>
<span id="cb19-16"><a href="#cb19-16"></a><span class="co">#missingTestMCA1.dat &lt;- ISSP2012jh1d.dat %&gt;% select(all_of(missingMCAvars1))</span></span>
<span id="cb19-17"><a href="#cb19-17"></a></span>
<span id="cb19-18"><a href="#cb19-18"></a><span class="co">#sum(!complete.cases(missingTestMCA1.dat)) = 6101</span></span>
<span id="cb19-19"><a href="#cb19-19"></a><span class="co">#dim(missingTestMCA1.dat) = 32823</span></span>
<span id="cb19-20"><a href="#cb19-20"></a><span class="co">#6101/32823 = 0.1858758 Puuttellisten havaintojen osuus.</span></span></code></pre></div>
<p>Koko tähän tutkimukseen valitussa aineistossa (25 maata ja muuttujat, poistettu
havainnot joissa ikä tai sukupuoli puuttuu) 71% havainnoista on kaikki tiedot.</p>
<p>MCA-analyyseihin valitun 7 + 3 = 10 muuttujan aineiston havainnoista 81% on
vailla puuttuvia tietoja. Jos puuttuvat tiedot poistetaan (ns. “listwise delete”,
poistetaan jos yksi tai useampi tieto puuttuu) viidesosa datasta jää pois.</p>
<p><strong>k</strong> lyhyt kappale - puuttuvien tietojen käsittely on laaja aihe. Otantamenetelmissä ja survey-aineistojen (kyselytutkimusten) oppaissa käsitelty monipuolisesti.</p>
<p><strong>k</strong> Miten liittyy tähän? CA on koko aineiston kuvailevaa analyysiä, ei päättelyä
otoksesta perusjoukon tasolle. Miten puuttuvia vastauksia voisi kuvailla? Toisaalta
edellisen jakson menetelmien soveltaminen on mahdotonta, jos jotain ei tehdä
(reunajakaumat oltava samoja).</p>
<p>MCA1 - seitsemän kysymystä (jokaisessa viisi vaihtoehtoa)</p>
<pre><code>## [1] 32823     7</code></pre>
<div class="figure" style="text-align: center"><span id="fig:MCA1map1"></span>
<img src="JH_capaper_files/figure-html/MCA1map1-1.png" alt="MCA: Seitsemän kysymystä - 25 maata, kartta 1" width="90%" />
<p class="caption">
Kuva 7.4: MCA: Seitsemän kysymystä - 25 maata, kartta 1
</p>
</div>
<p><strong>k</strong> Perustulkinta: Inertian selitysosuudet ovat paljon pienempiä, ja ratkaisu
on selvästi kaksiulotteinen. Puuttuvat vastaukset erottuvat omana ryhmänä, ja
varsinaiset vastaukset ovat pakkautuneet y-akselin oikealle puolelle. Niiden erot
näkyvät vain toisessa dimensiossa. Ensimmäinen dimensio kuvaa vastaamattomuutta (syystä tai toisesta) vs. kaikkia vastauksia.</p>
<p>Pystyakselin suuntaan kontrasti näyttäisi olevan konservatiiviset ylhäällä,
modernit ja liberaalimmat alhaalla. Pisteitä on vaikea erottaa toisistaan.</p>
<p>Karttaa voi parantaa lisäämällä siihen vastaajien (n= 32 823) pisteet (viite MG - ekologiakirja, jossa vanhempi ISSP-data).</p>
<div class="figure" style="text-align: center"><span id="fig:MCA1map2"></span>
<img src="JH_capaper_files/figure-html/MCA1map2-1.png" alt="MCA: Seitsemän kysymystä - 25 maata, kartta 2" width="90%" />
<p class="caption">
Kuva 7.5: MCA: Seitsemän kysymystä - 25 maata, kartta 2
</p>
</div>
<p>Jokainen havainto on sarakevektoreiden keskiarvopiste. Sarakevektoreita ei voi
tulkita yhtä selkeästi kuin yksinkertaisessa korrespondenssianalyysissä. Ne eivät
edusta kysymystä vaan kysymyksen yhtä vastauskategoriaa, pitkä jono nollia ja ykkösiä.
Rivipiste on vastauksiaan vastaavien sarakepisteiden keskiarvopiste. Jos vastaaja on valinnut
vaihtoehdot (a1S, a2s,…, b2?) se on näiden pisteiden keskiarvopiste.</p>
<p>Oleellista MCA-kartan tulkinnassa on kuitenkin yleiskuvan muodostaminen, geometrinen
tulkinta on hieman hankala. Skaalausominaisuudet MCA kuitenkin säilyttää (<strong>Viite</strong>,
teorialiitteessä hieman tarkemmin).</p>
<p>Myös riviprofiilit ovat samanlaisia, jokaisella rivilla on kuudessa kategoriassa (vastaukset
ja puuttuva tieto) nollia ja yksi ykkönen. Rivien välistä etäisyyttä määrittelevä ainoastaa
“erimielisyydet”, ja GDA-kirjan (<strong>viite</strong>) ohjeen mukaan MCA-karttojen tulkinta pitäisi aloittaa
yksilöiden pilven ääripäistä.</p>
<p>Pistepilven muoto kertoo , kuinka pienenevä joukko vastaajia lähestyy kiilana
puuttivien tietojen pisteitä. Kaikkiin kysymyksiin vastanneet ovat massana kuvan oikeassa laidassa. Pistepilvet
oikealta vasemmalle kuvaavat kuinka moneen kysymykseen on jätetty vastaamatta.</p>
<p>(MG-vastaava kuva <span class="citation">(Greenacre <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d7c" role="doc-biblioref">2010</a>)</span>, luku 14. “dimenisions of middleness”.)
Pieni joukko määrää koko kartan koordinaatiston.</p>
<p><strong>Osajoukon MCA</strong></p>
<p><strong>k</strong> Osajoukon MCA ratkaisee ongelman tyylikkäästi.</p>
<div class="figure" style="text-align: center"><span id="fig:subsetMCA1map1"></span>
<img src="JH_capaper_files/figure-html/subsetMCA1map1-1.png" alt="MCA: Seitsemän kysymystä - 25 maata, kartta 3" width="90%" />
<p class="caption">
Kuva 7.6: MCA: Seitsemän kysymystä - 25 maata, kartta 3
</p>
</div>
<p><strong>k</strong> Tulkinta: kontrasti “ääripäiden” välillä, vahvat mielipiteet (S ja E) hallitsevat vasenta alakulmaa ja oikeaa laitaa x-akselin tuntumassa. Maltilliset
vastaukset ja neutraali vaihtoehto ovat ylhäällä vasemmalla.</p>
<p><strong>k</strong> Johtopäätös: seitsemän kysymystä erottelee hyvin vastaajat
liberaali - konservatiivi - aksellilla. Maltilliset ja neutraalit vastaukset sijaitsevat ääripäiden välissä. Karttaan voi hahmotella diagonaalin suuntaisen
akselin vahvojen mielipiteiden ryppäiden välille. Muut vastaukset ovat
ns. kaariefektin mukaisesti näiden välisellä U-muotoisella linjalla. Tämä kuuluisa Guttan efekti kertoo järjestysasteikon muuttujien korrelaatiosta, hyvä asia kun
kysymyksillä luodataan asenteita naisten työssäkäyntiin. Kaariefekti on myös “geometrinen välttämättömyys”, tarkemmin teorialiitteessä.</p>
<div class="figure" style="text-align: center"><span id="fig:subsetMCA1map2"></span>
<img src="JH_capaper_files/figure-html/subsetMCA1map2-1.png" alt="MCA: Seitsemän kysymystä - 25 maata, kartta 4" width="90%" />
<p class="caption">
Kuva 7.7: MCA: Seitsemän kysymystä - 25 maata, kartta 4
</p>
</div>
<p>Kun kartalle lisätään havainnot, nähdään selvästi kuinka suuri hajonta on havaintojen
pilvessä verrattuna vastauskategorioiden pilveen.</p>
<p>Asymmetrinen kartta näyttäisi olevan paras vaihtoehto, vastausvaihtoehdot erottuvat selvemmin.</p>
<div class="figure" style="text-align: center"><span id="fig:subsetMCA1map3"></span>
<img src="JH_capaper_files/figure-html/subsetMCA1map3-1.png" alt="MCA: Seitsemän kysymystä - 25 maata, kartta 5" width="90%" />
<p class="caption">
Kuva 7.8: MCA: Seitsemän kysymystä - 25 maata, kartta 5
</p>
</div>
<p><strong>edit1</strong> Jostain syystä en saa toimimaan mjca-funktiossa subsecat - parametrin kanssa
täydentäviä muuttujia supcol.</p>
<p><strong>edit2</strong>
<strong>MCA - numeeriset tulokset</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw">summary</span>(Qmuuttujat2.mca)</span></code></pre></div>
<pre><code>## 
## Principal inertias (eigenvalues):
## 
##  dim    value      %   cum%   scree plot               
##  1      0.129087  55.0  55.0  ***************          
##  2      0.064296  27.4  82.4  *******                  
##  3      0.014807   6.3  88.7  **                       
##  4      0.008871   3.8  92.5  *                        
##  5      0.000538   0.2  92.7                           
##  6      0.000221   0.1  92.8                           
##  7      0.000156   0.1  92.9                           
##  8      6.9e-050   0.0  92.9                           
##  9      1e-06000   0.0  92.9                           
##         -------- -----                                 
##  Total: 0.234728                                       
## 
## 
## Columns:
##      name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1  |  a1S |   48  975   29 |  441 916  73 | -112  59   9 |
## 2  |  a1s |   54  869   20 | -117 206   6 |  210 663  37 |
## 3  |  a1? |   15  653   27 | -354 626  14 |   73  26   1 |
## 4  |  a1e |   18  788   29 | -451 709  28 | -150  79   6 |
## 5  |  a1E |    5  884   30 | -339 113   4 | -887 771  56 |
## 6  |  b1S |   12  818   37 | -367 133  12 | -831 685 128 |
## 7  |  b1s |   37  696   28 | -387 689  42 |  -39   7   1 |
## 8  |  b1? |   26  527   25 | -194 269   8 |  189 258  14 |
## 9  |  b1e |   39  555   25 |   98  67   3 |  266 488  43 |
## 10 |  b1E |   24  889   43 |  821 858 126 | -156  31   9 |
## 11 |  c1S |   12  826   38 | -379 141  14 | -836 685 134 |
## 12 |  c1s |   36  698   29 | -393 692  43 |  -35   6   1 |
## 13 |  c1? |   26  517   25 | -198 282   8 |  181 235  13 |
## 14 |  c1e |   38  550   26 |   79  41   2 |  281 509  46 |
## 15 |  c1E |   26  890   43 |  815 865 134 | -137  24   8 |
## 16 |  d1S |   12  851   34 | -247  80   6 | -768 771 112 |
## 17 |  d1s |   33  751   26 | -347 744  31 |  -35   8   1 |
## 18 |  d1? |   32  561   23 | -157 336   6 |  129 226   8 |
## 19 |  d1e |   34  620   24 |   72  47   1 |  249 572  33 |
## 20 |  d1E |   22  944   38 |  791 932 106 |  -91  12   3 |
## 21 |  e1S |   15  910   31 | -142  44   2 | -631 866  90 |
## 22 |  e1s |   36  752   23 | -263 738  19 |   35  13   1 |
## 23 |  e1? |   34  350   22 |  -56  70   1 |  112 279   7 |
## 24 |  e1e |   32  597   23 |   56  48   1 |  189 549  18 |
## 25 |  e1E |   15 1012   32 |  726 985  62 | -119  26   3 |
## 26 |  a2S |   49 1005   24 |  335 870  43 | -132 134  13 |
## 27 |  a2s |   59  989   19 | -154 428  11 |  176 561  28 |
## 28 |  a2? |   22  584   24 | -203 582   7 |  -12   2   0 |
## 29 |  a2e |    8  794   26 | -338 565   7 | -215 228   6 |
## 30 |  a2E |    2  870   27 |   33   1   0 | -851 869  20 |
## 31 |  b2S |   12  922   33 | -345 173  11 | -718 750  94 |
## 32 |  b2s |   22  783   28 | -431 736  32 | -108  46   4 |
## 33 |  b2? |   27  640   25 | -281 582  16 |   89  58   3 |
## 34 |  b2e |   40  711   24 |  -76  53   2 |  269 658  45 |
## 35 |  b2E |   39  939   37 |  630 932 119 |  -55   7   2 |</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="kw">summary</span>(Qmuuttujat2.mca)</span></code></pre></div>
<pre><code>## 
## Principal inertias (eigenvalues):
## 
##  dim    value      %   cum%   scree plot               
##  1      0.129087  55.0  55.0  ***************          
##  2      0.064296  27.4  82.4  *******                  
##  3      0.014807   6.3  88.7  **                       
##  4      0.008871   3.8  92.5  *                        
##  5      0.000538   0.2  92.7                           
##  6      0.000221   0.1  92.8                           
##  7      0.000156   0.1  92.9                           
##  8      6.9e-050   0.0  92.9                           
##  9      1e-06000   0.0  92.9                           
##         -------- -----                                 
##  Total: 0.234728                                       
## 
## 
## Columns:
##      name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr  
## 1  |  a1S |   48  975   29 |  441 916  73 | -112  59   9 |
## 2  |  a1s |   54  869   20 | -117 206   6 |  210 663  37 |
## 3  |  a1? |   15  653   27 | -354 626  14 |   73  26   1 |
## 4  |  a1e |   18  788   29 | -451 709  28 | -150  79   6 |
## 5  |  a1E |    5  884   30 | -339 113   4 | -887 771  56 |
## 6  |  b1S |   12  818   37 | -367 133  12 | -831 685 128 |
## 7  |  b1s |   37  696   28 | -387 689  42 |  -39   7   1 |
## 8  |  b1? |   26  527   25 | -194 269   8 |  189 258  14 |
## 9  |  b1e |   39  555   25 |   98  67   3 |  266 488  43 |
## 10 |  b1E |   24  889   43 |  821 858 126 | -156  31   9 |
## 11 |  c1S |   12  826   38 | -379 141  14 | -836 685 134 |
## 12 |  c1s |   36  698   29 | -393 692  43 |  -35   6   1 |
## 13 |  c1? |   26  517   25 | -198 282   8 |  181 235  13 |
## 14 |  c1e |   38  550   26 |   79  41   2 |  281 509  46 |
## 15 |  c1E |   26  890   43 |  815 865 134 | -137  24   8 |
## 16 |  d1S |   12  851   34 | -247  80   6 | -768 771 112 |
## 17 |  d1s |   33  751   26 | -347 744  31 |  -35   8   1 |
## 18 |  d1? |   32  561   23 | -157 336   6 |  129 226   8 |
## 19 |  d1e |   34  620   24 |   72  47   1 |  249 572  33 |
## 20 |  d1E |   22  944   38 |  791 932 106 |  -91  12   3 |
## 21 |  e1S |   15  910   31 | -142  44   2 | -631 866  90 |
## 22 |  e1s |   36  752   23 | -263 738  19 |   35  13   1 |
## 23 |  e1? |   34  350   22 |  -56  70   1 |  112 279   7 |
## 24 |  e1e |   32  597   23 |   56  48   1 |  189 549  18 |
## 25 |  e1E |   15 1012   32 |  726 985  62 | -119  26   3 |
## 26 |  a2S |   49 1005   24 |  335 870  43 | -132 134  13 |
## 27 |  a2s |   59  989   19 | -154 428  11 |  176 561  28 |
## 28 |  a2? |   22  584   24 | -203 582   7 |  -12   2   0 |
## 29 |  a2e |    8  794   26 | -338 565   7 | -215 228   6 |
## 30 |  a2E |    2  870   27 |   33   1   0 | -851 869  20 |
## 31 |  b2S |   12  922   33 | -345 173  11 | -718 750  94 |
## 32 |  b2s |   22  783   28 | -431 736  32 | -108  46   4 |
## 33 |  b2? |   27  640   25 | -281 582  16 |   89  58   3 |
## 34 |  b2e |   40  711   24 |  -76  53   2 |  269 658  45 |
## 35 |  b2E |   39  939   37 |  630 932 119 |  -55   7   2 |</code></pre>
<p>Vilkaistaan 3d-ratkaisua - onko kolmella keskimmäisellä vaihtoehdolla “dimenison
of middleness”?</p>
<p><strong>edit</strong> tämä poistetaan lopullisesta versiosta.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>Qmuuttujat2d3  &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>, <span class="dt">nd =</span> <span class="dv">3</span>,<span class="dt">subsetcat=</span>eiPvastaukset)</span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="kw">summary</span>(Qmuuttujat2d3)</span></code></pre></div>
<pre><code>## 
## Principal inertias (eigenvalues):
## 
##  dim    value      %   cum%   scree plot               
##  1      0.129087  55.0  55.0  ***************          
##  2      0.064296  27.4  82.4  *******                  
##  3      0.014807   6.3  88.7  **                       
##  4      0.008871   3.8  92.5  *                        
##  5      0.000538   0.2  92.7                           
##  6      0.000221   0.1  92.8                           
##  7      0.000156   0.1  92.9                           
##  8      6.9e-050   0.0  92.9                           
##  9      1e-06000   0.0  92.9                           
##         -------- -----                                 
##  Total: 0.234728                                       
## 
## 
## Columns:
##      name   mass  qlt  inr    k=1 cor ctr    k=2 cor ctr    k=3 cor ctr  
## 1  |  a1S |   48  976   29 |  441 916  73 | -112  59   9 |  -18   1   1 |
## 2  |  a1s |   54  966   20 | -117 206   6 |  210 663  37 |   81  98  24 |
## 3  |  a1? |   15  786   27 | -354 626  14 |   73  26   1 | -163 133  26 |
## 4  |  a1e |   18  837   29 | -451 709  28 | -150  79   6 | -119  49  17 |
## 5  |  a1E |    5  935   30 | -339 113   4 | -887 771  56 |  229  51  16 |
## 6  |  b1S |   12  869   37 | -367 133  12 | -831 685 128 |  226  51  41 |
## 7  |  b1s |   37  798   28 | -387 689  42 |  -39   7   1 | -149 102  55 |
## 8  |  b1? |   26  573   25 | -194 269   8 |  189 258  14 |  -80  46  11 |
## 9  |  b1e |   39  836   25 |   98  67   3 |  266 488  43 |  201 281 107 |
## 10 |  b1E |   24  910   43 |  821 858 126 | -156  31   9 | -129  21  27 |
## 11 |  c1S |   12  876   38 | -379 141  14 | -836 685 134 |  226  50  43 |
## 12 |  c1s |   36  805   29 | -393 692  43 |  -35   6   1 | -155 107  58 |
## 13 |  c1? |   26  571   25 | -198 282   8 |  181 235  13 |  -87  54  13 |
## 14 |  c1e |   38  843   26 |   79  41   2 |  281 509  46 |  213 293 116 |
## 15 |  c1E |   26  908   43 |  815 865 134 | -137  24   8 | -119  18  25 |
## 16 |  d1S |   12  902   34 | -247  80   6 | -768 771 112 |  197  51  32 |
## 17 |  d1s |   33  828   26 | -347 744  31 |  -35   8   1 | -112  77  28 |
## 18 |  d1? |   32  647   23 | -157 336   6 |  129 226   8 |  -80  86  14 |
## 19 |  d1e |   34  896   24 |   72  47   1 |  249 572  33 |  173 276  69 |
## 20 |  d1E |   22  956   38 |  791 932 106 |  -91  12   3 |  -90  12  12 |
## 21 |  e1S |   15  949   31 | -142  44   2 | -631 866  90 |  135  40  18 |
## 22 |  e1s |   36  793   23 | -263 738  19 |   35  13   1 |  -62  42  10 |
## 23 |  e1? |   34  475   22 |  -56  70   1 |  112 279   7 |  -75 126  13 |
## 24 |  e1e |   32  847   23 |   56  48   1 |  189 549  18 |  128 250  35 |
## 25 |  e1E |   15 1023   32 |  726 985  62 | -119  26   3 |  -78  11   6 |
## 26 |  a2S |   49 1005   24 |  335 870  43 | -132 134  13 |   -2   0   0 |
## 27 |  a2s |   59 1011   19 | -154 428  11 |  176 561  28 |   35  22   5 |
## 28 |  a2? |   22  770   24 | -203 582   7 |  -12   2   0 | -115 186  19 |
## 29 |  a2e |    8  796   26 | -338 565   7 | -215 228   6 |   23   3   0 |
## 30 |  a2E |    2  920   27 |   33   1   0 | -851 869  20 |  202  49   5 |
## 31 |  b2S |   12  961   33 | -345 173  11 | -718 750  94 |  162  38  21 |
## 32 |  b2s |   22  873   28 | -431 736  32 | -108  46   4 | -151  91  35 |
## 33 |  b2? |   27  741   25 | -281 582  16 |   89  58   3 | -117 101  25 |
## 34 |  b2e |   40  939   24 |  -76  53   2 |  269 658  45 |  159 228  68 |
## 35 |  b2E |   39  944   37 |  630 932 119 |  -55   7   2 |  -45   5   5 |</code></pre>

</div>
</div>
<div id="yhteenveto" class="section level1">
<h1><span class="header-section-number">Luku 8</span> Yhteenveto</h1>
<p>Jäsennysdokumentissa on muutama ajatus, ja viite. Kirjoitetaan tämä viimeiseksi.</p>
<p>Blasius ja Thiessen
“This paper provides empirically-based criteria for selecting Items and countries
to develop measures of an underlying construct of interest that are comparable in
cross-national research. Using data from the 1994 International Social Survey
Program and applying multiple correspondence analysis to a set of common items
in each of the 24 participating countries, we show that both the quality of the
data, as well as its underlying structure - and therefore meaning - vary
considerably between countries. The approach we use for screening countries and
items is especially useful in situations where the psychometric properties of
the items have not been well established in previous research.”
<span class="citation">(Blasius ja Thiessen <a href="#ref-RefWorks:doc:5b15542ee4b0e2616bc42dca" role="doc-biblioref">2006</a>)</span></p>
<p>“Surullinen totuus onnellisuustutkimuksesta” <span class="citation">Bond ja Lang (<a href="#ref-RefWorks:doc:5c223412e4b0508a6674dec0" role="doc-biblioref">2018</a>)</span>
(ilman sulkuja) ja suluilla <span class="citation">(Bond ja Lang <a href="#ref-RefWorks:doc:5c223412e4b0508a6674dec0" role="doc-biblioref">2018</a>)</span></p>
<p>Gifi-nimimerkillä kirjoittavat Jan De Leeuw jatkavat verkkokirjassaan (julkaistu bookdown-paketilla)
<span class="citation">(Leeuw, Mair, ja Groenen <a href="#ref-RefWorks:doc:5faaf996e4b05416e98ff547" role="doc-biblioref">2016</a>)</span> keskustelua konfirmatorisen ja data-analyyttisen
eksploratiivisen lähestymistavan eroista. He ovat tiukasti eksploratiivisen linjan kannattajia,
ja korostavat konfliktin pitkää historiaa. Nyt historia on heidän mielestään loppunut: “We shall not pay much attention any more to these turf and culture wars, because basically they are over. Data analysis, in its multitude of disguises and appearances, is the
winner. Classical statistics departments are gone, or on their way out. They may not have changed their
name, but their curricula and hiring practices are very different from what they were 20 or even 10 years
ago.”</p>

</div>
<div id="liitteet" class="section level1 unnumbered">
<h1>Liitteet</h1>
<div id="liite-1-korrespondenssianalyysin-teoriaa" class="section level2 unnumbered">
<h2>Liite 1: Korrespondenssianalyysin teoriaa</h2>
<div id="korrespondenssianalyysin-perusyhtälöt-ja-kaavat" class="section level3 unnumbered">
<h3>Korrespondenssianalyysin perusyhtälöt ja kaavat</h3>
<p>Tässä lähteenä Greenacren kirja<span class="citation">(M. J. Greenacre <a href="#ref-RefWorks:doc:5a857a43e4b0ed2d44664d78" role="doc-biblioref">2017</a>)</span> (ca in practice) ja sen liite
“Theory of CA”.</p>
<p><strong>edit</strong> Muistiinpanoja löytyy, joissa viitataan myös Biplots in practice - kirjaan.
Kevään 2017 kurssin luentokalvoja on myös käytetty. Lisäillään vielä käsitteitä
LeRouxin ja Rouanetin kirjasta, jos on tarvis.</p>
<p>Datamatriisilla <span class="math inline">\(\boldsymbol{N}\)</span> on <span class="math inline">\(I\)</span> riviä ja <span class="math inline">\(J\)</span> sarakketta (<span class="math inline">\(I x J\)</span> ).
Alkiot ovat ei-negatiivisia (eli nollat sallittuja) ja samassa mitta-asteikossa.
Jos mitta-asteikko on intervalli- tai suhdeasteikko, mittayksiköiden on oltava
samoja (esim. euroja, metrejä). Taulukon alkioiden summa on
<span class="math inline">\(\sum_{i} \sum_{j}n_{ij} = n\)</span>, missä <span class="math inline">\(i = 1, \dots , I\)</span> ja <span class="math inline">\(j = 1, \dots , J\)</span>.
GDA-kirjassa on tarkennettu tätä vaatimusta ei-negatiivisuudesta.</p>
<p>Korrespondenssimatriisi <span class="math inline">\(\boldsymbol{P}\)</span> saadaan jakamalla matriisin
<span class="math inline">\(\boldsymbol{N}\)</span> alkiot niiden summalla <span class="math inline">\(n\)</span> .</p>
<p>Merkitään matriisin <span class="math inline">\(\boldsymbol{P}\)</span> rivisummien vektoria
<span class="math inline">\(\boldsymbol{r}\)</span> (= <span class="math inline">\((r_{1}, \dots, r_{I})\)</span>) ja sarakesummien vektoria
<span class="math inline">\(\boldsymbol{c}\)</span> (= <span class="math inline">\((c_{1}, \dots, c_{J})\)</span>).
Niitä vastaavat diagonaalimatriisit ovat <span class="math inline">\(\boldsymbol{D_r}\)</span> ja
<span class="math inline">\(\boldsymbol{D_c}\)</span>.</p>
<p>Korrespondenssianalyysin ratkaistaan singluaariarvohajoitelman avulla. Hyvin
yleinen tulos, jostain syystä tilastotieteessä tullu tunnetuksi melko myöhään
(Mustonen 1985).</p>
<p>Singulaariarvohajoitelma (singular value decomposition) tuottaa ratkaisun kun
sitä sovelletaan standardoituun residuaalimatriisiin <span class="math inline">\(\boldsymbol{S}\)</span>.</p>
<p><span class="math display" id="eq:svd1">\[\begin{equation}
\boldsymbol{S} = \boldsymbol{D_r}^{-1/2}(\boldsymbol{P} - \boldsymbol{r}\boldsymbol{c}^T)\boldsymbol{D_c}^{-1/2}
\tag{8.1}
\end{equation}\]</span></p>
<p>Residuaalimatriisi voidaan esittää myös ns. kontingenssi-suhdelukujen
(contingency ratio) avulla kahdella tavalla.</p>
<p><span class="math display" id="eq:contrat1">\[\begin{equation}
\boldsymbol{D_r}^{-1} \boldsymbol{P} \boldsymbol{D_c}^{-1} = \left( \frac{p_{ij}} {r_{i} c{j}} \right)
\tag{8.2}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:contrat2">\[\begin{equation}
\boldsymbol{S} = \boldsymbol{D_r}^{1/2} (\boldsymbol{D_r}^{-1} \boldsymbol{P} \boldsymbol{D_c}^{-1} - \boldsymbol{1}\boldsymbol{1}^{T} ) \boldsymbol{D_c}^{-1/2}  \;\;\; .
\tag{8.3}
\end{equation}\]</span></p>
<p>Toinen esitystapa on hyödyllinen, kun tarkastellaan CA:n yhteyksiä muihin
läheisiin menetelmiin. Näitä menetelmiä kuten myös korrespondenssianalyysiä kutsutaan monilla
nimillä:“suhteellisten osuuksien datan” analyysi (log ratio analysis of compositiona data),
moniulotteinen skaalaus, lineaarinen diskriminanttianalyysi, kanoninen korrelaatioanalyysi,
pääkomponettianalyysi, kaksoiskuvat ja muutä SVD-hajoitelmaan perustuvat dimensioden
vähentämisen menetelmät.</p>
<p>Samat kaavat voi esittää myös alkiomuodossa:</p>
<p><span class="math display" id="eq:contrat11">\[\begin{equation}
s_{ij} = \frac{p_{ij}-r_{i}c_{j}} { \sqrt{r_{i}c_{j} } }
\tag{8.4}
\end{equation}\]</span></p>
<p>ja toinen
<span class="math display" id="eq:contrat21">\[\begin{equation}
s_{ij} = \sqrt{r_{i}} \left( \frac{p_{ij}}{r_{i}c_{j}} \right) \sqrt{c_{j}} \;\;\; .
\tag{8.5}
\end{equation}\]</span></p>
<p>Alkimuodosasa esitetyistä kaavoista näkee intuitivisesti rivi- ja sarakeratkaisujen sidoksen.
Ratkaisujen duaalisuus on teoreettinen tulos, jonka voi perustella täsmällisesti
algebrallisen geometrian avulla. Käytännössä rivi- ja sarekeongelman duaalisuus tarkoittaa sitä,
että vain toinen ongelma on ratkaistava.</p>
<p>Singulaariarvohajoitelma (singular value decomposition, SVD) matriisille <span class="math inline">\(\boldsymbol{S}\)</span> on</p>
<p><span class="math display" id="eq:svd2">\[\begin{equation}
\boldsymbol{S} = \boldsymbol{U} \boldsymbol{D_{\alpha}} \boldsymbol{V}^{T}
\tag{8.6}
\end{equation}\]</span></p>
<p>missä <span class="math inline">\(\boldsymbol{D_{\alpha}}\)</span> on diagonaalimatriisi, jonka alkiot ovat
singulaariarvot suuruusjärjestyksessä <span class="math inline">\(\alpha_{1}\geq \alpha_{1} \geq \cdots\)</span>.</p>
<p>Matriisit <span class="math inline">\(\boldsymbol{U}\)</span> ja <span class="math inline">\(\boldsymbol{V}\)</span> ovat ortogonaalisia
singulaarivektoreiden matriiseja. Singulaariarvohajoitelman merkitys dimensioiden
vähentämiselle perustuu Eckart - Young - teoreemaan. Teoreema kertoo
että saamme pienimmän neliösumman <span class="math inline">\(m\)</span> - ulotteisen approksimaation matriisille
<span class="math inline">\(\boldsymbol{S}\)</span> (CAinP, ss. 244) matriisien <span class="math inline">\(\boldsymbol{U}\)</span> ja <span class="math inline">\(\boldsymbol{V}\)</span>
ensimmäisten sarakkeiden ja ensimmäisten singulaariarvojen avulla.</p>
<p><span class="math display" id="eq:svd3">\[\begin{equation}
\boldsymbol{S}_{(m)} = \boldsymbol{U}_{(m)} \boldsymbol{D}_{\alpha(m)} \boldsymbol{V}_{(m)}^{T}
\tag{8.7}
\end{equation}\]</span></p>
<p>Korrrespondenssianalyysin ratkaisualgoritmissa tätä tulosta on muokattava niin,
että rivien ja sarakkeiden massat huomioidaan pienimmän neliösumman
approksimaatiossa painoina.</p>
<p>Näin saadaan standardikoordinaatit ja principal-koordinaatit riveille ja
sarakkeille.</p>
<p>Rivien standardikoordinaatit</p>
<p><span class="math display" id="eq:rivistd1">\[\begin{equation}
\boldsymbol{\Phi} = \boldsymbol{D_r}^{-\frac{1}{2}} \boldsymbol{U}
\tag{8.8}
\end{equation}\]</span></p>
<p>Sarakkeiden standardikoordinaatit</p>
<p><span class="math display" id="eq:sarakestd1">\[\begin{equation}
 \boldsymbol{\Gamma} = \boldsymbol{D_c}^{-\frac{1}{2}} \boldsymbol{V}
 \tag{8.9}
\end{equation}\]</span></p>
<p>Rivien pääkoordinaatit</p>
<p><span class="math display" id="eq:riviprinc1">\[\begin{equation}
 \boldsymbol{F} =   \boldsymbol{D_r}^{-\frac{1}{2}} \boldsymbol{U}  \boldsymbol{D_{\alpha}} = \boldsymbol{\Phi} \boldsymbol{D_{\alpha}}
\tag{8.10}
\end{equation}\]</span></p>
<p>Sarakkeiden pääkoordinaatit
<span class="math display" id="eq:sarakeprinc1">\[\begin{equation}
 \boldsymbol{G}  = \boldsymbol{D_c}^{-\frac{1}{2}} \boldsymbol{V} \boldsymbol{D_{\alpha}} = \boldsymbol{\Gamma}  \boldsymbol{D_{\alpha}}
 \tag{8.11}
\end{equation}\]</span></p>
<p>Pääakseleiden inertiat (principal inertias) <span class="math inline">\(\lambda_{k}\)</span></p>
<p><span class="math display">\[\begin{equation}
\lambda_{k} = \alpha_{k}^2, k = 1,\dots,K,
K = min \{ I-1, J-1 \}
\end{equation}\]</span></p>
<p><strong>edit 1</strong> CA:ssa ratkaisun akseleiden inertiaa kutsutaan usein ominaisarvoksi,
mutta periaatteessa SVD-ratkaisulla saadaan singulaariarvot, ja niiden neliöt ovat
akseleiden inertioita. Ominaisarvojen ja sigulaariarvojen yhteys on läheinen ja
riippuu diagonalisoitavan matriisin ominaisuuksista.</p>
<p><strong>edit 1</strong> ratkaisun dimenisio, maksimi-inertia.</p>
<p>Bilineaarinen korresepondenssimalli</p>
<p>Korrespondenssimatriisi <span class="math inline">\(\boldsymbol{P}\)</span> voidaan esittää matriisi- ja
alkiomuodossa ns. palautuskaavana (reconstitution formula).</p>
<p><span class="math display" id="eq:reconstform1">\[\begin{equation}
\boldsymbol{P} = \boldsymbol{D}_{r} \left( \boldsymbol{1}\boldsymbol{1}^{T} + \boldsymbol{\Phi}\boldsymbol{D}_{\lambda}^{\frac {1}{2}}\boldsymbol{\Gamma}^{T}\right)\boldsymbol{D}_{c}
\tag{8.12}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:reconstform2">\[\begin{equation}
p_ {ij}= r_{i}c_{j} \left(1 + \sum_{k=1}^{K} \sqrt{\lambda_{k}} \phi_{ik} \gamma_{jk} \right)
\tag{8.13}
\end{equation}\]</span></p>
<p>Tässä viitataan s. 101 (13.4), 109 (14.9), ja 109-110 (14.10 ja 14.11).
Palautuskavoilla on monta esitystapaa bilineaarisessa mallissa.</p>
<p>Rivien ja sarakkeiden riippuvuus ja transitioyhtälöt. ss. 244, 108-109 skalaariversiot.</p>
<p>Pääkoordinaatit standardikoordinaattien funktiona
(ns. barysentrinen ominaisuus - barycentric relationships)</p>
<p><span class="math display" id="eq:barysentr1">\[\begin{equation}
\boldsymbol{F} = \boldsymbol{D}_{r}^{-1} \boldsymbol{P}\boldsymbol{\Gamma}
\tag{8.14}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:barysentr2">\[\begin{equation}
\boldsymbol{G} = \boldsymbol{D}_{c}^{-1} \boldsymbol{P}^{T}\boldsymbol{\Phi}
\tag{8.15}
\end{equation}\]</span></p>
<p>Pääkoordinaatit pääkoordinaattien funktiointa:</p>
<p><span class="math display" id="eq:barysentr3">\[\begin{equation}
\boldsymbol{F} = \boldsymbol{D}_{r}^{-1} \boldsymbol{P}\boldsymbol{G}\boldsymbol{D}_{\lambda}^{-\frac{1}{2}}
\tag{8.16}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:barysentr4">\[\begin{equation}
\boldsymbol{G} = \boldsymbol{D}_{c}^{-1} \boldsymbol{P}^{T}\boldsymbol{F}\boldsymbol{D}_{\lambda}^{-\frac{1}{2}}
\tag{8.17}
\end{equation}\]</span></p>
<p>Yhtälöt <a href="#eq:barysentr1">(8.14)</a> ja <a href="#eq:barysentr1">(8.14)</a> esittävät profiilipisteet ideaalipisteiden (vertex points)
painotettuina keskiarvoina, painoina profiilin elementit. Asymmetriset kartat
(rivien tai sarakkeiden suhteen) perustuvat näihin yhtälöihin. Yhtälöiden <a href="#eq:barysentr3">(8.16)</a>
ja <a href="#eq:barysentr4">(8.17)</a> kahdet pääkoordinaatit ovat perusta symmetrisille kartoille. Myös niitä
yhdistää barisentrinen painotetun keskiarvon riippuvuus, mutta mukana ovat skaalaustekijät
<span class="math inline">\(\frac{1}{\sqrt{\lambda_{i}}}\)</span>. Skaalaustekijä on jokaisessa dimensiossa sen inertia, suurimmasta pienimpään.</p>
<p>Kokeillaan vielä kaavaviitteitä: kaavojen <a href="#eq:khii21">(3.1)</a> ja <a href="#eq:khii22">(3.2)</a>
yhteyden pitäisi olla selkeä.</p>
<p><strong>Pisteet ja projektio aliavaruuteen</strong></p>
<p>Kuva on kurssimateriaaleista<span class="citation">(M. Greenacre <a href="#ref-RefWorks:doc:5b6ef091e4b0984fd9b8c0ca" role="doc-biblioref">2017</a>)</span>.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/CAquality.png&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:projectionimg1"></span>
<img src="img/CAquality.png" alt="Pisteen projektio aliavaruuteen" width="70%" />
<p class="caption">
Kuva 8.1: Pisteen projektio aliavaruuteen
</p>
</div>
<p>Kuvassa on esitetty korrespondenssianalyysin ratkaisun minimointiongelma. Pisteen
projektio on sitä parempi mitä pienempi kulma on sentroidista pisteeseen
piirtetyn janan ja pisteen projektion välillä. COR - tunnusluku ca-funktion
numeerisissa tuloksissa tämän kulman kosinin neliö. Pisteen kuvauksen laatu (qlt)
ca-tuloksissa on valitun approsimaation akseleiden kvaliteettien (COR) summa.</p>
<p>Kuvasta voi myös hahmottaa sen periaatteen, että projektiossa kaukana olevat
pisteet ovat kaukana myös alkuperäisessä avaruudessa. Projektiossa lähekkäin
olevat pisteet voivat olla alkuperäisessä avaruudessa kaukana toisistaan,
jos niiden projektion laatu on huono.</p>
</div>
<div id="matriisit-ja-niiden-havainnollistaminen" class="section level3 unnumbered">
<h3>Matriisit ja niiden havainnollistaminen</h3>
<p><strong>edit</strong> Nämä tässä varalla, jos matriisikaavoja tarvitaan lisää. Ehkä ei?</p>
<p>Korrespondenssianalyysin sovelluksissa tutkimusongelman ratkaisu on usein sopivan
matriisin rakentaminen.</p>
<p><strong>edit: kaavaesimerkkejä</strong></p>
<p><span class="math display">\[\begin{equation}
A = \begin{bmatrix}
    a_{11} &amp; a_{12} &amp; \dots &amp; a_{1k}\\
    \vdots &amp; \ddots &amp; \\
    \\
    \vdots \\
    a_{n1} &amp; \dots  &amp; \dots &amp; a_{nk}
    \end{bmatrix}
\end{equation}\]</span></p>
<p>Ehkäpä ABBA onnistuu paremmin tällä notaatiolla?</p>
<p><span class="math display">\[\begin{equation}
A = \begin{bmatrix}
    A_{11} &amp; B_{12}  \\
    B_{21} &amp; A_{22}
    \end{bmatrix}
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}
A = \begin{bmatrix}
    A_{maa, Q1a} &amp; A_{maa, Q1b}  \\
    B_{gage, Q1a} &amp; B_{gage, Q1b}
    \end{bmatrix}
\end{equation}\]</span></p>
<p><strong>Pinotut tai yhdistetyt matriisit (“stacked and concatenated matrices”)</strong></p>
<p>Yksinkertainen korrespondenssianalyysi on kahden luokittelumuuttujan määrittämän
taulukon analyysiä, mutta sitä voi soveltaa myös usean muuttujan analyysiin.
Menetelmän matemaattinen perusta ja ratkaisualgoritmi (SVD) toimivat, tulkinta
vain muuttuu.</p>
<p>Yksinkertaisin laajennus on lisätä alkuperäisen taulukon alle toinen taulukko.
Rivit ovat esimerkissä maittan summattuja vastauksia, ja niiden alle voidaan
lisätä joku toinen luokittelumuuttuja. Havaintojen määrä yhditetyssä (“pinotussa”)
taulussa kaksinkertaistuu.</p>
<p>Taulukoiden yhdistämisen idea on inertian dekomponointi. Yhdistetyn matriisin inertia
voidaan eri tavoin esittää alimatriisien inertian summana. Tällöin jokaisen alimatriisin
reunajakauman tulee olla sama, ja puuttuvat tiedot vääristävät tuloksia.</p>
<p>Merkitään edellisten analyysien kuuden maan ja viiden vastausvaihtoehdon
taulukkoa matriisilla <span class="math inline">\(\boldsymbol{ A}_{I J}\)</span>, missä <span class="math inline">\(I\)</span> on rivien ja <span class="math inline">\(J\)</span>
sarakkeiden lukumäärä. Taulukoidaan ikäluokan (1 - 6) ja sukupuolen (<span class="math inline">\(f\)</span> = nainen,
<span class="math inline">\(m\)</span> = mies) vuorovaikutusmuuttuja (<span class="math inline">\(f1,\dots , f6\)</span> ja <span class="math inline">\(m1,\dots , m6\)</span>) samojen
vastausvaihtoehtojen kanssa. Jos tätä taulukkoa merkitään matriisilla
<span class="math inline">\(\boldsymbol{ B}_{I^{`} J}\)</span>, voimme muodostaa yhdistetyn matriisin</p>
<p>Rivien lukumäärä on molemmissa matriiseissa sama, koska luokkia sattuu olemaan
kuusi sekä maa- että ikä- ja sukupuoli - luokittelumuuttujissa. Kun matriisit
ovat dimensioiltaan ja myös muuttujien sisällön kannalta samankaltaiset, niitä
kutsutaan yhteensopiviksi (``matched matrix’’). Tällöin yksinkertaista
korrespondenssianalyyisä voi soveltaa tutkimusongelmaan, jossa halutaan erotella
jonkun ryhmän sisäinen vaihtelu ryhmien välisiestä vaihtelusta.
(Greenacren ehdottama ABBA - analyysi).</p>
<p>ABBA on erityistapaus yleisemmästä moniulotteisen taulukon (multiway table) analyysistä,
jossa useita kahden muuttujan taulukoita ``pinotaan’’ päällekkäin ja rinnakkain.
Voimme ottaa yhden kysymyksen vastausten lisäksi analyysiin mukaan useamman
kysymyksen vastaukset laajentamalla kahden päällekkäisen matriisin taulukkoa oikealle.</p>
<p><strong>Monimuuttuja-korrespondenssianalyysi MCA</strong></p>
<p>Usean muuttujan korrespondenssianalyysissä tutkitaan usean muuttujan välisiä yhteyksiä.
Kartan tulkinnan apuna siihen voidaan lisätä havaintojen sijaan niiden keskiarvopisteitä
ja niille simuloituja luottamusellipsejä. Kuvien pääongelma on liian suuri määärä pisteitä,
ja analyysin lopputulos on usein mahdollisimman yksinkertainen kartta.</p>
<p>Usean muuttujan analyysissä kohteena on joko indikaattorimatriisi <span class="math inline">\(\boldsymbol{Z}\)</span> tai
Burtin matriisi <span class="math inline">\(\boldsymbol{B}\)</span></p>
<p>Indikaattorimatriisissa rivit ovat havaintoja ja sarakkeet luokittelumuuttujan arvoja.
Havaintoa vastaa rivi nollia ja arvo 1 valitun vastausvaihtoehdon kohdalla. Tästä seuraa,
että vain erilaiset vastaukset määrittävät rivien etäisyyksiä.</p>
<p>Burtin matriisi on erikoistapaus yhdistetyistä matriiseista. Siihen on koottu kaikki tutkittavien
muuttujien pareittan muodostetut taulukot. Diagonaalilla ovat muuttujien ristiintaulukoinnit
itsensä kanssa. Ratkaisu riippuu vain näistä parittaisista taulukoista.</p>
<p>Burtin matriisi on kätevä välivaihe matriisien yhdistelyssä.</p>
<p>Molemmat matriisit paisuttavat keinotekoisesti kokonaisinertiaa, ja esimerkikisi kaksiulotteisen kartan
selitetyn inertian osuudet jäävät melko pieniksi. Ratkaisuna on inertian oikaisu tai korjaus
(adjusted inertia), jossa mm. poistetaan kokonaisinertialaskelmista Burtin matriisin
diagonaalilla olevat alimatriisit. Näillä korjauksilla ei ole vaikutusta kartan pisteiden
sijaintiin. Tämä menetelmä on ca-paketin mjca-funktion oletus.</p>
<p>Kolmas vaihtoehto on ns. yhdistetty korrespondenssianalyysi (joint ca).</p>
</div>
</div>
<div id="liite-2-suomenkielinen-lomake-esimerkki" class="section level2 unnumbered">
<h2>Liite 2: Suomenkielinen lomake (esimerkki)</h2>
<p>Tämä kuva on myös tekstissä, kätevä tapa esittää siististi kysymysten pitkät
versiot.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/substvar_fi_Q1Q2.png&#39;</span>)</span></code></pre></div>
</div>
<div id="liite-3-tekninen-ympäristö-ja-bookdown-paketti" class="section level2 unnumbered">
<h2>Liite 3: Tekninen ympäristö ja Bookdown-paketti</h2>
<p>Muokataan tiiviimpi pätkä esimerkkireposta bookdown-testi1. Tämä kuva kertoo vain
julkaisutekniikan ympäristön.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/BookdownProc.png&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:L3bdprocess1"></span>
<img src="img/BookdownProc.png" alt="Tulostiedoston prosessointi" width="70%" />
<p class="caption">
Kuva 8.2: Tulostiedoston prosessointi
</p>
</div>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="co"># pois out.width=&#39;50%&#39;,</span></span></code></pre></div>
</div>
<div id="liite-4-r---koodi" class="section level2 unnumbered">
<h2>Liite 4: R - koodi</h2>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="co"># testaukseen 7.11.2020 virheilmoituksia varten arvo TRUE</span></span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="kw">options</span>(<span class="dt">tinytex.verbose =</span> <span class="ot">FALSE</span>)</span>
<span id="cb31-3"><a href="#cb31-3"></a></span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="co"># 18.10.2020</span></span>
<span id="cb31-5"><a href="#cb31-5"></a><span class="kw">library</span>(rgl)</span>
<span id="cb31-6"><a href="#cb31-6"></a><span class="kw">library</span>(ca)</span>
<span id="cb31-7"><a href="#cb31-7"></a><span class="kw">library</span>(haven)</span>
<span id="cb31-8"><a href="#cb31-8"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb31-9"><a href="#cb31-9"></a><span class="kw">library</span>(knitr)</span>
<span id="cb31-10"><a href="#cb31-10"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb31-11"><a href="#cb31-11"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb31-12"><a href="#cb31-12"></a><span class="kw">library</span>(rmarkdown)</span>
<span id="cb31-13"><a href="#cb31-13"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb31-14"><a href="#cb31-14"></a><span class="kw">library</span>(furniture)</span>
<span id="cb31-15"><a href="#cb31-15"></a><span class="kw">library</span>(scales) <span class="co"># G_1_2 - kuva</span></span>
<span id="cb31-16"><a href="#cb31-16"></a><span class="kw">library</span>(reshape2)  <span class="co"># G_1_2 - kuva</span></span>
<span id="cb31-17"><a href="#cb31-17"></a><span class="kw">library</span>(printr) <span class="co">#19.5.18 taulukoiden ja matriisien tulostukseen</span></span>
<span id="cb31-18"><a href="#cb31-18"></a><span class="kw">library</span>(bookdown)</span>
<span id="cb31-19"><a href="#cb31-19"></a><span class="kw">library</span>(tinytex)</span>
<span id="cb31-20"><a href="#cb31-20"></a><span class="kw">library</span>(assertthat)</span>
<span id="cb31-21"><a href="#cb31-21"></a></span>
<span id="cb31-22"><a href="#cb31-22"></a></span>
<span id="cb31-23"><a href="#cb31-23"></a><span class="co"># automatically create a bib database for R packages</span></span>
<span id="cb31-24"><a href="#cb31-24"></a>knitr<span class="op">::</span><span class="kw">write_bib</span>(<span class="kw">c</span>(</span>
<span id="cb31-25"><a href="#cb31-25"></a>  <span class="kw">.packages</span>(), <span class="st">&#39;bookdown&#39;</span>, <span class="st">&#39;knitr&#39;</span>, <span class="st">&#39;rmarkdown&#39;</span></span>
<span id="cb31-26"><a href="#cb31-26"></a>), <span class="st">&#39;packages.bib&#39;</span>)</span>
<span id="cb31-27"><a href="#cb31-27"></a></span>
<span id="cb31-28"><a href="#cb31-28"></a><span class="co"># include FALSE: ei koodia eikä tulostusta dokumenttiin - poistettava turhia</span></span>
<span id="cb31-29"><a href="#cb31-29"></a><span class="co"># välitulostuksia (18.10.2020)</span></span>
<span id="cb31-30"><a href="#cb31-30"></a><span class="co"># Aineiston rajaamisen kolme vaihetta (10.2018)</span></span>
<span id="cb31-31"><a href="#cb31-31"></a><span class="co"># </span></span>
<span id="cb31-32"><a href="#cb31-32"></a><span class="co"># TIEDOSTOJEN NIMEÄMINEN</span></span>
<span id="cb31-33"><a href="#cb31-33"></a><span class="co">#</span></span>
<span id="cb31-34"><a href="#cb31-34"></a><span class="co"># R-datatiedostot .data - tarkenteella ovat osajoukkoja koko ISSP-datasta ISSP2012.data</span></span>
<span id="cb31-35"><a href="#cb31-35"></a><span class="co"># R-datatiedostot .dat - tarkenteella: mukana alkuperäisten muuttujien muunnoksia </span></span>
<span id="cb31-36"><a href="#cb31-36"></a><span class="co"># (yleensä as_factor), alkuperäisissä muuttujissa mukana SPSS-tiedoston metadata.</span></span>
<span id="cb31-37"><a href="#cb31-37"></a><span class="co">#</span></span>
<span id="cb31-38"><a href="#cb31-38"></a><span class="co"># Luokittelumuuttujan tyyppi on datan lukemisen jälkeen yleensä merkkijono (char) </span></span>
<span id="cb31-39"><a href="#cb31-39"></a><span class="co"># ja haven_labelled. </span></span>
<span id="cb31-40"><a href="#cb31-40"></a><span class="co">#</span></span>
<span id="cb31-41"><a href="#cb31-41"></a><span class="co"># Muutetaan R-datassa ordinaali- tai  nominaaliasteikon muuttujat haven-paketin </span></span>
<span id="cb31-42"><a href="#cb31-42"></a><span class="co"># as_factor - funktiolla faktoreiksi. R:n faktorityypin muuttujille voidaan tarvittaessa </span></span>
<span id="cb31-43"><a href="#cb31-43"></a><span class="co"># määritellä järjestys, toistaiseksi niin ei tehdä (25.9.2018). </span></span>
<span id="cb31-44"><a href="#cb31-44"></a><span class="co">#</span></span>
<span id="cb31-45"><a href="#cb31-45"></a><span class="co"># Muunnetun muuttujan rinnalla säilytetään SPSS-tiedostosta luettu muuttja, metatiedot säilyvät </span></span>
<span id="cb31-46"><a href="#cb31-46"></a><span class="co"># alkuperäisessä.</span></span>
<span id="cb31-47"><a href="#cb31-47"></a><span class="co">#       </span></span>
<span id="cb31-48"><a href="#cb31-48"></a><span class="co"># R-datatiedostot joiden nimen loppuosa on muotoa *esim1.dat: käytetään analyyseissä</span></span>
<span id="cb31-49"><a href="#cb31-49"></a><span class="co">#</span></span>
<span id="cb31-50"><a href="#cb31-50"></a><span class="co"># 1. VALITAAN MAAT (25) -&gt; ISSP2012jh1a.data. Muuttujat koodilohkossa datasel_vars1</span></span>
<span id="cb31-51"><a href="#cb31-51"></a><span class="co">#</span></span>
<span id="cb31-52"><a href="#cb31-52"></a><span class="co"># kolme maa-muuttujaa datassa. V3 erottelee joidenkin maiden alueita, V4 on koko </span></span>
<span id="cb31-53"><a href="#cb31-53"></a><span class="co"># maan koodi ja C_ALPHAN on maan kaksimerkkinen tunnus.</span></span>
<span id="cb31-54"><a href="#cb31-54"></a><span class="co">#</span></span>
<span id="cb31-55"><a href="#cb31-55"></a><span class="co"># V3 - Country/ Sample ISO 3166 Code (see V4 for codes for whole nation states)</span></span>
<span id="cb31-56"><a href="#cb31-56"></a><span class="co"># V3 erot valituissa maissa</span></span>
<span id="cb31-57"><a href="#cb31-57"></a><span class="co"># 5601 BE-FLA-Belgium/ Flanders</span></span>
<span id="cb31-58"><a href="#cb31-58"></a><span class="co"># 5602 BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb31-59"><a href="#cb31-59"></a><span class="co"># 5603 BE-BRU-Belgium/ Brussels</span></span>
<span id="cb31-60"><a href="#cb31-60"></a><span class="co"># 27601 DE-W-Germany-West</span></span>
<span id="cb31-61"><a href="#cb31-61"></a><span class="co"># 27602 DE-E-Germany-East</span></span>
<span id="cb31-62"><a href="#cb31-62"></a><span class="co"># 62001 PT-Portugal 2012: first fieldwork round (main sample)</span></span>
<span id="cb31-63"><a href="#cb31-63"></a><span class="co"># 62002 PT-Portugal 2012: second fieldwork round (complementary sample)</span></span>
<span id="cb31-64"><a href="#cb31-64"></a><span class="co"># Myös tämä on erikoinen, näyttää olevan vakio kun V4 = 826:</span></span>
<span id="cb31-65"><a href="#cb31-65"></a><span class="co"># 82601 GB-GBN-Great Britain</span></span>
<span id="cb31-66"><a href="#cb31-66"></a><span class="co"># Portugalissa ainestoa täydennettiin, koska siinä oli puutteita. Jako ei siis ole oleellinen,</span></span>
<span id="cb31-67"><a href="#cb31-67"></a><span class="co"># mutta muuut ovat. Tähdellä merkityt maat valitaan johdattelevaan esimerkkiin.</span></span>
<span id="cb31-68"><a href="#cb31-68"></a><span class="co">#</span></span>
<span id="cb31-69"><a href="#cb31-69"></a><span class="co"># Maat (25)</span></span>
<span id="cb31-70"><a href="#cb31-70"></a><span class="co">#</span></span>
<span id="cb31-71"><a href="#cb31-71"></a><span class="co"># 36 AU-Australia</span></span>
<span id="cb31-72"><a href="#cb31-72"></a><span class="co"># 40 AT-Austria</span></span>
<span id="cb31-73"><a href="#cb31-73"></a><span class="co"># 56 BE-Belgium*</span></span>
<span id="cb31-74"><a href="#cb31-74"></a><span class="co"># 100 BG-Bulgaria*</span></span>
<span id="cb31-75"><a href="#cb31-75"></a><span class="co"># 124 CA-Canada</span></span>
<span id="cb31-76"><a href="#cb31-76"></a><span class="co"># 191 HR-Croatia</span></span>
<span id="cb31-77"><a href="#cb31-77"></a><span class="co"># 203 CZ-Czech Republic</span></span>
<span id="cb31-78"><a href="#cb31-78"></a><span class="co"># 208 DK-Denmark*</span></span>
<span id="cb31-79"><a href="#cb31-79"></a><span class="co"># 246 FI-Finland*</span></span>
<span id="cb31-80"><a href="#cb31-80"></a><span class="co"># 250 FR-France</span></span>
<span id="cb31-81"><a href="#cb31-81"></a><span class="co"># 276 DE-Germany*</span></span>
<span id="cb31-82"><a href="#cb31-82"></a><span class="co"># 348 HU-Hungary*</span></span>
<span id="cb31-83"><a href="#cb31-83"></a><span class="co"># 352 IS-Iceland</span></span>
<span id="cb31-84"><a href="#cb31-84"></a><span class="co"># 372 IE-Ireland</span></span>
<span id="cb31-85"><a href="#cb31-85"></a><span class="co"># 428 LV-Latvia</span></span>
<span id="cb31-86"><a href="#cb31-86"></a><span class="co"># 440 LT-Lithuania</span></span>
<span id="cb31-87"><a href="#cb31-87"></a><span class="co"># 528 NL-Netherlands</span></span>
<span id="cb31-88"><a href="#cb31-88"></a><span class="co"># 578 NO-Norway</span></span>
<span id="cb31-89"><a href="#cb31-89"></a><span class="co"># 616 PL-Poland</span></span>
<span id="cb31-90"><a href="#cb31-90"></a><span class="co"># 620 PT-Portugal</span></span>
<span id="cb31-91"><a href="#cb31-91"></a><span class="co"># 643 RU-Russia</span></span>
<span id="cb31-92"><a href="#cb31-92"></a><span class="co"># 703 SK-Slovakia</span></span>
<span id="cb31-93"><a href="#cb31-93"></a><span class="co"># 705 SI-Slovenia</span></span>
<span id="cb31-94"><a href="#cb31-94"></a><span class="co"># 752 SE-Sweden</span></span>
<span id="cb31-95"><a href="#cb31-95"></a><span class="co"># 756 CH-Switzerland</span></span>
<span id="cb31-96"><a href="#cb31-96"></a><span class="co"># 826 GB-Great Britain and/or United Kingdom - jätetään pois jotta saadaan TOPBOT </span></span>
<span id="cb31-97"><a href="#cb31-97"></a><span class="co">#                          -muuttuja mukaan (top-bottom self-placement) .(9.10.18)</span></span>
<span id="cb31-98"><a href="#cb31-98"></a><span class="co"># 840 US-United States - jätetään pois, jotta saadaan TOPBOT-muuttuja mukaan.(10.10.18)</span></span>
<span id="cb31-99"><a href="#cb31-99"></a><span class="co">#</span></span>
<span id="cb31-100"><a href="#cb31-100"></a><span class="co"># Belgian ja Saksan alueet:</span></span>
<span id="cb31-101"><a href="#cb31-101"></a><span class="co">#  V3</span></span>
<span id="cb31-102"><a href="#cb31-102"></a><span class="co">#  5601     BE-FLA-Belgium/ Flanders</span></span>
<span id="cb31-103"><a href="#cb31-103"></a><span class="co">#  5602     BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb31-104"><a href="#cb31-104"></a><span class="co">#  5603     BE-BRU-Belgium/ Brussels</span></span>
<span id="cb31-105"><a href="#cb31-105"></a><span class="co"># 27601     DE-W-Germany-West</span></span>
<span id="cb31-106"><a href="#cb31-106"></a><span class="co"># 27602     DE-E-Germany-East</span></span>
<span id="cb31-107"><a href="#cb31-107"></a><span class="co">#</span></span>
<span id="cb31-108"><a href="#cb31-108"></a><span class="co"># Unkari (348) toistaiseksi mukana, mutta joissain kysymyksissä myös Unkarilla on </span></span>
<span id="cb31-109"><a href="#cb31-109"></a><span class="co"># poikkeavia vastausvaihtoehtoja(HU_V18, HU_V19,HU_V20). Jos näitä muuttujia käytetään, </span></span>
<span id="cb31-110"><a href="#cb31-110"></a><span class="co"># Unkari on parempi jättää pois. </span></span>
<span id="cb31-111"><a href="#cb31-111"></a><span class="co"># </span></span>
<span id="cb31-112"><a href="#cb31-112"></a><span class="co">#</span></span>
<span id="cb31-113"><a href="#cb31-113"></a><span class="co"># (25.4.2018) user_na  </span></span>
<span id="cb31-114"><a href="#cb31-114"></a><span class="co"># haven-paketin read_spss - funktiolla voi r-tiedostoon lukea myös SPSS:n sallimat kolme </span></span>
<span id="cb31-115"><a href="#cb31-115"></a><span class="co"># (yleensä 7, 8, 9) tarkempaa koodia puuttuvalle tiedolle.</span></span>
<span id="cb31-116"><a href="#cb31-116"></a><span class="co"># &quot;If TRUE variables with user defined missing will be read into labelled_spss objects. </span></span>
<span id="cb31-117"><a href="#cb31-117"></a><span class="co"># If FALSE, the default, user-defined missings will be converted to NA&quot;</span></span>
<span id="cb31-118"><a href="#cb31-118"></a><span class="co"># https://www.rdocumentation.org/packages/haven/versions/1.1.0/topics/read_spss</span></span>
<span id="cb31-119"><a href="#cb31-119"></a><span class="co">#</span></span>
<span id="cb31-120"><a href="#cb31-120"></a> </span>
<span id="cb31-121"><a href="#cb31-121"></a>ISSP2012jh.data &lt;-<span class="st"> </span><span class="kw">read_spss</span>(<span class="st">&quot;data/ZA5900_v4-0-0.sav&quot;</span>) <span class="co">#luetaan alkuperäinen data R- dataksi (df).</span></span>
<span id="cb31-122"><a href="#cb31-122"></a></span>
<span id="cb31-123"><a href="#cb31-123"></a><span class="co">#str(ISSP2012jh.data)</span></span>
<span id="cb31-124"><a href="#cb31-124"></a></span>
<span id="cb31-125"><a href="#cb31-125"></a>incl_countries25 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">36</span>, <span class="dv">40</span>, <span class="dv">56</span>,<span class="dv">100</span>, <span class="dv">124</span>, <span class="dv">191</span>, <span class="dv">203</span>, <span class="dv">208</span>, <span class="dv">246</span>, <span class="dv">250</span>, <span class="dv">276</span>, <span class="dv">348</span>, <span class="dv">352</span>, </span>
<span id="cb31-126"><a href="#cb31-126"></a>                      <span class="dv">372</span>, <span class="dv">428</span>, <span class="dv">440</span>, <span class="dv">528</span>, <span class="dv">578</span>, <span class="dv">616</span>, <span class="dv">620</span>, <span class="dv">643</span>, <span class="dv">703</span>, <span class="dv">705</span>, <span class="dv">752</span>, <span class="dv">756</span>)</span>
<span id="cb31-127"><a href="#cb31-127"></a></span>
<span id="cb31-128"><a href="#cb31-128"></a><span class="co">#str(ISSP2012jh.data)</span></span>
<span id="cb31-129"><a href="#cb31-129"></a><span class="co">#str(ISSP2012jh.data) #61754 obs. of  420 variables - kaikki</span></span>
<span id="cb31-130"><a href="#cb31-130"></a></span>
<span id="cb31-131"><a href="#cb31-131"></a>ISSP2012jh1a.data &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012jh.data, V4 <span class="op">%in%</span><span class="st"> </span>incl_countries25)</span>
<span id="cb31-132"><a href="#cb31-132"></a></span>
<span id="cb31-133"><a href="#cb31-133"></a><span class="co">#head(ISSP2012jh1a.data)</span></span>
<span id="cb31-134"><a href="#cb31-134"></a><span class="co">#str(ISSP2012jh1a.data) #34271 obs. of  420 variables, Espanja ja Iso-Britannia</span></span>
<span id="cb31-135"><a href="#cb31-135"></a><span class="co">#                       pois (9.10.2018)</span></span>
<span id="cb31-136"><a href="#cb31-136"></a><span class="co"># str(ISSP2012jh1a.data) # 32969 obs. of  420 variable, Espanja Iso-Britannia, </span></span>
<span id="cb31-137"><a href="#cb31-137"></a><span class="co">#                        USA pois (10.10.2018)</span></span>
<span id="cb31-138"><a href="#cb31-138"></a><span class="co">#</span></span>
<span id="cb31-139"><a href="#cb31-139"></a><span class="co"># names() # muuttujen nimet</span></span>
<span id="cb31-140"><a href="#cb31-140"></a><span class="co"># Maakohtaiset muuttujat (kun on poikettu ISSP2012 - vastausvaihtoehdoista tms.) </span></span>
<span id="cb31-141"><a href="#cb31-141"></a><span class="co"># on aineistossa eroteltu maatunnus-etuliitteellä (esimerkiksi ES_V7).</span></span>
<span id="cb31-142"><a href="#cb31-142"></a><span class="co"># Demografisissa ja muissa taustamuuttujissa suuri osa tiedoista on kerätty maa-</span></span>
<span id="cb31-143"><a href="#cb31-143"></a><span class="co"># kohtaisilla lomakkeilla. Vertailukelpoiset muuttujat on konstruoitu niistä.</span></span>
<span id="cb31-144"><a href="#cb31-144"></a><span class="co"># Muuttujia on 420, vain osa yhteisiä kaikille maille.</span></span>
<span id="cb31-145"><a href="#cb31-145"></a></span>
<span id="cb31-146"><a href="#cb31-146"></a><span class="co"># include FALSE: ei koodia eikä tulostusta dokumenttiin - poistettava turhia</span></span>
<span id="cb31-147"><a href="#cb31-147"></a><span class="co"># välitulostuksia (18.10.2020)</span></span>
<span id="cb31-148"><a href="#cb31-148"></a><span class="co"># 2. VALITAAN MUUTTUJAT  -&gt; ISSP2012jh1b.data. Maat valittu koodilohkossa datasel_country1</span></span>
<span id="cb31-149"><a href="#cb31-149"></a><span class="co">#</span></span>
<span id="cb31-150"><a href="#cb31-150"></a><span class="co">#</span></span>
<span id="cb31-151"><a href="#cb31-151"></a><span class="co"># Muuttujat on luokiteltu dokumentissa ZA5900_overview.pdf</span></span>
<span id="cb31-152"><a href="#cb31-152"></a><span class="co"># https://zacat.gesis.org/webview/index.jsp?object=http://zacat.gesis.org/obj/fStudy/ZA5900</span></span>
<span id="cb31-153"><a href="#cb31-153"></a><span class="co"># Study Description -&gt; Other Study Description -&gt; Related Materials</span></span>
<span id="cb31-154"><a href="#cb31-154"></a><span class="co"># </span></span>
<span id="cb31-155"><a href="#cb31-155"></a><span class="co">#</span></span>
<span id="cb31-156"><a href="#cb31-156"></a></span>
<span id="cb31-157"><a href="#cb31-157"></a><span class="co"># METADATA</span></span>
<span id="cb31-158"><a href="#cb31-158"></a></span>
<span id="cb31-159"><a href="#cb31-159"></a>metavars1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;V1&quot;</span>, <span class="st">&quot;V2&quot;</span>, <span class="st">&quot;DOI&quot;</span>)</span>
<span id="cb31-160"><a href="#cb31-160"></a></span>
<span id="cb31-161"><a href="#cb31-161"></a><span class="co">#MAA - maakoodit ja maan kahden merkin tunnus</span></span>
<span id="cb31-162"><a href="#cb31-162"></a></span>
<span id="cb31-163"><a href="#cb31-163"></a>countryvars1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;V3&quot;</span>,<span class="st">&quot;V4&quot;</span>,<span class="st">&quot;C_ALPHAN&quot;</span>)</span>
<span id="cb31-164"><a href="#cb31-164"></a></span>
<span id="cb31-165"><a href="#cb31-165"></a><span class="co"># SUBSTANSSIMUUTTUJAT - Attitudes towards family and gender roles (9)</span></span>
<span id="cb31-166"><a href="#cb31-166"></a><span class="co">#</span></span>
<span id="cb31-167"><a href="#cb31-167"></a><span class="co"># Yhdeksän kysymystä (lyhennetyt versiot, englanniksi), vastausvaihtoehdot Q1-Q2</span></span>
<span id="cb31-168"><a href="#cb31-168"></a><span class="co">#</span></span>
<span id="cb31-169"><a href="#cb31-169"></a><span class="co"># 1 = täysin samaa mieltä, 2 = samaa mieltä, 3 = ei samaa eikä eri mieltä, </span></span>
<span id="cb31-170"><a href="#cb31-170"></a><span class="co"># 4 = eri mieltä, 5 = täysin eri mieltä</span></span>
<span id="cb31-171"><a href="#cb31-171"></a><span class="co"># </span></span>
<span id="cb31-172"><a href="#cb31-172"></a><span class="co"># Q1a Working mother can have warm relation with child</span></span>
<span id="cb31-173"><a href="#cb31-173"></a><span class="co"># Q1b Pre-school child suffers through working mother</span></span>
<span id="cb31-174"><a href="#cb31-174"></a><span class="co"># Q1c Family life suffers through working mother</span></span>
<span id="cb31-175"><a href="#cb31-175"></a><span class="co"># Q1d Women’s preference: home and children</span></span>
<span id="cb31-176"><a href="#cb31-176"></a><span class="co"># Q1e Being housewife is satisfying</span></span>
<span id="cb31-177"><a href="#cb31-177"></a><span class="co">#</span></span>
<span id="cb31-178"><a href="#cb31-178"></a><span class="co"># Q2a Both should contribute to household income</span></span>
<span id="cb31-179"><a href="#cb31-179"></a><span class="co"># Q2b Men’s job is earn money, women’s job household</span></span>
<span id="cb31-180"><a href="#cb31-180"></a><span class="co">#</span></span>
<span id="cb31-181"><a href="#cb31-181"></a><span class="co"># Q3a Should women work: Child under school age </span></span>
<span id="cb31-182"><a href="#cb31-182"></a><span class="co"># Q3b Should women work: Youngest kid at school</span></span>
<span id="cb31-183"><a href="#cb31-183"></a><span class="co"># 1= kokopäivätyö, 2 = osa-aikatyö, 3 = pysyä kotona, 8 = en osaa sanoa</span></span>
<span id="cb31-184"><a href="#cb31-184"></a><span class="co"># (can&#39;t choose), 9 = no answer</span></span>
<span id="cb31-185"><a href="#cb31-185"></a><span class="co">#</span></span>
<span id="cb31-186"><a href="#cb31-186"></a><span class="co"># Kysymysten Q3a ja Q3b eos-vastaus ei ole sama kuin &quot;en samaa enkä eri  mieltä&quot;</span></span>
<span id="cb31-187"><a href="#cb31-187"></a><span class="co"># (ns. neutraali # vaihtoehto), mutta kieltäytymisiä jne. (koodi 9) on aika</span></span>
<span id="cb31-188"><a href="#cb31-188"></a><span class="co"># vähän. Kolmessa # maassa ne on yhdistety: </span></span>
<span id="cb31-189"><a href="#cb31-189"></a><span class="co"># (8 Can&#39;t choose, CA:can&#39;t choose+no answer, KR:don&#39;t know+refused, NL:don&#39;t know).</span></span>
<span id="cb31-190"><a href="#cb31-190"></a><span class="co"># Kun SPSS-tiedostosta ei ole tuotu puuttuvan tiedon tarkempaa luokittelua,</span></span>
<span id="cb31-191"><a href="#cb31-191"></a><span class="co"># erottelua ei voi tehdä.</span></span>
<span id="cb31-192"><a href="#cb31-192"></a><span class="co">#</span></span>
<span id="cb31-193"><a href="#cb31-193"></a></span>
<span id="cb31-194"><a href="#cb31-194"></a>substvars1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;V5&quot;</span>,<span class="st">&quot;V6&quot;</span>,<span class="st">&quot;V7&quot;</span>,<span class="st">&quot;V8&quot;</span>,<span class="st">&quot;V9&quot;</span>,<span class="st">&quot;V10&quot;</span>,<span class="st">&quot;V11&quot;</span>,<span class="st">&quot;V12&quot;</span>,<span class="st">&quot;V13&quot;</span>) <span class="co"># 9 muuttujaa</span></span>
<span id="cb31-195"><a href="#cb31-195"></a></span>
<span id="cb31-196"><a href="#cb31-196"></a><span class="co"># Nämä yhteiset muuttujat pois (maaspesifien muuttujien lisäksi) :</span></span>
<span id="cb31-197"><a href="#cb31-197"></a><span class="co">#</span></span>
<span id="cb31-198"><a href="#cb31-198"></a><span class="co"># &quot;V14&quot;,&quot;V15&quot;,&quot;V16&quot;,  &quot;V17&quot;,&quot;V18&quot;,&quot;HU_V18&quot;,&quot;V19&quot;,&quot;HU_V19&quot;,&quot;V20&quot;,&quot;HU_V20&quot;,&quot;V21&quot;,</span></span>
<span id="cb31-199"><a href="#cb31-199"></a><span class="co"># &quot;V28&quot;,&quot;V29&quot;,&quot;V30&quot;,&quot;V31&quot;,&quot;V32&quot;,&quot;V33&quot;,# &quot;V34&quot;, &quot;V35&quot;, &quot;V36&quot;, &quot;V37&quot;, &quot;V38&quot;, &quot;V39&quot;,</span></span>
<span id="cb31-200"><a href="#cb31-200"></a><span class="co"># &quot;V40&quot;, &quot;V41&quot;, &quot;V42&quot;, &quot;V43&quot;, &quot;V44&quot;, &quot;V45&quot;, &quot;V46&quot;, &quot;V47&quot;, &quot;V48&quot;, &quot;V49&quot;, &quot;V50&quot;, </span></span>
<span id="cb31-201"><a href="#cb31-201"></a><span class="co"># &quot;V51&quot;, &quot;V52&quot;, &quot;V53&quot;, &quot;V54&quot;, &quot;V55&quot;, &quot;V56&quot;, &quot;V57&quot;, &quot;V58&quot;, &quot;V59&quot;, &quot;V60&quot;, &quot;V61&quot;, </span></span>
<span id="cb31-202"><a href="#cb31-202"></a><span class="co"># &quot;V62&quot;, &quot;V63&quot;, &quot;V64&quot;, &quot;V65&quot;, &quot;V65a&quot;,&quot;V66&quot;, &quot;V67&quot;</span></span>
<span id="cb31-203"><a href="#cb31-203"></a><span class="co">#</span></span>
<span id="cb31-204"><a href="#cb31-204"></a><span class="co">#</span></span>
<span id="cb31-205"><a href="#cb31-205"></a><span class="co"># DEMOGRAFISET JA MUUT TAUSTAMUUTTUJAT (8)</span></span>
<span id="cb31-206"><a href="#cb31-206"></a><span class="co">#</span></span>
<span id="cb31-207"><a href="#cb31-207"></a><span class="co"># AGE, SEX</span></span>
<span id="cb31-208"><a href="#cb31-208"></a><span class="co">#</span></span>
<span id="cb31-209"><a href="#cb31-209"></a><span class="co"># DEGREE - Highest completed degree of education: Categories for international</span></span>
<span id="cb31-210"><a href="#cb31-210"></a><span class="co"># comparison. Slightly re-arranged subset of ISCED-97</span></span>
<span id="cb31-211"><a href="#cb31-211"></a><span class="co">#</span></span>
<span id="cb31-212"><a href="#cb31-212"></a><span class="co"># 0 No formal education</span></span>
<span id="cb31-213"><a href="#cb31-213"></a><span class="co"># 1 Primary school (elementary school)</span></span>
<span id="cb31-214"><a href="#cb31-214"></a><span class="co"># 2 Lower secondary (secondary completed does not allow entry to university:</span></span>
<span id="cb31-215"><a href="#cb31-215"></a><span class="co">#  obligatory school)</span></span>
<span id="cb31-216"><a href="#cb31-216"></a><span class="co"># 3 Upper secondary (programs that allow entry to university or programs that</span></span>
<span id="cb31-217"><a href="#cb31-217"></a><span class="co">#  allow to entry other ISCED level 3 programs - designed to prepare students for</span></span>
<span id="cb31-218"><a href="#cb31-218"></a><span class="co">#  direct entry into the labour market)</span></span>
<span id="cb31-219"><a href="#cb31-219"></a><span class="co"># 4 Post secondary, non-tertiary (other upper secondary programs toward labour</span></span>
<span id="cb31-220"><a href="#cb31-220"></a><span class="co">#  market or technical formation)</span></span>
<span id="cb31-221"><a href="#cb31-221"></a><span class="co"># 5 Lower level tertiary, first stage (also technical schools at a tertiary level)</span></span>
<span id="cb31-222"><a href="#cb31-222"></a><span class="co"># 6 Upper level tertiary (Master, Dr.)</span></span>
<span id="cb31-223"><a href="#cb31-223"></a><span class="co"># 9 No answer, CH: don&#39;t know</span></span>
<span id="cb31-224"><a href="#cb31-224"></a><span class="co"># HUOM! R-factor - muunnoksessa koodaus on 1-7</span></span>
<span id="cb31-225"><a href="#cb31-225"></a><span class="co">#</span></span>
<span id="cb31-226"><a href="#cb31-226"></a><span class="co"># MAINSTAT - main status: Which of the following best describes your current situation?</span></span>
<span id="cb31-227"><a href="#cb31-227"></a><span class="co">#</span></span>
<span id="cb31-228"><a href="#cb31-228"></a><span class="co"># 1 In paid work</span></span>
<span id="cb31-229"><a href="#cb31-229"></a><span class="co"># 2 Unemployed and looking for a job, HR: incl never had a job</span></span>
<span id="cb31-230"><a href="#cb31-230"></a><span class="co"># 3 In education</span></span>
<span id="cb31-231"><a href="#cb31-231"></a><span class="co"># 4 Apprentice or trainee</span></span>
<span id="cb31-232"><a href="#cb31-232"></a><span class="co"># 5 Permanently sick or disabled</span></span>
<span id="cb31-233"><a href="#cb31-233"></a><span class="co"># 6 Retired</span></span>
<span id="cb31-234"><a href="#cb31-234"></a><span class="co"># 7 Domestic work</span></span>
<span id="cb31-235"><a href="#cb31-235"></a><span class="co"># 8 In compulsory military service or community service</span></span>
<span id="cb31-236"><a href="#cb31-236"></a><span class="co"># 9 Other</span></span>
<span id="cb31-237"><a href="#cb31-237"></a><span class="co"># 99 No answer</span></span>
<span id="cb31-238"><a href="#cb31-238"></a><span class="co"># Armeijassa tai yhdyskuntapalvelussa muutamia, muutamissa maissa.Kategoriassa 9 </span></span>
<span id="cb31-239"><a href="#cb31-239"></a><span class="co"># on hieman väkeä. Yhdistetään 8 ja 9. Huom! Esim Puolassa ei yhtään eläkeläistä</span></span>
<span id="cb31-240"><a href="#cb31-240"></a><span class="co"># eikä kategoriaa 9, Saksassa ei ketään kategoriassa 9.</span></span>
<span id="cb31-241"><a href="#cb31-241"></a><span class="co">#</span></span>
<span id="cb31-242"><a href="#cb31-242"></a><span class="co"># TOPBOT - Top-Bottom self-placement (10 pt scale)</span></span>
<span id="cb31-243"><a href="#cb31-243"></a><span class="co">#</span></span>
<span id="cb31-244"><a href="#cb31-244"></a><span class="co"># &quot;In our society, there are groups which tend to be towards the top and groups </span></span>
<span id="cb31-245"><a href="#cb31-245"></a><span class="co"># which tend to be towards the bottom. Below is a scale that runs</span></span>
<span id="cb31-246"><a href="#cb31-246"></a><span class="co"># from the top to the bottom. Where would you put yourself on this scale?&quot;</span></span>
<span id="cb31-247"><a href="#cb31-247"></a><span class="co"># Eri maissa hieman erilaisia kysymyksiä. </span></span>
<span id="cb31-248"><a href="#cb31-248"></a><span class="co">#</span></span>
<span id="cb31-249"><a href="#cb31-249"></a><span class="co"># HHCHILDR - How many children in household: children between [school age] and</span></span>
<span id="cb31-250"><a href="#cb31-250"></a><span class="co"># 17 years of age</span></span>
<span id="cb31-251"><a href="#cb31-251"></a><span class="co">#</span></span>
<span id="cb31-252"><a href="#cb31-252"></a><span class="co"># 0 No children</span></span>
<span id="cb31-253"><a href="#cb31-253"></a><span class="co"># 1 One child</span></span>
<span id="cb31-254"><a href="#cb31-254"></a><span class="co"># 2 2 children</span></span>
<span id="cb31-255"><a href="#cb31-255"></a><span class="co"># 21 21 children</span></span>
<span id="cb31-256"><a href="#cb31-256"></a><span class="co"># 96 NAP (Code 0 in HOMPOP)</span></span>
<span id="cb31-257"><a href="#cb31-257"></a><span class="co"># 97 Refused</span></span>
<span id="cb31-258"><a href="#cb31-258"></a><span class="co"># 99 No answer</span></span>
<span id="cb31-259"><a href="#cb31-259"></a><span class="co">#</span></span>
<span id="cb31-260"><a href="#cb31-260"></a><span class="co"># Voisi koodata dummymuuttujaksi lapsia (1) - ei lapsia (0).</span></span>
<span id="cb31-261"><a href="#cb31-261"></a><span class="co"># Ranskan datassa on erittäin iso osa puuttuvia tietoja (yli 20 %), Sama tilanne</span></span>
<span id="cb31-262"><a href="#cb31-262"></a><span class="co"># myös  muissa perheen kokoon liittyvissä kysymyksissä.  Myös Austarlialla aika</span></span>
<span id="cb31-263"><a href="#cb31-263"></a><span class="co"># paljon puuttuvia vastauksia.</span></span>
<span id="cb31-264"><a href="#cb31-264"></a><span class="co">#</span></span>
<span id="cb31-265"><a href="#cb31-265"></a><span class="co"># MARITAL - Legal partnership status </span></span>
<span id="cb31-266"><a href="#cb31-266"></a><span class="co">#</span></span>
<span id="cb31-267"><a href="#cb31-267"></a><span class="co"># What is your current legal marital status?</span></span>
<span id="cb31-268"><a href="#cb31-268"></a><span class="co"># The aim of this variable is to measure the current &#39;legal&#39; marital status &#39;. </span></span>
<span id="cb31-269"><a href="#cb31-269"></a><span class="co"># PARTLIV - muuttujassa on &#39;de facto&#39; - tilanteen tieto parisuhteesta</span></span>
<span id="cb31-270"><a href="#cb31-270"></a><span class="co">#</span></span>
<span id="cb31-271"><a href="#cb31-271"></a><span class="co"># 1 Married</span></span>
<span id="cb31-272"><a href="#cb31-272"></a><span class="co"># 2 Civil partnership</span></span>
<span id="cb31-273"><a href="#cb31-273"></a><span class="co"># 3 Separated from spouse/ civil partner (still legally married/ still legally </span></span>
<span id="cb31-274"><a href="#cb31-274"></a><span class="co">#   in a civil partnership)</span></span>
<span id="cb31-275"><a href="#cb31-275"></a><span class="co"># 4 Divorced from spouse/ legally separated from civil partner</span></span>
<span id="cb31-276"><a href="#cb31-276"></a><span class="co"># 5 Widowed/ civil partner died</span></span>
<span id="cb31-277"><a href="#cb31-277"></a><span class="co"># 6 Never married/ never in a civil partnership, single</span></span>
<span id="cb31-278"><a href="#cb31-278"></a><span class="co"># 7 Refused</span></span>
<span id="cb31-279"><a href="#cb31-279"></a><span class="co"># 8 Don&#39;t know</span></span>
<span id="cb31-280"><a href="#cb31-280"></a><span class="co"># 9 No answer</span></span>
<span id="cb31-281"><a href="#cb31-281"></a><span class="co">#</span></span>
<span id="cb31-282"><a href="#cb31-282"></a><span class="co"># URBRURAL - Place of living: urban - rural</span></span>
<span id="cb31-283"><a href="#cb31-283"></a><span class="co">#</span></span>
<span id="cb31-284"><a href="#cb31-284"></a><span class="co"># 1 A big city</span></span>
<span id="cb31-285"><a href="#cb31-285"></a><span class="co"># 2 The suburbs or outskirts of a big city</span></span>
<span id="cb31-286"><a href="#cb31-286"></a><span class="co"># 3 A town or a small city</span></span>
<span id="cb31-287"><a href="#cb31-287"></a><span class="co"># 4 A country village</span></span>
<span id="cb31-288"><a href="#cb31-288"></a><span class="co"># 5 A farm or home in the country</span></span>
<span id="cb31-289"><a href="#cb31-289"></a><span class="co"># 7 Other answer</span></span>
<span id="cb31-290"><a href="#cb31-290"></a><span class="co"># 9 No answer</span></span>
<span id="cb31-291"><a href="#cb31-291"></a><span class="co"># 1 ja 2 vaihtelevat aika paljon maittain, parempi laskea yhteen. Unkarista puuttuu </span></span>
<span id="cb31-292"><a href="#cb31-292"></a><span class="co"># jostain syystä kokonaan vaihtoehto 5.  Vaihotehdon 7 on valinnut vain 4</span></span>
<span id="cb31-293"><a href="#cb31-293"></a><span class="co"># vastaajaa Ranskasta.</span></span>
<span id="cb31-294"><a href="#cb31-294"></a><span class="co">#</span></span>
<span id="cb31-295"><a href="#cb31-295"></a></span>
<span id="cb31-296"><a href="#cb31-296"></a>bgvars1 &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="st">&quot;SEX&quot;</span>,<span class="st">&quot;AGE&quot;</span>,<span class="st">&quot;DEGREE&quot;</span>, <span class="st">&quot;MAINSTAT&quot;</span>, <span class="st">&quot;TOPBOT&quot;</span>,</span>
<span id="cb31-297"><a href="#cb31-297"></a>              <span class="st">&quot;HHCHILDR&quot;</span>, <span class="st">&quot;MARITAL&quot;</span>, <span class="st">&quot;URBRURAL&quot;</span>)</span>
<span id="cb31-298"><a href="#cb31-298"></a></span>
<span id="cb31-299"><a href="#cb31-299"></a><span class="co">#Valitaan muuttujat</span></span>
<span id="cb31-300"><a href="#cb31-300"></a></span>
<span id="cb31-301"><a href="#cb31-301"></a>jhvars1 &lt;-<span class="st"> </span><span class="kw">c</span>(metavars1,countryvars1, substvars1,bgvars1)</span>
<span id="cb31-302"><a href="#cb31-302"></a></span>
<span id="cb31-303"><a href="#cb31-303"></a><span class="co">#jhvars1</span></span>
<span id="cb31-304"><a href="#cb31-304"></a>ISSP2012jh1b.data &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012jh1a.data, <span class="kw">all_of</span>(jhvars1)) </span>
<span id="cb31-305"><a href="#cb31-305"></a></span>
<span id="cb31-306"><a href="#cb31-306"></a><span class="co"># laaja aineisto - mukana havainnot joissa puuttuvia tietoja</span></span>
<span id="cb31-307"><a href="#cb31-307"></a><span class="co"># str(ISSP2012jh1b.data) #32969 obs. of  23 variables </span></span>
<span id="cb31-308"><a href="#cb31-308"></a><span class="co"># </span></span>
<span id="cb31-309"><a href="#cb31-309"></a><span class="co"># SUBSTANSSIMUUTTUJAT</span></span>
<span id="cb31-310"><a href="#cb31-310"></a><span class="co">#</span></span>
<span id="cb31-311"><a href="#cb31-311"></a><span class="co"># $ V5      : &#39;haven_labelled&#39; num  5 1 2 2 1 NA 2 4 2 2 ...</span></span>
<span id="cb31-312"><a href="#cb31-312"></a><span class="co">#  ..- attr(*, &quot;label&quot;)= chr &quot;Q1a Working mom: warm relationship with children</span></span>
<span id="cb31-313"><a href="#cb31-313"></a><span class="co">#       as a not working mom&quot;</span></span>
<span id="cb31-314"><a href="#cb31-314"></a><span class="co">#  ..- attr(*, &quot;labels&quot;)= Named num  0 1 2 3 4 5 8 9</span></span>
<span id="cb31-315"><a href="#cb31-315"></a><span class="co">#</span></span>
<span id="cb31-316"><a href="#cb31-316"></a><span class="co"># ISSP2012jh1b.data$V5 näyttää tarkemmin rakenteen</span></span>
<span id="cb31-317"><a href="#cb31-317"></a><span class="co">#</span></span>
<span id="cb31-318"><a href="#cb31-318"></a><span class="co"># glimpse(ISSP2012jh1b.data)</span></span>
<span id="cb31-319"><a href="#cb31-319"></a></span>
<span id="cb31-320"><a href="#cb31-320"></a><span class="co"># Poistetaan havainnot, joissa ikä (AGE) tai sukupuolitieto puuttuu (5.7.2019)</span></span>
<span id="cb31-321"><a href="#cb31-321"></a></span>
<span id="cb31-322"><a href="#cb31-322"></a>ISSP2012jh1c.data &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012jh1b.data, (<span class="op">!</span><span class="kw">is.na</span>(SEX) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(AGE)))</span>
<span id="cb31-323"><a href="#cb31-323"></a></span>
<span id="cb31-324"><a href="#cb31-324"></a><span class="co"># str(ISSP2012jh1c.data) # 32823 obs. of  23 variables, 32969-32823 = 146</span></span>
<span id="cb31-325"><a href="#cb31-325"></a><span class="co"># TARKISTUS 8.6.20 dplyr 1.0.0-päivitys: havaintojen ja muuttujien määrä ok.</span></span>
<span id="cb31-326"><a href="#cb31-326"></a></span>
<span id="cb31-327"><a href="#cb31-327"></a><span class="co"># VAIHE 1 - muuttujat joissa ei ole puuttuvia tietoja</span></span>
<span id="cb31-328"><a href="#cb31-328"></a></span>
<span id="cb31-329"><a href="#cb31-329"></a><span class="co"># vaihe 1.1 haven_labelled ja chr -&gt; as_factor</span></span>
<span id="cb31-330"><a href="#cb31-330"></a></span>
<span id="cb31-331"><a href="#cb31-331"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1c.data <span class="op">%&gt;%</span></span>
<span id="cb31-332"><a href="#cb31-332"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">maa =</span> <span class="kw">as_factor</span>(C_ALPHAN), <span class="co"># ei puuttuvia, ei tyhjiä leveleitä</span></span>
<span id="cb31-333"><a href="#cb31-333"></a>           <span class="dt">maa3 =</span> <span class="kw">as_factor</span>(V3),  <span class="co"># maakoodi, jossa aluejako joillan mailla</span></span>
<span id="cb31-334"><a href="#cb31-334"></a>           <span class="dt">sp1 =</span> <span class="kw">as_factor</span>(SEX), <span class="co"># ei puuttuvia, tyhjä level &quot;no answer&quot; 999</span></span>
<span id="cb31-335"><a href="#cb31-335"></a>         )</span>
<span id="cb31-336"><a href="#cb31-336"></a></span>
<span id="cb31-337"><a href="#cb31-337"></a></span>
<span id="cb31-338"><a href="#cb31-338"></a><span class="co"># C_ALPHAN - maa - maa3 tarkistuksia</span></span>
<span id="cb31-339"><a href="#cb31-339"></a></span>
<span id="cb31-340"><a href="#cb31-340"></a><span class="co"># V3</span></span>
<span id="cb31-341"><a href="#cb31-341"></a><span class="co"># &quot;Pulma&quot; on järjestys. C_ALPHAN (&quot;chr&quot;) on aakkosjärjestyksessä, kun luodaan</span></span>
<span id="cb31-342"><a href="#cb31-342"></a><span class="co"># maa = as_factor(C_ALPHAN) järjestys muuttuu (esiintymisjärjestys datassa?)</span></span>
<span id="cb31-343"><a href="#cb31-343"></a><span class="co"># maa3 muunnetaan maakoodista (haven_labelled&#39; num), jonka</span></span>
<span id="cb31-344"><a href="#cb31-344"></a></span>
<span id="cb31-345"><a href="#cb31-345"></a><span class="co"># str(ISSP2012jh1d.dat$maa) #Country Prefix ISO 3166 Code - alphanumeric</span></span>
<span id="cb31-346"><a href="#cb31-346"></a><span class="co"># attributes(ISSP2012jh1d.dat$maa) # ei tyhiä levels-arvoja, 25 levels</span></span>
<span id="cb31-347"><a href="#cb31-347"></a><span class="co"># ISSP2012jh1d.dat$maa %&gt;% fct_unique()</span></span>
<span id="cb31-348"><a href="#cb31-348"></a><span class="co"># ISSP2012jh1d.dat$maa %&gt;% fct_count() # summary kertoo samat tiedot (20.2.20)</span></span>
<span id="cb31-349"><a href="#cb31-349"></a><span class="co"># sum(is.na(ISSP2012jh1d.dat$maa)) # ei puuttuvia tietoja</span></span>
<span id="cb31-350"><a href="#cb31-350"></a><span class="co"># ISSP2012jh1d.dat$maa %&gt;% summary() # mukana vain valitut 25 maata</span></span>
<span id="cb31-351"><a href="#cb31-351"></a></span>
<span id="cb31-352"><a href="#cb31-352"></a><span class="co"># str(ISSP2012jh1d.dat$maa3)  #&quot;Country/ Sample ISO 3166 Code</span></span>
<span id="cb31-353"><a href="#cb31-353"></a>                            <span class="co">#(see V4 for codes for whole nation states)&quot;</span></span>
<span id="cb31-354"><a href="#cb31-354"></a>                            <span class="co"># 29 levels</span></span>
<span id="cb31-355"><a href="#cb31-355"></a><span class="co"># str(ISSP2012jh1d.dat$V3)</span></span>
<span id="cb31-356"><a href="#cb31-356"></a></span>
<span id="cb31-357"><a href="#cb31-357"></a><span class="co"># attributes(ISSP2012jh1d.dat$maa3) # ei tyhiä levels-arvoja, 29 levels</span></span>
<span id="cb31-358"><a href="#cb31-358"></a><span class="co"># sum(is.na(ISSP2012jh1d.dat$maa3)) # nolla ei ole puuttuva tieto! (3.2.20)</span></span>
<span id="cb31-359"><a href="#cb31-359"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_unique()</span></span>
<span id="cb31-360"><a href="#cb31-360"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_count()</span></span>
<span id="cb31-361"><a href="#cb31-361"></a><span class="co"># Vain näissä on jaettu maan havainnot (3.2.20)</span></span>
<span id="cb31-362"><a href="#cb31-362"></a><span class="co">#</span></span>
<span id="cb31-363"><a href="#cb31-363"></a><span class="co"># [38] BE-FLA-Belgium/ Flanders</span></span>
<span id="cb31-364"><a href="#cb31-364"></a><span class="co"># [39] BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb31-365"><a href="#cb31-365"></a><span class="co"># [40] BE-BRU-Belgium/ Brussels</span></span>
<span id="cb31-366"><a href="#cb31-366"></a><span class="co"># [41] DE-W-Germany-West</span></span>
<span id="cb31-367"><a href="#cb31-367"></a><span class="co"># [42] DE-E-Germany-East</span></span>
<span id="cb31-368"><a href="#cb31-368"></a><span class="co"># [43] PT-Portugal 2012: first fieldwork round (main sample)</span></span>
<span id="cb31-369"><a href="#cb31-369"></a><span class="co"># [44] PT-Portugal 2012: second fieldwork round (complementary sample)</span></span>
<span id="cb31-370"><a href="#cb31-370"></a></span>
<span id="cb31-371"><a href="#cb31-371"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_count() #miksi ei tulosta mitään? (3.2.2020)</span></span>
<span id="cb31-372"><a href="#cb31-372"></a></span>
<span id="cb31-373"><a href="#cb31-373"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% summary()</span></span>
<span id="cb31-374"><a href="#cb31-374"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_unique()</span></span>
<span id="cb31-375"><a href="#cb31-375"></a><span class="co"># maa3: 25 maata, havaintojen määrä. Poisjätetyissä havaintoja 0.</span></span>
<span id="cb31-376"><a href="#cb31-376"></a><span class="co"># glimpse(ISSP2012jh1d.dat$maa3)</span></span>
<span id="cb31-377"><a href="#cb31-377"></a><span class="co"># head(ISSP2012jh1d.dat$maa3)</span></span>
<span id="cb31-378"><a href="#cb31-378"></a><span class="co"># length(levels(ISSP2012jh1d.dat$maa3))</span></span>
<span id="cb31-379"><a href="#cb31-379"></a></span>
<span id="cb31-380"><a href="#cb31-380"></a><span class="co"># C_ALPHAN alkuperäinen järjestys, maa aakkosjärjestyssä  (2.2.20)</span></span>
<span id="cb31-381"><a href="#cb31-381"></a><span class="co">#</span></span>
<span id="cb31-382"><a href="#cb31-382"></a><span class="co"># Huom1: Myös merkkijonomuuttujaa C_ALPHAN tarvitaan jatkossa.</span></span>
<span id="cb31-383"><a href="#cb31-383"></a><span class="co">#</span></span>
<span id="cb31-384"><a href="#cb31-384"></a><span class="co"># Huom2: kun dataa rajataan, on tarkistettava ja tarvittaessa poistettava</span></span>
<span id="cb31-385"><a href="#cb31-385"></a><span class="co"># &quot;tyhjät&quot; R-factor - muuttujan &quot;maa&quot; luokat (3.2.2020)</span></span>
<span id="cb31-386"><a href="#cb31-386"></a></span>
<span id="cb31-387"><a href="#cb31-387"></a></span>
<span id="cb31-388"><a href="#cb31-388"></a><span class="co"># vaihe 1.2 tyhjät luokat (levels) pois faktoreista</span></span>
<span id="cb31-389"><a href="#cb31-389"></a></span>
<span id="cb31-390"><a href="#cb31-390"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb31-391"><a href="#cb31-391"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">sp =</span> <span class="kw">fct_drop</span>(sp1),</span>
<span id="cb31-392"><a href="#cb31-392"></a>           <span class="dt">maa3 =</span> <span class="kw">fct_drop</span>(maa3)</span>
<span id="cb31-393"><a href="#cb31-393"></a>           )</span>
<span id="cb31-394"><a href="#cb31-394"></a></span>
<span id="cb31-395"><a href="#cb31-395"></a><span class="co">#  maa3 - tarkistuksia</span></span>
<span id="cb31-396"><a href="#cb31-396"></a></span>
<span id="cb31-397"><a href="#cb31-397"></a><span class="co"># str(ISSP2012jh1d.dat$maa3)  # 29 levels</span></span>
<span id="cb31-398"><a href="#cb31-398"></a><span class="co"># attributes(ISSP2012jh1d.dat$maa3)</span></span>
<span id="cb31-399"><a href="#cb31-399"></a><span class="co">#sum(is.na(ISSP2012jh1d.dat$maa3)) # nolla ei ole puuttuva tieto! (3.2.20)</span></span>
<span id="cb31-400"><a href="#cb31-400"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% summary()</span></span>
<span id="cb31-401"><a href="#cb31-401"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_unique()</span></span>
<span id="cb31-402"><a href="#cb31-402"></a><span class="co"># ISSP2012jh1d.dat$maa3 %&gt;% fct_count()</span></span>
<span id="cb31-403"><a href="#cb31-403"></a><span class="co">#</span></span>
<span id="cb31-404"><a href="#cb31-404"></a><span class="co"># str(ISSP2012jh1d.dat$C_ALPHAN)</span></span>
<span id="cb31-405"><a href="#cb31-405"></a><span class="co"># attributes(ISSP2012jh1d.dat$C_ALPHAN)</span></span>
<span id="cb31-406"><a href="#cb31-406"></a></span>
<span id="cb31-407"><a href="#cb31-407"></a><span class="co"># TESTAUKSIA</span></span>
<span id="cb31-408"><a href="#cb31-408"></a><span class="co"># </span></span>
<span id="cb31-409"><a href="#cb31-409"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(C_ALPHAN, maa)</span></span>
<span id="cb31-410"><a href="#cb31-410"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(C_ALPHAN, maa3)</span></span>
<span id="cb31-411"><a href="#cb31-411"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(maa, maa3)</span></span>
<span id="cb31-412"><a href="#cb31-412"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(V3, maa3)</span></span>
<span id="cb31-413"><a href="#cb31-413"></a></span>
<span id="cb31-414"><a href="#cb31-414"></a><span class="co"># sp, sp1, SEX - tarkistuksia</span></span>
<span id="cb31-415"><a href="#cb31-415"></a><span class="co"># </span></span>
<span id="cb31-416"><a href="#cb31-416"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_count()</span></span>
<span id="cb31-417"><a href="#cb31-417"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_count()</span></span>
<span id="cb31-418"><a href="#cb31-418"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(SEX,sp1)</span></span>
<span id="cb31-419"><a href="#cb31-419"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(SEX,sp)</span></span>
<span id="cb31-420"><a href="#cb31-420"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(sp1,sp)</span></span>
<span id="cb31-421"><a href="#cb31-421"></a></span>
<span id="cb31-422"><a href="#cb31-422"></a><span class="co"># vaihe 1.3 uudet &quot;faktorilabelit&quot;</span></span>
<span id="cb31-423"><a href="#cb31-423"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb31-424"><a href="#cb31-424"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">sp =</span></span>
<span id="cb31-425"><a href="#cb31-425"></a>          <span class="kw">fct_recode</span>(sp,</span>
<span id="cb31-426"><a href="#cb31-426"></a>            <span class="st">&quot;m&quot;</span> =<span class="st"> &quot;Male&quot;</span>,</span>
<span id="cb31-427"><a href="#cb31-427"></a>            <span class="st">&quot;f&quot;</span> =<span class="st"> &quot;Female&quot;</span>)</span>
<span id="cb31-428"><a href="#cb31-428"></a>            )</span>
<span id="cb31-429"><a href="#cb31-429"></a></span>
<span id="cb31-430"><a href="#cb31-430"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb31-431"><a href="#cb31-431"></a></span>
<span id="cb31-432"><a href="#cb31-432"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_unique()</span></span>
<span id="cb31-433"><a href="#cb31-433"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% fct_count()</span></span>
<span id="cb31-434"><a href="#cb31-434"></a><span class="co"># ISSP2012jh1d.dat$sp %&gt;% summary()</span></span>
<span id="cb31-435"><a href="#cb31-435"></a></span>
<span id="cb31-436"><a href="#cb31-436"></a><span class="co"># AGE -&gt; ika</span></span>
<span id="cb31-437"><a href="#cb31-437"></a>ISSP2012jh1d.dat<span class="op">$</span>ika &lt;-<span class="st"> </span>ISSP2012jh1d.dat<span class="op">$</span>AGE</span>
<span id="cb31-438"><a href="#cb31-438"></a></span>
<span id="cb31-439"><a href="#cb31-439"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb31-440"><a href="#cb31-440"></a><span class="kw">attributes</span>(ISSP2012jh1d.dat<span class="op">$</span>ika) <span class="co"># tyhjä level &quot;No answer&quot;</span></span>
<span id="cb31-441"><a href="#cb31-441"></a><span class="co"># str(ISSP2012jh1d.dat$ika)</span></span>
<span id="cb31-442"><a href="#cb31-442"></a>ISSP2012jh1d.dat<span class="op">$</span>ika <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span>()</span>
<span id="cb31-443"><a href="#cb31-443"></a></span>
<span id="cb31-444"><a href="#cb31-444"></a>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb31-445"><a href="#cb31-445"></a><span class="kw">tableC</span>(AGE, ika,<span class="dt">cor_type =</span> <span class="st">&quot;pearson&quot;</span>, <span class="dt">na.rm =</span> <span class="ot">FALSE</span>, <span class="dt">rounding =</span> <span class="dv">5</span>,</span>
<span id="cb31-446"><a href="#cb31-446"></a>       <span class="dt">output =</span> <span class="st">&quot;text&quot;</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>, <span class="dt">caption =</span> <span class="ot">NULL</span>, <span class="dt">align =</span> <span class="ot">NULL</span>,</span>
<span id="cb31-447"><a href="#cb31-447"></a>       <span class="dt">float =</span> <span class="st">&quot;htb&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable</span>()</span>
<span id="cb31-448"><a href="#cb31-448"></a></span>
<span id="cb31-449"><a href="#cb31-449"></a><span class="co"># Ikäjakauma - ei tarvita (18.10.2020)</span></span>
<span id="cb31-450"><a href="#cb31-450"></a><span class="co">#</span></span>
<span id="cb31-451"><a href="#cb31-451"></a><span class="co"># ISSP2012jh1d.dat$ika %&gt;% hist(main = &quot;ISSP 2012: vastaajan ikä&quot;)</span></span>
<span id="cb31-452"><a href="#cb31-452"></a></span>
<span id="cb31-453"><a href="#cb31-453"></a><span class="co"># Substanssi- ja taustamuuttujat R-faktoreiksi</span></span>
<span id="cb31-454"><a href="#cb31-454"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb31-455"><a href="#cb31-455"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1a1 =</span> <span class="kw">as_factor</span>(V5), <span class="co">#labels</span></span>
<span id="cb31-456"><a href="#cb31-456"></a>            <span class="dt">Q1b1 =</span> <span class="kw">as_factor</span>(V6),</span>
<span id="cb31-457"><a href="#cb31-457"></a>            <span class="dt">Q1c1 =</span> <span class="kw">as_factor</span>(V7),</span>
<span id="cb31-458"><a href="#cb31-458"></a>            <span class="dt">Q1d1 =</span> <span class="kw">as_factor</span>(V8),</span>
<span id="cb31-459"><a href="#cb31-459"></a>            <span class="dt">Q1e1 =</span> <span class="kw">as_factor</span>(V9),</span>
<span id="cb31-460"><a href="#cb31-460"></a>            <span class="dt">Q2a1 =</span> <span class="kw">as_factor</span>(V10),</span>
<span id="cb31-461"><a href="#cb31-461"></a>            <span class="dt">Q2b1 =</span> <span class="kw">as_factor</span>(V11),</span>
<span id="cb31-462"><a href="#cb31-462"></a>            <span class="dt">Q3a1 =</span> <span class="kw">as_factor</span>(V12), <span class="co">#labels = vastQ3_labels (W,w,H)</span></span>
<span id="cb31-463"><a href="#cb31-463"></a>            <span class="dt">Q3b1 =</span> <span class="kw">as_factor</span>(V13), <span class="co">#labels = vastQ3_labels</span></span>
<span id="cb31-464"><a href="#cb31-464"></a>            <span class="dt">edu1 =</span> <span class="kw">as_factor</span>(DEGREE),</span>
<span id="cb31-465"><a href="#cb31-465"></a>            <span class="dt">msta1 =</span> <span class="kw">as_factor</span>(MAINSTAT),</span>
<span id="cb31-466"><a href="#cb31-466"></a>            <span class="dt">sosta1 =</span> <span class="kw">as_factor</span>(TOPBOT),</span>
<span id="cb31-467"><a href="#cb31-467"></a>            <span class="dt">nchild1 =</span> <span class="kw">as_factor</span>(HHCHILDR),</span>
<span id="cb31-468"><a href="#cb31-468"></a>            <span class="dt">lifsta1 =</span> <span class="kw">as_factor</span>(MARITAL),</span>
<span id="cb31-469"><a href="#cb31-469"></a>            <span class="dt">urbru1 =</span> <span class="kw">as_factor</span>(URBRURAL)</span>
<span id="cb31-470"><a href="#cb31-470"></a>           )</span>
<span id="cb31-471"><a href="#cb31-471"></a></span>
<span id="cb31-472"><a href="#cb31-472"></a><span class="co"># Muuttujat Q1a1...urbru1 ovat apumuuttujia, joissa on periaatteessa kaikki SPSS-</span></span>
<span id="cb31-473"><a href="#cb31-473"></a><span class="co"># tiedostosta siirtyvä metatieto. Poikkeus on SPSS:n kolme tarkentavaa koodia</span></span>
<span id="cb31-474"><a href="#cb31-474"></a><span class="co"># puuttuvalle tiedolle, ne saisi mukaan read_spss - parametrin avulla (user_na=TRUE)</span></span>
<span id="cb31-475"><a href="#cb31-475"></a><span class="co">#</span></span>
<span id="cb31-476"><a href="#cb31-476"></a></span>
<span id="cb31-477"><a href="#cb31-477"></a><span class="co"># Tarkistusksia</span></span>
<span id="cb31-478"><a href="#cb31-478"></a><span class="co"># ISSP2012jh1d.dat %&gt;% summary()</span></span>
<span id="cb31-479"><a href="#cb31-479"></a></span>
<span id="cb31-480"><a href="#cb31-480"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-481"><a href="#cb31-481"></a><span class="co">#    select(Q1a1, Q1b1, Q1c1,Q1d1,Q1e1, Q2a1, Q2b1, Q3a1,Q3b1) %&gt;%</span></span>
<span id="cb31-482"><a href="#cb31-482"></a><span class="co">#    summary()</span></span>
<span id="cb31-483"><a href="#cb31-483"></a><span class="co">#</span></span>
<span id="cb31-484"><a href="#cb31-484"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-485"><a href="#cb31-485"></a><span class="co">#    select(edu1,msta1, sosta1, nchild1, lifsta1, urbru1) %&gt;%</span></span>
<span id="cb31-486"><a href="#cb31-486"></a><span class="co">#    summary()</span></span>
<span id="cb31-487"><a href="#cb31-487"></a></span>
<span id="cb31-488"><a href="#cb31-488"></a></span>
<span id="cb31-489"><a href="#cb31-489"></a><span class="co"># Substanssimuuttujat - ristiintaulukoinnit riittävät (6.2.20)</span></span>
<span id="cb31-490"><a href="#cb31-490"></a></span>
<span id="cb31-491"><a href="#cb31-491"></a><span class="co"># ISSP2012jh1d.dat$Q1a1 %&gt;% fct_count()</span></span>
<span id="cb31-492"><a href="#cb31-492"></a><span class="co"># ISSP2012jh1d.dat$Q1b1 %&gt;% fct_count()</span></span>
<span id="cb31-493"><a href="#cb31-493"></a><span class="co"># ISSP2012jh1d.dat$Q1c1 %&gt;% fct_count()</span></span>
<span id="cb31-494"><a href="#cb31-494"></a><span class="co"># ISSP2012jh1d.dat$Q1d1 %&gt;% fct_count()</span></span>
<span id="cb31-495"><a href="#cb31-495"></a><span class="co"># ISSP2012jh1d.dat$Q1e1 %&gt;% fct_count()</span></span>
<span id="cb31-496"><a href="#cb31-496"></a><span class="co"># ISSP2012jh1d.dat$Q2a1 %&gt;% fct_count()</span></span>
<span id="cb31-497"><a href="#cb31-497"></a><span class="co"># ISSP2012jh1d.dat$Q2b1 %&gt;% fct_count()</span></span>
<span id="cb31-498"><a href="#cb31-498"></a><span class="co"># ISSP2012jh1d.dat$Q3a1 %&gt;% fct_count()</span></span>
<span id="cb31-499"><a href="#cb31-499"></a><span class="co">#ISSP2012jh1d.dat$Q3b1 %&gt;% fct_count()</span></span>
<span id="cb31-500"><a href="#cb31-500"></a></span>
<span id="cb31-501"><a href="#cb31-501"></a><span class="co"># Taustamuuttujat - ristiintaulukoinnit riittävät (6.2.20)</span></span>
<span id="cb31-502"><a href="#cb31-502"></a></span>
<span id="cb31-503"><a href="#cb31-503"></a><span class="co"># ISSP2012jh1d.dat$edu1 %&gt;% fct_count()</span></span>
<span id="cb31-504"><a href="#cb31-504"></a><span class="co"># ISSP2012jh1d.dat$msta1 %&gt;% fct_count()</span></span>
<span id="cb31-505"><a href="#cb31-505"></a><span class="co"># ISSP2012jh1d.dat$sosta1 %&gt;% fct_count()</span></span>
<span id="cb31-506"><a href="#cb31-506"></a><span class="co"># ISSP2012jh1d.dat$nchild1 %&gt;% fct_count()</span></span>
<span id="cb31-507"><a href="#cb31-507"></a><span class="co"># ISSP2012jh1d.dat$lifsta1 %&gt;% fct_count()</span></span>
<span id="cb31-508"><a href="#cb31-508"></a><span class="co"># ISSP2012jh1d.dat$urbru1 %&gt;% fct_count()</span></span>
<span id="cb31-509"><a href="#cb31-509"></a></span>
<span id="cb31-510"><a href="#cb31-510"></a><span class="co"># Poistetaan tyhjät luokat muuttujista</span></span>
<span id="cb31-511"><a href="#cb31-511"></a></span>
<span id="cb31-512"><a href="#cb31-512"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb31-513"><a href="#cb31-513"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1a =</span> <span class="kw">fct_drop</span>(Q1a1),</span>
<span id="cb31-514"><a href="#cb31-514"></a>           <span class="dt">Q1b =</span> <span class="kw">fct_drop</span>(Q1b1),</span>
<span id="cb31-515"><a href="#cb31-515"></a>           <span class="dt">Q1c =</span> <span class="kw">fct_drop</span>(Q1c1),</span>
<span id="cb31-516"><a href="#cb31-516"></a>           <span class="dt">Q1d =</span> <span class="kw">fct_drop</span>(Q1d1),</span>
<span id="cb31-517"><a href="#cb31-517"></a>           <span class="dt">Q1e =</span> <span class="kw">fct_drop</span>(Q1e1),</span>
<span id="cb31-518"><a href="#cb31-518"></a>           <span class="dt">Q2a =</span> <span class="kw">fct_drop</span>(Q2a1),</span>
<span id="cb31-519"><a href="#cb31-519"></a>           <span class="dt">Q2b =</span> <span class="kw">fct_drop</span>(Q2b1),</span>
<span id="cb31-520"><a href="#cb31-520"></a>           <span class="dt">Q3a =</span> <span class="kw">fct_drop</span>(Q3a1),</span>
<span id="cb31-521"><a href="#cb31-521"></a>           <span class="dt">Q3b =</span> <span class="kw">fct_drop</span>(Q3b1),</span>
<span id="cb31-522"><a href="#cb31-522"></a>           <span class="dt">edu =</span> <span class="kw">fct_drop</span>(edu1),</span>
<span id="cb31-523"><a href="#cb31-523"></a>           <span class="dt">msta =</span> <span class="kw">fct_drop</span>(msta1),</span>
<span id="cb31-524"><a href="#cb31-524"></a>           <span class="dt">sosta =</span> <span class="kw">fct_drop</span>(sosta1),</span>
<span id="cb31-525"><a href="#cb31-525"></a>           <span class="dt">nchild =</span> <span class="kw">fct_drop</span>(nchild1),</span>
<span id="cb31-526"><a href="#cb31-526"></a>           <span class="dt">lifsta =</span> <span class="kw">fct_drop</span>(lifsta1),</span>
<span id="cb31-527"><a href="#cb31-527"></a>           <span class="dt">urbru =</span> <span class="kw">fct_drop</span>(urbru1)</span>
<span id="cb31-528"><a href="#cb31-528"></a></span>
<span id="cb31-529"><a href="#cb31-529"></a>    )</span>
<span id="cb31-530"><a href="#cb31-530"></a><span class="co"># Tarkistuksia 1</span></span>
<span id="cb31-531"><a href="#cb31-531"></a></span>
<span id="cb31-532"><a href="#cb31-532"></a><span class="co"># ISSP2012jh1d.dat %&gt;% summary()</span></span>
<span id="cb31-533"><a href="#cb31-533"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-534"><a href="#cb31-534"></a><span class="co">#    select(Q1a, Q1b, Q1c, Q1d, Q1e,Q2a,Q2b,Q3a, Q3b) %&gt;%</span></span>
<span id="cb31-535"><a href="#cb31-535"></a><span class="co">#    str()</span></span>
<span id="cb31-536"><a href="#cb31-536"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-537"><a href="#cb31-537"></a><span class="co">#    select(Q1a1, Q1b1, Q1c1, Q1d1, Q1e1,Q2a1,Q2b1,Q3a1, Q3b1) %&gt;%</span></span>
<span id="cb31-538"><a href="#cb31-538"></a><span class="co">#    str()</span></span>
<span id="cb31-539"><a href="#cb31-539"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-540"><a href="#cb31-540"></a><span class="co">#    select(edu, msta, sosta, nchild,lifsta, urbru) %&gt;%</span></span>
<span id="cb31-541"><a href="#cb31-541"></a><span class="co">#    str()</span></span>
<span id="cb31-542"><a href="#cb31-542"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-543"><a href="#cb31-543"></a><span class="co">#    select(edu1, msta1, sosta1, nchild1,lifsta1, urbru1) %&gt;%</span></span>
<span id="cb31-544"><a href="#cb31-544"></a><span class="co">#    str()</span></span>
<span id="cb31-545"><a href="#cb31-545"></a></span>
<span id="cb31-546"><a href="#cb31-546"></a><span class="co"># Tarkistuksia 2 - ristiintaulukointeja</span></span>
<span id="cb31-547"><a href="#cb31-547"></a><span class="co"># Substanssimuuttujat</span></span>
<span id="cb31-548"><a href="#cb31-548"></a></span>
<span id="cb31-549"><a href="#cb31-549"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1a,Q1a1)</span></span>
<span id="cb31-550"><a href="#cb31-550"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1b,Q1b1)</span></span>
<span id="cb31-551"><a href="#cb31-551"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1c,Q1c1)</span></span>
<span id="cb31-552"><a href="#cb31-552"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1d,Q1d1)</span></span>
<span id="cb31-553"><a href="#cb31-553"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q1e,Q1e1)</span></span>
<span id="cb31-554"><a href="#cb31-554"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q2a,Q2a1)</span></span>
<span id="cb31-555"><a href="#cb31-555"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q2b,Q2b1)</span></span>
<span id="cb31-556"><a href="#cb31-556"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q3a,Q3a1)</span></span>
<span id="cb31-557"><a href="#cb31-557"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(Q3b,Q3b1)</span></span>
<span id="cb31-558"><a href="#cb31-558"></a></span>
<span id="cb31-559"><a href="#cb31-559"></a><span class="co"># Taustamuuttujat</span></span>
<span id="cb31-560"><a href="#cb31-560"></a></span>
<span id="cb31-561"><a href="#cb31-561"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(edu,edu1)</span></span>
<span id="cb31-562"><a href="#cb31-562"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(msta,msta1)</span></span>
<span id="cb31-563"><a href="#cb31-563"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(sosta,sosta1)</span></span>
<span id="cb31-564"><a href="#cb31-564"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(nchild,nchild1)</span></span>
<span id="cb31-565"><a href="#cb31-565"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(lifsta,lifsta1)</span></span>
<span id="cb31-566"><a href="#cb31-566"></a><span class="co"># ISSP2012jh1d.dat %&gt;% tableX(urbru,urbru1)</span></span>
<span id="cb31-567"><a href="#cb31-567"></a></span>
<span id="cb31-568"><a href="#cb31-568"></a><span class="co"># Uusi muuttuja, jossa NA-arvot ovat mukana muuttujan uutena luokkana. Muuttujat</span></span>
<span id="cb31-569"><a href="#cb31-569"></a><span class="co"># nimetään Q1a -&gt; Q1am.</span></span>
<span id="cb31-570"><a href="#cb31-570"></a></span>
<span id="cb31-571"><a href="#cb31-571"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb31-572"><a href="#cb31-572"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1am =</span> <span class="kw">fct_explicit_na</span>(Q1a, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-573"><a href="#cb31-573"></a>           <span class="dt">Q1bm =</span> <span class="kw">fct_explicit_na</span>(Q1b, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-574"><a href="#cb31-574"></a>           <span class="dt">Q1cm =</span> <span class="kw">fct_explicit_na</span>(Q1c, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-575"><a href="#cb31-575"></a>           <span class="dt">Q1dm =</span> <span class="kw">fct_explicit_na</span>(Q1d, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-576"><a href="#cb31-576"></a>           <span class="dt">Q1em =</span> <span class="kw">fct_explicit_na</span>(Q1e, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-577"><a href="#cb31-577"></a>           <span class="dt">Q2am =</span> <span class="kw">fct_explicit_na</span>(Q2a, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-578"><a href="#cb31-578"></a>           <span class="dt">Q2bm =</span> <span class="kw">fct_explicit_na</span>(Q2b, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-579"><a href="#cb31-579"></a>           <span class="dt">Q3am =</span> <span class="kw">fct_explicit_na</span>(Q3a, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-580"><a href="#cb31-580"></a>           <span class="dt">Q3bm =</span> <span class="kw">fct_explicit_na</span>(Q3b, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-581"><a href="#cb31-581"></a>           <span class="dt">edum =</span> <span class="kw">fct_explicit_na</span>(edu, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-582"><a href="#cb31-582"></a>           <span class="dt">mstam =</span> <span class="kw">fct_explicit_na</span>(msta, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-583"><a href="#cb31-583"></a>           <span class="dt">sostam =</span> <span class="kw">fct_explicit_na</span>(sosta, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-584"><a href="#cb31-584"></a>           <span class="dt">nchildm =</span> <span class="kw">fct_explicit_na</span>(nchild, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-585"><a href="#cb31-585"></a>           <span class="dt">lifstam =</span> <span class="kw">fct_explicit_na</span>(lifsta, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-586"><a href="#cb31-586"></a>           <span class="dt">urbrum =</span> <span class="kw">fct_explicit_na</span>(urbru, <span class="dt">na_level =</span> <span class="st">&quot;missing&quot;</span>),</span>
<span id="cb31-587"><a href="#cb31-587"></a>           )</span>
<span id="cb31-588"><a href="#cb31-588"></a><span class="co"># Tarkistuksia 3</span></span>
<span id="cb31-589"><a href="#cb31-589"></a></span>
<span id="cb31-590"><a href="#cb31-590"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-591"><a href="#cb31-591"></a><span class="co">#    select(Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm) %&gt;%</span></span>
<span id="cb31-592"><a href="#cb31-592"></a><span class="co">#    summary()</span></span>
<span id="cb31-593"><a href="#cb31-593"></a><span class="co">#</span></span>
<span id="cb31-594"><a href="#cb31-594"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-595"><a href="#cb31-595"></a><span class="co">#    select(edum,mstam, sostam,nchildm,lifstam, urbrum) %&gt;%</span></span>
<span id="cb31-596"><a href="#cb31-596"></a><span class="co">#    summary()</span></span>
<span id="cb31-597"><a href="#cb31-597"></a><span class="co">#</span></span>
<span id="cb31-598"><a href="#cb31-598"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-599"><a href="#cb31-599"></a><span class="co">#    select(Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm) %&gt;%</span></span>
<span id="cb31-600"><a href="#cb31-600"></a><span class="co">#    str()</span></span>
<span id="cb31-601"><a href="#cb31-601"></a><span class="co">#</span></span>
<span id="cb31-602"><a href="#cb31-602"></a><span class="co">#ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-603"><a href="#cb31-603"></a><span class="co">#    select(edum,mstam, sostam,nchildm,lifstam, urbrum) %&gt;%</span></span>
<span id="cb31-604"><a href="#cb31-604"></a><span class="co">#    str()</span></span>
<span id="cb31-605"><a href="#cb31-605"></a></span>
<span id="cb31-606"><a href="#cb31-606"></a><span class="co"># Taustamuuttuja, puuttuva tieto mukana - ristiintaulkointeja</span></span>
<span id="cb31-607"><a href="#cb31-607"></a></span>
<span id="cb31-608"><a href="#cb31-608"></a><span class="co"># ISSP2012jh1d.dat$edum %&gt;% fct_count()</span></span>
<span id="cb31-609"><a href="#cb31-609"></a><span class="co"># ISSP2012jh1d.dat$mstam %&gt;% fct_count()</span></span>
<span id="cb31-610"><a href="#cb31-610"></a><span class="co"># ISSP2012jh1d.dat$sostam %&gt;% fct_count()</span></span>
<span id="cb31-611"><a href="#cb31-611"></a><span class="co"># ISSP2012jh1d.dat$nchildm %&gt;% fct_count()</span></span>
<span id="cb31-612"><a href="#cb31-612"></a><span class="co"># ISSP2012jh1d.dat$lifstam %&gt;% fct_count()</span></span>
<span id="cb31-613"><a href="#cb31-613"></a><span class="co"># ISSP2012jh1d.dat$urbrum %&gt;% fct_count()</span></span>
<span id="cb31-614"><a href="#cb31-614"></a></span>
<span id="cb31-615"><a href="#cb31-615"></a><span class="co"># Substanssimuuttujat, puuttuva tieto mukana  - ristiintaulkointeja</span></span>
<span id="cb31-616"><a href="#cb31-616"></a></span>
<span id="cb31-617"><a href="#cb31-617"></a><span class="co"># ISSP2012jh1d.dat$Q1am %&gt;% fct_count()</span></span>
<span id="cb31-618"><a href="#cb31-618"></a><span class="co"># ISSP2012jh1d.dat$Q1bm %&gt;% fct_count()</span></span>
<span id="cb31-619"><a href="#cb31-619"></a><span class="co"># ISSP2012jh1d.dat$Q1cm %&gt;% fct_count()</span></span>
<span id="cb31-620"><a href="#cb31-620"></a><span class="co"># ISSP2012jh1d.dat$Q1dm %&gt;% fct_count()</span></span>
<span id="cb31-621"><a href="#cb31-621"></a><span class="co"># ISSP2012jh1d.dat$Q1em %&gt;% fct_count()</span></span>
<span id="cb31-622"><a href="#cb31-622"></a><span class="co"># ISSP2012jh1d.dat$Q2am %&gt;% fct_count()</span></span>
<span id="cb31-623"><a href="#cb31-623"></a><span class="co"># ISSP2012jh1d.dat$Q2bm %&gt;% fct_count()</span></span>
<span id="cb31-624"><a href="#cb31-624"></a><span class="co"># ISSP2012jh1d.dat$Q3am %&gt;% fct_count()</span></span>
<span id="cb31-625"><a href="#cb31-625"></a><span class="co"># ISSP2012jh1d.dat$Q3bm %&gt;% fct_count()</span></span>
<span id="cb31-626"><a href="#cb31-626"></a></span>
<span id="cb31-627"><a href="#cb31-627"></a><span class="co"># Vaihe 2.4.1</span></span>
<span id="cb31-628"><a href="#cb31-628"></a></span>
<span id="cb31-629"><a href="#cb31-629"></a><span class="co"># Q1a - Q1e,Q2a, Q2b  Viisi vastausvaihtoehtoa - ei eksplisiittistä NA-tietoa(&quot;missing&quot;)</span></span>
<span id="cb31-630"><a href="#cb31-630"></a><span class="co"># Q3a - Q3b  kolme vastausvaihtoehtoa</span></span>
<span id="cb31-631"><a href="#cb31-631"></a></span>
<span id="cb31-632"><a href="#cb31-632"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb31-633"><a href="#cb31-633"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1a =</span> <span class="kw">fct_recode</span>(Q1a,</span>
<span id="cb31-634"><a href="#cb31-634"></a>                        <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-635"><a href="#cb31-635"></a>                        <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-636"><a href="#cb31-636"></a>                        <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-637"><a href="#cb31-637"></a>                        <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-638"><a href="#cb31-638"></a>                        <span class="st">&quot;E&quot;</span>=<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb31-639"><a href="#cb31-639"></a>            <span class="dt">Q1b =</span> <span class="kw">fct_recode</span>(Q1b,</span>
<span id="cb31-640"><a href="#cb31-640"></a>                      <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-641"><a href="#cb31-641"></a>                      <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-642"><a href="#cb31-642"></a>                      <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-643"><a href="#cb31-643"></a>                      <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-644"><a href="#cb31-644"></a>                      <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb31-645"><a href="#cb31-645"></a>           <span class="dt">Q1c =</span> <span class="kw">fct_recode</span>(Q1c,</span>
<span id="cb31-646"><a href="#cb31-646"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-647"><a href="#cb31-647"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-648"><a href="#cb31-648"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-649"><a href="#cb31-649"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-650"><a href="#cb31-650"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb31-651"><a href="#cb31-651"></a>           <span class="dt">Q1d =</span> <span class="kw">fct_recode</span>(Q1d,</span>
<span id="cb31-652"><a href="#cb31-652"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-653"><a href="#cb31-653"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-654"><a href="#cb31-654"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-655"><a href="#cb31-655"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-656"><a href="#cb31-656"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb31-657"><a href="#cb31-657"></a>           <span class="dt">Q1e =</span> <span class="kw">fct_recode</span>(Q1e,</span>
<span id="cb31-658"><a href="#cb31-658"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-659"><a href="#cb31-659"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-660"><a href="#cb31-660"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-661"><a href="#cb31-661"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-662"><a href="#cb31-662"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb31-663"><a href="#cb31-663"></a>          <span class="dt">Q2a =</span> <span class="kw">fct_recode</span>(Q2a,</span>
<span id="cb31-664"><a href="#cb31-664"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-665"><a href="#cb31-665"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-666"><a href="#cb31-666"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-667"><a href="#cb31-667"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-668"><a href="#cb31-668"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span> ),</span>
<span id="cb31-669"><a href="#cb31-669"></a>          <span class="dt">Q2b =</span> <span class="kw">fct_recode</span>(Q2b,</span>
<span id="cb31-670"><a href="#cb31-670"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-671"><a href="#cb31-671"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-672"><a href="#cb31-672"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-673"><a href="#cb31-673"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-674"><a href="#cb31-674"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>),</span>
<span id="cb31-675"><a href="#cb31-675"></a>          <span class="dt">Q3a =</span> <span class="kw">fct_recode</span>(Q3a,</span>
<span id="cb31-676"><a href="#cb31-676"></a>                          <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb31-677"><a href="#cb31-677"></a>                          <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb31-678"><a href="#cb31-678"></a>                          <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span> ),</span>
<span id="cb31-679"><a href="#cb31-679"></a>          <span class="dt">Q3b =</span> <span class="kw">fct_recode</span>(Q3b,</span>
<span id="cb31-680"><a href="#cb31-680"></a>                           <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb31-681"><a href="#cb31-681"></a>                           <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb31-682"><a href="#cb31-682"></a>                           <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span> )</span>
<span id="cb31-683"><a href="#cb31-683"></a>                        )</span>
<span id="cb31-684"><a href="#cb31-684"></a></span>
<span id="cb31-685"><a href="#cb31-685"></a></span>
<span id="cb31-686"><a href="#cb31-686"></a><span class="co"># Tarkistuksia 1</span></span>
<span id="cb31-687"><a href="#cb31-687"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-688"><a href="#cb31-688"></a><span class="co">#    select(Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b, Q3a, Q3b) %&gt;%</span></span>
<span id="cb31-689"><a href="#cb31-689"></a><span class="co">#    summary()</span></span>
<span id="cb31-690"><a href="#cb31-690"></a></span>
<span id="cb31-691"><a href="#cb31-691"></a></span>
<span id="cb31-692"><a href="#cb31-692"></a><span class="co"># Vaihe 2.4.2 - muuttujassa eksplisiittinen NA-tieto</span></span>
<span id="cb31-693"><a href="#cb31-693"></a>ISSP2012jh1d.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span></span>
<span id="cb31-694"><a href="#cb31-694"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Q1am =</span> <span class="kw">fct_recode</span>(Q1am,</span>
<span id="cb31-695"><a href="#cb31-695"></a>                            <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-696"><a href="#cb31-696"></a>                            <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-697"><a href="#cb31-697"></a>                            <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-698"><a href="#cb31-698"></a>                            <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-699"><a href="#cb31-699"></a>                            <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb31-700"><a href="#cb31-700"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb31-701"><a href="#cb31-701"></a>           <span class="dt">Q1bm =</span> <span class="kw">fct_recode</span>(Q1bm,</span>
<span id="cb31-702"><a href="#cb31-702"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-703"><a href="#cb31-703"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-704"><a href="#cb31-704"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-705"><a href="#cb31-705"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-706"><a href="#cb31-706"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb31-707"><a href="#cb31-707"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb31-708"><a href="#cb31-708"></a>           <span class="dt">Q1cm =</span> <span class="kw">fct_recode</span>(Q1cm,</span>
<span id="cb31-709"><a href="#cb31-709"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-710"><a href="#cb31-710"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-711"><a href="#cb31-711"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-712"><a href="#cb31-712"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-713"><a href="#cb31-713"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb31-714"><a href="#cb31-714"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb31-715"><a href="#cb31-715"></a>           <span class="dt">Q1dm =</span> <span class="kw">fct_recode</span>(Q1dm,</span>
<span id="cb31-716"><a href="#cb31-716"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-717"><a href="#cb31-717"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-718"><a href="#cb31-718"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-719"><a href="#cb31-719"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-720"><a href="#cb31-720"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb31-721"><a href="#cb31-721"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb31-722"><a href="#cb31-722"></a>           <span class="dt">Q1em =</span> <span class="kw">fct_recode</span>(Q1em,</span>
<span id="cb31-723"><a href="#cb31-723"></a>                           <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-724"><a href="#cb31-724"></a>                           <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-725"><a href="#cb31-725"></a>                           <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-726"><a href="#cb31-726"></a>                           <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-727"><a href="#cb31-727"></a>                           <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb31-728"><a href="#cb31-728"></a>                           <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb31-729"><a href="#cb31-729"></a>           <span class="dt">Q2am =</span> <span class="kw">fct_recode</span>(Q2am,</span>
<span id="cb31-730"><a href="#cb31-730"></a>                            <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-731"><a href="#cb31-731"></a>                            <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-732"><a href="#cb31-732"></a>                            <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-733"><a href="#cb31-733"></a>                            <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-734"><a href="#cb31-734"></a>                            <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb31-735"><a href="#cb31-735"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb31-736"><a href="#cb31-736"></a>           <span class="dt">Q2bm =</span> <span class="kw">fct_recode</span>(Q2bm,</span>
<span id="cb31-737"><a href="#cb31-737"></a>                            <span class="st">&quot;S&quot;</span> =<span class="st"> &quot;Strongly agree&quot;</span>,</span>
<span id="cb31-738"><a href="#cb31-738"></a>                            <span class="st">&quot;s&quot;</span> =<span class="st"> &quot;Agree&quot;</span>,</span>
<span id="cb31-739"><a href="#cb31-739"></a>                            <span class="st">&quot;?&quot;</span> =<span class="st"> &quot;Neither agree nor disagree&quot;</span>,</span>
<span id="cb31-740"><a href="#cb31-740"></a>                            <span class="st">&quot;e&quot;</span> =<span class="st"> &quot;Disagree&quot;</span>,</span>
<span id="cb31-741"><a href="#cb31-741"></a>                            <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;Strongly disagree&quot;</span>,</span>
<span id="cb31-742"><a href="#cb31-742"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb31-743"><a href="#cb31-743"></a>           <span class="dt">Q3am =</span> <span class="kw">fct_recode</span>(Q3am,</span>
<span id="cb31-744"><a href="#cb31-744"></a>                            <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb31-745"><a href="#cb31-745"></a>                            <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb31-746"><a href="#cb31-746"></a>                            <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span>,</span>
<span id="cb31-747"><a href="#cb31-747"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb31-748"><a href="#cb31-748"></a>           <span class="dt">Q3bm =</span> <span class="kw">fct_recode</span>(Q3bm,</span>
<span id="cb31-749"><a href="#cb31-749"></a>                            <span class="st">&quot;W&quot;</span> =<span class="st"> &quot;Work full-time&quot;</span>,</span>
<span id="cb31-750"><a href="#cb31-750"></a>                            <span class="st">&quot;w&quot;</span> =<span class="st"> &quot;Work part-time&quot;</span>,</span>
<span id="cb31-751"><a href="#cb31-751"></a>                            <span class="st">&quot;H&quot;</span> =<span class="st"> &quot;Stay at home&quot;</span>,</span>
<span id="cb31-752"><a href="#cb31-752"></a>                            <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>)</span>
<span id="cb31-753"><a href="#cb31-753"></a>               )</span>
<span id="cb31-754"><a href="#cb31-754"></a></span>
<span id="cb31-755"><a href="#cb31-755"></a><span class="co"># Tarkistuksia 4</span></span>
<span id="cb31-756"><a href="#cb31-756"></a></span>
<span id="cb31-757"><a href="#cb31-757"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-758"><a href="#cb31-758"></a><span class="co">#    select(Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm) %&gt;%</span></span>
<span id="cb31-759"><a href="#cb31-759"></a><span class="co">#    summary()</span></span>
<span id="cb31-760"><a href="#cb31-760"></a></span>
<span id="cb31-761"><a href="#cb31-761"></a><span class="co"># Tarkistuksia 5</span></span>
<span id="cb31-762"><a href="#cb31-762"></a></span>
<span id="cb31-763"><a href="#cb31-763"></a><span class="co"># Substanssimuuttuja</span></span>
<span id="cb31-764"><a href="#cb31-764"></a></span>
<span id="cb31-765"><a href="#cb31-765"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-766"><a href="#cb31-766"></a><span class="co">#    tableX(Q1a,Q1am)</span></span>
<span id="cb31-767"><a href="#cb31-767"></a><span class="co">#</span></span>
<span id="cb31-768"><a href="#cb31-768"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-769"><a href="#cb31-769"></a><span class="co">#    tableX(Q1b,Q1bm)</span></span>
<span id="cb31-770"><a href="#cb31-770"></a><span class="co">#</span></span>
<span id="cb31-771"><a href="#cb31-771"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-772"><a href="#cb31-772"></a><span class="co">#    tableX(Q1c,Q1cm)</span></span>
<span id="cb31-773"><a href="#cb31-773"></a><span class="co">#</span></span>
<span id="cb31-774"><a href="#cb31-774"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-775"><a href="#cb31-775"></a><span class="co">#    tableX(Q1d,Q1dm)</span></span>
<span id="cb31-776"><a href="#cb31-776"></a><span class="co">#</span></span>
<span id="cb31-777"><a href="#cb31-777"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-778"><a href="#cb31-778"></a><span class="co">#    tableX(Q1e,Q1em)</span></span>
<span id="cb31-779"><a href="#cb31-779"></a><span class="co">#</span></span>
<span id="cb31-780"><a href="#cb31-780"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-781"><a href="#cb31-781"></a><span class="co">#    tableX(Q2a,Q2am)</span></span>
<span id="cb31-782"><a href="#cb31-782"></a><span class="co">#</span></span>
<span id="cb31-783"><a href="#cb31-783"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-784"><a href="#cb31-784"></a><span class="co">#    tableX(Q2b,Q2bm)</span></span>
<span id="cb31-785"><a href="#cb31-785"></a><span class="co">#</span></span>
<span id="cb31-786"><a href="#cb31-786"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-787"><a href="#cb31-787"></a><span class="co">#    tableX(Q3a,Q3am)</span></span>
<span id="cb31-788"><a href="#cb31-788"></a><span class="co">#</span></span>
<span id="cb31-789"><a href="#cb31-789"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-790"><a href="#cb31-790"></a><span class="co">#    tableX(Q3b,Q3bm)</span></span>
<span id="cb31-791"><a href="#cb31-791"></a><span class="co">#</span></span>
<span id="cb31-792"><a href="#cb31-792"></a><span class="co"># ISSP2012jh1d.dat %&gt;% </span></span>
<span id="cb31-793"><a href="#cb31-793"></a><span class="co">#    tableX(Q3am,Q3a)</span></span>
<span id="cb31-794"><a href="#cb31-794"></a><span class="co">#</span></span>
<span id="cb31-795"><a href="#cb31-795"></a><span class="co"># ISSP2012jh1d.dat$Q3a %&gt;% levels()</span></span>
<span id="cb31-796"><a href="#cb31-796"></a><span class="co"># ISSP2012jh1d.dat$Q3am %&gt;% levels()</span></span>
<span id="cb31-797"><a href="#cb31-797"></a></span>
<span id="cb31-798"><a href="#cb31-798"></a><span class="co"># Taustamuuttujat - ristiintaulukointeja</span></span>
<span id="cb31-799"><a href="#cb31-799"></a></span>
<span id="cb31-800"><a href="#cb31-800"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-801"><a href="#cb31-801"></a><span class="co">#    tableX(edu, edum)</span></span>
<span id="cb31-802"><a href="#cb31-802"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-803"><a href="#cb31-803"></a><span class="co">#    tableX(msta, mstam)</span></span>
<span id="cb31-804"><a href="#cb31-804"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-805"><a href="#cb31-805"></a><span class="co">#    tableX(sosta, sostam)</span></span>
<span id="cb31-806"><a href="#cb31-806"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-807"><a href="#cb31-807"></a><span class="co">#    tableX(nchild,nchildm)</span></span>
<span id="cb31-808"><a href="#cb31-808"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-809"><a href="#cb31-809"></a><span class="co">#    tableX(lifsta, lifstam)</span></span>
<span id="cb31-810"><a href="#cb31-810"></a><span class="co"># ISSP2012jh1d.dat %&gt;%</span></span>
<span id="cb31-811"><a href="#cb31-811"></a><span class="co">#    tableX(urbru, urbrum)</span></span>
<span id="cb31-812"><a href="#cb31-812"></a></span>
<span id="cb31-813"><a href="#cb31-813"></a><span class="co"># (16.9.2020) Testaus uusille muuttujille</span></span>
<span id="cb31-814"><a href="#cb31-814"></a><span class="co"># Koodilohkoissa on jo testattu taulukoimalla muuttujia. Tässä varmistetaan, että</span></span>
<span id="cb31-815"><a href="#cb31-815"></a><span class="co"># muuttujat pysyvät sellaisina millaisiksi ne on luotu.</span></span>
<span id="cb31-816"><a href="#cb31-816"></a></span>
<span id="cb31-817"><a href="#cb31-817"></a><span class="co"># ika - onpas hankala testata !</span></span>
<span id="cb31-818"><a href="#cb31-818"></a><span class="co"># Min. 1st Qu.  Median    Mean 3rd Qu.    Max.</span></span>
<span id="cb31-819"><a href="#cb31-819"></a><span class="co"># 15.00   36.00   50.00   49.52   63.00  102.00</span></span>
<span id="cb31-820"><a href="#cb31-820"></a><span class="co"># ikatest &lt;- ISSP2012jh1d.dat$ika %&gt;% summary()</span></span>
<span id="cb31-821"><a href="#cb31-821"></a><span class="co">#   ikatest &lt;- ikatest[2,]</span></span>
<span id="cb31-822"><a href="#cb31-822"></a><span class="co">#validate_that(are_equal(ikatest, c(15, 36, 50, 49.5, 63, 102)))</span></span>
<span id="cb31-823"><a href="#cb31-823"></a><span class="co">#str(ISSP2012jh1d.dat)</span></span>
<span id="cb31-824"><a href="#cb31-824"></a><span class="co">#ISSP2012jh1d.dat %&gt;% </span></span>
<span id="cb31-825"><a href="#cb31-825"></a></span>
<span id="cb31-826"><a href="#cb31-826"></a><span class="co"># substanssimuuttujat 1</span></span>
<span id="cb31-827"><a href="#cb31-827"></a><span class="co"># Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b, Q3a, Q3b (r. 423-&gt;)</span></span>
<span id="cb31-828"><a href="#cb31-828"></a></span>
<span id="cb31-829"><a href="#cb31-829"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1a)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb31-830"><a href="#cb31-830"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1a),</span>
<span id="cb31-831"><a href="#cb31-831"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb31-832"><a href="#cb31-832"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1b)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb31-833"><a href="#cb31-833"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1b),</span>
<span id="cb31-834"><a href="#cb31-834"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb31-835"><a href="#cb31-835"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1c)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb31-836"><a href="#cb31-836"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1c),</span>
<span id="cb31-837"><a href="#cb31-837"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb31-838"><a href="#cb31-838"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1d)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb31-839"><a href="#cb31-839"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1d),</span>
<span id="cb31-840"><a href="#cb31-840"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb31-841"><a href="#cb31-841"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1e)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb31-842"><a href="#cb31-842"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1e),</span>
<span id="cb31-843"><a href="#cb31-843"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb31-844"><a href="#cb31-844"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2a)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb31-845"><a href="#cb31-845"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2a),</span>
<span id="cb31-846"><a href="#cb31-846"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb31-847"><a href="#cb31-847"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2b)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb31-848"><a href="#cb31-848"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2b),</span>
<span id="cb31-849"><a href="#cb31-849"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb31-850"><a href="#cb31-850"></a></span>
<span id="cb31-851"><a href="#cb31-851"></a><span class="co"># substanssimuuttujat 2</span></span>
<span id="cb31-852"><a href="#cb31-852"></a></span>
<span id="cb31-853"><a href="#cb31-853"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3a)) <span class="op">==</span><span class="st"> </span><span class="dv">3</span>)</span>
<span id="cb31-854"><a href="#cb31-854"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3a),</span>
<span id="cb31-855"><a href="#cb31-855"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>)))</span>
<span id="cb31-856"><a href="#cb31-856"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3b)) <span class="op">==</span><span class="st"> </span><span class="dv">3</span>)</span>
<span id="cb31-857"><a href="#cb31-857"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3b),</span>
<span id="cb31-858"><a href="#cb31-858"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>)))</span>
<span id="cb31-859"><a href="#cb31-859"></a></span>
<span id="cb31-860"><a href="#cb31-860"></a></span>
<span id="cb31-861"><a href="#cb31-861"></a></span>
<span id="cb31-862"><a href="#cb31-862"></a><span class="co"># substanssimuuttujat, puuttuva tieto muuttujan arvona</span></span>
<span id="cb31-863"><a href="#cb31-863"></a><span class="co"># Q1am, Q1bm, Q1cm, Q1dm, Q1em, Q2am, Q2bm, Q3am, Q3bm</span></span>
<span id="cb31-864"><a href="#cb31-864"></a></span>
<span id="cb31-865"><a href="#cb31-865"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1am)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb31-866"><a href="#cb31-866"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1am),</span>
<span id="cb31-867"><a href="#cb31-867"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb31-868"><a href="#cb31-868"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1bm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb31-869"><a href="#cb31-869"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1bm),</span>
<span id="cb31-870"><a href="#cb31-870"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb31-871"><a href="#cb31-871"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1cm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb31-872"><a href="#cb31-872"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1cm),</span>
<span id="cb31-873"><a href="#cb31-873"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb31-874"><a href="#cb31-874"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1dm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb31-875"><a href="#cb31-875"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1dm),</span>
<span id="cb31-876"><a href="#cb31-876"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb31-877"><a href="#cb31-877"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1em)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb31-878"><a href="#cb31-878"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q1em),</span>
<span id="cb31-879"><a href="#cb31-879"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb31-880"><a href="#cb31-880"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2am)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb31-881"><a href="#cb31-881"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2am),</span>
<span id="cb31-882"><a href="#cb31-882"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb31-883"><a href="#cb31-883"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2bm)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb31-884"><a href="#cb31-884"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q2bm),</span>
<span id="cb31-885"><a href="#cb31-885"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb31-886"><a href="#cb31-886"></a></span>
<span id="cb31-887"><a href="#cb31-887"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3am)) <span class="op">==</span><span class="st"> </span><span class="dv">4</span>)</span>
<span id="cb31-888"><a href="#cb31-888"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3am),</span>
<span id="cb31-889"><a href="#cb31-889"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb31-890"><a href="#cb31-890"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3bm)) <span class="op">==</span><span class="st"> </span><span class="dv">4</span>)</span>
<span id="cb31-891"><a href="#cb31-891"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>Q3bm),</span>
<span id="cb31-892"><a href="#cb31-892"></a>               <span class="kw">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;w&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;P&quot;</span>)))</span>
<span id="cb31-893"><a href="#cb31-893"></a></span>
<span id="cb31-894"><a href="#cb31-894"></a><span class="co"># taustamuuttujat puuttuvilla tiedoilla ja ilman</span></span>
<span id="cb31-895"><a href="#cb31-895"></a><span class="co"># testataan vain tasojen määrä, ei labeleita jotka ovat </span></span>
<span id="cb31-896"><a href="#cb31-896"></a><span class="co"># alkuperäisestä datasta.</span></span>
<span id="cb31-897"><a href="#cb31-897"></a></span>
<span id="cb31-898"><a href="#cb31-898"></a><span class="co"># edu, edum Huom! Koulutustasoluokitus alkuperäisessä</span></span>
<span id="cb31-899"><a href="#cb31-899"></a><span class="co"># datassa 0-6 (ei muodollista koulusta - korkeampi kolmas aste (maisteri, tohtori)</span></span>
<span id="cb31-900"><a href="#cb31-900"></a><span class="co"># R-faktorissa 1-7</span></span>
<span id="cb31-901"><a href="#cb31-901"></a></span>
<span id="cb31-902"><a href="#cb31-902"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>edu)) <span class="op">==</span><span class="st"> </span><span class="dv">7</span>)</span>
<span id="cb31-903"><a href="#cb31-903"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>edum)) <span class="op">==</span><span class="st"> </span><span class="dv">8</span>)</span>
<span id="cb31-904"><a href="#cb31-904"></a></span>
<span id="cb31-905"><a href="#cb31-905"></a><span class="co"># msta, mstam</span></span>
<span id="cb31-906"><a href="#cb31-906"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>msta)) <span class="op">==</span><span class="st"> </span><span class="dv">9</span>)</span>
<span id="cb31-907"><a href="#cb31-907"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>mstam)) <span class="op">==</span><span class="st"> </span><span class="dv">10</span>)</span>
<span id="cb31-908"><a href="#cb31-908"></a></span>
<span id="cb31-909"><a href="#cb31-909"></a><span class="co"># sosta, sostam</span></span>
<span id="cb31-910"><a href="#cb31-910"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>sosta)) <span class="op">==</span><span class="st"> </span><span class="dv">10</span>)</span>
<span id="cb31-911"><a href="#cb31-911"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>sostam)) <span class="op">==</span><span class="st"> </span><span class="dv">11</span>)</span>
<span id="cb31-912"><a href="#cb31-912"></a></span>
<span id="cb31-913"><a href="#cb31-913"></a><span class="co"># nchild, ncildm</span></span>
<span id="cb31-914"><a href="#cb31-914"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>nchild)) <span class="op">==</span><span class="st"> </span><span class="dv">11</span>)</span>
<span id="cb31-915"><a href="#cb31-915"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>nchildm)) <span class="op">==</span><span class="st"> </span><span class="dv">12</span>)</span>
<span id="cb31-916"><a href="#cb31-916"></a></span>
<span id="cb31-917"><a href="#cb31-917"></a><span class="co"># lifsta, lifstam</span></span>
<span id="cb31-918"><a href="#cb31-918"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>lifsta)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb31-919"><a href="#cb31-919"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>lifstam)) <span class="op">==</span><span class="st"> </span><span class="dv">7</span>)</span>
<span id="cb31-920"><a href="#cb31-920"></a></span>
<span id="cb31-921"><a href="#cb31-921"></a><span class="co"># urbru, urbrum</span></span>
<span id="cb31-922"><a href="#cb31-922"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>urbru)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb31-923"><a href="#cb31-923"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012jh1d.dat<span class="op">$</span>urbrum)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb31-924"><a href="#cb31-924"></a></span>
<span id="cb31-925"><a href="#cb31-925"></a>issp_docname &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Variable Report&quot;</span>, <span class="st">&quot;Study Monitoring Report&quot;</span>,<span class="st">&quot;Basic Questionnaire&quot;</span>,</span>
<span id="cb31-926"><a href="#cb31-926"></a>                  <span class="st">&quot;Contents of ISSP 2012 module&quot;</span>, <span class="st">&quot;Questionnaire Development&quot;</span>)</span>
<span id="cb31-927"><a href="#cb31-927"></a>issp_docdesc &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Perusdokumentti, muuttujien kuvaukset ja taulukot&quot;</span>,</span>
<span id="cb31-928"><a href="#cb31-928"></a>                  <span class="st">&quot;tiedokeruun toteutus eri maissa&quot;</span>,</span>
<span id="cb31-929"><a href="#cb31-929"></a>                  <span class="st">&quot;Maittain sovellettava kyselylomake&quot;</span>, <span class="st">&quot;substanssikysymykset taulukkona&quot;</span>,</span>
<span id="cb31-930"><a href="#cb31-930"></a>                  <span class="st">&quot;kyselylomakkeen laatiminen&quot;</span>)</span>
<span id="cb31-931"><a href="#cb31-931"></a>issp_docfile &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ZA5900_cdb.pdf&quot;</span>, <span class="st">&quot;ZA5900_mr.pdf&quot;</span>, <span class="st">&quot;ZA5900_bq.pdf&quot;</span>,<span class="st">&quot;ZA5900_overview.pdf&quot;</span>,</span>
<span id="cb31-932"><a href="#cb31-932"></a>                  <span class="st">&quot;ssoar-2014-scholz_et_al-ISSP_2012_Family_and_Changing.pdf&quot;</span>)</span>
<span id="cb31-933"><a href="#cb31-933"></a></span>
<span id="cb31-934"><a href="#cb31-934"></a></span>
<span id="cb31-935"><a href="#cb31-935"></a>col_isspdocs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;dokumentti&quot;</span>,<span class="st">&quot;sisältö&quot;</span>,<span class="st">&quot;tiedosto&quot;</span>)</span>
<span id="cb31-936"><a href="#cb31-936"></a></span>
<span id="cb31-937"><a href="#cb31-937"></a>ISSPdocsT.tbl &lt;-<span class="st"> </span><span class="kw">tibble</span>(issp_docname, issp_docdesc, issp_docfile)</span>
<span id="cb31-938"><a href="#cb31-938"></a><span class="kw">colnames</span>(ISSPdocsT.tbl) &lt;-<span class="st"> </span>col_isspdocs</span>
<span id="cb31-939"><a href="#cb31-939"></a></span>
<span id="cb31-940"><a href="#cb31-940"></a>knitr<span class="op">::</span><span class="kw">kable</span>(ISSPdocsT.tbl, <span class="dt">booktab =</span> <span class="ot">TRUE</span>,</span>
<span id="cb31-941"><a href="#cb31-941"></a>             <span class="dt">caption =</span> <span class="st">&#39; ISSP 2012: tärkeimmät dokumentit&#39;</span>)</span>
<span id="cb31-942"><a href="#cb31-942"></a></span>
<span id="cb31-943"><a href="#cb31-943"></a></span>
<span id="cb31-944"><a href="#cb31-944"></a><span class="co"># Muuttuja taulukkona - karkea tapa</span></span>
<span id="cb31-945"><a href="#cb31-945"></a><span class="co"># HUOM! Taulkot ovat hankalia, kun tulostus halutaan pdf- ja html- formaattiin</span></span>
<span id="cb31-946"><a href="#cb31-946"></a><span class="co"># Kysymyste pitkät versiot on siksi esitetty suomenkielisen lomakkeen kuvana.</span></span>
<span id="cb31-947"><a href="#cb31-947"></a></span>
<span id="cb31-948"><a href="#cb31-948"></a>tabVarnames &lt;-<span class="st"> </span><span class="kw">c</span>(substvars1,bgvars1) <span class="co"># muuttujanimet muuttujille</span></span>
<span id="cb31-949"><a href="#cb31-949"></a></span>
<span id="cb31-950"><a href="#cb31-950"></a><span class="co"># Kysymysten lyhyet versiot englanniksi</span></span>
<span id="cb31-951"><a href="#cb31-951"></a>tabVarDesc &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Q1a Working mother can have warm relation with child &quot;</span>,</span>
<span id="cb31-952"><a href="#cb31-952"></a>                <span class="st">&quot;Q1b Pre-school child suffers through working mother&quot;</span>,</span>
<span id="cb31-953"><a href="#cb31-953"></a>                <span class="st">&quot;Q1c Family life suffers through working mother&quot;</span>,</span>
<span id="cb31-954"><a href="#cb31-954"></a>                <span class="st">&quot;Q1d Women’s preference: home and children&quot;</span>,</span>
<span id="cb31-955"><a href="#cb31-955"></a>                <span class="st">&quot;Q1e Being housewife is satisfying&quot;</span>,</span>
<span id="cb31-956"><a href="#cb31-956"></a>                <span class="st">&quot;Q2a Both should contribute to household income&quot;</span>,</span>
<span id="cb31-957"><a href="#cb31-957"></a>                <span class="st">&quot;Q2b Men’s job is earn money, women’s job household&quot;</span>,</span>
<span id="cb31-958"><a href="#cb31-958"></a>                <span class="st">&quot;Q3a Should women work: Child under school age&quot;</span>,</span>
<span id="cb31-959"><a href="#cb31-959"></a>                <span class="st">&quot;Q3b Should women work: Youngest kid at school&quot;</span>,</span>
<span id="cb31-960"><a href="#cb31-960"></a>                <span class="st">&quot;Respondents age &quot;</span>,</span>
<span id="cb31-961"><a href="#cb31-961"></a>                <span class="st">&quot;Respondents gender&quot;</span>,</span>
<span id="cb31-962"><a href="#cb31-962"></a>                <span class="st">&quot;Highest completed degree of education: Categories for international comparison&quot;</span>,</span>
<span id="cb31-963"><a href="#cb31-963"></a>                <span class="st">&quot;Main status: work, unemployed, in education...&quot;</span>,</span>
<span id="cb31-964"><a href="#cb31-964"></a>                <span class="st">&quot;Top-Bottom self-placement (10 pt scale)&quot;</span>,</span>
<span id="cb31-965"><a href="#cb31-965"></a>                <span class="st">&quot;How many children in household: children between [school age] and 17 years of age&quot;</span>,</span>
<span id="cb31-966"><a href="#cb31-966"></a>                <span class="st">&quot;Legal partnership status: married, civil partership...&quot;</span>,</span>
<span id="cb31-967"><a href="#cb31-967"></a>                <span class="st">&quot;Place of living: urban - rural&quot;</span></span>
<span id="cb31-968"><a href="#cb31-968"></a>              )</span>
<span id="cb31-969"><a href="#cb31-969"></a><span class="co">#tabVarDesc</span></span>
<span id="cb31-970"><a href="#cb31-970"></a></span>
<span id="cb31-971"><a href="#cb31-971"></a><span class="co"># Taulukko</span></span>
<span id="cb31-972"><a href="#cb31-972"></a></span>
<span id="cb31-973"><a href="#cb31-973"></a><span class="co"># luodaan df - varoitus: data_frame() is deprecated, use tibble” (4.2.20),</span></span>
<span id="cb31-974"><a href="#cb31-974"></a><span class="co"># vaihdetaan tibbleen (21.2.20)</span></span>
<span id="cb31-975"><a href="#cb31-975"></a></span>
<span id="cb31-976"><a href="#cb31-976"></a><span class="co"># jhVarTable1.df &lt;- data_frame(tabVarnames,tabVarDesc) OLD</span></span>
<span id="cb31-977"><a href="#cb31-977"></a>jhVarTable1.tbl &lt;-<span class="st"> </span><span class="kw">tibble</span>(tabVarnames,tabVarDesc)</span>
<span id="cb31-978"><a href="#cb31-978"></a>cols_jhVarTable1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;muuttuja&quot;</span>,<span class="st">&quot;kysymyksen tunnus, lyhennetty kysymys&quot;</span>)</span>
<span id="cb31-979"><a href="#cb31-979"></a><span class="kw">colnames</span>(jhVarTable1.tbl) &lt;-<span class="st"> </span>cols_jhVarTable1</span>
<span id="cb31-980"><a href="#cb31-980"></a><span class="co">#str(jhVarTable1.tbl)</span></span>
<span id="cb31-981"><a href="#cb31-981"></a><span class="co"># Lyhyet kysymykset englanniksi</span></span>
<span id="cb31-982"><a href="#cb31-982"></a></span>
<span id="cb31-983"><a href="#cb31-983"></a>knitr<span class="op">::</span><span class="kw">kable</span>(jhVarTable1.tbl, <span class="dt">booktab =</span> <span class="ot">TRUE</span>,</span>
<span id="cb31-984"><a href="#cb31-984"></a>               <span class="dt">caption =</span> <span class="st">&quot;ISSP2012:Työelämä ja perhearvot - kysymykset&quot;</span>)</span>
<span id="cb31-985"><a href="#cb31-985"></a></span>
<span id="cb31-986"><a href="#cb31-986"></a></span>
<span id="cb31-987"><a href="#cb31-987"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/substvar_fi_Q1Q2.png&#39;</span>)</span>
<span id="cb31-988"><a href="#cb31-988"></a></span>
<span id="cb31-989"><a href="#cb31-989"></a><span class="co"># UUSI DATA 30.1.20</span></span>
<span id="cb31-990"><a href="#cb31-990"></a><span class="co">#</span></span>
<span id="cb31-991"><a href="#cb31-991"></a><span class="co"># LUETAAN DATA G1_1_data2.Rmd - tiedostossa, luodaan faktorimuuttujat</span></span>
<span id="cb31-992"><a href="#cb31-992"></a><span class="co"># G1_1_data_fct1.Rmd-tiedostossa -&gt; ISSP2012jh1d.dat (df)</span></span>
<span id="cb31-993"><a href="#cb31-993"></a><span class="co"># 23 muuttujaa (9 substanssimuuttujaa, 8 taustamuuttujaa, 3 maa-muuttujaa, 3 metadatamuuttujaa)</span></span>
<span id="cb31-994"><a href="#cb31-994"></a><span class="co"># 25 maata.</span></span>
<span id="cb31-995"><a href="#cb31-995"></a><span class="co"># Poistettu 146 havaintoa, joilla SEX tai AGE puuttuu</span></span>
<span id="cb31-996"><a href="#cb31-996"></a><span class="co"># Johdattelevassa esimerkissä kuusi maata, kaksi taustamuuttujaa ja yksi kysymys</span></span>
<span id="cb31-997"><a href="#cb31-997"></a><span class="co"># (V6/Q1b)</span></span>
<span id="cb31-998"><a href="#cb31-998"></a></span>
<span id="cb31-999"><a href="#cb31-999"></a></span>
<span id="cb31-1000"><a href="#cb31-1000"></a><span class="co"># Kuusi maata</span></span>
<span id="cb31-1001"><a href="#cb31-1001"></a></span>
<span id="cb31-1002"><a href="#cb31-1002"></a>countries_esim1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">56</span>, <span class="dv">100</span>, <span class="dv">208</span>, <span class="dv">246</span>, <span class="dv">276</span>, <span class="dv">348</span>) <span class="co">#BE,BG,DK,FI,DE,HU</span></span>
<span id="cb31-1003"><a href="#cb31-1003"></a>ISSP2012esim3.dat &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012jh1d.dat, V4 <span class="op">%in%</span><span class="st"> </span>countries_esim1)</span>
<span id="cb31-1004"><a href="#cb31-1004"></a><span class="co"># str(ISSP2012esim3.dat) - pitkä listaus pois (24.2.20)</span></span>
<span id="cb31-1005"><a href="#cb31-1005"></a></span>
<span id="cb31-1006"><a href="#cb31-1006"></a><span class="co">#neljä maamuuttujaa, kysymys Q1b, ikä ja sukupuoli</span></span>
<span id="cb31-1007"><a href="#cb31-1007"></a></span>
<span id="cb31-1008"><a href="#cb31-1008"></a>vars_esim1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;C_ALPHAN&quot;</span>, <span class="st">&quot;V3&quot;</span>, <span class="st">&quot;maa&quot;</span>,<span class="st">&quot;maa3&quot;</span>, <span class="st">&quot;Q1b&quot;</span>, <span class="st">&quot;sp&quot;</span>, <span class="st">&quot;ika&quot;</span>)</span>
<span id="cb31-1009"><a href="#cb31-1009"></a>ISSP2012esim2.dat &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012esim3.dat, <span class="kw">all_of</span>(vars_esim1))</span>
<span id="cb31-1010"><a href="#cb31-1010"></a></span>
<span id="cb31-1011"><a href="#cb31-1011"></a><span class="kw">str</span>(ISSP2012esim2.dat) <span class="co"># 8542 obs. of  7 variables, ja sama 8.6.2020</span></span>
<span id="cb31-1012"><a href="#cb31-1012"></a><span class="co"># C_ALPHAN: chr, maa: Factor w/ 25</span></span>
<span id="cb31-1013"><a href="#cb31-1013"></a></span>
<span id="cb31-1014"><a href="#cb31-1014"></a><span class="co"># Poistetaan havainnot, joilla Q1b - muuttujassa puuttuva tieto &#39;NA&#39;</span></span>
<span id="cb31-1015"><a href="#cb31-1015"></a><span class="co"># sum(is.na(ISSP2012esim2.dat$Q1b)) = 399</span></span>
<span id="cb31-1016"><a href="#cb31-1016"></a></span>
<span id="cb31-1017"><a href="#cb31-1017"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012esim2.dat, <span class="op">!</span><span class="kw">is.na</span>(Q1b))</span>
<span id="cb31-1018"><a href="#cb31-1018"></a></span>
<span id="cb31-1019"><a href="#cb31-1019"></a><span class="co">#str(ISSP2012esim1.dat) # 8143 obs. of  6 variable</span></span>
<span id="cb31-1020"><a href="#cb31-1020"></a></span>
<span id="cb31-1021"><a href="#cb31-1021"></a><span class="co"># Tarkistuksia (3.2.20)</span></span>
<span id="cb31-1022"><a href="#cb31-1022"></a><span class="co">#</span></span>
<span id="cb31-1023"><a href="#cb31-1023"></a><span class="co">#fct_count(ISSP2012esim1.dat$sp)</span></span>
<span id="cb31-1024"><a href="#cb31-1024"></a><span class="co">#fct_count(ISSP2012esim1.dat$Q1b)</span></span>
<span id="cb31-1025"><a href="#cb31-1025"></a><span class="co">#fct_count(ISSP2012esim1.dat$maa)</span></span>
<span id="cb31-1026"><a href="#cb31-1026"></a><span class="co">#fct_count(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb31-1027"><a href="#cb31-1027"></a><span class="co">#</span></span>
<span id="cb31-1028"><a href="#cb31-1028"></a><span class="co">#summary(ISSP2012esim1.dat$sp)</span></span>
<span id="cb31-1029"><a href="#cb31-1029"></a><span class="co">#sp: 3799 + 4344 = 8143</span></span>
<span id="cb31-1030"><a href="#cb31-1030"></a><span class="co">#summary(ISSP2012esim1.dat$Q1b)</span></span>
<span id="cb31-1031"><a href="#cb31-1031"></a><span class="co">#  S      s      ?     e      E</span></span>
<span id="cb31-1032"><a href="#cb31-1032"></a><span class="co"># 810 + 1935 + 1367 + 2125 + 1906 = 8143</span></span>
<span id="cb31-1033"><a href="#cb31-1033"></a><span class="co">#</span></span>
<span id="cb31-1034"><a href="#cb31-1034"></a><span class="co"># EDELLINEN DATA - havaintojen määrät samat kuin uudella datalla (31.1.20)</span></span>
<span id="cb31-1035"><a href="#cb31-1035"></a><span class="co">#</span></span>
<span id="cb31-1036"><a href="#cb31-1036"></a><span class="co"># 8557 obs. ennen kuin sexagemissing poistettiin, nyt 8542, 8557-8542 = 15</span></span>
<span id="cb31-1037"><a href="#cb31-1037"></a><span class="co">#</span></span>
<span id="cb31-1038"><a href="#cb31-1038"></a><span class="co"># Poistetaan havainnot joissa puuttuva tieto muuttujassa V6 (Q1b) n = 399</span></span>
<span id="cb31-1039"><a href="#cb31-1039"></a><span class="co"># 8542-399 = 8143</span></span>
<span id="cb31-1040"><a href="#cb31-1040"></a></span>
<span id="cb31-1041"><a href="#cb31-1041"></a><span class="co"># Tyhjät &quot;faktorilabelit&quot; on poistettava</span></span>
<span id="cb31-1042"><a href="#cb31-1042"></a></span>
<span id="cb31-1043"><a href="#cb31-1043"></a> ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb31-1044"><a href="#cb31-1044"></a><span class="st">     </span><span class="kw">mutate</span>(<span class="dt">maa =</span> <span class="kw">fct_drop</span>(maa),</span>
<span id="cb31-1045"><a href="#cb31-1045"></a>            <span class="dt">maa3 =</span> <span class="kw">fct_drop</span>(maa3)</span>
<span id="cb31-1046"><a href="#cb31-1046"></a>            )</span>
<span id="cb31-1047"><a href="#cb31-1047"></a></span>
<span id="cb31-1048"><a href="#cb31-1048"></a><span class="co">#summary(ISSP2012esim1.dat$maa)</span></span>
<span id="cb31-1049"><a href="#cb31-1049"></a><span class="co">#summary(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb31-1050"><a href="#cb31-1050"></a><span class="co">#</span></span>
<span id="cb31-1051"><a href="#cb31-1051"></a><span class="co"># str(ISSP2012esim1.dat$maa)</span></span>
<span id="cb31-1052"><a href="#cb31-1052"></a><span class="co"># attributes(ISSP2012esim1.dat$maa)</span></span>
<span id="cb31-1053"><a href="#cb31-1053"></a><span class="co">#</span></span>
<span id="cb31-1054"><a href="#cb31-1054"></a><span class="co"># str(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb31-1055"><a href="#cb31-1055"></a><span class="co"># attributes(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb31-1056"><a href="#cb31-1056"></a><span class="co">#</span></span>
<span id="cb31-1057"><a href="#cb31-1057"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa, Q1b, type = &quot;count&quot;)</span></span>
<span id="cb31-1058"><a href="#cb31-1058"></a><span class="co">#fct_count(ISSP2012esim1.dat$Q1b)</span></span>
<span id="cb31-1059"><a href="#cb31-1059"></a><span class="co"># fct_count(ISSP2012esim1.dat$sp)</span></span>
<span id="cb31-1060"><a href="#cb31-1060"></a><span class="co"># fct_unique(ISSP2012esim1.dat$maa)</span></span>
<span id="cb31-1061"><a href="#cb31-1061"></a><span class="co"># fct_count(ISSP2012esim1.dat$maa)</span></span>
<span id="cb31-1062"><a href="#cb31-1062"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa, C_ALPHAN, type = &quot;count&quot;)</span></span>
<span id="cb31-1063"><a href="#cb31-1063"></a><span class="co">#</span></span>
<span id="cb31-1064"><a href="#cb31-1064"></a><span class="co"># maa3 - siistitään &quot;faktorilabelit&quot; kaksikirjaimisiksi</span></span>
<span id="cb31-1065"><a href="#cb31-1065"></a><span class="co">#</span></span>
<span id="cb31-1066"><a href="#cb31-1066"></a><span class="co"># ISO 3166 Code V3 - maiden jaot</span></span>
<span id="cb31-1067"><a href="#cb31-1067"></a><span class="co">#  5601     BE-FLA-Belgium/ Flanders</span></span>
<span id="cb31-1068"><a href="#cb31-1068"></a><span class="co">#  5602     BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb31-1069"><a href="#cb31-1069"></a><span class="co">#  5603     BE-BRU-Belgium/ Brussels</span></span>
<span id="cb31-1070"><a href="#cb31-1070"></a><span class="co"># 27601     DE-W-Germany-West</span></span>
<span id="cb31-1071"><a href="#cb31-1071"></a><span class="co"># 27602     DE-E-Germany-East</span></span>
<span id="cb31-1072"><a href="#cb31-1072"></a><span class="co"># Tähän pitäisi päästä</span></span>
<span id="cb31-1073"><a href="#cb31-1073"></a><span class="co"># levels = c(&quot;100&quot;,&quot;208&quot;,&quot;246&quot;,&quot;348&quot;,&quot;5601&quot;,&quot;5602&quot;,&quot;5603&quot;,&quot;27601&quot;,&quot;27602&quot;),</span></span>
<span id="cb31-1074"><a href="#cb31-1074"></a><span class="co"># labels = c(&quot;BG&quot;,&quot;DK&quot;,&quot;FI&quot;,&quot;HU&quot;,&quot;bF&quot;,&quot;bW&quot;,&quot;bB&quot;,&quot;dW&quot;,&quot;dE&quot;))</span></span>
<span id="cb31-1075"><a href="#cb31-1075"></a><span class="co"># levels(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb31-1076"><a href="#cb31-1076"></a></span>
<span id="cb31-1077"><a href="#cb31-1077"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb31-1078"><a href="#cb31-1078"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">maa3 =</span></span>
<span id="cb31-1079"><a href="#cb31-1079"></a>                <span class="kw">fct_recode</span>(maa3,</span>
<span id="cb31-1080"><a href="#cb31-1080"></a>                 <span class="st">&quot;BG&quot;</span> =<span class="st"> &quot;BG-Bulgaria&quot;</span>,</span>
<span id="cb31-1081"><a href="#cb31-1081"></a>                 <span class="st">&quot;DK&quot;</span> =<span class="st"> &quot;DK-Denmark&quot;</span>,</span>
<span id="cb31-1082"><a href="#cb31-1082"></a>                 <span class="st">&quot;FI&quot;</span> =<span class="st"> &quot;FI-Finland&quot;</span>,</span>
<span id="cb31-1083"><a href="#cb31-1083"></a>                 <span class="st">&quot;HU&quot;</span> =<span class="st"> &quot;HU-Hungary&quot;</span>,</span>
<span id="cb31-1084"><a href="#cb31-1084"></a>                 <span class="st">&quot;bF&quot;</span> =<span class="st"> &quot;BE-FLA-Belgium/ Flanders&quot;</span>,</span>
<span id="cb31-1085"><a href="#cb31-1085"></a>                 <span class="st">&quot;bW&quot;</span> =<span class="st"> &quot;BE-WAL-Belgium/ Wallonia&quot;</span>,</span>
<span id="cb31-1086"><a href="#cb31-1086"></a>                 <span class="st">&quot;bB&quot;</span> =<span class="st"> &quot;BE-BRU-Belgium/ Brussels&quot;</span>,</span>
<span id="cb31-1087"><a href="#cb31-1087"></a>                 <span class="st">&quot;dW&quot;</span> =<span class="st"> &quot;DE-W-Germany-West&quot;</span>,</span>
<span id="cb31-1088"><a href="#cb31-1088"></a>                 <span class="st">&quot;dE&quot;</span> =<span class="st"> &quot;DE-E-Germany-East&quot;</span>)</span>
<span id="cb31-1089"><a href="#cb31-1089"></a>               )</span>
<span id="cb31-1090"><a href="#cb31-1090"></a><span class="co"># tarkistuksia</span></span>
<span id="cb31-1091"><a href="#cb31-1091"></a><span class="co">#levels(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb31-1092"><a href="#cb31-1092"></a><span class="co"># str(ISSP2012esim1.dat$maa3) # 9 levels</span></span>
<span id="cb31-1093"><a href="#cb31-1093"></a><span class="co">#summary(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb31-1094"><a href="#cb31-1094"></a><span class="co">#</span></span>
<span id="cb31-1095"><a href="#cb31-1095"></a><span class="co"># TÄSSÄ TOISTOA! (4.2.20)</span></span>
<span id="cb31-1096"><a href="#cb31-1096"></a><span class="co"># Muutetaan muuttujien &quot;maa&quot; ja &quot;maa3&quot; arvojen (levels) järjestys samaksi kuin</span></span>
<span id="cb31-1097"><a href="#cb31-1097"></a><span class="co"># alkuperäisen muuttujan C_ALPHAN. Helpomi verrata aikaisempiin tuloksiin.</span></span>
<span id="cb31-1098"><a href="#cb31-1098"></a></span>
<span id="cb31-1099"><a href="#cb31-1099"></a><span class="co"># &quot;alkuperäinen&quot; maa talteen</span></span>
<span id="cb31-1100"><a href="#cb31-1100"></a>ISSP2012esim1.dat<span class="op">$</span>maa2 &lt;-<span class="st"> </span>ISSP2012esim1.dat<span class="op">$</span>maa</span>
<span id="cb31-1101"><a href="#cb31-1101"></a></span>
<span id="cb31-1102"><a href="#cb31-1102"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb31-1103"><a href="#cb31-1103"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">maa =</span></span>
<span id="cb31-1104"><a href="#cb31-1104"></a>                <span class="kw">fct_relevel</span>(maa,</span>
<span id="cb31-1105"><a href="#cb31-1105"></a>                            <span class="st">&quot;BE&quot;</span>,</span>
<span id="cb31-1106"><a href="#cb31-1106"></a>                            <span class="st">&quot;BG&quot;</span>,</span>
<span id="cb31-1107"><a href="#cb31-1107"></a>                            <span class="st">&quot;DE&quot;</span>,</span>
<span id="cb31-1108"><a href="#cb31-1108"></a>                            <span class="st">&quot;DK&quot;</span>,</span>
<span id="cb31-1109"><a href="#cb31-1109"></a>                            <span class="st">&quot;FI&quot;</span>,</span>
<span id="cb31-1110"><a href="#cb31-1110"></a>                            <span class="st">&quot;HU&quot;</span>))</span>
<span id="cb31-1111"><a href="#cb31-1111"></a>ISSP2012esim1.dat &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span></span>
<span id="cb31-1112"><a href="#cb31-1112"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">maa3 =</span></span>
<span id="cb31-1113"><a href="#cb31-1113"></a>                <span class="kw">fct_relevel</span>(maa3,</span>
<span id="cb31-1114"><a href="#cb31-1114"></a>                        <span class="st">&quot;bF&quot;</span>,</span>
<span id="cb31-1115"><a href="#cb31-1115"></a>                        <span class="st">&quot;bW&quot;</span>,</span>
<span id="cb31-1116"><a href="#cb31-1116"></a>                        <span class="st">&quot;bB&quot;</span>,</span>
<span id="cb31-1117"><a href="#cb31-1117"></a>                        <span class="st">&quot;BG&quot;</span>,</span>
<span id="cb31-1118"><a href="#cb31-1118"></a>                        <span class="st">&quot;dW&quot;</span>,</span>
<span id="cb31-1119"><a href="#cb31-1119"></a>                        <span class="st">&quot;dE&quot;</span>,</span>
<span id="cb31-1120"><a href="#cb31-1120"></a>                        <span class="st">&quot;DK&quot;</span>,</span>
<span id="cb31-1121"><a href="#cb31-1121"></a>                        <span class="st">&quot;FI&quot;</span>,</span>
<span id="cb31-1122"><a href="#cb31-1122"></a>                        <span class="st">&quot;HU&quot;</span>))</span>
<span id="cb31-1123"><a href="#cb31-1123"></a></span>
<span id="cb31-1124"><a href="#cb31-1124"></a><span class="co"># Tarkistus</span></span>
<span id="cb31-1125"><a href="#cb31-1125"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa2,maa, type = &quot;count&quot;)</span></span>
<span id="cb31-1126"><a href="#cb31-1126"></a><span class="co"># &quot;alkuperäinen&quot; maa talteenISSP2012esim1.dat %&gt;% tableX(maa,C_ALPHAN, type = &quot;count&quot;)</span></span>
<span id="cb31-1127"><a href="#cb31-1127"></a><span class="co"># &quot;alkuperäinen&quot; maa talteenstr(ISSP2012esim1.dat)</span></span>
<span id="cb31-1128"><a href="#cb31-1128"></a></span>
<span id="cb31-1129"><a href="#cb31-1129"></a><span class="co"># Taulukoita (31.1.2020) ja tarkistuksia</span></span>
<span id="cb31-1130"><a href="#cb31-1130"></a><span class="co">#</span></span>
<span id="cb31-1131"><a href="#cb31-1131"></a><span class="co"># toinen maa-muuttuja, jossa Saksan ja Belgian jako</span></span>
<span id="cb31-1132"><a href="#cb31-1132"></a><span class="co">#  V3</span></span>
<span id="cb31-1133"><a href="#cb31-1133"></a><span class="co">#  5601     BE-FLA-Belgium/ Flanders</span></span>
<span id="cb31-1134"><a href="#cb31-1134"></a><span class="co">#  5602     BE-WAL-Belgium/ Wallonia</span></span>
<span id="cb31-1135"><a href="#cb31-1135"></a><span class="co">#  5603     BE-BRU-Belgium/ Brussels</span></span>
<span id="cb31-1136"><a href="#cb31-1136"></a><span class="co"># 27601     DE-W-Germany-West</span></span>
<span id="cb31-1137"><a href="#cb31-1137"></a><span class="co"># 27602     DE-E-Germany-East</span></span>
<span id="cb31-1138"><a href="#cb31-1138"></a></span>
<span id="cb31-1139"><a href="#cb31-1139"></a><span class="co"># Tarkastuksia</span></span>
<span id="cb31-1140"><a href="#cb31-1140"></a></span>
<span id="cb31-1141"><a href="#cb31-1141"></a><span class="co"># assert_that ehkä tarpeeton - expect_equivalet testaa levelien</span></span>
<span id="cb31-1142"><a href="#cb31-1142"></a><span class="co"># järjestyksen ja määrän (20.2.20)</span></span>
<span id="cb31-1143"><a href="#cb31-1143"></a></span>
<span id="cb31-1144"><a href="#cb31-1144"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>sp)) <span class="op">==</span><span class="st"> </span><span class="dv">2</span>)</span>
<span id="cb31-1145"><a href="#cb31-1145"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>sp),</span>
<span id="cb31-1146"><a href="#cb31-1146"></a>                <span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>)))</span>
<span id="cb31-1147"><a href="#cb31-1147"></a></span>
<span id="cb31-1148"><a href="#cb31-1148"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa)) <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb31-1149"><a href="#cb31-1149"></a></span>
<span id="cb31-1150"><a href="#cb31-1150"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa),</span>
<span id="cb31-1151"><a href="#cb31-1151"></a>                  <span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)))</span>
<span id="cb31-1152"><a href="#cb31-1152"></a></span>
<span id="cb31-1153"><a href="#cb31-1153"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa3)) <span class="op">==</span><span class="st"> </span><span class="dv">9</span>)</span>
<span id="cb31-1154"><a href="#cb31-1154"></a></span>
<span id="cb31-1155"><a href="#cb31-1155"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>maa3),</span>
<span id="cb31-1156"><a href="#cb31-1156"></a>                 <span class="kw">c</span>(<span class="st">&quot;bF&quot;</span>,<span class="st">&quot;bW&quot;</span>,<span class="st">&quot;bB&quot;</span>, <span class="st">&quot;BG&quot;</span>,<span class="st">&quot;dW&quot;</span>,<span class="st">&quot;dE&quot;</span>,<span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)))</span>
<span id="cb31-1157"><a href="#cb31-1157"></a></span>
<span id="cb31-1158"><a href="#cb31-1158"></a><span class="kw">validate_that</span>(<span class="kw">length</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>Q1b)) <span class="op">==</span><span class="st"> </span><span class="dv">5</span>)</span>
<span id="cb31-1159"><a href="#cb31-1159"></a><span class="kw">validate_that</span>(<span class="kw">are_equal</span>(<span class="kw">levels</span>(ISSP2012esim1.dat<span class="op">$</span>Q1b),</span>
<span id="cb31-1160"><a href="#cb31-1160"></a>               <span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)))</span>
<span id="cb31-1161"><a href="#cb31-1161"></a></span>
<span id="cb31-1162"><a href="#cb31-1162"></a><span class="co"># testthat - paketti - pois käytöstä 16.9.20</span></span>
<span id="cb31-1163"><a href="#cb31-1163"></a><span class="co"># expect_ ei anna ok-ilmoitusta, ainoastaan virheilmoituksen? (11.4.20)</span></span>
<span id="cb31-1164"><a href="#cb31-1164"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$maa),</span></span>
<span id="cb31-1165"><a href="#cb31-1165"></a><span class="co">#                  c(&quot;BE&quot;, &quot;BG&quot;, &quot;DE&quot;, &quot;DK&quot;, &quot;FI&quot;, &quot;HU&quot;))</span></span>
<span id="cb31-1166"><a href="#cb31-1166"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$maa3),</span></span>
<span id="cb31-1167"><a href="#cb31-1167"></a><span class="co">#                  c(&quot;bF&quot;,&quot;bW&quot;,&quot;bB&quot;, &quot;BG&quot;,&quot;dW&quot;,&quot;dE&quot;,&quot;DK&quot;, &quot;FI&quot;, &quot;HU&quot;))</span></span>
<span id="cb31-1168"><a href="#cb31-1168"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$sp), c(&quot;m&quot;, &quot;f&quot;))</span></span>
<span id="cb31-1169"><a href="#cb31-1169"></a><span class="co"># expect_equivalent(levels(ISSP2012esim1.dat$Q1b),</span></span>
<span id="cb31-1170"><a href="#cb31-1170"></a><span class="co">#                  c(&quot;S&quot;, &quot;s&quot;, &quot;?&quot;, &quot;e&quot;, &quot;E&quot;))</span></span>
<span id="cb31-1171"><a href="#cb31-1171"></a><span class="co">#</span></span>
<span id="cb31-1172"><a href="#cb31-1172"></a><span class="co"># ISSP2012esim1.dat %&gt;% tableX(maa,ika,type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1173"><a href="#cb31-1173"></a><span class="co">#</span></span>
<span id="cb31-1174"><a href="#cb31-1174"></a><span class="co"># Riviprofiilit</span></span>
<span id="cb31-1175"><a href="#cb31-1175"></a><span class="co">#</span></span>
<span id="cb31-1176"><a href="#cb31-1176"></a><span class="co"># ISSP2012esim1.dat %&gt;% tableX(maa,ika,type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1177"><a href="#cb31-1177"></a><span class="co"># ISSP2012esim1.dat %&gt;% tableX(maa,sp ,type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1178"><a href="#cb31-1178"></a><span class="co">#</span></span>
<span id="cb31-1179"><a href="#cb31-1179"></a><span class="co">#</span></span>
<span id="cb31-1180"><a href="#cb31-1180"></a><span class="co"># Kysymyksen Q1b vastaukset</span></span>
<span id="cb31-1181"><a href="#cb31-1181"></a><span class="co">#</span></span>
<span id="cb31-1182"><a href="#cb31-1182"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa,Q1b,type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1183"><a href="#cb31-1183"></a><span class="co">#</span></span>
<span id="cb31-1184"><a href="#cb31-1184"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(maa3,Q1b,type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1185"><a href="#cb31-1185"></a><span class="co">#</span></span>
<span id="cb31-1186"><a href="#cb31-1186"></a><span class="co"># str(ISSP2012esim1.dat) # 8143 obs. of  7 variable,</span></span>
<span id="cb31-1187"><a href="#cb31-1187"></a><span class="co"># sama kuin vanhassa Galku-koodissa.</span></span>
<span id="cb31-1188"><a href="#cb31-1188"></a><span class="co">#</span></span>
<span id="cb31-1189"><a href="#cb31-1189"></a><span class="co"># str(ISSP2012esim1.dat) # 8143 obs. of  7 variable,</span></span>
<span id="cb31-1190"><a href="#cb31-1190"></a><span class="co"># sama kuin vanhassa Galku-koodissa.</span></span>
<span id="cb31-1191"><a href="#cb31-1191"></a></span>
<span id="cb31-1192"><a href="#cb31-1192"></a>taulu2 &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa, Q1b, <span class="dt">type =</span> <span class="st">&quot;cell_perc&quot;</span>)</span>
<span id="cb31-1193"><a href="#cb31-1193"></a>knitr<span class="op">::</span><span class="kw">kable</span>(taulu2,<span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb31-1194"><a href="#cb31-1194"></a>             <span class="dt">caption =</span> <span class="st">&quot;Kysymyksen Q1b vastaukset maittain, suhteelliset frekvenssit&quot;</span>)</span>
<span id="cb31-1195"><a href="#cb31-1195"></a></span>
<span id="cb31-1196"><a href="#cb31-1196"></a>taulu3 &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa,Q1b,<span class="dt">type =</span> <span class="st">&quot;row_perc&quot;</span>)</span>
<span id="cb31-1197"><a href="#cb31-1197"></a></span>
<span id="cb31-1198"><a href="#cb31-1198"></a>knitr<span class="op">::</span><span class="kw">kable</span>(taulu3,<span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb31-1199"><a href="#cb31-1199"></a>             <span class="dt">caption =</span> <span class="st">&quot;Kysymyksen Q1b vastaukset, riviprosentit&quot;</span>)</span>
<span id="cb31-1200"><a href="#cb31-1200"></a></span>
<span id="cb31-1201"><a href="#cb31-1201"></a>taulu4 &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa,Q1b,<span class="dt">type =</span> <span class="st">&quot;col_perc&quot;</span>)</span>
<span id="cb31-1202"><a href="#cb31-1202"></a></span>
<span id="cb31-1203"><a href="#cb31-1203"></a>knitr<span class="op">::</span><span class="kw">kable</span>(taulu4,<span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb31-1204"><a href="#cb31-1204"></a>             <span class="dt">caption =</span> <span class="st">&quot;Kysymyksen Q1b vastaukset, sarakeprosentit&quot;</span>)</span>
<span id="cb31-1205"><a href="#cb31-1205"></a></span>
<span id="cb31-1206"><a href="#cb31-1206"></a><span class="co"># CA tässä, jotta saadaan rivi- ja sarakeprofiilikuvat</span></span>
<span id="cb31-1207"><a href="#cb31-1207"></a><span class="co"># Lasketaan samalla CA-ratkaisu riviprofiilitaulkolle (maille samat painot)</span></span>
<span id="cb31-1208"><a href="#cb31-1208"></a></span>
<span id="cb31-1209"><a href="#cb31-1209"></a>simpleCA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maa <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1.dat)</span>
<span id="cb31-1210"><a href="#cb31-1210"></a></span>
<span id="cb31-1211"><a href="#cb31-1211"></a><span class="co"># Maiden järjestys kääntää kuvan (1.2.20) - esimerkki on</span></span>
<span id="cb31-1212"><a href="#cb31-1212"></a><span class="co"># vähän kuriositeetti. Kartta voi tietysti &quot;flipata&quot; koordintaattien suhteen ainakin</span></span>
<span id="cb31-1213"><a href="#cb31-1213"></a><span class="co"># neljällä tavalla (? 180 astetta molempien akseleiden ympäri molempiin suuntiin?)</span></span>
<span id="cb31-1214"><a href="#cb31-1214"></a><span class="co"># (18.2.20). Tämän maa2-muuttujaa käyttävän kuvan voi jättää pois (8.4.20)</span></span>
<span id="cb31-1215"><a href="#cb31-1215"></a></span>
<span id="cb31-1216"><a href="#cb31-1216"></a><span class="co"># simpleCA2 &lt;- ca(~maa2 + Q1b,ISSP2012esim1.dat)</span></span>
<span id="cb31-1217"><a href="#cb31-1217"></a></span>
<span id="cb31-1218"><a href="#cb31-1218"></a><span class="co"># Oikeastaan maiden vertailussa pitäisi niiden massat skaalata yhtä suuriksi, tässä</span></span>
<span id="cb31-1219"><a href="#cb31-1219"></a><span class="co"># pikainen kokeilu (20.2.20)</span></span>
<span id="cb31-1220"><a href="#cb31-1220"></a><span class="co"># Riviprosentit taulukoksi, nimet sarakkeille ja riveille (ei kovin robustia...)</span></span>
<span id="cb31-1221"><a href="#cb31-1221"></a></span>
<span id="cb31-1222"><a href="#cb31-1222"></a></span>
<span id="cb31-1223"><a href="#cb31-1223"></a>johdesim1_rowproc.tab &lt;-<span class="st"> </span>simpleCA1<span class="op">$</span>N <span class="op">/</span><span class="st"> </span><span class="kw">rowSums</span>(simpleCA1<span class="op">$</span>N)</span>
<span id="cb31-1224"><a href="#cb31-1224"></a><span class="kw">colnames</span>(johdesim1_rowproc.tab) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S&quot;</span> ,<span class="st">&quot;s&quot;</span> ,<span class="st">&quot;?&quot;</span>,<span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)</span>
<span id="cb31-1225"><a href="#cb31-1225"></a><span class="kw">rownames</span>(johdesim1_rowproc.tab) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)</span>
<span id="cb31-1226"><a href="#cb31-1226"></a></span>
<span id="cb31-1227"><a href="#cb31-1227"></a><span class="co"># Miten tibblenä? Ei toimi, ei maa-muuttujaa ollenkaan</span></span>
<span id="cb31-1228"><a href="#cb31-1228"></a><span class="co"># johdesim1_rowproc.tbl &lt;- as_tibble(johdesim1_rowproc.tab)</span></span>
<span id="cb31-1229"><a href="#cb31-1229"></a><span class="co"># str(johdesim1_rowproc.tbl)</span></span>
<span id="cb31-1230"><a href="#cb31-1230"></a></span>
<span id="cb31-1231"><a href="#cb31-1231"></a><span class="co"># TARKISTUKSIA (20.2.20)</span></span>
<span id="cb31-1232"><a href="#cb31-1232"></a><span class="co"># johdesim1_rowproc.tab</span></span>
<span id="cb31-1233"><a href="#cb31-1233"></a><span class="co"># rowSums(johdesim1_rowproc.tab)</span></span>
<span id="cb31-1234"><a href="#cb31-1234"></a><span class="co"># str(johdesim1_rowproc.tab)</span></span>
<span id="cb31-1235"><a href="#cb31-1235"></a></span>
<span id="cb31-1236"><a href="#cb31-1236"></a></span>
<span id="cb31-1237"><a href="#cb31-1237"></a>simpleCA3 &lt;-<span class="st"> </span><span class="kw">ca</span>(johdesim1_rowproc.tab)</span>
<span id="cb31-1238"><a href="#cb31-1238"></a></span>
<span id="cb31-1239"><a href="#cb31-1239"></a></span>
<span id="cb31-1240"><a href="#cb31-1240"></a><span class="co"># Kartta piirretään koodilohkossa simpleCAmap1, r. 773 noin.</span></span>
<span id="cb31-1241"><a href="#cb31-1241"></a></span>
<span id="cb31-1242"><a href="#cb31-1242"></a><span class="co"># Riviprosentit tarkistusta varten</span></span>
<span id="cb31-1243"><a href="#cb31-1243"></a><span class="co">#        S  s   ?   e   E</span></span>
<span id="cb31-1244"><a href="#cb31-1244"></a><span class="co">#BE 9.49    22.40   21.76   27.42   18.93</span></span>
<span id="cb31-1245"><a href="#cb31-1245"></a><span class="co">#BG 12.81   42.89   22.26   20.63   1.41</span></span>
<span id="cb31-1246"><a href="#cb31-1246"></a><span class="co">#DE 9.63    21.88   11.55   31.39   25.55</span></span>
<span id="cb31-1247"><a href="#cb31-1247"></a><span class="co">#DK 5.04    17.15   10.95   16.71   50.14</span></span>
<span id="cb31-1248"><a href="#cb31-1248"></a><span class="co">#FI 4.23    16.94   13.42   38.11   27.30</span></span>
<span id="cb31-1249"><a href="#cb31-1249"></a><span class="co">#HU 21.97   28.89   22.57   19.06   7.52</span></span>
<span id="cb31-1250"><a href="#cb31-1250"></a><span class="co">#</span></span>
<span id="cb31-1251"><a href="#cb31-1251"></a><span class="co"># Ja datan saa leikepöydän kautta, jos on tarve pikatarkistuksiin</span></span>
<span id="cb31-1252"><a href="#cb31-1252"></a><span class="co"># read &lt;- read.table(&quot;clipboard&quot;)</span></span>
<span id="cb31-1253"><a href="#cb31-1253"></a></span>
<span id="cb31-1254"><a href="#cb31-1254"></a><span class="co">#mutkikas kuvan piirto - sarakeprofiilit vertailussa</span></span>
<span id="cb31-1255"><a href="#cb31-1255"></a><span class="co">#ggplot vaatii df-rakenteen ja &#39;long data&#39; - muotoon</span></span>
<span id="cb31-1256"><a href="#cb31-1256"></a><span class="co">##https://stackoverflow.com/questions/9563368/create-stacked-barplot</span></span>
<span id="cb31-1257"><a href="#cb31-1257"></a><span class="co"># -where-each-stack-is-scaled-to-sum-to</span></span>
<span id="cb31-1258"><a href="#cb31-1258"></a><span class="co"># Pitkä https-linkki kahdella rivillä</span></span>
<span id="cb31-1259"><a href="#cb31-1259"></a><span class="co">#</span></span>
<span id="cb31-1260"><a href="#cb31-1260"></a><span class="co"># käytetään ca - tuloksia</span></span>
<span id="cb31-1261"><a href="#cb31-1261"></a>apu1 &lt;-<span class="st"> </span>(simpleCA1<span class="op">$</span>N)</span>
<span id="cb31-1262"><a href="#cb31-1262"></a><span class="kw">colnames</span>(apu1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)</span>
<span id="cb31-1263"><a href="#cb31-1263"></a><span class="kw">rownames</span>(apu1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>)</span>
<span id="cb31-1264"><a href="#cb31-1264"></a>apu1_df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(apu1)</span>
<span id="cb31-1265"><a href="#cb31-1265"></a><span class="co">#lasketan rivien reunajakauma</span></span>
<span id="cb31-1266"><a href="#cb31-1266"></a>apu1_df<span class="op">$</span>ka_sarake &lt;-<span class="st"> </span><span class="kw">rowSums</span>(apu1_df)</span>
<span id="cb31-1267"><a href="#cb31-1267"></a><span class="co">#muokataan &#39;long data&#39; - muotoon</span></span>
<span id="cb31-1268"><a href="#cb31-1268"></a>apu1b_df &lt;-<span class="st"> </span><span class="kw">melt</span>(<span class="kw">cbind</span>(apu1_df, <span class="dt">ind =</span> <span class="kw">rownames</span>(apu1_df)), <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&#39;ind&#39;</span>))</span>
<span id="cb31-1269"><a href="#cb31-1269"></a></span>
<span id="cb31-1270"><a href="#cb31-1270"></a>p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(apu1b_df, <span class="kw">aes</span>(<span class="dt">x =</span> variable, <span class="dt">y =</span> value, <span class="dt">fill =</span> ind)) <span class="op">+</span></span>
<span id="cb31-1271"><a href="#cb31-1271"></a><span class="st">         </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb31-1272"><a href="#cb31-1272"></a><span class="st">         </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot; &quot;</span>,<span class="dt">labels =</span> <span class="kw">percent_format</span>())</span>
<span id="cb31-1273"><a href="#cb31-1273"></a>p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">&quot;maa&quot;</span>)</span>
<span id="cb31-1274"><a href="#cb31-1274"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">scale_x_discrete</span>(<span class="dt">name =</span> <span class="st">&quot;Q1b - vastauskategoriat&quot;</span>)</span>
<span id="cb31-1275"><a href="#cb31-1275"></a><span class="co"># apu1_df</span></span>
<span id="cb31-1276"><a href="#cb31-1276"></a><span class="co"># apu1b_df</span></span>
<span id="cb31-1277"><a href="#cb31-1277"></a></span>
<span id="cb31-1278"><a href="#cb31-1278"></a></span>
<span id="cb31-1279"><a href="#cb31-1279"></a><span class="co"># riviprofiilit ja keskiarvorivi -  18.9.2018</span></span>
<span id="cb31-1280"><a href="#cb31-1280"></a>apu2_df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(apu1)</span>
<span id="cb31-1281"><a href="#cb31-1281"></a>apu2_df &lt;-<span class="st"> </span><span class="kw">rbind</span>(apu2_df, <span class="dt">ka_rivi =</span> <span class="kw">colSums</span>(apu2_df))</span>
<span id="cb31-1282"><a href="#cb31-1282"></a></span>
<span id="cb31-1283"><a href="#cb31-1283"></a><span class="co">#apu2_df</span></span>
<span id="cb31-1284"><a href="#cb31-1284"></a><span class="co">#str(apu2_df)</span></span>
<span id="cb31-1285"><a href="#cb31-1285"></a><span class="co">## typeof(apu2_df) # what is it?</span></span>
<span id="cb31-1286"><a href="#cb31-1286"></a><span class="co">## class(apu2_df) # what is it? (sorry)</span></span>
<span id="cb31-1287"><a href="#cb31-1287"></a><span class="co">## storage.mode(apu2_df) # what is it? (very sorry)</span></span>
<span id="cb31-1288"><a href="#cb31-1288"></a><span class="co">## length(apu2_df) # how long is it? What about two dimensional</span></span>
<span id="cb31-1289"><a href="#cb31-1289"></a><span class="co">## objects?</span></span>
<span id="cb31-1290"><a href="#cb31-1290"></a><span class="co"># attributes(apu2_df)</span></span>
<span id="cb31-1291"><a href="#cb31-1291"></a></span>
<span id="cb31-1292"><a href="#cb31-1292"></a><span class="co"># temp1 &lt;- cbind(apu2_df, ind = rownames(apu2_df))</span></span>
<span id="cb31-1293"><a href="#cb31-1293"></a><span class="co"># temp1</span></span>
<span id="cb31-1294"><a href="#cb31-1294"></a><span class="co">##muokataan &#39;long data&#39; - muotoon</span></span>
<span id="cb31-1295"><a href="#cb31-1295"></a>apu2b_df &lt;-<span class="st"> </span><span class="kw">melt</span>(<span class="kw">cbind</span>(apu2_df, <span class="dt">ind =</span> <span class="kw">rownames</span>(apu2_df)), <span class="dt">id.vars =</span> <span class="kw">c</span>(<span class="st">&#39;ind&#39;</span>))</span>
<span id="cb31-1296"><a href="#cb31-1296"></a><span class="co"># str(apu2b_df)</span></span>
<span id="cb31-1297"><a href="#cb31-1297"></a><span class="co"># glimpse(apu2b_df)</span></span>
<span id="cb31-1298"><a href="#cb31-1298"></a></span>
<span id="cb31-1299"><a href="#cb31-1299"></a><span class="co">#</span></span>
<span id="cb31-1300"><a href="#cb31-1300"></a><span class="co">#ggplot(apu2b_df, aes(x = value, y = ind, fill = variable)) +</span></span>
<span id="cb31-1301"><a href="#cb31-1301"></a><span class="co">#       geom_bar(position = &quot;fill&quot;, stat =&quot;identity&quot;) +</span></span>
<span id="cb31-1302"><a href="#cb31-1302"></a><span class="co">#       #coord_flip() +</span></span>
<span id="cb31-1303"><a href="#cb31-1303"></a><span class="co">#        scale_x_continuous(labels = percent_format())</span></span>
<span id="cb31-1304"><a href="#cb31-1304"></a></span>
<span id="cb31-1305"><a href="#cb31-1305"></a><span class="co">#versio2 toimii (18.9.2018)</span></span>
<span id="cb31-1306"><a href="#cb31-1306"></a></span>
<span id="cb31-1307"><a href="#cb31-1307"></a>p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(apu2b_df, <span class="kw">aes</span>(<span class="dt">x =</span> ind, <span class="dt">y =</span> value, <span class="dt">fill =</span> variable)) <span class="op">+</span></span>
<span id="cb31-1308"><a href="#cb31-1308"></a><span class="st">       </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb31-1309"><a href="#cb31-1309"></a><span class="st">       </span><span class="kw">coord_flip</span>() <span class="op">+</span></span>
<span id="cb31-1310"><a href="#cb31-1310"></a><span class="st">        </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot; &quot;</span>,<span class="dt">labels =</span> <span class="kw">percent_format</span>())</span>
<span id="cb31-1311"><a href="#cb31-1311"></a>p &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">&quot;Q1b&quot;</span>)</span>
<span id="cb31-1312"><a href="#cb31-1312"></a>p <span class="op">+</span><span class="st"> </span><span class="kw">scale_x_discrete</span>(<span class="dt">name =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb31-1313"><a href="#cb31-1313"></a></span>
<span id="cb31-1314"><a href="#cb31-1314"></a></span>
<span id="cb31-1315"><a href="#cb31-1315"></a></span>
<span id="cb31-1316"><a href="#cb31-1316"></a><span class="co"># simpleCA1 luotu aikaisemmin profiilikuvia varten koodilohkossa EkaCA</span></span>
<span id="cb31-1317"><a href="#cb31-1317"></a><span class="co"># HUOM! xlab ja ylab, prosenttiosuudet ensin katsottu ja sitten kirjoitettu</span></span>
<span id="cb31-1318"><a href="#cb31-1318"></a><span class="co"># tässä. Vertaa scree-plot - tietoon!</span></span>
<span id="cb31-1319"><a href="#cb31-1319"></a></span>
<span id="cb31-1320"><a href="#cb31-1320"></a></span>
<span id="cb31-1321"><a href="#cb31-1321"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="dv">1</span>)</span>
<span id="cb31-1322"><a href="#cb31-1322"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;symmetric&quot;</span>, <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb31-1323"><a href="#cb31-1323"></a>     <span class="dt">xlab =</span> <span class="st">&quot;Dimensio 1: moderni/liberaali - perinteinen/konservatiivinen (76%)&quot;</span>,</span>
<span id="cb31-1324"><a href="#cb31-1324"></a>     <span class="dt">ylab =</span> <span class="st">&quot;Dimensio 2: maltillinen/epävarma - radikaali/jyrkkä/varma (15.1%)&quot;</span>,</span>
<span id="cb31-1325"><a href="#cb31-1325"></a>     <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta 1&quot;</span>,</span>
<span id="cb31-1326"><a href="#cb31-1326"></a>     <span class="dt">sub =</span> <span class="st">&quot;Maiden massat eri suuruisia (otoskoko), pisteiden koko suhteessa massaan&quot;</span>)</span>
<span id="cb31-1327"><a href="#cb31-1327"></a></span>
<span id="cb31-1328"><a href="#cb31-1328"></a><span class="co"># asymmetrinen kartta - rivit pc ja sarakkeet sc</span></span>
<span id="cb31-1329"><a href="#cb31-1329"></a><span class="co"># sarakkeet vektorikuvina</span></span>
<span id="cb31-1330"><a href="#cb31-1330"></a></span>
<span id="cb31-1331"><a href="#cb31-1331"></a><span class="co"># par(cex = 0.7)</span></span>
<span id="cb31-1332"><a href="#cb31-1332"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowprincipal&quot;</span>, </span>
<span id="cb31-1333"><a href="#cb31-1333"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>,<span class="ot">TRUE</span>), </span>
<span id="cb31-1334"><a href="#cb31-1334"></a>     <span class="dt">main =</span> <span class="st">&quot;asymmetrinen kartta 1&quot;</span></span>
<span id="cb31-1335"><a href="#cb31-1335"></a>    )</span>
<span id="cb31-1336"><a href="#cb31-1336"></a></span>
<span id="cb31-1337"><a href="#cb31-1337"></a></span>
<span id="cb31-1338"><a href="#cb31-1338"></a><span class="co"># Piirretään Suomen riviprofiilista janat sarakepisteisiin - barysentinen keskiarvo</span></span>
<span id="cb31-1339"><a href="#cb31-1339"></a><span class="co"># Rivipisteet pääkoordinaatteina (principal coordinates)</span></span>
<span id="cb31-1340"><a href="#cb31-1340"></a></span>
<span id="cb31-1341"><a href="#cb31-1341"></a>simpleCA1.rpc &lt;-<span class="st"> </span>simpleCA1<span class="op">$</span>rowcoord <span class="op">%*%</span><span class="st"> </span><span class="kw">diag</span>(simpleCA1<span class="op">$</span>sv)</span>
<span id="cb31-1342"><a href="#cb31-1342"></a></span>
<span id="cb31-1343"><a href="#cb31-1343"></a><span class="co"># X11()</span></span>
<span id="cb31-1344"><a href="#cb31-1344"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="dv">1</span>)</span>
<span id="cb31-1345"><a href="#cb31-1345"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowprincipal&quot;</span>, </span>
<span id="cb31-1346"><a href="#cb31-1346"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>,<span class="ot">FALSE</span>),</span>
<span id="cb31-1347"><a href="#cb31-1347"></a>     <span class="co"># main = &quot;barysentrinen periaate - asymmetrinen kartta 2&quot;,</span></span>
<span id="cb31-1348"><a href="#cb31-1348"></a>     <span class="dt">sub =</span> <span class="st">&quot;Suomen profiili sarakkeiden barysentrisenä keskiarvona&quot;</span>)</span>
<span id="cb31-1349"><a href="#cb31-1349"></a>     <span class="kw">segments</span>(simpleCA1.rpc[<span class="dv">5</span>,<span class="dv">1</span>],simpleCA1.rpc[<span class="dv">5</span>,<span class="dv">2</span>],simpleCA1<span class="op">$</span>colcoord[, <span class="dv">1</span>],</span>
<span id="cb31-1350"><a href="#cb31-1350"></a>         simpleCA1<span class="op">$</span>colcoord[, <span class="dv">2</span>], <span class="dt">col =</span> <span class="st">&quot;pink&quot;</span>)</span>
<span id="cb31-1351"><a href="#cb31-1351"></a></span>
<span id="cb31-1352"><a href="#cb31-1352"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/simpleCAasymmTulk2.png&#39;</span>)</span>
<span id="cb31-1353"><a href="#cb31-1353"></a></span>
<span id="cb31-1354"><a href="#cb31-1354"></a><span class="co">#par(cex = 0.6)</span></span>
<span id="cb31-1355"><a href="#cb31-1355"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb31-1356"><a href="#cb31-1356"></a>     <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;absolute&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb31-1357"><a href="#cb31-1357"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb31-1358"><a href="#cb31-1358"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb31-1359"><a href="#cb31-1359"></a>     <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 1&quot;</span>,</span>
<span id="cb31-1360"><a href="#cb31-1360"></a>     <span class="dt">sub =</span> <span class="st">&quot;sarakevektorin ja rivipisteiden värin tummuus = absoluuttinen kontribuutio&quot;</span>)</span>
<span id="cb31-1361"><a href="#cb31-1361"></a></span>
<span id="cb31-1362"><a href="#cb31-1362"></a></span>
<span id="cb31-1363"><a href="#cb31-1363"></a><span class="co">#par(cex = 0.7)</span></span>
<span id="cb31-1364"><a href="#cb31-1364"></a><span class="kw">plot</span>(simpleCA1, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb31-1365"><a href="#cb31-1365"></a>     <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;relative&quot;</span>),</span>
<span id="cb31-1366"><a href="#cb31-1366"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb31-1367"><a href="#cb31-1367"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb31-1368"><a href="#cb31-1368"></a>     <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 2&quot;</span>,</span>
<span id="cb31-1369"><a href="#cb31-1369"></a>     <span class="dt">sub =</span> <span class="st">&quot;sarakevektorin ja pisteen värin tummuus = suhteellinen kontribuutio&quot;</span>)</span>
<span id="cb31-1370"><a href="#cb31-1370"></a></span>
<span id="cb31-1371"><a href="#cb31-1371"></a></span>
<span id="cb31-1372"><a href="#cb31-1372"></a><span class="co"># Sama kartta - maiden massat vakiotu - simpleCA3 luotu koodilohkossa EkaCA</span></span>
<span id="cb31-1373"><a href="#cb31-1373"></a><span class="co"># CA:n lähtötietona riviprofiilit</span></span>
<span id="cb31-1374"><a href="#cb31-1374"></a></span>
<span id="cb31-1375"><a href="#cb31-1375"></a><span class="co">#par(cex = 0.8)</span></span>
<span id="cb31-1376"><a href="#cb31-1376"></a><span class="kw">plot</span>(simpleCA3, <span class="dt">map =</span> <span class="st">&quot;symmetric&quot;</span>, <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb31-1377"><a href="#cb31-1377"></a><span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta 2 &quot;</span>,</span>
<span id="cb31-1378"><a href="#cb31-1378"></a><span class="dt">sub =</span> <span class="st">&quot;Maidet massat vakioitu (riviprofiilidata)&quot;</span>)</span>
<span id="cb31-1379"><a href="#cb31-1379"></a></span>
<span id="cb31-1380"><a href="#cb31-1380"></a></span>
<span id="cb31-1381"><a href="#cb31-1381"></a><span class="kw">plot</span>(simpleCA3, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb31-1382"><a href="#cb31-1382"></a>     <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;absolute&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb31-1383"><a href="#cb31-1383"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">TRUE</span>),</span>
<span id="cb31-1384"><a href="#cb31-1384"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb31-1385"><a href="#cb31-1385"></a>     <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta 3&quot;</span>,</span>
<span id="cb31-1386"><a href="#cb31-1386"></a>     <span class="dt">sub =</span> <span class="st">&quot;sarakevektorin ja rivipisteiden värin tummuus = absoluuttinen kontribuutio, riviprofiilidata&quot;</span>)</span>
<span id="cb31-1387"><a href="#cb31-1387"></a></span>
<span id="cb31-1388"><a href="#cb31-1388"></a><span class="co"># riviprofiilitaulukko aiheuttaa virheen PDF-tulostuksessa, JH_capaper.Rmd</span></span>
<span id="cb31-1389"><a href="#cb31-1389"></a><span class="co"># tiedoston voi kuitenkin renderöidä knit-napilla RStudiossa pdf-tiedostoksi.</span></span>
<span id="cb31-1390"><a href="#cb31-1390"></a></span>
<span id="cb31-1391"><a href="#cb31-1391"></a><span class="co"># Kts. edellinen koodilohko - testailua pdf-ongelman ratkaisemiseksi</span></span>
<span id="cb31-1392"><a href="#cb31-1392"></a><span class="co"># tallennetaan data tiedostoon, koodilohko BeDeAluedat1 passiviseksi</span></span>
<span id="cb31-1393"><a href="#cb31-1393"></a><span class="co"># suppoint1_tab1 &lt;- read_rds(&quot;suppoint1tab1.rds&quot;)</span></span>
<span id="cb31-1394"><a href="#cb31-1394"></a><span class="co"># suppoint1_tab1 # tarkistus ok</span></span>
<span id="cb31-1395"><a href="#cb31-1395"></a></span>
<span id="cb31-1396"><a href="#cb31-1396"></a>BeDealueTable &lt;-<span class="st"> </span>ISSP2012esim1.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">tableX</span>(maa3, Q1b, <span class="dt">type =</span> <span class="st">&quot;row_perc&quot;</span>)</span>
<span id="cb31-1397"><a href="#cb31-1397"></a></span>
<span id="cb31-1398"><a href="#cb31-1398"></a>knitr<span class="op">::</span><span class="kw">kable</span>(BeDealueTable , <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">booktabs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb31-1399"><a href="#cb31-1399"></a>           <span class="dt">caption =</span> <span class="st">&quot;Q1b vastaukset, Saksan ja Belgian alueet&quot;</span>)</span>
<span id="cb31-1400"><a href="#cb31-1400"></a></span>
<span id="cb31-1401"><a href="#cb31-1401"></a><span class="co"># (26.10.20) TÄSSÄ EHKÄ VIRHE - PDF-renderöinti antaa virheilmoituksen?</span></span>
<span id="cb31-1402"><a href="#cb31-1402"></a><span class="co"># Ei todennäköistä, sillä toimii html-tulostuksessa. Kokeiltiin tämän lohkon</span></span>
<span id="cb31-1403"><a href="#cb31-1403"></a><span class="co"># poistamista, ei auttanut ratkaisevasti.</span></span>
<span id="cb31-1404"><a href="#cb31-1404"></a></span>
<span id="cb31-1405"><a href="#cb31-1405"></a><span class="co"># Belgian ja Saksan aluejako maa3-muuttujassa</span></span>
<span id="cb31-1406"><a href="#cb31-1406"></a><span class="co"># str(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb31-1407"><a href="#cb31-1407"></a><span class="co"># attributes(ISSP2012esim1.dat$maa3)</span></span>
<span id="cb31-1408"><a href="#cb31-1408"></a></span>
<span id="cb31-1409"><a href="#cb31-1409"></a>suppoint1_df1 &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012esim1.dat, maa3,Q1b)</span>
<span id="cb31-1410"><a href="#cb31-1410"></a></span>
<span id="cb31-1411"><a href="#cb31-1411"></a><span class="co"># Taulukoksi jotta saadaan lisättyä Saksan ja Belgian maa-profiilit täydentäviksi</span></span>
<span id="cb31-1412"><a href="#cb31-1412"></a><span class="co"># pisteiksi.</span></span>
<span id="cb31-1413"><a href="#cb31-1413"></a></span>
<span id="cb31-1414"><a href="#cb31-1414"></a>suppoint1_tab1 &lt;-<span class="st"> </span><span class="kw">table</span>(suppoint1_df1<span class="op">$</span>maa3, suppoint1_df1<span class="op">$</span>Q1b)</span>
<span id="cb31-1415"><a href="#cb31-1415"></a></span>
<span id="cb31-1416"><a href="#cb31-1416"></a><span class="co"># tarkistus 1</span></span>
<span id="cb31-1417"><a href="#cb31-1417"></a><span class="co"># suppoint1_tab1</span></span>
<span id="cb31-1418"><a href="#cb31-1418"></a></span>
<span id="cb31-1419"><a href="#cb31-1419"></a><span class="co"># Maaprofiilit lisäpisteiksi</span></span>
<span id="cb31-1420"><a href="#cb31-1420"></a>suppoint2_df &lt;-<span class="st"> </span><span class="kw">filter</span>(ISSP2012esim1.dat, (maa <span class="op">==</span><span class="st"> &quot;BE&quot;</span> <span class="op">|</span><span class="st"> </span>maa <span class="op">==</span><span class="st"> &quot;DE&quot;</span>))</span>
<span id="cb31-1421"><a href="#cb31-1421"></a>suppoint2_df &lt;-<span class="st"> </span><span class="kw">select</span>(suppoint2_df, maa, Q1b)</span>
<span id="cb31-1422"><a href="#cb31-1422"></a><span class="co"># Poistetaan maa-faktroin tyhjät luokat (14.11.2020)</span></span>
<span id="cb31-1423"><a href="#cb31-1423"></a>suppoint2_df &lt;-<span class="st"> </span>suppoint2_df <span class="op">%&gt;%</span></span>
<span id="cb31-1424"><a href="#cb31-1424"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">maa =</span> <span class="kw">fct_drop</span>(maa)</span>
<span id="cb31-1425"><a href="#cb31-1425"></a>    )</span>
<span id="cb31-1426"><a href="#cb31-1426"></a></span>
<span id="cb31-1427"><a href="#cb31-1427"></a></span>
<span id="cb31-1428"><a href="#cb31-1428"></a><span class="co">#glimpse(suppoint2_df)</span></span>
<span id="cb31-1429"><a href="#cb31-1429"></a>suppoint2_tab1 &lt;-<span class="st"> </span><span class="kw">table</span>(suppoint2_df<span class="op">$</span>maa, suppoint2_df<span class="op">$</span>Q1b)</span>
<span id="cb31-1430"><a href="#cb31-1430"></a></span>
<span id="cb31-1431"><a href="#cb31-1431"></a><span class="co"># tarkistus 1</span></span>
<span id="cb31-1432"><a href="#cb31-1432"></a><span class="co"># suppoint2_tab1</span></span>
<span id="cb31-1433"><a href="#cb31-1433"></a></span>
<span id="cb31-1434"><a href="#cb31-1434"></a><span class="co"># Huom! tämä komento vain kerran - tai koko Rmd-tiedosto uudestaan (17.10.20)</span></span>
<span id="cb31-1435"><a href="#cb31-1435"></a><span class="co"># Korvattu maa-faktorin tyhjien luokkien poisolla (14.11.2020)</span></span>
<span id="cb31-1436"><a href="#cb31-1436"></a><span class="co"># suppoint2_tab1 &lt;- suppoint2_tab1[-c(2,4:6) ,]</span></span>
<span id="cb31-1437"><a href="#cb31-1437"></a><span class="co">#suppoint2_tab1 # tarkistus 2</span></span>
<span id="cb31-1438"><a href="#cb31-1438"></a></span>
<span id="cb31-1439"><a href="#cb31-1439"></a><span class="co"># lisätään rivit maa3-muuttujan taulukkoon</span></span>
<span id="cb31-1440"><a href="#cb31-1440"></a></span>
<span id="cb31-1441"><a href="#cb31-1441"></a>suppoint1_tab1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(suppoint1_tab1, suppoint2_tab1)</span>
<span id="cb31-1442"><a href="#cb31-1442"></a></span>
<span id="cb31-1443"><a href="#cb31-1443"></a><span class="co"># suppoint1_tab1 # tarkistus 3</span></span>
<span id="cb31-1444"><a href="#cb31-1444"></a><span class="co"># Testailua pdf-ongelman ratkaisemiseksi - tallennetaa taulukko tiedostoksi</span></span>
<span id="cb31-1445"><a href="#cb31-1445"></a><span class="co"># Ei ratkaisevasti auttanut (26.10.2020)</span></span>
<span id="cb31-1446"><a href="#cb31-1446"></a><span class="co"># write_rds(suppoint1_tab1,&quot;suppoint1tab1.rds&quot;)</span></span>
<span id="cb31-1447"><a href="#cb31-1447"></a></span>
<span id="cb31-1448"><a href="#cb31-1448"></a></span>
<span id="cb31-1449"><a href="#cb31-1449"></a><span class="co"># suppoint1_tab2 &lt;- read_rds(&quot;suppoint1tab1.rds&quot;) - testaus joka siirsi virheen 07-rmd-tiedostoon. Sama virheilmoitustyyppi.</span></span>
<span id="cb31-1450"><a href="#cb31-1450"></a>suppointCA2 &lt;-<span class="st"> </span><span class="kw">ca</span>(suppoint1_tab1[,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], <span class="dt">suprow =</span> <span class="dv">10</span><span class="op">:</span><span class="dv">11</span>)</span>
<span id="cb31-1451"><a href="#cb31-1451"></a></span>
<span id="cb31-1452"><a href="#cb31-1452"></a><span class="co"># par(cex = 0.6)</span></span>
<span id="cb31-1453"><a href="#cb31-1453"></a><span class="kw">plot</span>(suppointCA2, <span class="dt">main =</span> <span class="st">&quot;Symmetrinen kartta 1 &quot;</span>,</span>
<span id="cb31-1454"><a href="#cb31-1454"></a>     <span class="co"># mass = c(TRUE, TRUE),</span></span>
<span id="cb31-1455"><a href="#cb31-1455"></a>     <span class="co"># contrib = c(TRUE, TRUE),</span></span>
<span id="cb31-1456"><a href="#cb31-1456"></a>     <span class="dt">sub =</span> <span class="st">&quot;Täydentävät pisteet DE ja BE&quot;</span> )</span>
<span id="cb31-1457"><a href="#cb31-1457"></a></span>
<span id="cb31-1458"><a href="#cb31-1458"></a></span>
<span id="cb31-1459"><a href="#cb31-1459"></a></span>
<span id="cb31-1460"><a href="#cb31-1460"></a><span class="kw">plot</span>(suppointCA2, <span class="dt">main =</span> <span class="st">&quot;kontribuutiokartta &quot;</span>,</span>
<span id="cb31-1461"><a href="#cb31-1461"></a>        <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb31-1462"><a href="#cb31-1462"></a>        <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb31-1463"><a href="#cb31-1463"></a>        <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>),</span>
<span id="cb31-1464"><a href="#cb31-1464"></a>        <span class="dt">contrib =</span> <span class="kw">c</span>(<span class="st">&quot;absolute&quot;</span>,<span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb31-1465"><a href="#cb31-1465"></a>        <span class="dt">sub =</span> <span class="st">&quot;Täydentävät pisteet DE ja BE&quot;</span> )</span>
<span id="cb31-1466"><a href="#cb31-1466"></a></span>
<span id="cb31-1467"><a href="#cb31-1467"></a></span>
<span id="cb31-1468"><a href="#cb31-1468"></a>suppointCA2</span>
<span id="cb31-1469"><a href="#cb31-1469"></a></span>
<span id="cb31-1470"><a href="#cb31-1470"></a></span>
<span id="cb31-1471"><a href="#cb31-1471"></a><span class="kw">summary</span>(suppointCA2)</span>
<span id="cb31-1472"><a href="#cb31-1472"></a></span>
<span id="cb31-1473"><a href="#cb31-1473"></a>suppointCA3 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maa3 <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1.dat, <span class="dt">nd =</span> <span class="dv">3</span>)</span>
<span id="cb31-1474"><a href="#cb31-1474"></a></span>
<span id="cb31-1475"><a href="#cb31-1475"></a><span class="co"># summary(suppointCA3)</span></span>
<span id="cb31-1476"><a href="#cb31-1476"></a><span class="co"># Error in rsc %*% diag(sv) : non-conformable arguments</span></span>
<span id="cb31-1477"><a href="#cb31-1477"></a></span>
<span id="cb31-1478"><a href="#cb31-1478"></a><span class="kw">plot</span>(suppointCA3, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb31-1479"><a href="#cb31-1479"></a>                <span class="dt">main =</span> <span class="st">&quot;Kolmen dimension ratkaisu&quot;</span>,</span>
<span id="cb31-1480"><a href="#cb31-1480"></a>                <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - 1. ja 2. dimensio&quot;</span>)</span>
<span id="cb31-1481"><a href="#cb31-1481"></a></span>
<span id="cb31-1482"><a href="#cb31-1482"></a><span class="kw">plot</span>(suppointCA3, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>),</span>
<span id="cb31-1483"><a href="#cb31-1483"></a>                <span class="dt">main =</span> <span class="st">&quot;Kolmen dimension ratkaisu&quot;</span>,</span>
<span id="cb31-1484"><a href="#cb31-1484"></a>                <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - 1. ja 3. dimensio&quot;</span>)</span>
<span id="cb31-1485"><a href="#cb31-1485"></a></span>
<span id="cb31-1486"><a href="#cb31-1486"></a><span class="kw">plot</span>(suppointCA3, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>),</span>
<span id="cb31-1487"><a href="#cb31-1487"></a>                <span class="dt">main =</span> <span class="st">&quot;Kolmen dimension ratkaisu&quot;</span>,</span>
<span id="cb31-1488"><a href="#cb31-1488"></a>                <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - 2. ja 3. dimensio&quot;</span>)</span>
<span id="cb31-1489"><a href="#cb31-1489"></a></span>
<span id="cb31-1490"><a href="#cb31-1490"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/3dSymMap_1.PNG&#39;</span>)</span>
<span id="cb31-1491"><a href="#cb31-1491"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/3dSymMap_2.PNG&#39;</span>)</span>
<span id="cb31-1492"><a href="#cb31-1492"></a></span>
<span id="cb31-1493"><a href="#cb31-1493"></a><span class="co"># Iän ja sukupuolen vuorovaikutusmuuttujia</span></span>
<span id="cb31-1494"><a href="#cb31-1494"></a><span class="co">#</span></span>
<span id="cb31-1495"><a href="#cb31-1495"></a><span class="co"># Uusi R-data: ISSP2012esim1b.dat2esim1b)</span></span>
<span id="cb31-1496"><a href="#cb31-1496"></a><span class="co">#</span></span>
<span id="cb31-1497"><a href="#cb31-1497"></a><span class="co"># Ikäluokat age_cat</span></span>
<span id="cb31-1498"><a href="#cb31-1498"></a><span class="co"># AGE 1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 and older</span></span>
<span id="cb31-1499"><a href="#cb31-1499"></a><span class="co">#</span></span>
<span id="cb31-1500"><a href="#cb31-1500"></a><span class="co"># summary(ISSP2012esim1.dat$AGE)</span></span>
<span id="cb31-1501"><a href="#cb31-1501"></a><span class="co"># hist(ISSP2012esim1.dat$ika)</span></span>
<span id="cb31-1502"><a href="#cb31-1502"></a></span>
<span id="cb31-1503"><a href="#cb31-1503"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1.dat,</span>
<span id="cb31-1504"><a href="#cb31-1504"></a>                      <span class="dt">age_cat =</span> <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">15</span><span class="op">:</span><span class="dv">25</span>, <span class="st">&quot;1&quot;</span>,</span>
<span id="cb31-1505"><a href="#cb31-1505"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">26</span><span class="op">:</span><span class="dv">35</span>, <span class="st">&quot;2&quot;</span>,</span>
<span id="cb31-1506"><a href="#cb31-1506"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">36</span><span class="op">:</span><span class="dv">45</span>, <span class="st">&quot;3&quot;</span>,</span>
<span id="cb31-1507"><a href="#cb31-1507"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">46</span><span class="op">:</span><span class="dv">55</span>, <span class="st">&quot;4&quot;</span>,</span>
<span id="cb31-1508"><a href="#cb31-1508"></a>                        <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">56</span><span class="op">:</span><span class="dv">65</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>))))))</span>
<span id="cb31-1509"><a href="#cb31-1509"></a></span>
<span id="cb31-1510"><a href="#cb31-1510"></a></span>
<span id="cb31-1511"><a href="#cb31-1511"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span>ISSP2012esim1b.dat <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb31-1512"><a href="#cb31-1512"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span> <span class="kw">as_factor</span>(age_cat)) <span class="co"># järjestys omituinen!(4.2.20)</span></span>
<span id="cb31-1513"><a href="#cb31-1513"></a></span>
<span id="cb31-1514"><a href="#cb31-1514"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb31-1515"><a href="#cb31-1515"></a><span class="co"># str(ISSP2012esim2.dat$age_cat)</span></span>
<span id="cb31-1516"><a href="#cb31-1516"></a><span class="co"># levels(ISSP2012esim2.dat$age_cat)</span></span>
<span id="cb31-1517"><a href="#cb31-1517"></a><span class="co"># ISSP2012esim2.dat$age_cat %&gt;% summary()</span></span>
<span id="cb31-1518"><a href="#cb31-1518"></a></span>
<span id="cb31-1519"><a href="#cb31-1519"></a><span class="co"># Järjestetään ikäluokat uudelleen</span></span>
<span id="cb31-1520"><a href="#cb31-1520"></a></span>
<span id="cb31-1521"><a href="#cb31-1521"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span>ISSP2012esim1b.dat <span class="op">%&gt;%</span></span>
<span id="cb31-1522"><a href="#cb31-1522"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span></span>
<span id="cb31-1523"><a href="#cb31-1523"></a>                <span class="kw">fct_relevel</span>(age_cat,</span>
<span id="cb31-1524"><a href="#cb31-1524"></a>                            <span class="st">&quot;1&quot;</span>,</span>
<span id="cb31-1525"><a href="#cb31-1525"></a>                            <span class="st">&quot;2&quot;</span>,</span>
<span id="cb31-1526"><a href="#cb31-1526"></a>                            <span class="st">&quot;3&quot;</span>,</span>
<span id="cb31-1527"><a href="#cb31-1527"></a>                            <span class="st">&quot;4&quot;</span>,</span>
<span id="cb31-1528"><a href="#cb31-1528"></a>                            <span class="st">&quot;5&quot;</span>,</span>
<span id="cb31-1529"><a href="#cb31-1529"></a>                            <span class="st">&quot;6&quot;</span>)</span>
<span id="cb31-1530"><a href="#cb31-1530"></a>               )</span>
<span id="cb31-1531"><a href="#cb31-1531"></a></span>
<span id="cb31-1532"><a href="#cb31-1532"></a><span class="co"># Tarkistuksia</span></span>
<span id="cb31-1533"><a href="#cb31-1533"></a></span>
<span id="cb31-1534"><a href="#cb31-1534"></a><span class="co"># Iso taulukko, voi tarkistaa että muunnos ok.</span></span>
<span id="cb31-1535"><a href="#cb31-1535"></a><span class="co"># test6 %&gt;% tableX(AGE, age_cat, type = &quot;count&quot;)</span></span>
<span id="cb31-1536"><a href="#cb31-1536"></a><span class="co"># taulu42 &lt;- ISSP2012esim2.dat %&gt;% tableX(maa,age_cat,type = &quot;count&quot;)</span></span>
<span id="cb31-1537"><a href="#cb31-1537"></a><span class="co"># kable(taulu42,digits = 2, caption = &quot;Ikäluokka age_cat&quot;)</span></span>
<span id="cb31-1538"><a href="#cb31-1538"></a><span class="co">#</span></span>
<span id="cb31-1539"><a href="#cb31-1539"></a></span>
<span id="cb31-1540"><a href="#cb31-1540"></a><span class="co"># Taulukoita (4.2.20)</span></span>
<span id="cb31-1541"><a href="#cb31-1541"></a></span>
<span id="cb31-1542"><a href="#cb31-1542"></a><span class="co">#ISSP2012esim1b.dat %&gt;%</span></span>
<span id="cb31-1543"><a href="#cb31-1543"></a><span class="co">#    tableX(maa,age_cat,type = &quot;count&quot;) %&gt;%</span></span>
<span id="cb31-1544"><a href="#cb31-1544"></a><span class="co">#    kable(digits = 2, caption = &quot;Ikäluokka age_cat&quot;)</span></span>
<span id="cb31-1545"><a href="#cb31-1545"></a><span class="co">#</span></span>
<span id="cb31-1546"><a href="#cb31-1546"></a><span class="co">#ISSP2012esim1b.dat %&gt;%</span></span>
<span id="cb31-1547"><a href="#cb31-1547"></a><span class="co">#    tableX(maa,age_cat,type = &quot;row_perc&quot;) %&gt;%</span></span>
<span id="cb31-1548"><a href="#cb31-1548"></a><span class="co">#    kable(digits = 2, caption = &quot;age_cat: suhteelliset frekvenssit&quot;)</span></span>
<span id="cb31-1549"><a href="#cb31-1549"></a></span>
<span id="cb31-1550"><a href="#cb31-1550"></a><span class="co"># ga - ikäluokka ja sukupuoli</span></span>
<span id="cb31-1551"><a href="#cb31-1551"></a></span>
<span id="cb31-1552"><a href="#cb31-1552"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1b.dat,</span>
<span id="cb31-1553"><a href="#cb31-1553"></a>                        <span class="dt">ga =</span> <span class="kw">case_when</span>((age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m1&quot;</span>,</span>
<span id="cb31-1554"><a href="#cb31-1554"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m2&quot;</span>,</span>
<span id="cb31-1555"><a href="#cb31-1555"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m3&quot;</span>,</span>
<span id="cb31-1556"><a href="#cb31-1556"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m4&quot;</span>,</span>
<span id="cb31-1557"><a href="#cb31-1557"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m5&quot;</span>,</span>
<span id="cb31-1558"><a href="#cb31-1558"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m6&quot;</span>,</span>
<span id="cb31-1559"><a href="#cb31-1559"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f1&quot;</span>,</span>
<span id="cb31-1560"><a href="#cb31-1560"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f2&quot;</span>,</span>
<span id="cb31-1561"><a href="#cb31-1561"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f3&quot;</span>,</span>
<span id="cb31-1562"><a href="#cb31-1562"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb31-1563"><a href="#cb31-1563"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb31-1564"><a href="#cb31-1564"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f5&quot;</span>,</span>
<span id="cb31-1565"><a href="#cb31-1565"></a>                                       (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f6&quot;</span>,</span>
<span id="cb31-1566"><a href="#cb31-1566"></a>                                       <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;missing&quot;</span></span>
<span id="cb31-1567"><a href="#cb31-1567"></a>                                  ))</span>
<span id="cb31-1568"><a href="#cb31-1568"></a></span>
<span id="cb31-1569"><a href="#cb31-1569"></a><span class="co">#ISSP2012esim1.dat %&gt;% tableX(ga,ga2) # tarkistus</span></span>
<span id="cb31-1570"><a href="#cb31-1570"></a><span class="co"># muuttujien tarkistuksia 19.9.2018</span></span>
<span id="cb31-1571"><a href="#cb31-1571"></a><span class="co"># str(ISSP2012esim1b.dat$ga) # chr-muuttuja, mutta toimii (4.2.20)</span></span>
<span id="cb31-1572"><a href="#cb31-1572"></a></span>
<span id="cb31-1573"><a href="#cb31-1573"></a><span class="co">#Tulostetaan taulukkoina ga - muuttuja</span></span>
<span id="cb31-1574"><a href="#cb31-1574"></a></span>
<span id="cb31-1575"><a href="#cb31-1575"></a><span class="co">#ISSP2012esim1b.dat %&gt;% tableX(maa,ga,type = &quot;count&quot;) %&gt;%</span></span>
<span id="cb31-1576"><a href="#cb31-1576"></a><span class="co">#kable(digits = 2, caption = &quot;Ikäluokka ja sukupuoli ga&quot;)</span></span>
<span id="cb31-1577"><a href="#cb31-1577"></a></span>
<span id="cb31-1578"><a href="#cb31-1578"></a><span class="co">#ISSP2012esim1b.dat %&gt;% tableX(maa,ga,type = &quot;row_perc&quot;) %&gt;%</span></span>
<span id="cb31-1579"><a href="#cb31-1579"></a><span class="co">#kable(digits = 2, caption = &quot;ga: suhteelliset frekvenssit&quot;)</span></span>
<span id="cb31-1580"><a href="#cb31-1580"></a></span>
<span id="cb31-1581"><a href="#cb31-1581"></a></span>
<span id="cb31-1582"><a href="#cb31-1582"></a>gaTestCA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>ga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat)</span>
<span id="cb31-1583"><a href="#cb31-1583"></a></span>
<span id="cb31-1584"><a href="#cb31-1584"></a></span>
<span id="cb31-1585"><a href="#cb31-1585"></a><span class="co"># Maapisteiden pääkoordinaatit janojen piirtämiseen</span></span>
<span id="cb31-1586"><a href="#cb31-1586"></a></span>
<span id="cb31-1587"><a href="#cb31-1587"></a>gaTestCA1.rpc &lt;-<span class="st"> </span>gaTestCA1<span class="op">$</span>rowcoord <span class="op">%*%</span><span class="st"> </span><span class="kw">diag</span>(gaTestCA1<span class="op">$</span>sv)</span>
<span id="cb31-1588"><a href="#cb31-1588"></a></span>
<span id="cb31-1589"><a href="#cb31-1589"></a><span class="co"># par(cex = 0.6)</span></span>
<span id="cb31-1590"><a href="#cb31-1590"></a><span class="kw">plot</span>(gaTestCA1, <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta, m = mies, f = nainen&quot;</span>,</span>
<span id="cb31-1591"><a href="#cb31-1591"></a>     <span class="dt">sub =</span> <span class="st">&quot;1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 tai vanhempi &quot;</span>)</span>
<span id="cb31-1592"><a href="#cb31-1592"></a><span class="co"># naiset</span></span>
<span id="cb31-1593"><a href="#cb31-1593"></a><span class="kw">lines</span>(gaTestCA1.rpc[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">1</span>],gaTestCA1.rpc[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">2</span>])</span>
<span id="cb31-1594"><a href="#cb31-1594"></a><span class="co">#miehet</span></span>
<span id="cb31-1595"><a href="#cb31-1595"></a><span class="kw">lines</span>(gaTestCA1.rpc[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">1</span>],gaTestCA1.rpc[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">2</span>], <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb31-1596"><a href="#cb31-1596"></a></span>
<span id="cb31-1597"><a href="#cb31-1597"></a><span class="kw">summary</span>(gaTestCA1)</span>
<span id="cb31-1598"><a href="#cb31-1598"></a></span>
<span id="cb31-1599"><a href="#cb31-1599"></a>ISSP2012esim1b.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(ISSP2012esim1b.dat,</span>
<span id="cb31-1600"><a href="#cb31-1600"></a>                             <span class="dt">maaga =</span> <span class="kw">paste</span>(maa, ga, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb31-1601"><a href="#cb31-1601"></a></span>
<span id="cb31-1602"><a href="#cb31-1602"></a><span class="co"># tarkistus, muunnos ok</span></span>
<span id="cb31-1603"><a href="#cb31-1603"></a><span class="co"># ISSP2012esim1b.dat %&gt;% tableX(maa, maaga)</span></span>
<span id="cb31-1604"><a href="#cb31-1604"></a><span class="co"># head(ISSP2012esim2.dat)</span></span>
<span id="cb31-1605"><a href="#cb31-1605"></a><span class="co"># str(ISSP2012esim2.dat)</span></span>
<span id="cb31-1606"><a href="#cb31-1606"></a></span>
<span id="cb31-1607"><a href="#cb31-1607"></a>maagaCA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maaga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat)</span>
<span id="cb31-1608"><a href="#cb31-1608"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.5</span>)</span>
<span id="cb31-1609"><a href="#cb31-1609"></a><span class="kw">plot</span>(maagaCA1, <span class="dt">main =</span> <span class="st">&quot;symmetrinen kartta 1&quot;</span>,</span>
<span id="cb31-1610"><a href="#cb31-1610"></a>                <span class="dt">sub =</span> <span class="st">&quot;cex=0.5&quot;</span>)</span>
<span id="cb31-1611"><a href="#cb31-1611"></a></span>
<span id="cb31-1612"><a href="#cb31-1612"></a><span class="co"># Vilkaistaan numeerisia tuloksia, kopioidaan tekstiin jos on tarpeellista</span></span>
<span id="cb31-1613"><a href="#cb31-1613"></a><span class="kw">summary</span>(maagaCA1)</span>
<span id="cb31-1614"><a href="#cb31-1614"></a></span>
<span id="cb31-1615"><a href="#cb31-1615"></a><span class="co"># Osajoukon CA: Tanska, Saksa ja Suomi</span></span>
<span id="cb31-1616"><a href="#cb31-1616"></a>maagaCA2sub2 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maaga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat,<span class="dt">subsetrow =</span> <span class="dv">25</span><span class="op">:</span><span class="dv">60</span>)</span>
<span id="cb31-1617"><a href="#cb31-1617"></a></span>
<span id="cb31-1618"><a href="#cb31-1618"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.8</span>)</span>
<span id="cb31-1619"><a href="#cb31-1619"></a><span class="kw">plot</span>(maagaCA2sub2, <span class="dt">main =</span> <span class="st">&quot;Q1b: Lapsi kärsii jos äiti käy töissä&quot;</span>,</span>
<span id="cb31-1620"><a href="#cb31-1620"></a>     <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - Tanska, Saksa ja Suomi (subset ca), cex = 0.7&quot;</span>)</span>
<span id="cb31-1621"><a href="#cb31-1621"></a></span>
<span id="cb31-1622"><a href="#cb31-1622"></a><span class="co"># ca-tulosobjekti maagaCA2sub2, DK DE FI</span></span>
<span id="cb31-1623"><a href="#cb31-1623"></a></span>
<span id="cb31-1624"><a href="#cb31-1624"></a>maagaLinesDKDEFI &lt;-<span class="st"> </span><span class="kw">cacoord</span>(maagaCA2sub2, <span class="dt">type =</span> <span class="st">&quot;symmetric&quot;</span>)</span>
<span id="cb31-1625"><a href="#cb31-1625"></a>maagaLinesDKDEFI &lt;-<span class="st"> </span>maagaLinesDKDEFI<span class="op">$</span>rows[ , <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</span>
<span id="cb31-1626"><a href="#cb31-1626"></a><span class="co"># maagaLinesDKDEFI # tarkistus</span></span>
<span id="cb31-1627"><a href="#cb31-1627"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb31-1628"><a href="#cb31-1628"></a><span class="kw">plot</span>(maagaCA2sub2,</span>
<span id="cb31-1629"><a href="#cb31-1629"></a>     <span class="dt">sub =</span> <span class="st">&quot;symmetrinen kartta - Tanska, Saksa ja Suomi (subset ca)&quot;</span>)</span>
<span id="cb31-1630"><a href="#cb31-1630"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="co">#DEf</span></span>
<span id="cb31-1631"><a href="#cb31-1631"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">7</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)  <span class="co">#DEm</span></span>
<span id="cb31-1632"><a href="#cb31-1632"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">13</span><span class="op">:</span><span class="dv">18</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">13</span><span class="op">:</span><span class="dv">18</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="co">#DKf</span></span>
<span id="cb31-1633"><a href="#cb31-1633"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">19</span><span class="op">:</span><span class="dv">24</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">19</span><span class="op">:</span><span class="dv">24</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)  <span class="co">#DKm</span></span>
<span id="cb31-1634"><a href="#cb31-1634"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">25</span><span class="op">:</span><span class="dv">30</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">25</span><span class="op">:</span><span class="dv">30</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>) <span class="co">#FIf</span></span>
<span id="cb31-1635"><a href="#cb31-1635"></a><span class="kw">lines</span>(maagaLinesDKDEFI[<span class="dv">31</span><span class="op">:</span><span class="dv">36</span>,<span class="dv">1</span>],maagaLinesDKDEFI[<span class="dv">31</span><span class="op">:</span><span class="dv">36</span>,<span class="dv">2</span>], <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)  <span class="co">#FIm</span></span>
<span id="cb31-1636"><a href="#cb31-1636"></a></span>
<span id="cb31-1637"><a href="#cb31-1637"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb31-1638"><a href="#cb31-1638"></a><span class="kw">plot</span>(maagaCA2sub2, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb31-1639"><a href="#cb31-1639"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb31-1640"><a href="#cb31-1640"></a>     <span class="dt">contrib =</span><span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb31-1641"><a href="#cb31-1641"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb31-1642"><a href="#cb31-1642"></a>     <span class="dt">main =</span> <span class="st">&quot;Kontribuutiokartta: sarakkeiden(abs.) ja rivien(rel.) värisävy&quot;</span>,</span>
<span id="cb31-1643"><a href="#cb31-1643"></a>     <span class="dt">sub =</span> <span class="st">&quot;massat pisteiden kokoina, cex=0.06&quot;</span></span>
<span id="cb31-1644"><a href="#cb31-1644"></a>      )</span>
<span id="cb31-1645"><a href="#cb31-1645"></a><span class="co"># Tarkastetaan numeeriset tulokset</span></span>
<span id="cb31-1646"><a href="#cb31-1646"></a><span class="kw">summary</span>(maagaCA2sub2)</span>
<span id="cb31-1647"><a href="#cb31-1647"></a></span>
<span id="cb31-1648"><a href="#cb31-1648"></a><span class="co"># Belgia, Bulgaria ja Unkari analysoidaan tiiviisti</span></span>
<span id="cb31-1649"><a href="#cb31-1649"></a><span class="co"># Belgia on vähän välitapaus Bulgarian ja Unkarin ja kolmen ensimmäisen maan</span></span>
<span id="cb31-1650"><a href="#cb31-1650"></a><span class="co"># kanssa. Kokeiluja voi tehdä neljällä maaryhmällä, kuvan lukukelpoisuus</span></span>
<span id="cb31-1651"><a href="#cb31-1651"></a><span class="co"># ratkaisee.</span></span>
<span id="cb31-1652"><a href="#cb31-1652"></a></span>
<span id="cb31-1653"><a href="#cb31-1653"></a><span class="co">#BGHUsubset &lt;- c(13:24,61:72)</span></span>
<span id="cb31-1654"><a href="#cb31-1654"></a><span class="co">#BEDEDKFIsubset &lt;- c(1:12, 25:36, 37:48, 49:60)</span></span>
<span id="cb31-1655"><a href="#cb31-1655"></a><span class="co">#DEDKFIsubset &lt;- c(25:36, 37:48, 49:60)</span></span>
<span id="cb31-1656"><a href="#cb31-1656"></a></span>
<span id="cb31-1657"><a href="#cb31-1657"></a>BEBGHUsubset &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>,<span class="dv">13</span><span class="op">:</span><span class="dv">24</span>,<span class="dv">61</span><span class="op">:</span><span class="dv">72</span>)</span>
<span id="cb31-1658"><a href="#cb31-1658"></a>maagaCA2sub3 &lt;-<span class="st"> </span><span class="kw">ca</span>(<span class="op">~</span>maaga <span class="op">+</span><span class="st"> </span>Q1b,ISSP2012esim1b.dat,<span class="dt">subsetrow =</span> BEBGHUsubset)</span>
<span id="cb31-1659"><a href="#cb31-1659"></a></span>
<span id="cb31-1660"><a href="#cb31-1660"></a></span>
<span id="cb31-1661"><a href="#cb31-1661"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb31-1662"><a href="#cb31-1662"></a><span class="kw">plot</span>(maagaCA2sub3, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb31-1663"><a href="#cb31-1663"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb31-1664"><a href="#cb31-1664"></a>     <span class="dt">contrib =</span><span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb31-1665"><a href="#cb31-1665"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb31-1666"><a href="#cb31-1666"></a>     <span class="dt">main =</span> <span class="st">&quot;Kontribuutiokartta: sarakkeiden(abs.) ja rivien(rel.) värisävy&quot;</span>,</span>
<span id="cb31-1667"><a href="#cb31-1667"></a>     <span class="dt">sub =</span> <span class="st">&quot;massat pisteiden kokoina, cex=0.06&quot;</span></span>
<span id="cb31-1668"><a href="#cb31-1668"></a>      )</span>
<span id="cb31-1669"><a href="#cb31-1669"></a></span>
<span id="cb31-1670"><a href="#cb31-1670"></a></span>
<span id="cb31-1671"><a href="#cb31-1671"></a><span class="co"># Vilkaistaa numeerisia tuloksia, kopioidaan tekstiin jos on tarpeen</span></span>
<span id="cb31-1672"><a href="#cb31-1672"></a><span class="co"># maagaCA2sub3</span></span>
<span id="cb31-1673"><a href="#cb31-1673"></a> <span class="kw">summary</span>(maagaCA2sub3)</span>
<span id="cb31-1674"><a href="#cb31-1674"></a></span>
<span id="cb31-1675"><a href="#cb31-1675"></a><span class="co"># kahden osaratkaisun kokonaisinertia</span></span>
<span id="cb31-1676"><a href="#cb31-1676"></a></span>
<span id="cb31-1677"><a href="#cb31-1677"></a><span class="co"># 0.143551 + 0.119602 = 0.263153</span></span>
<span id="cb31-1678"><a href="#cb31-1678"></a><span class="co"># koko datalla 0.263154</span></span>
<span id="cb31-1679"><a href="#cb31-1679"></a></span>
<span id="cb31-1680"><a href="#cb31-1680"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/stacked1.png&#39;</span>)</span>
<span id="cb31-1681"><a href="#cb31-1681"></a></span>
<span id="cb31-1682"><a href="#cb31-1682"></a><span class="co"># Data</span></span>
<span id="cb31-1683"><a href="#cb31-1683"></a>ISSP2012Concat1jh.dat &lt;-<span class="st"> </span><span class="kw">select</span>(ISSP2012esim1b.dat, Q1b, maa,sp, age_cat)</span>
<span id="cb31-1684"><a href="#cb31-1684"></a></span>
<span id="cb31-1685"><a href="#cb31-1685"></a><span class="co"># mjca-funktiota -&gt;  Burt-matriisi</span></span>
<span id="cb31-1686"><a href="#cb31-1686"></a>Concat1jh.Burt &lt;-<span class="st"> </span><span class="kw">mjca</span>(ISSP2012Concat1jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>)<span class="op">$</span>Burt</span>
<span id="cb31-1687"><a href="#cb31-1687"></a></span>
<span id="cb31-1688"><a href="#cb31-1688"></a><span class="co"># Burt-matriisi symmetrinen</span></span>
<span id="cb31-1689"><a href="#cb31-1689"></a><span class="co">#dim(Concat1jh.Burt)</span></span>
<span id="cb31-1690"><a href="#cb31-1690"></a><span class="co"># 19 x 19</span></span>
<span id="cb31-1691"><a href="#cb31-1691"></a><span class="co">#rownames(Concat1jh.Burt)</span></span>
<span id="cb31-1692"><a href="#cb31-1692"></a><span class="co">#[1] &quot;Q1bS&quot;     &quot;Q1bs&quot;     &quot;Q1b?&quot;     &quot;Q1be&quot;     &quot;Q1bE&quot;     &quot;maaBE&quot;    &quot;maaBG&quot;    &quot;maaDE&quot;    &quot;maaDK&quot;</span></span>
<span id="cb31-1693"><a href="#cb31-1693"></a><span class="co">#[10] &quot;maaFI&quot;    &quot;maaHU&quot;    &quot;spm&quot;      &quot;spf&quot;      &quot;age_cat1&quot; &quot;age_cat2&quot; &quot;age_cat3&quot; &quot;age_cat4&quot; &quot;age_cat5&quot;</span></span>
<span id="cb31-1694"><a href="#cb31-1694"></a><span class="co">#[19] &quot;age_cat6&quot;</span></span>
<span id="cb31-1695"><a href="#cb31-1695"></a></span>
<span id="cb31-1696"><a href="#cb31-1696"></a><span class="co"># maat - vastaukset</span></span>
<span id="cb31-1697"><a href="#cb31-1697"></a>ISSP2012Concat2jh.dat &lt;-<span class="st"> </span>Concat1jh.Burt[<span class="dv">6</span><span class="op">:</span><span class="dv">11</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb31-1698"><a href="#cb31-1698"></a><span class="co"># ISSP2012Concat2jh.dat</span></span>
<span id="cb31-1699"><a href="#cb31-1699"></a><span class="co"># sukupuoli ja vastaukset</span></span>
<span id="cb31-1700"><a href="#cb31-1700"></a>ISSP2012Concat2jh.dat &lt;-<span class="st"> </span><span class="kw">rbind</span>(ISSP2012Concat2jh.dat, Concat1jh.Burt[<span class="dv">12</span><span class="op">:</span><span class="dv">13</span> ,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</span>
<span id="cb31-1701"><a href="#cb31-1701"></a><span class="co"># ISSP2012Concat2jh.dat</span></span>
<span id="cb31-1702"><a href="#cb31-1702"></a><span class="co"># ikäluokka ja vastaukset</span></span>
<span id="cb31-1703"><a href="#cb31-1703"></a>ISSP2012Concat2jh.dat &lt;-<span class="st"> </span><span class="kw">rbind</span>(ISSP2012Concat2jh.dat, Concat1jh.Burt[<span class="dv">14</span><span class="op">:</span><span class="dv">19</span> ,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</span>
<span id="cb31-1704"><a href="#cb31-1704"></a><span class="co"># ISSP2012Concat2jh.dat</span></span>
<span id="cb31-1705"><a href="#cb31-1705"></a></span>
<span id="cb31-1706"><a href="#cb31-1706"></a>Concat1jh.CA1 &lt;-<span class="st"> </span><span class="kw">ca</span>(ISSP2012Concat2jh.dat)</span>
<span id="cb31-1707"><a href="#cb31-1707"></a></span>
<span id="cb31-1708"><a href="#cb31-1708"></a></span>
<span id="cb31-1709"><a href="#cb31-1709"></a><span class="co"># Käännetään kuva x-akselin ympäri</span></span>
<span id="cb31-1710"><a href="#cb31-1710"></a>Concat1jh.CA1<span class="op">$</span>rowcoord[, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="op">-</span>Concat1jh.CA1<span class="op">$</span>rowcoord[, <span class="dv">2</span>]</span>
<span id="cb31-1711"><a href="#cb31-1711"></a>Concat1jh.CA1<span class="op">$</span>colcoord[, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="op">-</span>Concat1jh.CA1<span class="op">$</span>colcoord[, <span class="dv">2</span>]</span>
<span id="cb31-1712"><a href="#cb31-1712"></a></span>
<span id="cb31-1713"><a href="#cb31-1713"></a><span class="co"># Siistitään muuttujien nimet</span></span>
<span id="cb31-1714"><a href="#cb31-1714"></a>Concat1jh.CA1<span class="op">$</span>colnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;S&quot;</span>, <span class="st">&quot;s&quot;</span>, <span class="st">&quot;?&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;E&quot;</span>)</span>
<span id="cb31-1715"><a href="#cb31-1715"></a>Concat1jh.CA1<span class="op">$</span>rownames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;BE&quot;</span>, <span class="st">&quot;BG&quot;</span>, <span class="st">&quot;DE&quot;</span>, <span class="st">&quot;DK&quot;</span>, <span class="st">&quot;FI&quot;</span>, <span class="st">&quot;HU&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>,</span>
<span id="cb31-1716"><a href="#cb31-1716"></a>                            <span class="st">&quot;a1&quot;</span>, <span class="st">&quot;a2&quot;</span>, <span class="st">&quot;a3&quot;</span>, <span class="st">&quot;a4&quot;</span>, <span class="st">&quot;a5&quot;</span>, <span class="st">&quot;a6&quot;</span>)</span>
<span id="cb31-1717"><a href="#cb31-1717"></a></span>
<span id="cb31-1718"><a href="#cb31-1718"></a></span>
<span id="cb31-1719"><a href="#cb31-1719"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>) <span class="co"># pisteiden kasautumien haittaa</span></span>
<span id="cb31-1720"><a href="#cb31-1720"></a><span class="kw">plot</span>(Concat1jh.CA1,</span>
<span id="cb31-1721"><a href="#cb31-1721"></a>     <span class="dt">main =</span> <span class="st">&quot;Pinottu taulukko - symmetrinen kuva1&quot;</span>,</span>
<span id="cb31-1722"><a href="#cb31-1722"></a>     <span class="dt">sub =</span> <span class="st">&quot;a1-a6 ikäluokat, m = miehet, f = naiset, Q1b (cex=0.6)&quot;</span></span>
<span id="cb31-1723"><a href="#cb31-1723"></a>     )</span>
<span id="cb31-1724"><a href="#cb31-1724"></a></span>
<span id="cb31-1725"><a href="#cb31-1725"></a><span class="kw">summary</span>(Concat1jh.CA1)</span>
<span id="cb31-1726"><a href="#cb31-1726"></a></span>
<span id="cb31-1727"><a href="#cb31-1727"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb31-1728"><a href="#cb31-1728"></a><span class="kw">plot</span>(Concat1jh.CA1, <span class="dt">map =</span> <span class="st">&quot;rowgreen&quot;</span>,</span>
<span id="cb31-1729"><a href="#cb31-1729"></a>     <span class="dt">mass =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb31-1730"><a href="#cb31-1730"></a>     <span class="dt">contrib =</span><span class="kw">c</span>(<span class="st">&quot;relative&quot;</span>, <span class="st">&quot;absolute&quot;</span>),</span>
<span id="cb31-1731"><a href="#cb31-1731"></a>     <span class="dt">arrows =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>),</span>
<span id="cb31-1732"><a href="#cb31-1732"></a>     <span class="dt">main =</span> <span class="st">&quot;Pinottu taulukko, kontribuuutiokartta (suhteellinen, absoluuttinen)&quot;</span>,</span>
<span id="cb31-1733"><a href="#cb31-1733"></a>     <span class="dt">sub =</span> <span class="st">&quot;a1-a6 ikäluokat, m = miehet, f = naiset, massat pisteiden koko&quot;</span></span>
<span id="cb31-1734"><a href="#cb31-1734"></a>     )</span>
<span id="cb31-1735"><a href="#cb31-1735"></a></span>
<span id="cb31-1736"><a href="#cb31-1736"></a><span class="co"># str(ISSP2012jh1d.dat) - luotu skripteissä G1_1_data2.Rmd ja G1_1_data_fct1.Rmd</span></span>
<span id="cb31-1737"><a href="#cb31-1737"></a><span class="co"># Tarkistukset näkyvät Galkussa - tässä ei tulosteta</span></span>
<span id="cb31-1738"><a href="#cb31-1738"></a><span class="co"># Kommentoidaan pois tarkistuksia (14.11.2020)</span></span>
<span id="cb31-1739"><a href="#cb31-1739"></a><span class="co">#Valitaan muuttujat joissa puuttuva tieto on koodattu muuttujan arvoksi</span></span>
<span id="cb31-1740"><a href="#cb31-1740"></a></span>
<span id="cb31-1741"><a href="#cb31-1741"></a>MCAvars1 &lt;-<span class="st">  </span><span class="kw">c</span>(<span class="st">&quot;Q1am&quot;</span>,<span class="st">&quot;Q1bm&quot;</span>, <span class="st">&quot;Q1cm&quot;</span>, <span class="st">&quot;Q1dm&quot;</span>,<span class="st">&quot;Q1em&quot;</span>,<span class="st">&quot;Q2am&quot;</span>,<span class="st">&quot;Q2bm&quot;</span>,<span class="st">&quot;edum&quot;</span>,</span>
<span id="cb31-1742"><a href="#cb31-1742"></a>                 <span class="st">&quot;sostam&quot;</span>, <span class="st">&quot;urbrum&quot;</span>, <span class="st">&quot;maa&quot;</span>, <span class="st">&quot;ika&quot;</span>, <span class="st">&quot;sp&quot;</span> )</span>
<span id="cb31-1743"><a href="#cb31-1743"></a></span>
<span id="cb31-1744"><a href="#cb31-1744"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>ISSP2012jh1d.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">all_of</span>(MCAvars1))</span>
<span id="cb31-1745"><a href="#cb31-1745"></a></span>
<span id="cb31-1746"><a href="#cb31-1746"></a><span class="co">#dim(MCAdata1jh.dat)</span></span>
<span id="cb31-1747"><a href="#cb31-1747"></a><span class="co"># names(MCAdata1jh.dat)</span></span>
<span id="cb31-1748"><a href="#cb31-1748"></a></span>
<span id="cb31-1749"><a href="#cb31-1749"></a><span class="co"># luodaan ikaluokka-muuttuja ja ikäluokka-sukupuoli - muuttuja</span></span>
<span id="cb31-1750"><a href="#cb31-1750"></a><span class="co">#age_cat</span></span>
<span id="cb31-1751"><a href="#cb31-1751"></a><span class="co">#ikä 1=15-25, 2 =26-35, 3=36-45, 4=46-55, 5=56-65, 6= 66 and older</span></span>
<span id="cb31-1752"><a href="#cb31-1752"></a></span>
<span id="cb31-1753"><a href="#cb31-1753"></a>MCAdata1jh.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(MCAdata1jh.dat, <span class="dt">age_cat =</span> <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">15</span><span class="op">:</span><span class="dv">25</span>, <span class="st">&quot;1&quot;</span>,</span>
<span id="cb31-1754"><a href="#cb31-1754"></a>                                <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">26</span><span class="op">:</span><span class="dv">35</span>, <span class="st">&quot;2&quot;</span>,</span>
<span id="cb31-1755"><a href="#cb31-1755"></a>                                <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">36</span><span class="op">:</span><span class="dv">45</span>, <span class="st">&quot;3&quot;</span>,</span>
<span id="cb31-1756"><a href="#cb31-1756"></a>                                <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">46</span><span class="op">:</span><span class="dv">55</span>, <span class="st">&quot;4&quot;</span>,</span>
<span id="cb31-1757"><a href="#cb31-1757"></a>                                <span class="kw">ifelse</span>(ika <span class="op">%in%</span><span class="st"> </span><span class="dv">56</span><span class="op">:</span><span class="dv">65</span>, <span class="st">&quot;5&quot;</span>, <span class="st">&quot;6&quot;</span>))))))</span>
<span id="cb31-1758"><a href="#cb31-1758"></a></span>
<span id="cb31-1759"><a href="#cb31-1759"></a><span class="co"># str(MCAdata1jh.dat$age_cat)</span></span>
<span id="cb31-1760"><a href="#cb31-1760"></a></span>
<span id="cb31-1761"><a href="#cb31-1761"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb31-1762"><a href="#cb31-1762"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span> <span class="kw">as_factor</span>(age_cat))</span>
<span id="cb31-1763"><a href="#cb31-1763"></a><span class="co">#tarkastuksia - outo järjestys</span></span>
<span id="cb31-1764"><a href="#cb31-1764"></a><span class="co">#levels(MCAdata1jh.dat$age_cat)</span></span>
<span id="cb31-1765"><a href="#cb31-1765"></a><span class="co"># str(MCAdata1jh.dat$age_cat)</span></span>
<span id="cb31-1766"><a href="#cb31-1766"></a></span>
<span id="cb31-1767"><a href="#cb31-1767"></a>MCAdata1jh.dat&lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb31-1768"><a href="#cb31-1768"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">age_cat =</span> <span class="kw">fct_relevel</span>(age_cat,</span>
<span id="cb31-1769"><a href="#cb31-1769"></a>                                   <span class="st">&quot;1&quot;</span>,</span>
<span id="cb31-1770"><a href="#cb31-1770"></a>                                   <span class="st">&quot;2&quot;</span>,</span>
<span id="cb31-1771"><a href="#cb31-1771"></a>                                   <span class="st">&quot;3&quot;</span>,</span>
<span id="cb31-1772"><a href="#cb31-1772"></a>                                   <span class="st">&quot;4&quot;</span>,</span>
<span id="cb31-1773"><a href="#cb31-1773"></a>                                   <span class="st">&quot;5&quot;</span>,</span>
<span id="cb31-1774"><a href="#cb31-1774"></a>                                   <span class="st">&quot;6&quot;</span>))</span>
<span id="cb31-1775"><a href="#cb31-1775"></a></span>
<span id="cb31-1776"><a href="#cb31-1776"></a><span class="co"># Tarkistuksia(16.10.20)</span></span>
<span id="cb31-1777"><a href="#cb31-1777"></a></span>
<span id="cb31-1778"><a href="#cb31-1778"></a><span class="co">#MCAdata1jh.dat %&gt;%</span></span>
<span id="cb31-1779"><a href="#cb31-1779"></a><span class="co">#        tableX(maa,age_cat,type = &quot;count&quot;) #%&gt;%</span></span>
<span id="cb31-1780"><a href="#cb31-1780"></a><span class="co">#        #kable(digits = 2, caption = &quot;Ikäluokka age_cat&quot;)</span></span>
<span id="cb31-1781"><a href="#cb31-1781"></a></span>
<span id="cb31-1782"><a href="#cb31-1782"></a><span class="co">#MCAdata1jh.dat %&gt;%</span></span>
<span id="cb31-1783"><a href="#cb31-1783"></a><span class="co">#        tableX(maa,age_cat,type = &quot;row_perc&quot;) #%&gt;%</span></span>
<span id="cb31-1784"><a href="#cb31-1784"></a><span class="co">#        #kable(digits = 2, caption = &quot;age_cat: suhteelliset frekvenssit&quot;)</span></span>
<span id="cb31-1785"><a href="#cb31-1785"></a></span>
<span id="cb31-1786"><a href="#cb31-1786"></a></span>
<span id="cb31-1787"><a href="#cb31-1787"></a><span class="co"># Ikäluokka-sukupuoli - muuttuja</span></span>
<span id="cb31-1788"><a href="#cb31-1788"></a>MCAdata1jh.dat &lt;-<span class="st"> </span><span class="kw">mutate</span>(MCAdata1jh.dat,</span>
<span id="cb31-1789"><a href="#cb31-1789"></a>                             <span class="dt">ga =</span> <span class="kw">case_when</span>((age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m1&quot;</span>,</span>
<span id="cb31-1790"><a href="#cb31-1790"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m2&quot;</span>,</span>
<span id="cb31-1791"><a href="#cb31-1791"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m3&quot;</span>,</span>
<span id="cb31-1792"><a href="#cb31-1792"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m4&quot;</span>,</span>
<span id="cb31-1793"><a href="#cb31-1793"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m5&quot;</span>,</span>
<span id="cb31-1794"><a href="#cb31-1794"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;m&quot;</span>) <span class="op">~</span><span class="st"> &quot;m6&quot;</span>,</span>
<span id="cb31-1795"><a href="#cb31-1795"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;1&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f1&quot;</span>,</span>
<span id="cb31-1796"><a href="#cb31-1796"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;2&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f2&quot;</span>,</span>
<span id="cb31-1797"><a href="#cb31-1797"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;3&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f3&quot;</span>,</span>
<span id="cb31-1798"><a href="#cb31-1798"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb31-1799"><a href="#cb31-1799"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;4&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f4&quot;</span>,</span>
<span id="cb31-1800"><a href="#cb31-1800"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;5&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f5&quot;</span>,</span>
<span id="cb31-1801"><a href="#cb31-1801"></a>                                (age_cat <span class="op">==</span><span class="st"> &quot;6&quot;</span>)<span class="op">&amp;</span>(sp <span class="op">==</span><span class="st"> &quot;f&quot;</span>) <span class="op">~</span><span class="st"> &quot;f6&quot;</span>,</span>
<span id="cb31-1802"><a href="#cb31-1802"></a>                                <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;missing&quot;</span></span>
<span id="cb31-1803"><a href="#cb31-1803"></a>                                ))</span>
<span id="cb31-1804"><a href="#cb31-1804"></a></span>
<span id="cb31-1805"><a href="#cb31-1805"></a></span>
<span id="cb31-1806"><a href="#cb31-1806"></a><span class="co">#Sosiaalinen status: oma arvio &quot;Top-Bottom self-placement&quot;</span></span>
<span id="cb31-1807"><a href="#cb31-1807"></a><span class="co">#str(ISSP2012jh1d.dat$sosta)</span></span>
<span id="cb31-1808"><a href="#cb31-1808"></a><span class="co">#str(ISSP2012jh1d.dat$urbru)</span></span>
<span id="cb31-1809"><a href="#cb31-1809"></a><span class="co">#str(ISSP2012jh1d.dat$edu)</span></span>
<span id="cb31-1810"><a href="#cb31-1810"></a><span class="co">#Koulutustaso</span></span>
<span id="cb31-1811"><a href="#cb31-1811"></a><span class="co">#str(ISSP2012jh1d.dat$edu)</span></span>
<span id="cb31-1812"><a href="#cb31-1812"></a></span>
<span id="cb31-1813"><a href="#cb31-1813"></a><span class="co">#Asuipaikka</span></span>
<span id="cb31-1814"><a href="#cb31-1814"></a><span class="co">#str(ISSP2012jh1d.dat$urbru)</span></span>
<span id="cb31-1815"><a href="#cb31-1815"></a></span>
<span id="cb31-1816"><a href="#cb31-1816"></a><span class="co"># Muunnetaan faktorimuuttujia, mahdollisimman lyhyet tunnisteet kategorioille</span></span>
<span id="cb31-1817"><a href="#cb31-1817"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb31-1818"><a href="#cb31-1818"></a><span class="kw">mutate</span>(<span class="dt">E =</span> <span class="kw">fct_recode</span>(edum,</span>
<span id="cb31-1819"><a href="#cb31-1819"></a>        <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;No formal education&quot;</span>,</span>
<span id="cb31-1820"><a href="#cb31-1820"></a>        <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;Primary school (elementary school)&quot;</span>,</span>
<span id="cb31-1821"><a href="#cb31-1821"></a>        <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;Lower secondary (secondary completed does not allow entry to university: obligatory school)&quot;</span>,</span>
<span id="cb31-1822"><a href="#cb31-1822"></a>        <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;Upper secondary (programs that allows entry to university&quot;</span>,</span>
<span id="cb31-1823"><a href="#cb31-1823"></a>        <span class="st">&quot;5&quot;</span> =<span class="st"> &quot;Post secondary, non-tertiary (other upper secondary programs toward labour market or technical formation)&quot;</span>,</span>
<span id="cb31-1824"><a href="#cb31-1824"></a>        <span class="st">&quot;6&quot;</span> =<span class="st"> &quot;Lower level tertiary, first stage (also technical schools at a tertiary level)&quot;</span>,</span>
<span id="cb31-1825"><a href="#cb31-1825"></a>        <span class="st">&quot;7&quot;</span> =<span class="st"> &quot;Upper level tertiary (Master, Dr.)&quot;</span>,</span>
<span id="cb31-1826"><a href="#cb31-1826"></a>        <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb31-1827"><a href="#cb31-1827"></a>       <span class="dt">S =</span> <span class="kw">fct_recode</span>(sostam,</span>
<span id="cb31-1828"><a href="#cb31-1828"></a>         <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;Lowest, Bottom, 01&quot;</span>,</span>
<span id="cb31-1829"><a href="#cb31-1829"></a>         <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;02&quot;</span>,</span>
<span id="cb31-1830"><a href="#cb31-1830"></a>         <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;03&quot;</span>,</span>
<span id="cb31-1831"><a href="#cb31-1831"></a>         <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;04&quot;</span>,</span>
<span id="cb31-1832"><a href="#cb31-1832"></a>         <span class="st">&quot;5&quot;</span> =<span class="st"> &quot;05&quot;</span>,</span>
<span id="cb31-1833"><a href="#cb31-1833"></a>         <span class="st">&quot;6&quot;</span> =<span class="st"> &quot;06&quot;</span>,</span>
<span id="cb31-1834"><a href="#cb31-1834"></a>         <span class="st">&quot;7&quot;</span> =<span class="st"> &quot;07&quot;</span>,</span>
<span id="cb31-1835"><a href="#cb31-1835"></a>         <span class="st">&quot;8&quot;</span> =<span class="st"> &quot;08&quot;</span>,</span>
<span id="cb31-1836"><a href="#cb31-1836"></a>         <span class="st">&quot;9&quot;</span> =<span class="st"> &quot;09&quot;</span>,</span>
<span id="cb31-1837"><a href="#cb31-1837"></a>         <span class="st">&quot;10&quot;</span>=<span class="st"> &quot;Highest, Top, 10&quot;</span>,</span>
<span id="cb31-1838"><a href="#cb31-1838"></a>         <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>),</span>
<span id="cb31-1839"><a href="#cb31-1839"></a>       <span class="dt">U =</span> <span class="kw">fct_recode</span>(urbrum,</span>
<span id="cb31-1840"><a href="#cb31-1840"></a>        <span class="st">&quot;1&quot;</span> =<span class="st"> &quot;A big city&quot;</span>,</span>
<span id="cb31-1841"><a href="#cb31-1841"></a>        <span class="st">&quot;2&quot;</span> =<span class="st"> &quot;The suburbs or outskirts of a big city&quot;</span>,</span>
<span id="cb31-1842"><a href="#cb31-1842"></a>        <span class="st">&quot;3&quot;</span> =<span class="st"> &quot;A town or a small city&quot;</span>,</span>
<span id="cb31-1843"><a href="#cb31-1843"></a>        <span class="st">&quot;4&quot;</span> =<span class="st"> &quot;A country village&quot;</span>,</span>
<span id="cb31-1844"><a href="#cb31-1844"></a>        <span class="st">&quot;5&quot;</span> =<span class="st"> &quot;A farm or home in the country&quot;</span>,</span>
<span id="cb31-1845"><a href="#cb31-1845"></a>        <span class="st">&quot;P&quot;</span> =<span class="st"> &quot;missing&quot;</span>)</span>
<span id="cb31-1846"><a href="#cb31-1846"></a>        )</span>
<span id="cb31-1847"><a href="#cb31-1847"></a></span>
<span id="cb31-1848"><a href="#cb31-1848"></a><span class="co">#names(MCAdata1jh.dat)</span></span>
<span id="cb31-1849"><a href="#cb31-1849"></a><span class="co">#dim(MCAdata1jh.dat)</span></span>
<span id="cb31-1850"><a href="#cb31-1850"></a><span class="co">#MCAdata1jh.dat$E %&gt;% levels()</span></span>
<span id="cb31-1851"><a href="#cb31-1851"></a><span class="co">#MCAdata1jh.dat$S %&gt;% levels()</span></span>
<span id="cb31-1852"><a href="#cb31-1852"></a><span class="co">#MCAdata1jh.dat$U %&gt;% levels()</span></span>
<span id="cb31-1853"><a href="#cb31-1853"></a><span class="co">#MCAdata1jh.dat$age_cat %&gt;% levels()</span></span>
<span id="cb31-1854"><a href="#cb31-1854"></a><span class="co">#str(MCAdata1jh.dat$ga) # toimiikohan - chr-muuttuja? (16.10.20)</span></span>
<span id="cb31-1855"><a href="#cb31-1855"></a></span>
<span id="cb31-1856"><a href="#cb31-1856"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb31-1857"><a href="#cb31-1857"></a><span class="kw">mutate</span>(<span class="dt">gaf =</span> <span class="kw">as_factor</span>(ga))</span>
<span id="cb31-1858"><a href="#cb31-1858"></a></span>
<span id="cb31-1859"><a href="#cb31-1859"></a><span class="co">#str(MCAdata1jh.dat$gaf)</span></span>
<span id="cb31-1860"><a href="#cb31-1860"></a><span class="co">#levels(MCAdata1jh.dat$gaf) # järjestyksellä ei liene väliä? (16.10.20)</span></span>
<span id="cb31-1861"><a href="#cb31-1861"></a></span>
<span id="cb31-1862"><a href="#cb31-1862"></a><span class="co"># gaf ja ga: sama järjestys</span></span>
<span id="cb31-1863"><a href="#cb31-1863"></a></span>
<span id="cb31-1864"><a href="#cb31-1864"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span></span>
<span id="cb31-1865"><a href="#cb31-1865"></a><span class="st">       </span><span class="kw">mutate</span>(<span class="dt">gaf =</span> <span class="kw">fct_relevel</span>(gaf,</span>
<span id="cb31-1866"><a href="#cb31-1866"></a>                                 <span class="st">&quot;f1&quot;</span>,</span>
<span id="cb31-1867"><a href="#cb31-1867"></a>                                 <span class="st">&quot;f2&quot;</span>,</span>
<span id="cb31-1868"><a href="#cb31-1868"></a>                                 <span class="st">&quot;f3&quot;</span>,</span>
<span id="cb31-1869"><a href="#cb31-1869"></a>                                 <span class="st">&quot;f4&quot;</span>,</span>
<span id="cb31-1870"><a href="#cb31-1870"></a>                                 <span class="st">&quot;f5&quot;</span>,</span>
<span id="cb31-1871"><a href="#cb31-1871"></a>                                 <span class="st">&quot;f6&quot;</span>,</span>
<span id="cb31-1872"><a href="#cb31-1872"></a>                                 <span class="st">&quot;m1&quot;</span>,</span>
<span id="cb31-1873"><a href="#cb31-1873"></a>                                 <span class="st">&quot;m2&quot;</span>,</span>
<span id="cb31-1874"><a href="#cb31-1874"></a>                                 <span class="st">&quot;m3&quot;</span>,</span>
<span id="cb31-1875"><a href="#cb31-1875"></a>                                 <span class="st">&quot;m4&quot;</span>,</span>
<span id="cb31-1876"><a href="#cb31-1876"></a>                                 <span class="st">&quot;m5&quot;</span>,</span>
<span id="cb31-1877"><a href="#cb31-1877"></a>                                 <span class="st">&quot;m6&quot;</span>))</span>
<span id="cb31-1878"><a href="#cb31-1878"></a></span>
<span id="cb31-1879"><a href="#cb31-1879"></a><span class="co"># Lopuksi substanssimuuttutien nimet lyhyiksi</span></span>
<span id="cb31-1880"><a href="#cb31-1880"></a></span>
<span id="cb31-1881"><a href="#cb31-1881"></a>MCAdata1jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">a1 =</span> Q1am,</span>
<span id="cb31-1882"><a href="#cb31-1882"></a>                                            <span class="dt">b1 =</span> Q1bm,</span>
<span id="cb31-1883"><a href="#cb31-1883"></a>                                            <span class="dt">c1 =</span> Q1cm,</span>
<span id="cb31-1884"><a href="#cb31-1884"></a>                                            <span class="dt">d1 =</span> Q1dm,</span>
<span id="cb31-1885"><a href="#cb31-1885"></a>                                            <span class="dt">e1 =</span> Q1em,</span>
<span id="cb31-1886"><a href="#cb31-1886"></a>                                            <span class="dt">a2 =</span> Q2am,</span>
<span id="cb31-1887"><a href="#cb31-1887"></a>                                            <span class="dt">b2 =</span> Q2bm)</span>
<span id="cb31-1888"><a href="#cb31-1888"></a></span>
<span id="cb31-1889"><a href="#cb31-1889"></a></span>
<span id="cb31-1890"><a href="#cb31-1890"></a><span class="co"># TinyTeX MikTeXin tilalle, testiprojektissa toimii mutta täällä sama virheilmoitus.</span></span>
<span id="cb31-1891"><a href="#cb31-1891"></a><span class="co"># Kopioidaan taulukoinnit tähän, error=TRUE nin suoritus ei katkea virheeseen.</span></span>
<span id="cb31-1892"><a href="#cb31-1892"></a></span>
<span id="cb31-1893"><a href="#cb31-1893"></a></span>
<span id="cb31-1894"><a href="#cb31-1894"></a><span class="co">#Tarkistus</span></span>
<span id="cb31-1895"><a href="#cb31-1895"></a></span>
<span id="cb31-1896"><a href="#cb31-1896"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (a1, Q1am)</span></span>
<span id="cb31-1897"><a href="#cb31-1897"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (b1, Q1bm)</span></span>
<span id="cb31-1898"><a href="#cb31-1898"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (c1, Q1cm)</span></span>
<span id="cb31-1899"><a href="#cb31-1899"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (d1, Q1dm)</span></span>
<span id="cb31-1900"><a href="#cb31-1900"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (e1, Q1em)</span></span>
<span id="cb31-1901"><a href="#cb31-1901"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (a2, Q2am)</span></span>
<span id="cb31-1902"><a href="#cb31-1902"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX (b2, Q2bm)</span></span>
<span id="cb31-1903"><a href="#cb31-1903"></a><span class="co"># MCAdata1jh.dat %&gt;% tableX(gaf, ga)</span></span>
<span id="cb31-1904"><a href="#cb31-1904"></a></span>
<span id="cb31-1905"><a href="#cb31-1905"></a><span class="co"># Perustietoja - TÄSSÄ UUSI PDF-VIRHEILMOITUS 7.11.2020</span></span>
<span id="cb31-1906"><a href="#cb31-1906"></a><span class="co"># Ei tulosteta - kommentoidaan pois</span></span>
<span id="cb31-1907"><a href="#cb31-1907"></a></span>
<span id="cb31-1908"><a href="#cb31-1908"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,a1, type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1909"><a href="#cb31-1909"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,b1, type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1910"><a href="#cb31-1910"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,c1, type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1911"><a href="#cb31-1911"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,d1, type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1912"><a href="#cb31-1912"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,e1, type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1913"><a href="#cb31-1913"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,a2,type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1914"><a href="#cb31-1914"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX (maa,b2,type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1915"><a href="#cb31-1915"></a></span>
<span id="cb31-1916"><a href="#cb31-1916"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(gaf, ga,type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1917"><a href="#cb31-1917"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, age_cat,type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1918"><a href="#cb31-1918"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, gaf,type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1919"><a href="#cb31-1919"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, S, type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1920"><a href="#cb31-1920"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, U, type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1921"><a href="#cb31-1921"></a><span class="co">#MCAdata1jh.dat %&gt;% tableX(maa, E, type = &quot;row_perc&quot;)</span></span>
<span id="cb31-1922"><a href="#cb31-1922"></a></span>
<span id="cb31-1923"><a href="#cb31-1923"></a></span>
<span id="cb31-1924"><a href="#cb31-1924"></a><span class="co">#Puuttuvien tietojen yleiskuva</span></span>
<span id="cb31-1925"><a href="#cb31-1925"></a></span>
<span id="cb31-1926"><a href="#cb31-1926"></a><span class="co"># Puuttuvat tiedot aineistossa - viite datan dokumentointiin jossa taulukot.</span></span>
<span id="cb31-1927"><a href="#cb31-1927"></a><span class="co"># Vaihtelee maittain ja muuttujittain, paljon.</span></span>
<span id="cb31-1928"><a href="#cb31-1928"></a></span>
<span id="cb31-1929"><a href="#cb31-1929"></a><span class="co"># Koko data (G1_1_data2.Rmd - skriptissä valitut muuttujat ja 25 maata)</span></span>
<span id="cb31-1930"><a href="#cb31-1930"></a><span class="co">#</span></span>
<span id="cb31-1931"><a href="#cb31-1931"></a><span class="co">#sum(!complete.cases(ISSP2012jh1d.dat)) = 9455</span></span>
<span id="cb31-1932"><a href="#cb31-1932"></a><span class="co">#dim(ISSP2012jh1d.dat) = 32823</span></span>
<span id="cb31-1933"><a href="#cb31-1933"></a><span class="co">#9455/32823 = 0.2880602</span></span>
<span id="cb31-1934"><a href="#cb31-1934"></a></span>
<span id="cb31-1935"><a href="#cb31-1935"></a><span class="co"># Puuttuvat tiedot valitussa MCA-aineistossa</span></span>
<span id="cb31-1936"><a href="#cb31-1936"></a></span>
<span id="cb31-1937"><a href="#cb31-1937"></a><span class="co">#missingMCAvars1 &lt;-  c(&quot;Q1a&quot;,&quot;Q1b&quot;, &quot;Q1c&quot;, &quot;Q1d&quot;,&quot;Q1e&quot;,&quot;Q2a&quot;,&quot;Q2b&quot;,&quot;edu&quot;,</span></span>
<span id="cb31-1938"><a href="#cb31-1938"></a><span class="co">#                 &quot;sosta&quot;, &quot;urbru&quot;, &quot;maa&quot;, &quot;ika&quot;, &quot;sp&quot; )</span></span>
<span id="cb31-1939"><a href="#cb31-1939"></a><span class="co">#missingTestMCA1.dat &lt;- ISSP2012jh1d.dat %&gt;% select(all_of(missingMCAvars1))</span></span>
<span id="cb31-1940"><a href="#cb31-1940"></a></span>
<span id="cb31-1941"><a href="#cb31-1941"></a><span class="co">#sum(!complete.cases(missingTestMCA1.dat)) = 6101</span></span>
<span id="cb31-1942"><a href="#cb31-1942"></a><span class="co">#dim(missingTestMCA1.dat) = 32823</span></span>
<span id="cb31-1943"><a href="#cb31-1943"></a><span class="co">#6101/32823 = 0.1858758 Puuttellisten havaintojen osuus.</span></span>
<span id="cb31-1944"><a href="#cb31-1944"></a></span>
<span id="cb31-1945"><a href="#cb31-1945"></a><span class="co"># Valitaan data</span></span>
<span id="cb31-1946"><a href="#cb31-1946"></a>mcaDat11jh.dat &lt;-<span class="st"> </span>MCAdata1jh.dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(a1,b1,c1, d1, e1,a2,b2)</span>
<span id="cb31-1947"><a href="#cb31-1947"></a><span class="kw">dim</span>(mcaDat11jh.dat)</span>
<span id="cb31-1948"><a href="#cb31-1948"></a><span class="co">#glimpse(mcaDat11jh.dat)</span></span>
<span id="cb31-1949"><a href="#cb31-1949"></a></span>
<span id="cb31-1950"><a href="#cb31-1950"></a>Qmuuttujat1.mca &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb31-1951"><a href="#cb31-1951"></a><span class="co"># ps=&quot;&quot; muuttujan ja sen kategorian eroitinmerkki</span></span>
<span id="cb31-1952"><a href="#cb31-1952"></a></span>
<span id="cb31-1953"><a href="#cb31-1953"></a></span>
<span id="cb31-1954"><a href="#cb31-1954"></a><span class="kw">par</span>(<span class="dt">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb31-1955"><a href="#cb31-1955"></a><span class="kw">plot.mjca</span>(Qmuuttujat1.mca, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb31-1956"><a href="#cb31-1956"></a>          <span class="dt">main =</span> <span class="st">&quot;Kysymykset Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b&quot;</span>,</span>
<span id="cb31-1957"><a href="#cb31-1957"></a>          <span class="dt">sub =</span> <span class="st">&quot;vastaukset S-s-?-e-E-P &quot;</span></span>
<span id="cb31-1958"><a href="#cb31-1958"></a>          )</span>
<span id="cb31-1959"><a href="#cb31-1959"></a></span>
<span id="cb31-1960"><a href="#cb31-1960"></a><span class="kw">par</span>(<span class="dt">cex=</span><span class="fl">0.6</span>)</span>
<span id="cb31-1961"><a href="#cb31-1961"></a><span class="kw">plot.mjca</span>(Qmuuttujat1.mca, <span class="dt">what =</span> <span class="kw">c</span>(<span class="st">&quot;all&quot;</span>,<span class="st">&quot;all&quot;</span>),<span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>),</span>
<span id="cb31-1962"><a href="#cb31-1962"></a>          <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;red&quot;</span>),</span>
<span id="cb31-1963"><a href="#cb31-1963"></a>           <span class="dt">main =</span> <span class="st">&quot;Kysymykset Q1a, Q1b, Q1c, Q1d, Q1e, Q2a, Q2b&quot;</span>,</span>
<span id="cb31-1964"><a href="#cb31-1964"></a>          <span class="dt">sub =</span> <span class="st">&quot;vastaukset S-s-?-e-E-P, havainnot (n = 32 823) &quot;</span></span>
<span id="cb31-1965"><a href="#cb31-1965"></a>          )</span>
<span id="cb31-1966"><a href="#cb31-1966"></a></span>
<span id="cb31-1967"><a href="#cb31-1967"></a></span>
<span id="cb31-1968"><a href="#cb31-1968"></a><span class="co">#subsetcat viittaa muuttujan luokkien indeksiin</span></span>
<span id="cb31-1969"><a href="#cb31-1969"></a></span>
<span id="cb31-1970"><a href="#cb31-1970"></a>eiPvastaukset &lt;-<span class="st"> </span>(<span class="dv">1</span><span class="op">:</span><span class="dv">42</span>)[<span class="op">-</span><span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">12</span>,<span class="dv">18</span>,<span class="dv">24</span>,<span class="dv">30</span>,<span class="dv">36</span>,<span class="dv">42</span>)]</span>
<span id="cb31-1971"><a href="#cb31-1971"></a><span class="co"># eiPvastaukset</span></span>
<span id="cb31-1972"><a href="#cb31-1972"></a><span class="co">#  puuttuva tieto on kuudes kategoria kaikilla kysymyksillä</span></span>
<span id="cb31-1973"><a href="#cb31-1973"></a><span class="co"># 1  2  3  4  5  7  8  9 10 11 13 14 15 16 17 19 20 21 22 23 25 26 27 28 29 31</span></span>
<span id="cb31-1974"><a href="#cb31-1974"></a><span class="co"># 32 33 34 35 37 38 39 40 41</span></span>
<span id="cb31-1975"><a href="#cb31-1975"></a></span>
<span id="cb31-1976"><a href="#cb31-1976"></a><span class="co">#mcaDat11jh.dat[1:5,]</span></span>
<span id="cb31-1977"><a href="#cb31-1977"></a></span>
<span id="cb31-1978"><a href="#cb31-1978"></a>Qmuuttujat2.mca &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>, <span class="dt">subsetcat=</span>eiPvastaukset)</span>
<span id="cb31-1979"><a href="#cb31-1979"></a></span>
<span id="cb31-1980"><a href="#cb31-1980"></a></span>
<span id="cb31-1981"><a href="#cb31-1981"></a><span class="co">#subsetcat viittaa muuttujan luokkien indeksiin</span></span>
<span id="cb31-1982"><a href="#cb31-1982"></a></span>
<span id="cb31-1983"><a href="#cb31-1983"></a>eiPvastaukset &lt;-<span class="st"> </span>(<span class="dv">1</span><span class="op">:</span><span class="dv">42</span>)[<span class="op">-</span><span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">12</span>,<span class="dv">18</span>,<span class="dv">24</span>,<span class="dv">30</span>,<span class="dv">36</span>,<span class="dv">42</span>)]</span>
<span id="cb31-1984"><a href="#cb31-1984"></a><span class="co"># eiPvastaukset</span></span>
<span id="cb31-1985"><a href="#cb31-1985"></a><span class="co">#  puuttuva tieto on kuudes kategora kaikilla kysymyksillä</span></span>
<span id="cb31-1986"><a href="#cb31-1986"></a><span class="co"># 1  2  3  4  5  7  8  9 10 11 13 14 15 16 17 19 20 21 22 23 25 26 27 28 29 31</span></span>
<span id="cb31-1987"><a href="#cb31-1987"></a><span class="co"># 32 33 34 35 37 38 39 40 41</span></span>
<span id="cb31-1988"><a href="#cb31-1988"></a></span>
<span id="cb31-1989"><a href="#cb31-1989"></a><span class="co"># mcaDat11jh.dat[1:5,]</span></span>
<span id="cb31-1990"><a href="#cb31-1990"></a></span>
<span id="cb31-1991"><a href="#cb31-1991"></a>Qmuuttujat2.mca &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>, <span class="dt">subsetcat=</span>eiPvastaukset)</span>
<span id="cb31-1992"><a href="#cb31-1992"></a></span>
<span id="cb31-1993"><a href="#cb31-1993"></a><span class="kw">plot.mjca</span>(Qmuuttujat2.mca,</span>
<span id="cb31-1994"><a href="#cb31-1994"></a>          <span class="dt">main=</span><span class="st">&quot;Seitsemän kysymystä, viisi vastausvaihtoehtoa&quot;</span>,</span>
<span id="cb31-1995"><a href="#cb31-1995"></a>          <span class="dt">sub =</span> <span class="st">&quot;subset: ei puuttuvien vastausten kategorioita(*P)&quot;</span>)</span>
<span id="cb31-1996"><a href="#cb31-1996"></a><span class="kw">plot.mjca</span>(Qmuuttujat2.mca,</span>
<span id="cb31-1997"><a href="#cb31-1997"></a>          <span class="dt">what =</span> <span class="kw">c</span>(<span class="st">&quot;all&quot;</span>,<span class="st">&quot;all&quot;</span>),<span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>),</span>
<span id="cb31-1998"><a href="#cb31-1998"></a>          <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;red&quot;</span>),</span>
<span id="cb31-1999"><a href="#cb31-1999"></a>          <span class="dt">main=</span><span class="st">&quot;Seitsemän kysymystä, viisi vastausvaihtoehtoa&quot;</span>,</span>
<span id="cb31-2000"><a href="#cb31-2000"></a>          <span class="dt">sub =</span> <span class="st">&quot;subset: ei puuttuvien vastausten kategoriaa (*P)&quot;</span>)</span>
<span id="cb31-2001"><a href="#cb31-2001"></a></span>
<span id="cb31-2002"><a href="#cb31-2002"></a></span>
<span id="cb31-2003"><a href="#cb31-2003"></a><span class="kw">plot.mjca</span>(Qmuuttujat2.mca, <span class="dt">map =</span> <span class="st">&quot;rowprincipal&quot;</span>,</span>
<span id="cb31-2004"><a href="#cb31-2004"></a>          <span class="dt">what =</span> <span class="kw">c</span>(<span class="st">&quot;all&quot;</span>,<span class="st">&quot;all&quot;</span>),<span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>),</span>
<span id="cb31-2005"><a href="#cb31-2005"></a>          <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;red&quot;</span>),</span>
<span id="cb31-2006"><a href="#cb31-2006"></a>          <span class="dt">main=</span><span class="st">&quot;Seitsemän kysymystä, viisi vastausvaihtoehtoa - asymmetrinen kartta&quot;</span>,</span>
<span id="cb31-2007"><a href="#cb31-2007"></a>          <span class="dt">sub =</span> <span class="st">&quot;subset: ei puuttuvien vastausten kategoriaa (*P)&quot;</span>)</span>
<span id="cb31-2008"><a href="#cb31-2008"></a></span>
<span id="cb31-2009"><a href="#cb31-2009"></a></span>
<span id="cb31-2010"><a href="#cb31-2010"></a><span class="kw">summary</span>(Qmuuttujat2.mca)</span>
<span id="cb31-2011"><a href="#cb31-2011"></a><span class="kw">summary</span>(Qmuuttujat2.mca)</span>
<span id="cb31-2012"><a href="#cb31-2012"></a></span>
<span id="cb31-2013"><a href="#cb31-2013"></a></span>
<span id="cb31-2014"><a href="#cb31-2014"></a>Qmuuttujat2d3  &lt;-<span class="st"> </span><span class="kw">mjca</span>(mcaDat11jh.dat, <span class="dt">ps=</span><span class="st">&quot;&quot;</span>, <span class="dt">nd =</span> <span class="dv">3</span>,<span class="dt">subsetcat=</span>eiPvastaukset)</span>
<span id="cb31-2015"><a href="#cb31-2015"></a><span class="kw">summary</span>(Qmuuttujat2d3)</span>
<span id="cb31-2016"><a href="#cb31-2016"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/CAquality.png&#39;</span>)</span>
<span id="cb31-2017"><a href="#cb31-2017"></a></span>
<span id="cb31-2018"><a href="#cb31-2018"></a></span>
<span id="cb31-2019"><a href="#cb31-2019"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/substvar_fi_Q1Q2.png&#39;</span>)</span>
<span id="cb31-2020"><a href="#cb31-2020"></a>knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&#39;img/BookdownProc.png&#39;</span>)</span>
<span id="cb31-2021"><a href="#cb31-2021"></a></span>
<span id="cb31-2022"><a href="#cb31-2022"></a><span class="co"># pois out.width=&#39;50%&#39;,</span></span>
<span id="cb31-2023"><a href="#cb31-2023"></a></span>
<span id="cb31-2024"><a href="#cb31-2024"></a><span class="co">#Testataan koodilohkojen listausta, näyttää toimivan mutta vaatii vielä säätämistä.</span></span>
<span id="cb31-2025"><a href="#cb31-2025"></a><span class="co">#Ohje löytyi [Yihui Xienin blogista](https://yihui.name/en/2018/09/code-appendix/)</span></span>
<span id="cb31-2026"><a href="#cb31-2026"></a><span class="co">#(luettu 26.10.2018).</span></span></code></pre></div>

</div>
</div>
<div id="lähteet" class="section level1 unnumbered">
<h1>Lähteet</h1>

<div id="refs" class="references">
<div id="ref-RefWorks:doc:5b6c7b0de4b0fd36f5bb4c2a">
<p>(2016), ISSP Research Group. 2016. ”International Social Survey Programme: Family and Changing Gender Roles IV - ISSP 2012”. <a href="https://doi.org/10.4232/1.12661">https://doi.org/10.4232/1.12661</a>.</p>
</div>
<div id="ref-RefWorks:doc:5b15542ee4b0e2616bc42dca">
<p>Blasius, Jörg, ja Victor Thiessen. 2006. ”Assessing Data Quality and Construct Comparability in Cross-National Surveys”. <em>European Sociological Review</em> 22 (3): 229–42. <a href="http://www.jstor.org/stable/3806519">http://www.jstor.org/stable/3806519</a>.</p>
</div>
<div id="ref-RefWorks:doc:5c223412e4b0508a6674dec0">
<p>Bond, Timothy N., ja Kevin Lang. 2018. ”The Sad Truth About Happiness Scales”. <em>Journal of Political Economy</em> 127 (4): 1629–40. <a href="https://doi.org/10.1086/701679">https://doi.org/10.1086/701679</a>.</p>
</div>
<div id="ref-RefWorks:doc:5bd0a663e4b0c91dcf7c4be9">
<p>Ferragina, Emanuele, ja Martin Seeleib-Kaiser. 2015. ”Determinants of a Silent (R)evolution: Understanding the Expansion of Family Policy in Rich OECD Countries”. <em>Social Politics: International Studies in Gender, State and Society</em> 22 (1): 1–37. <a href="https://doi.org/10.1093/sp/jxu027">https://doi.org/10.1093/sp/jxu027</a>.</p>
</div>
<div id="ref-RefWorks:doc:5c053d69e4b0191a580d6451">
<p>Gendall, Phil, ja Martin von Randow. 2016. ”International Social Survey Programme , ISSP 2012 - Family &amp; Changing Gender Roles IV, Study Monitoring Report&lt;br&gt;”. <a href="https://dbk.gesis.org/dbksearch/sdesc2.asp?no=5900&amp;db=e&amp;doi=10.4232/1.12661">https://dbk.gesis.org/dbksearch/sdesc2.asp?no=5900&amp;db=e&amp;doi=10.4232/1.12661</a>.</p>
</div>
<div id="ref-RefWorks:doc:5bb9041be4b06677e5e61f83">
<p>GESIS. 2016. ”ISSP 2012 - Family and Changing Gender Roles IV, Variable Report”. GESIS. <a href="https://doi.org/10.4232/1.12661">https://doi.org/10.4232/1.12661</a>.</p>
</div>
<div id="ref-RefWorks:doc:5b6f159ce4b0bc0f31734b76">
<p>Greenacre, Michael. 2003. ”Singular value decomposition of matched matrices”. <em>Journal of Applied Statistics</em> 30 (10): 1101–13. <a href="https://doi.org/10.1080/0266476032000107132">https://doi.org/10.1080/0266476032000107132</a>.</p>
</div>
<div id="ref-RefWorks:doc:5c768b09e4b02df9431e950a">
<p>———. 2006. ”Tying up the loose ends in simple, multiple, joint correspondence analysis”. Teoksessa <em>Compstat 2006 - Proceedings in Computational Statistics</em>, toimittanut Alfredo Rizzi ja Maurizio Vichi, 163–85. Heidelberg: Physica-Verlag HD.</p>
</div>
<div id="ref-RefWorks:doc:5b6ef091e4b0984fd9b8c0ca">
<p>———. 2017. ”Multiple Correspondence Analysis (MCA): Theory and Practice, spring 2017 (University of Helsinki )”. <a href="https://moodle.helsinki.fi/course/search.php?search=correspondence+analysis">https://moodle.helsinki.fi/course/search.php?search=correspondence+analysis</a>.</p>
</div>
<div id="ref-RefWorks:doc:5ab76b43e4b003f4468d1f07">
<p>Greenacre, Michael, ja Jörg Blasius. 2006. <em>Multiple correspondence analysis and related methods</em>. Boca Raton (FL): Chapman &amp; Hall/CRC. <a href="https://helka.finna.fi/Record/helka.2018050">https://helka.finna.fi/Record/helka.2018050</a>.</p>
</div>
<div id="ref-RefWorks:doc:5a857a44e4b0ed2d44664d84">
<p>Greenacre, Michael, ja Trevor Hastie. 1987. ”The Geometric Interpretation of Correspondence Analysis”. <em>Journal of the American Statistical Association</em> 82 (398): 437–47. <a href="https://doi.org/10.1080/01621459.1987.10478446">https://doi.org/10.1080/01621459.1987.10478446</a>.</p>
</div>
<div id="ref-RefWorks:doc:5a857a43e4b0ed2d44664d7c">
<p>Greenacre, Michael J. 2010. <em>Biplots in Practice</em>. Bilbao, Spain: Fundacion BBVA. <a href="https://www.fbbva.es/microsite/multivariate-statistics/biplots.html">https://www.fbbva.es/microsite/multivariate-statistics/biplots.html</a>.</p>
</div>
<div id="ref-RefWorks:doc:5a857a43e4b0ed2d44664d78">
<p>———. 2017. <em>Correspondence analysis in practice</em>. Third edition. Boca Raton, Florida: CRC Press. <a href="https://helka.finna.fi/Record/helka.3029760">https://helka.finna.fi/Record/helka.3029760</a>.</p>
</div>
<div id="ref-RefWorks:doc:5a857a44e4b0ed2d44664d87">
<p>Greenacre, Michael, ja Rafael Pardo. 2006. ”Subset Correspondence Analysis: Visualizing Relationships Among a Selected Set of Response Categories From a Questionnaire Survey”. <em>Sociological Methods &amp; Research</em> 35 (2): 193–218. <a href="https://doi.org/10.1177/0049124106290316">https://doi.org/10.1177/0049124106290316</a>.</p>
</div>
<div id="ref-RefWorks:doc:5b6c7f6ce4b0e4e15164ab1a">
<p>ISSP. 2016. ”ZA5900: International Social Survey Programme: Family and Changing Gender Roles IV - ISSP 2012 - data ja dokumentaatio (selattava versio)&lt;br&gt;”. <a href="https://zacat.gesis.org/webview/index.jsp?object=http://zacat.gesis.org/obj/fStudy/ZA5900">https://zacat.gesis.org/webview/index.jsp?object=http://zacat.gesis.org/obj/fStudy/ZA5900</a>.</p>
</div>
<div id="ref-RefWorks:doc:5bb9044fe4b0dfeb95352229">
<p>”ISSP 2012 - Family and Changing Gender Roles IV Basic Questinnaire&lt;br&gt;”. 2011. <a href="https://dbk.gesis.org/dbksearch/sdesc2.asp?no=5900&amp;db=e&amp;doi=10.4232/1.12661">https://dbk.gesis.org/dbksearch/sdesc2.asp?no=5900&amp;db=e&amp;doi=10.4232/1.12661</a>.</p>
</div>
<div id="ref-RefWorks:doc:5faaf996e4b05416e98ff547">
<p>Leeuw, Jan de, Patrick Mair, ja Patric Groenen. 2016. ”Multivariate Analysis with Optimal Scaling”. <a href="https://bookdown.org/jandeleeuw6/gifi/">https://bookdown.org/jandeleeuw6/gifi/</a>.</p>
</div>
<div id="ref-RefWorks:doc:5c3759c2e4b0085b307c82b5">
<p>McNamara, Amelia, ja Nicholas J. Horton. 2018. ”Wrangling Categorical Data in R”. <em>The American Statistician</em> 72 (1): 97–104. <a href="https://doi.org/10.1080/00031305.2017.1356375">https://doi.org/10.1080/00031305.2017.1356375</a>.</p>
</div>
<div id="ref-RefWorks:doc:5a857a43e4b0ed2d44664d75">
<p>Roux, Brigitte Le, ja Henry Rouanet. 2004. <em>Geometric data analysis: from correspondence analysis to structured data analysis</em>. Dordrecht: Kluwer Academic Publishers.</p>
</div>
<div id="ref-RefWorks:doc:5f9439fde4b04741789a2187">
<p>Scholz, Evi, Regina Jutz, Jonas Edlund, Ida Öun, ja Michael Braun. 2014. ”ISSP 2012 Family and Changing Gender Roles IV: Questionnaire Development”. <a href="https://explore.openaire.eu/search/publication?articleId=od______1272::0a6c70387bf644137af3cb2bc69b0df6">https://explore.openaire.eu/search/publication?articleId=od______1272::0a6c70387bf644137af3cb2bc69b0df6</a>.</p>
</div>
<div id="ref-RefWorks:doc:5c0543a5e4b077eba1dc3cd8">
<p>Smith, Tom W. 2015. ”International Social Survey Programme”. <em>International Encyclopedia of the Social &amp; Behavioral Sciences (Second Edition)</em>. <a href="https://doi.org///doi-org.libproxy.helsinki.fi/10.1016/B978-0-08-097086-8.44080-8">https://doi.org///doi-org.libproxy.helsinki.fi/10.1016/B978-0-08-097086-8.44080-8</a>.</p>
</div>
<div id="ref-RefWorks:doc:5bb90a0ae4b018435936a488">
<p>Tilastokeskus. 2012. ”ISSP 2012 - Family and Changing Gender Roles IV Questionnaire (Finnish)”. Tilastokeskus. <a href="https://zacat.gesis.org/webview/index.jsp?object=http://zacat.gesis.org/obj/fStudy/ZA5900">https://zacat.gesis.org/webview/index.jsp?object=http://zacat.gesis.org/obj/fStudy/ZA5900</a>.</p>
</div>
<div id="ref-RefWorks:doc:5bd08fb6e4b05c5447c9a9f9">
<p>Walter, Jessica. 2018. ”The adequacy of measures of gender roles attitudes: a review of current measures in omnibus surveys”. <em>Quality &amp; Quantity</em> 52 (2): 829–48. <a href="https://doi.org/10.1007/s11135-017-0491-x">https://doi.org/10.1007/s11135-017-0491-x</a>.</p>
</div>
<div id="ref-RefWorks:doc:5b6b36dde4b09b7ec442bf8b">
<p>Xie, Yihui. 2016. <em>bookdown: Authoring Books and Technical Documents with R Markdown</em>. Chapman; Hall/CRC. <a href="https://bookdown.org/yihui/bookdown/">https://bookdown.org/yihui/bookdown/</a>.</p>
</div>
<div id="ref-R-bookdown">
<p>———. 2020. <em>bookdown: Authoring Books and Technical Documents with R Markdown</em>. <a href="https://github.com/rstudio/bookdown">https://github.com/rstudio/bookdown</a>.</p>
</div>
<div id="ref-RefWorks:doc:5b6b346fe4b0c619b11b8a3e">
<p>Yihui Xie, Garrett Grolemund, J. J. Allaire. 2018. <em>R Markdown: The Definitive Guide</em>. Chapman; Hall/CRC. <a href="https://bookdown.org/yihui/rmarkdown/">https://bookdown.org/yihui/rmarkdown/</a>.</p>
</div>
</div>
</div>
<p style="text-align: center;">
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
