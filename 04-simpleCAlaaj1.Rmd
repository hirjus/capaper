# Yksinkertaisen korrespondenssianalyysin laajennuksia 1 - täydentävät pisteet

**edit** Edellisssä luvussa selitetty barysentrinen keskiarvopiste;
 teorialiitteessä hieman laveammin.

 **edit** CA:n joustava käyttö vaatii matriisioperaatioita, ja muuta datan rakenteen
 muokkausta (rivien lisääminen input-dataan jne.).
 

## Täydentävät pisteet (supplementary points)

Tekstistä oma dokkari, eri käyttötapaukset lyhyesti. Edellisen luvun asymmetrisen
kartan avulla perustellaan, miten pisteitä voidaaan lisätä.

## Saksan ja Belgian alueet

**Data ja taulukko aluejaosta**

```{r BeDeAluedat1, echo = FALSE, include=FALSE}
# Belgian ja Saksan aluejako maa3-muuttujassa
# str(ISSP2012esim1.dat$maa3)
# attributes(ISSP2012esim1.dat$maa3)

suppoint1_df1 <- select(ISSP2012esim1.dat, maa3,Q1b)

# Taulukoksi jotta saadaan lisättyä Saksan ja Belgian maa-profiilit täydentäviksi
# pisteiksi.

suppoint1_tab1 <- table(suppoint1_df1$maa3, suppoint1_df1$Q1b)

# Maaprofiilit
suppoint2_df <- filter(ISSP2012esim1.dat, (maa == "BE" | maa == "DE"))
suppoint2_df <- select(suppoint2_df, maa, Q1b)

#glimpse(suppoint2_df)
suppoint2_tab1 <- table(suppoint2_df$maa, suppoint2_df$Q1b)
suppoint2_tab1 # tarkistus 1
# Huom! tämä komento vain kerran - tai koko Rmd-tiedosto uudestaan (17.10.20)
suppoint2_tab1 <- suppoint2_tab1[-c(2,4:6) ,]
#suppoint2_tab1 # tarkistus 2

# lisätään rivit maa3-muuttujan taulukkoon
suppoint1_tab1 <- rbind(suppoint1_tab1, suppoint2_tab1)
#suppoint1_tab1 # tarkistus 3

```

Taulukko, Saksan ja Belgian alueet ja maaprofiilit.
```{r BeDealueTable1, echo=FALSE}
## riviprofiilitaulukko joteskin (18.9.20)
BeDealueTable <- ISSP2012esim1.dat %>% tableX(maa3, Q1b, type = "row_perc")

knitr::kable(BeDealueTable, digits = 2, booktabs = TRUE,
             caption = "Q1b vastaukset, Saksan ja Belgian alueet")
```

**edit** Riviprofiilitaulukko, kuvataan alueiden eroja. CA-analyysi kuitenkin koko
aineiston frekfvenssitaululla, jossa rivien massat eivät ole samat.
```{r BeDealueetCA2, echo=FALSE, include=FALSE}
suppointCA2 <- ca(suppoint1_tab1[,1:5], suprow = 10:11)

```


### Symmetrinen kartta

```{r suppointCA2map1, echo=FALSE, fig.cap= "Q1b: Saksan ja  Belgian aluejako ",fig.asp = 1, out.width = "90%",fig.align = "center"}
# par(cex = 0.6)
plot(suppointCA2, main = "Symmetrinen kartta 1 ",
     # mass = c(TRUE, TRUE),
     # contrib = c(TRUE, TRUE),
     sub = "Täydentävät pisteet DE ja BE" )
```

**k** Maaåpisteet alueiden barysentrinen keskiarvo. Tulkinta.



```{r suppointCA2map2, echo=FALSE, fig.cap= "Q1b: Saksan ja  Belgian aluejako ",fig.asp = 1, out.width = "90%",fig.align = "center"}

plot(suppointCA2, main = "kontribuutiokartta ",
        map = "rowgreen",
        arrows = c(FALSE, TRUE),
        mass = c(TRUE, FALSE),
        contrib = c("absolute","absolute"),
        sub = "Täydentävät pisteet DE ja BE" )

```


**k** Kontribuutiokartta, kontribuutio värisävyinä ja massat pisteiden kokona.
Yleiskuvaan riittävä, ei kovin selkeä yksityiskohdissa. Motivaatio seuraavalle
jaksolle.

**k** Kaukana on kaukana, mutta lähellä voi olla myös kaukana.

## CA:n numeeriset tulokset

**edit** Teorialiitteessä selitetään tarkemmin numeeristen tulosten tausta, tässä
apuneuvo (a) kuvan tulkinnan varmistamiseen ja (b) approksimaation laadun
 tarkistamiseen.

 ### kontribuutiokartta**

 **k** Kartan tarkoitus lyhetää skaalaamalla asymm. kuvan sarakevektoreita

 ### esimerkki 3d- kartasta - Saksan ja Belgian dimensiot

 **k** Ei kovin hyviä kuvia, mutta periaate on tärkeä. Kartta on approksimaatio,
 pitää päättää milloin se on tarpeeksi hyvä. Tai mille pisteille hyvä, mille huonompi.

 
